{
  "version": 3,
  "sources": ["../src/css/index.js", "../node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/util/js/getType.js", "../node_modules/@webqit/util/js/internals.js", "../node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/util/js/isClass.js", "../node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/util/arr/first.js", "../node_modules/@webqit/util/arr/last.js", "../node_modules/@webqit/util/arr/pushUnique.js", "../node_modules/@webqit/util/obj/getPrototypeChain.js", "../node_modules/@webqit/util/obj/getAllPropertyNames.js", "../node_modules/@webqit/util/obj/mergeCallback.js", "../node_modules/@webqit/util/obj/each.js", "../node_modules/@webqit/util/obj/merge.js", "../node_modules/@webqit/util/str/before.js", "../node_modules/@webqit/util/str/beforeLast.js", "../node_modules/@webqit/util/str/fromCamel.js", "../node_modules/@webqit/util/str/toTitle.js", "../node_modules/@webqit/util/str/toCamel.js", "../node_modules/@webqit/util/obj/copy.js", "../node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/util/obj/find.js", "../node_modules/@webqit/util/obj/from.js", "../node_modules/@webqit/util/obj/get.js", "../node_modules/@webqit/util/obj/set.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/browser-pie/src/vendor.js", "../node_modules/@webqit/browser-pie/src/index.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/browser-pie/src/dom/Reflow.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/browser-pie/src/dom/ready.js", "../node_modules/@webqit/browser-pie/src/dom/Mutations.js", "../node_modules/@webqit/browser-pie/src/dom/polyfills.js", "../node_modules/@webqit/browser-pie/src/dom/query.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/obj/get.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/obj/set.js", "../node_modules/@webqit/browser-pie/node_modules/@webqit/util/obj/del.js", "../node_modules/@webqit/browser-pie/src/dom/meta.js", "../node_modules/@webqit/browser-pie/src/dom/index.js", "../src/util.js", "../node_modules/@webqit/util/arr/any.js", "../node_modules/@webqit/util/arr/following.js", "../node_modules/@webqit/util/arr/remove.js", "../node_modules/@webqit/util/arr/exclude.js", "../node_modules/@webqit/util/arr/intersect.js", "../node_modules/@webqit/util/arr/mid.js", "../node_modules/@webqit/util/arr/unique.js", "../src/css/global-css.js", "../src/css/classes/TransformRule.js", "../src/css/classes/QuadRule.js", "../src/css/classes/CSSValue.js", "../src/css/classes/CSSRule.js", "../src/css/classes/CSSOM.js", "../src/css/cssSync.js", "../src/css/cssAsync.js", "../src/misc/classes/Transaction.js", "../src/css/cssTransaction.js", "../src/css/classes/index.js", "../src/dom/index.js", "../src/dom/appendSync.js", "../src/dom/appendAsync.js", "../src/dom/appendToSync.js", "../src/dom/appendToAsync.js", "../src/dom/attrSync.js", "../src/dom/attrAsync.js", "../src/dom/classSync.js", "../src/dom/classAsync.js", "../src/dom/getTextNodes.js", "../src/dom/htmlSync.js", "../src/dom/htmlAsync.js", "../src/dom/prependSync.js", "../src/dom/prependAsync.js", "../src/dom/prependToSync.js", "../src/dom/prependToAsync.js", "../src/data/list.js", "../src/dom/itemize.js", "../src/dom/textSync.js", "../src/dom/textAsync.js", "../src/data/index.js", "../src/data/data.js", "../src/data/form.js", "../src/misc/index.js", "../src/misc/transaction.js", "../src/misc/classes/index.js", "../src/ui/index.js", "../src/ui/interaction/CustomEvents.js", "../src/ui/interaction/getFirebase.js", "../src/ui/interaction/Firebase.js", "../src/ui/interaction/Fireable.js", "../src/ui/interaction/Listener.js", "../src/ui/interaction/Event.js", "../src/ui/interaction/Listeners.js", "../src/ui/interaction/getListeners.js", "../src/ui/interaction/off.js", "../src/ui/interaction/on.js", "../src/ui/animation/AnimationAPI.js", "../src/ui/animation/Animation.js", "../src/ui/animation/Animation2.js", "../src/ui/animation/play.js", "../src/ui/vector/Proximity.js", "../src/ui/vector/Angle.js", "../src/ui/vector/UIRect.js", "../src/ui/vector/rect.js", "../src/ui/interaction/trigger.js", "../src/index.js", "../src/browser-entry.js"],
  "sourcesContent": ["/**\r\n * @imports\r\n */\r\nimport cssAsync from './cssAsync.js';\r\nimport cssSync from './cssSync.js';\r\nimport cssTransaction from './cssTransaction.js';\r\nimport * as classes from './classes/index.js';\r\nimport { readKeyframes, readVar, vendorize } from './global-css.js';\r\n\r\n/**\r\n * @utils\r\n */\r\nconst utils = {\r\n    readKeyframes,\r\n    readVar,\r\n    vendorize,\r\n};\r\n\r\n/**\r\n * @exports\r\n */\r\nexport {\r\n    cssAsync,\r\n    cssSync,\r\n    cssTransaction,\r\n    classes,\r\n    utils,\r\n}", "\n/**\n * Tells if val is pure object.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\n};\n", "\n/**\n * Returns the val's type.\n *\n * @param string \tval\n *\n * @return string\n */\nexport default function(val) {\n\treturn typeof val;\n};\n", "\n/**\n * Creates and/or returns an \"internals\" object for the given object.\n * \n * @param Any obj\n * @param String namespace\n * \n * @return Object\n */\nexport default function internals(obj, ...namespaces) {\n    if (!globalThis.WebQitInternalsRegistry) {\n        globalThis.WebQitInternalsRegistry = new Map;\n    }\n    var itnls = globalThis.WebQitInternalsRegistry.get(obj);\n    if (!itnls) {\n        itnls = new Map;\n        if (namespaces[0] === false) {\n            // FALSE means: Return orphan Map if not exists\n            return itnls;\n        }\n        globalThis.WebQitInternalsRegistry.set(obj, itnls);\n    }\n    var _ns, _itnls;\n    while ((_ns = namespaces.shift())) {\n        if ((_itnls = itnls) && !(itnls = itnls.get(_ns))) {\n            itnls = new Map;\n            if (namespaces[0] === false) {\n                // FALSE means: Return orphan Map if not exists\n                return itnls;\n            }\n            _itnls.set(_ns, itnls);\n        }\n    }\n    return itnls;\n}", "\n/**\n * Tells if val is of type \"array\".\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val);\n};\n", "\n/**\n * Tells if val is of type \"function\".\n * This holds true for both regular functions and classes.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn typeof val === 'function';\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"class\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) && /^class\\s?/.test(Function.prototype.toString.call(val));\n};\n", "\n/**\n * Tells if val is undefined or is null.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === null || val === '';\n};\n", "\n/**\n * Tells if val is undefined or is of type \"undefined\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"object\".\n * This holds true for anything object, including built-ins.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\n};\n", "\n/**\n * @imports\n */\nimport _isNull from './isNull.js';\nimport _isUndefined from './isUndefined.js';\nimport _isTypeObject from './isTypeObject.js';\n\n/**\n * Tells if val is empty in its own type.\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\n * objects without keys, empty arrays.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"function\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\n};\n", "\n/**\n * Tells if val is of type \"number\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof Number || (typeof val === 'number');\n};\n", "\n/**\n * @imports\n */\nimport _isNumber from './isNumber.js';\n/**\n * Tells if val is of type \"string\" or a numeric string.\n * This holds true for both numbers and numeric strings.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\n};\n", "\n/**\n * Tells if val is of type \"string\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\n};\n", "\n/**\n * @imports\n */\nimport _isString from './isString.js';\nimport _isUndefined from './isUndefined.js';\n\n/**\n * Tells if val is \"array-like\".\n * This holds true for anything that has a length property.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !_isString(val) && !_isUndefined(val.length);\n};\n", "\n/**\n * Returns THE FIRST ENTRY OR A NUMBER OF ENTRIES counting forward from the begining.\n *\n * @param array \tarr\n * @param int\t \tamount\n *\n * @return mixed|array\n */\nexport default function(arr, amount = 1) {\n\tvar count = 0;\n\tarr.forEach(itm => {\n\t\tcount ++;\n\t});\n\tvar firsts = arr.slice(arr.length - count, amount);\n\treturn arguments.length > 1 ? firsts : firsts[0];\n};\n", "\n/**\n * @imports\n */\nimport _first from './first.js';\n\n/**\n * Returns THE LAST ENTRY OR A NUMBER OF ENTRIES counting forward to the end.\n *\n * @param array \tarr\n * @param int\t \tamount\n *\n * @return mixed|array\n */\nexport default function(arr, amount = 1) {\n\treturn arguments.length > 1\n\t\t? _first(arr.slice().reverse(), amount).reverse()\n\t\t: _first(arr.slice().reverse());\n};\n", "\n/**\n * Adds an item if not already exist.\n *\n * @param array \tarr\n * @param array\t \t...itms\n *\n * @return array\n */\nexport default function(arr, ...items) {\n\titems.forEach(itm => {\n\t\tif (arr.indexOf(itm) < 0) {\n\t\t\tarr.push(itm);\n\t\t}\n\t});\n\treturn arr;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the prototype chain.\n *\n * @param object \t\tobj\n * @param object\t \tuntil\n *\n * @return bool\n */\nexport default function(obj, until) {\n\tuntil = until || Object.prototype;\n\tuntil = until && !_isArray(until) ? [until] : until;\n\t// We get the chain of inheritance\n\tvar prototypalChain = [];\n\tvar obj = obj;\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\n\t\tprototypalChain.push(obj);\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\n\t}\n\treturn prototypalChain;\n};\n", "\n/**\n * @imports\n */\nimport _pushUnique from '../arr/pushUnique.js';\nimport _getPrototypeChain from './getPrototypeChain.js';\n\n/**\n * Eagerly retrieves object members all down the prototype chain.\n *\n * @param object\t \tobj\n * @param object\t \tuntil\n *\n * @return array\n */\nexport default function(obj, until) {\n\tvar keysAll = [];\n\t_getPrototypeChain(obj, until).forEach(obj => {\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\n\t});\n\treturn keysAll;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isObject from '../js/isObject.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _getAllPropertyNames from './getAllPropertyNames.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = false) {\n\tvar depth = 0;\n\tvar obj1 = objs.shift();\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\n\t\tdepth = obj1;\n\t\tobj1 = objs.shift();\n\t}\n\tif (!objs.length) {\n\t\tthrow new Error('_merge() requires two or more array/objects.');\n\t}\n\tobjs.forEach((obj2, i) => {\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\n\t\t\treturn;\n\t\t}\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.getOwnPropertyNames(obj2)).forEach(key => {\n\t\t\tif (!callback(key, obj1, obj2, i)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar valAtObj1 = obj1[key];\n\t\t\tvar valAtObj2 = obj2[key];\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \n\t\t\t&& (depth === true || depth > 0)) {\n\t\t\t\t// RECURSE...\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\n\t\t\t} else {\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\n\t\t\t\t\tif (isReplace) {\n\t\t\t\t\t\tobj1[key] = valAtObj2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj1.push(valAtObj2);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// In case we're setting a read-only property\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (withSymbols) {\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\treturn obj1;\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\n\n/**\n * Loops thru obj flatly with a callback function.\n * Stops when callback returns a non-undefined value.\n *\n * @param array|object \t\t\tobj \t\t\tThe array or object to iterate.\n * @param function \t\t\t\tcallback \t\tThe callback function.\n *\n * @return mixed|null\t\t\tAny non-null return from callback\n */\nexport default function(obj, callback) {\n\tvar returnValue = undefined;\n\tif (_isTypeObject(obj)) {\n\t\tObject.keys(obj).forEach((k, i) => {\n\t\t\tif (returnValue !== false) {\n\t\t\t\treturnValue = callback(_isNumeric(k) ? parseFloat(k) : k, obj[k], i);\n\t\t\t}\n\t\t});\n\t}\n\treturn returnValue;\n};\n", "\n/**\n * @imports\n */\nimport _mergeCallback from './mergeCallback.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function(...objs) {\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\n\t\treturn true;\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\n};\n", "\n/**\n * Return the part of a string before a given value.\n *\n * @param  string  subject\n * @param  string  search\n * @param  bool\t   beforeLast\n *\n * @return string\n */\nexport default function(subject, search, beforeLast = false) {\n\tif (search == '') {\n\t\treturn subject;\n\t}\n\tvar pos = beforeLast ? subject.lastIndexOf(search) : subject.indexOf(search);\n\tif (pos === -1) {\n\t\treturn subject;\n\t}\n\treturn subject.substr(0, pos);\n};\n", "\n/**\n * @imports\n */\nimport _before from './before.js';\n\n/**\n * Return the part of a string before last occurence of a given value.\n *\n * @param  string  subject\n * @param  string  search\n *\n * @return string\n */\nexport default function(subject, search) {\n\treturn _before(subject, search, true);\n};\n", "\n/**\n * Splits a camel-cased string.\n *\n * @param string \tstr\n * @param string \tdelimiter\n *\n * @return string\n */\nexport default function(str, delimiter) {\n\treturn str === undefined ? '' : str.split(/(?=[A-Z])/).join(delimiter ? delimiter : ' '); // positive lookahead to keep the capital letters\n};\n", "\n/**\n * Converts a string to title case.\n *\n * @param string \tstr\n * @param bool \t\tstrict\n *\n * @return string\n */\nexport default function(str, strict) {\n\tif (typeof str !== 'string') {\n\t\treturn str;\n\t}\n\treturn str.replace(/\\w\\S*/g,  function(txt) { return txt.charAt(0).toUpperCase() + ((typeof strict !== undefined && strict) ? txt.substr(1).toLowerCase() : txt.substr(1)); })\n};\n", "\n/**\n * @imports\n */\nimport _toTitle from './toTitle.js';\n\n/**\n * Makes a string camel-cased.\n *\n * @param string \tstr\n * @param bool\t \tfromStart\n *\n * @return string\n */\nexport default function(str, fromStart) {\n\t// Make disting words\n\tstr = _toTitle(str.replace(/-/g, ' ')).replace(/ /g, '');\n\treturn fromStart ? str : str[0].toLowerCase() + str.substr(1);\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _mergeCallback from './mergeCallback.js';\n\n/**\n * Copies an object.\n *\n * @param object\t \tobj\n * @param array\t\t \tfilter\n *\n * @return object\n */\nexport default function(obj, filter = [], withSymbols = true) {\n\tvar depth = 0;\n\tif (_isNumeric(arguments[0]) && _isTypeObject(arguments[1])) {\n\t\tdepth = arguments[0];\n\t\tobj = arguments[1];\n\t\tfilter = arguments[2] || [];\n\t}\n\treturn _mergeCallback([depth, {}, obj], (key, obj1, obj2) => {\n\t\treturn _isFunction(filter) ? filter(key) \n\t\t\t: (_isArray(filter) && filter.length ? filter.indexOf(key) > -1 : true);\n\t}, false/*deepProps*/, false/*isReplace*/, withSymbols);\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isTypeArray from '../js/isTypeArray.js';\nimport _isEmpty from '../js/isEmpty.js';\nimport _isObject from '../js/isObject.js';\n\n/**\n * Casts an array-like object to an array.\n *\n * @param mixed \tval\n * @param bool\t \tcastObject\n *\n * @return array\n */\nexport default function(val, castObject = true) {\n\tif (_isArray(val)) {\n\t\treturn val;\n\t};\n\tif (!castObject && _isObject(val)) {\n\t\treturn [val];\n\t};\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\n\t\treturn [];\n\t};\n\tif (_isTypeArray(val)) {\n\t\treturn Array.prototype.slice.call(val);\n\t};\n\tif (_isObject(val)) {\n\t\treturn Object.values(val);\n\t};\n\treturn [val];\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _arrFrom from '../arr/from.js';\n\n/**\n * Finds a value in an array/object and returns the key (or path when found deep).\n *\n * @param array}object \tobj\n * @param function\t\tcallback\n * @param bool\t\t\tdeep\n *\n * @return number|string|array\n */\nconst _find = function(obj, callback, deep = false) {\n\tvar keys = null;\n\tvar values = obj;\n\tif (!_isArray(obj)) {\n\t\tkeys = Object.keys(obj);\n\t\tvalues = Object.values(obj);\n\t}\n\tvar subKey = undefined;\n\tvar value = values.reduce((prev, curr) => {\n\t\tif (subKey === undefined) {\n\t\t\tif (callback(curr, prev)) {\n\t\t\t\treturn curr;\n\t\t\t}\n\t\t\tif (deep && (_isTypeObject(curr) || _isFunction(curr)) && (subKey = _find(curr, callback, deep)) !== undefined) {\n\t\t\t\treturn curr;\n\t\t\t}\n\t\t}\n\t\treturn prev;\n\t}, undefined);\n\tif (value !== undefined) {\n\t\tvar key = keys ? keys[values.indexOf(value)] : values.indexOf(value);\n\t\treturn subKey !== undefined ? [key].concat(_arrFrom(subKey)) : key;\n\t}\n};\n\n/**\n * @exports\n */\nexport default _find;", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isString from '../js/isString.js';\n\n/**\n * Return an object for the given pair(s) of input.\n *\n * @param string|array \t\t\tkey\n * @param mixed|array\t\t\tval \n *\n * @return object\n */\nexport default function(key, val = null) {\n\tvar obj = {};\n\tif (arguments.length === 2) {\n\t\tif (_isArray(key) && _isArray(val)) {\n\t\t\tkey.forEach((k, i) => obj[k] = val[i]);\n\t\t} else {\n\t\t\tobj[key] = val;\n\t\t}\n\t}\n\treturn obj;\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isUndefined from '../js/isUndefined.js';\nimport _isNull from '../js/isNull.js';\nimport _arrFrom from '../arr/from.js';\n\n/**\n * Retrieves the value at the given path.\n *\n * A return value of undefined is ambiguous, and can mean either that the\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\n * know whether the path actually exists, pass an object as a third argument.\n * This object will have an \"exists\" key set to true/false.\n *\n * @param object \t\t\t\tctxt\n * @param array \t\t\t\tpath\n * @param object \t\t\t\ttrap\n * @param object \t\t\t\treciever\n *\n * @return mixed\n */\nexport default function(ctxt, path, trap = {}, reciever = {}) {\n\tpath = _arrFrom(path).slice();\n\tvar _ctxt = ctxt;\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\n\t\tvar _key = path.shift();\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\n\t\t\treciever.exists = false;\n\t\t\treturn;\n\t\t}\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\n\t}\n\treciever.exists = true;\n\treturn _ctxt;\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _isArray from '../js/isArray.js';\nimport _arrFrom from '../arr/from.js';\nimport _get from './get.js';\n\n/**\n * Sets a value to the given path.\n *\n * @param object \t\t\t\tobj\n * @param array \t\t\t\tpath\n * @param mixed \t\t\t\tval\n * @param object|function \t\tbuildTree\n * @param object \t\t\t\ttrap\n *\n * @return bool\n */\nexport default function(obj, path, val, buildTree = {}, trap = {}) {\n\tconst _set = (target, key, val) => {\n\t\tif (trap.set) {\n\t\t\treturn trap.set(target, key, val);\n\t\t} else {\n\t\t\tif (_isNumeric(path[i]) && _isArray(target)) {\n\t\t\t\ttarget.push(val);\n\t\t\t} else {\n\t\t\t\ttarget[key] = val;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t};\n\tpath = _arrFrom(path);\n\tvar target = obj;\n\tfor(var i = 0; i < path.length; i ++) {\n\t\tif (i < path.length - 1) {\n\t\t\tif (!target || (!_isTypeObject(target) && !_isFunction(target))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar branch = _get(target, path[i], trap);\n\t\t\tif (!_isTypeObject(branch)) {\n\t\t\t\tif (trap.buildTree === false) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tbranch = _isFunction(trap.buildTree) ? trap.buildTree(i) : (_isNumeric(path[i + 1]) ? [] : {});\n\t\t\t\tvar branchSuccess = _set(target, path[i], branch);\n\t\t\t\tif (!branchSuccess) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget = branch;\n\t\t} else {\n\t\t\treturn _set(target, path[i], val);\n\t\t}\n\t}\n};\n", "\r\n/**\r\n * Tells if val is pure object.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\r\n};\r\n", "\r\n/**\r\n * Detects vendor type from the given window object\r\n * \r\n * @param window    window\r\n *\r\n * @return string\r\n */\r\nexport function getName(window) {\r\n    // Firefox 1.0+\r\n    var isFirefox = typeof window.InstallTrigger !== 'undefined';\r\n    if (isFirefox) {\r\n        return 'firefox';\r\n    }\r\n    // Safari 3.0+ \"[object HTMLElementConstructor]\" \r\n    var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window['safari'] || (typeof window.safari !== 'undefined' && window.safari.pushNotification));\r\n    if (isSafari) {\r\n        return 'safari';\r\n    }\r\n    // Chrome 1 - 79\r\n    var isChrome = !!window.chrome && (!!window.chrome.webstore || !!window.chrome.runtime);\r\n    // Edge (based on chromium) detection\r\n    var isEdgeChromium = isChrome && (window.navigator.userAgent.indexOf(\"Edg\") != -1);\r\n    // Opera 8.0+\r\n    var isOpera = (!!window.opr && !!window.opr.addons) || !!window.opera || window.navigator.userAgent.indexOf(' OPR/') >= 0;\r\n\r\n    // Internet Explorer 6-11\r\n    var isIE = /*@cc_on!@*/false || !!window.document.documentMode;\r\n    // Edge 20+\r\n    var isEdge = !isIE && !!window.StyleMedia;\r\n    // Blink engine detection\r\n    var isBlink = (isChrome || isOpera) && !!window.CSS;\r\n    return isEdge ? 'edge' : (\r\n        isIE ? 'ie' : (\r\n            isOpera ? 'opera' : (\r\n                isEdgeChromium ? 'ie-chromium' : (\r\n                    isChrome ? 'chrome' : 'unknown'\r\n                )\r\n            )\r\n        )\r\n    );\r\n};\r\n\r\n/**\r\n * Returns the vendor-specific property prefix.\r\n *\r\n * @return object\r\n */\r\nexport function getPrefix(window) {\r\n    var styles = window.getComputedStyle(window.document.documentElement, '');\r\n    var prefix = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || styles.Olink === '' && ['', 'o'])[1];\r\n    var api = (('WebKit|Moz|Ms|O').match(new RegExp('(' + prefix + ')', 'i')) || [])[1];\r\n    return {\r\n        api,\r\n        prefix,\r\n        css: '-' + prefix + '-',\r\n    };\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isObject from '@webqit/util/js/isObject.js';\r\nimport {\r\n    getName as getVendorName,\r\n    getPrefix as getVendorPrefix\r\n} from './vendor.js';\r\n\r\n/**\r\n * ---------------------------\r\n * Centralized ENV initializer\r\n * for actual and virtual browser environments.\r\n * ---------------------------\r\n */\r\n\r\nexport default function() {\r\n    if (!(_isObject(this) && this.window) && (typeof window === 'undefined')) {\r\n        throw new Error('A window context is required.');\r\n    }\r\n    const _window = _isObject(this) && this.window ? this.window : window;\r\n    // Create global scope?\r\n    if (!_window.WebQit) {\r\n        _window.WebQit = {};\r\n    }\r\n    if (!_window.WebQit.window) {\r\n        // Is this params for global or sub scope?\r\n        let _vendor, _prefix;\r\n        Object.defineProperty(_window.WebQit, 'window', {get: () => _window});\r\n        Object.defineProperty(_window.WebQit, 'vendor', {value: {\r\n            getName: () => {\r\n                if (!_vendor) {\r\n                    _vendor = getVendorName(_window);\r\n                }\r\n                return _vendor;\r\n            },\r\n            getPrefix: () => {\r\n                if (!_prefix) {\r\n                    _prefix = getVendorPrefix(_window);\r\n                }\r\n                return _prefix;\r\n            }\r\n        }});\r\n    }\r\n    return _window.WebQit;\r\n }", "\r\n/**\r\n * Tells if val is of type \"function\".\r\n * This holds true for both regular functions and classes.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn typeof val === 'function';\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"object\".\r\n * This holds true for anything object, including built-ins.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\r\n};\r\n", "\r\n/**\r\n * Tells if val is of type \"number\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val instanceof Number || (typeof val === 'number');\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isNumber from './isNumber.js';\r\n/**\r\n * Tells if val is of type \"string\" or a numeric string.\r\n * This holds true for both numbers and numeric strings.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _each from '@webqit/util/obj/each.js';\r\n\r\n/**\r\n * ---------------------------\r\n * Binds callbacks to requestAnimationFrame()\r\n * to create a central \"read/write\" phases for Ctxt access.\r\n * ---------------------------\r\n */\r\n\t\t\t\r\nexport default class Reflow {\r\n\r\n\t/**\r\n\t * Starts the loop.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(window, asyncDOM = true) {\r\n\t\tthis.window = window;\r\n\t\tthis.async = asyncDOM;\r\n\t\tthis.readCallbacks = [];\r\n\t\tthis.writeCallbacks = [];\r\n\t\tthis._run();\r\n\t}\r\n\r\n\t_run() {\r\n\t\tthis.window.requestAnimationFrame(() => {\r\n\t\t\tthis.readCallbacks.forEach((callback, i) => {\r\n\t\t\t\tif (callback && !callback()) {\r\n\t\t\t\t\tthis.readCallbacks[i] = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.writeCallbacks.forEach((callback, i) => {\r\n\t\t\t\tif (callback && !callback()) {\r\n\t\t\t\t\tthis.writeCallbacks[i] = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._run();\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a callback to the \"read\" phase.\r\n\t *\r\n\t * @param function \tcallback\r\n\t * @param bool\t\twithPromise\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tonread(callback, withPromise = false) {\r\n\t\tif (withPromise) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tif (this.async === false) {\r\n\t\t\t\t\tcallback(resolve, reject);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.readCallbacks.push(() => {\r\n\t\t\t\t\t\tcallback(resolve, reject);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.async === false) {\r\n\t\t\tcallback();\r\n\t\t} else {\r\n\t\t\tthis.readCallbacks.push(callback);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a callback to the \"write\" phase.\r\n\t *\r\n\t * @param function \tcallback\r\n\t * @param bool\t\twithPromise\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tonwrite(callback, withPromise = false) {\r\n\t\tif (withPromise) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tif (this.async === false) {\r\n\t\t\t\t\tcallback(resolve, reject);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeCallbacks.push(() => {\r\n\t\t\t\t\t\tcallback(resolve, reject);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.async === false) {\r\n\t\t\tcallback();\r\n\t\t} else {\r\n\t\t\tthis.writeCallbacks.push(callback);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * A special construct for Ctxt manipulations that span\r\n\t * one or more read/write cycles.\r\n\t *\r\n\t * @param function \tread\r\n\t * @param function \twrite\r\n\t * @param mixed\t\tprevTransaction\r\n\t *\r\n\t * @return void|mixed\r\n\t */\r\n\tcycle(read, write, prevTransaction) {\r\n\t\tthis.onread(() => {\r\n\t\t\t// Record initial values\r\n\t\t\tvar readReturn = read(prevTransaction);\r\n\t\t\tif (readReturn) {\r\n\t\t\t\t// Call erite, the transation\r\n\t\t\t\tvar callWrite = (readReturn) => {\r\n\t\t\t\t\tthis.onwrite(() => {\r\n\t\t\t\t\t\tvar writeReturn = write(readReturn, prevTransaction);\r\n\t\t\t\t\t\tif (writeReturn) {\r\n\t\t\t\t\t\t\t// Repeat transaction\r\n\t\t\t\t\t\t\tvar repeatTransaction = (writeReturn) => {\r\n\t\t\t\t\t\t\t\tthis.cycle(read, write, writeReturn);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t// ---------------------------------------\r\n\t\t\t\t\t\t\t// If \"write\" returns a promise, we wait until it is resolved\r\n\t\t\t\t\t\t\t// ---------------------------------------\r\n\t\t\t\t\t\t\tif (writeReturn instanceof Promise) {\r\n\t\t\t\t\t\t\t\twriteReturn.then(repeatTransaction);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\trepeatTransaction();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\t// ---------------------------------------\r\n\t\t\t\t// If \"read\" returns a promise, we wait until it is resolved\r\n\t\t\t\t// ---------------------------------------\r\n\t\t\t\tif (readReturn instanceof Promise) {\r\n\t\t\t\t\treadReturn.then(callWrite);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallWrite();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n};", "\r\n/**\r\n * Tells if val is of type \"string\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\r\n};\r\n", "\r\n/**\r\n * Tells if val is of type \"array\".\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val);\r\n};\r\n", "\r\n/**\r\n * Tells if val is undefined or is of type \"undefined\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isString from './isString.js';\r\nimport _isUndefined from './isUndefined.js';\r\n\r\n/**\r\n * Tells if val is \"array-like\".\r\n * This holds true for anything that has a length property.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !_isString(val) && !_isUndefined(val.length);\r\n};\r\n", "\r\n/**\r\n * Tells if val is undefined or is null.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val === null || val === '';\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isNull from './isNull.js';\r\nimport _isUndefined from './isUndefined.js';\r\nimport _isTypeObject from './isTypeObject.js';\r\n\r\n/**\r\n * Tells if val is empty in its own type.\r\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\r\n * objects without keys, empty arrays.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \r\n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isTypeArray from '../js/isTypeArray.js';\r\nimport _isEmpty from '../js/isEmpty.js';\r\nimport _isObject from '../js/isObject.js';\r\n\r\n/**\r\n * Casts an array-like object to an array.\r\n *\r\n * @param mixed \tval\r\n * @param bool\t \tcastObject\r\n *\r\n * @return array\r\n */\r\nexport default function(val, castObject = true) {\r\n\tif (_isArray(val)) {\r\n\t\treturn val;\r\n\t};\r\n\tif (!castObject && _isObject(val)) {\r\n\t\treturn [val];\r\n\t};\r\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\r\n\t\treturn [];\r\n\t};\r\n\tif (_isTypeArray(val)) {\r\n\t\treturn Array.prototype.slice.call(val);\r\n\t};\r\n\tif (_isObject(val)) {\r\n\t\treturn Object.values(val);\r\n\t};\r\n\treturn [val];\r\n};\r\n", "\n/**\n * @imports\n */\nimport init from '../index.js';\n\nexport default function(callback) {\n    const WebQit = init.call(this);\n    if (WebQit.DOM.isDOMReady || WebQit.window.document.readyState === 'complete') {\n        callback(WebQit.window);\n    } else {\n        if (!WebQit.window.domReadyCallbacks) {\n            WebQit.window.domReadyCallbacks = [];\n            WebQit.window.document.addEventListener('DOMContentLoaded', () => {\n                WebQit.DOM.isDOMReady = true;\n                WebQit.window.domReadyCallbacks.splice(0).forEach(cb => cb(WebQit.window));\n            }, false);\n        }\n        WebQit.window.domReadyCallbacks.push(callback);\n    }\n}\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isString from '@webqit/util/js/isString.js';\r\nimport _difference from '@webqit/util/arr/difference.js';\r\nimport _arrFrom from '@webqit/util/arr/from.js';\r\nimport domReady from './ready.js';\r\n\r\n/**\r\n * ---------------------\r\n * Ctxt Mutations Utilities\r\n * ---------------------\r\n */\r\nexport default class Mutations {\r\n\r\n\t/**\r\n\t * Starts the loop.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(window) {\r\n\t\tthis.window = window;\r\n\t}\r\n\r\n\t/**\r\n\t * ---------------------\r\n\t * PRESENCE\r\n\t * ---------------------\r\n\t */\r\n\t\t\r\n\t/**\r\n\t * Shortcut function to onPresenceChange().\r\n\t *\r\n\t * Observes when the given elements or selectors are added\r\n\t * to the given context.\r\n\t *\r\n\t * @param window\t\t\t\t\twindow\r\n\t * @param array|Element|string\t\tels\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t *\r\n\t * @return MutationObserver\r\n\t */\r\n\tonAdded(els, callback, params = {}) {\r\n\t\tparams.on = 'added';\r\n\t\treturn this.onPresenceChange(els, (el, presence, isTransient, addedState, removedState) => {\r\n\t\t\tcallback(el, presence, isTransient, addedState, removedState);\r\n\t\t}, params);\r\n\t}\r\n\r\n\t/**\r\n\t * Shortcut function to onPresenceChange().\r\n\t *\r\n\t * Observes when the given elements or selectors are removed\r\n\t * from the given context.\r\n\t *\r\n\t * @param array|Element|string\t\tels\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t *\r\n\t * @return MutationObserver\r\n\t */\r\n\tonRemoved(els, callback, params = {}) {\r\n\t\tparams.on = 'removed';\r\n\t\treturn this.onPresenceChange(els, (el, presence, isTransient, addedState, removedState) => {\r\n\t\t\tcallback(el, presence, isTransient, addedState, removedState);\r\n\t\t}, params);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a MutationObserver that fires if currently, and whenever,\r\n\t * the given element, or selector, is present in the Ctxt.\r\n\t *\r\n\t * @param string|Element\t\t\t\tselector\r\n\t * @param function\t\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\t\tparams\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tonPresent(selector, callback, params = {}) {\r\n\t\t// On Ctxt-ready\r\n\t\tdomReady.call(this.window, () => {\r\n\t\t\t// On Ctxt mutation\r\n\t\t\tif (this.window.MutationObserver) {\r\n\t\t\t\tthis.onAdded(selector, (els, presence) => {\r\n\t\t\t\t\tels.forEach(el => callback(el, presence));\r\n\t\t\t\t}, params);\r\n\t\t\t}\r\n\t\t\tif (_isString(selector)) {\r\n\t\t\t\t// IMPORTANT: This must come after having observed mutations above\r\n\t\t\t\t// as the callback handler may trigger more additions\r\n\t\t\t\t_arrFrom(this.window.document.querySelectorAll(selector)).forEach(el => callback(el, 1));\r\n\t\t\t} else if (selector.parentNode) {\r\n\t\t\t\tcallback(selector, 1);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a MutationObserver that fires if currently, and whenever,\r\n\t * the given element, or selector, is absent in the Ctxt.\r\n\t *\r\n\t * @param string|Element\t\t\t\tselector\r\n\t * @param function\t\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\t\tparams\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tonAbsent(selector, callback, params = {}) {\r\n\t\t// On Ctxt-ready\r\n\t\tdomReady.call(this.window, () => {\r\n\t\t\t// On Ctxt mutation\r\n\t\t\tif (this.window.MutationObserver) {\r\n\t\t\t\tonRemoved(selector, (els, presence) => {\r\n\t\t\t\t\tels.forEach(el => callback(el, presence));\r\n\t\t\t\t}, params);\r\n\t\t\t}\r\n\t\t\tif (_isString(selector)) {\r\n\t\t\t\t// IMPORTANT: This must come after having observed mutations above\r\n\t\t\t\t// as the callback handler may trigger more removals\r\n\t\t\t\tif (_arrFrom(this.window.document.querySelectorAll(selector)).length === 0) {\r\n\t\t\t\t\tcallback(null, 0);\r\n\t\t\t\t}\r\n\t\t\t} else if (!selector.parentNode) {\r\n\t\t\t\tcallback(selector, 0);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Observes when the given elements or selectors are added or removed\r\n\t * from the given context.\r\n\t *\r\n\t * @param array|Element|string\t\tels\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t *\r\n\t * @return MutationObserver\r\n\t */\r\n\tonPresenceChange(els, callback, params = {}) {\r\n\t\tels = _arrFrom(els, false/*castObject*/);\r\n\t\tvar search = (el, nodeListArray) => {\r\n\t\t\t// Filter out text nodes\r\n\t\t\tnodeListArray = nodeListArray.filter(node => node.matches);\r\n\t\t\tif (_isString(el)) {\r\n\t\t\t\t// Is directly mutated...\r\n\t\t\t\tvar matches = nodeListArray.filter(node => node.matches(el));\r\n\t\t\t\t// Is contextly mutated...\r\n\t\t\t\tif (params.observeIndirectMutation !== false) {\r\n\t\t\t\t\tmatches = nodeListArray\r\n\t\t\t\t\t\t.reduce((collection, node) => collection.concat(_arrFrom(node.querySelectorAll(el))), matches);\r\n\t\t\t\t\tif (matches.length) {\r\n\t\t\t\t\t\treturn matches;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// Is directly mutated...\r\n\t\t\t\tif (nodeListArray.includes(el)) {\r\n\t\t\t\t\treturn [el];\r\n\t\t\t\t}\r\n\t\t\t\t// Is contextly mutated...\r\n\t\t\t\tif (params.observeIndirectMutation !== false && nodeListArray.length) {\r\n\t\t\t\t\tvar parentNode = el;\r\n\t\t\t\t\twhile(parentNode = parentNode.parentNode) {\r\n\t\t\t\t\t\tif (nodeListArray.includes(parentNode)) {\r\n\t\t\t\t\t\t\treturn [el];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar match = (els, sourceArray) => {\r\n\t\t\t// -------------------------------\r\n\t\t\t// Search can be expensive...\r\n\t\t\t// Multiple listeners searching the same thing in the same list?\r\n\t\t\tif (!sourceArray.$$searchCache) {\r\n\t\t\t\tsourceArray.$$searchCache = new Map();\r\n\t\t\t}\r\n\t\t\t// -------------------------------\r\n\t\t\treturn els.reduce((matches, el) => {\r\n\t\t\t\t// -------------------------------\r\n\t\t\t\tvar _matches;\r\n\t\t\t\tif (sourceArray.$$searchCache.has(el)) {\r\n\t\t\t\t\t_matches = sourceArray.$$searchCache.get(el);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_matches = search(el, sourceArray, _isString(el)) || [];\r\n\t\t\t\t\tsourceArray.$$searchCache.set(el, _matches);\r\n\t\t\t\t}\r\n\t\t\t\treturn matches.concat(_matches);\r\n\t\t\t}, []);\r\n\t\t};\r\n\t\tvar addedState = new Set(), removedState = new Set();\r\n\t\tvar fire = (list, state, isTransient) => {\r\n\t\t\tif ((state && params.on === 'removed') || (!state && params.on === 'added')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ((list = match(els, list)).length) {\r\n\t\t\t\tif (params.maintainCallState) {\r\n\t\t\t\t\tlist.forEach(el => {\r\n\t\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\t\taddedState.add(el);\r\n\t\t\t\t\t\t\tremovedState.delete(el);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taddedState.delete(el);\r\n\t\t\t\t\t\t\tremovedState.add(el);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcallback(list, state, isTransient, addedState, removedState);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback(list, state, isTransient);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar subject = params.context || this.window.document.documentElement;\r\n\t\tvar mo = this._observe(subject, (removed__addedNodes, added__removedNodes, addedNodes, removedNodes) => {\r\n\t\t\tif (!params.ignoreTransients) {\r\n\t\t\t\tfire(removed__addedNodes, 0, true);\r\n\t\t\t\tfire(removed__addedNodes.concat(added__removedNodes), 1, true);\r\n\t\t\t\tfire(added__removedNodes, 0, true);\r\n\t\t\t}\r\n\t\t\tfire(removedNodes, 0);\r\n\t\t\tfire(addedNodes, 1);\r\n\t\t});\r\n\t\treturn mo;\r\n\t}\r\n\r\n\t/**\r\n\t * ---------------------\r\n\t * MUTATIONS\r\n\t * ---------------------\r\n\t */\r\n\r\n\t/**\r\n\t * Observes changes in attributes of the given element.\r\n\t *\r\n\t * @param Element\t\t\t\t\tel\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param array\t\t\t\t\t\tfilter\r\n\t *\r\n\t * @return MutationObserver\r\n\t */\r\n\tonAttrChange(el, callback, filter = []) {\r\n\t\tvar observer = new this.window.MutationObserver(callback);\r\n\t\tvar params = {attributes:true, attributeOldValue:true};\r\n\t\tif (filter) {\r\n\t\t\tparams.attributeFilter = filter;\r\n\t\t}\r\n\t\tobserver.observe(el, params);\r\n\t\treturn observer;\r\n\t}\r\n\r\n\t/**\r\n\t * Observes changes in tree/subtree of the given element.\r\n\t *\r\n\t * @param Element\t\t\t\t\tel\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param bool\t\t\t\t\t\tsubtree\r\n\t *\r\n\t * @return MutationObserver\r\n\t */\r\n\tonTreeChange(el, callback, subtree = false) {\r\n\t\tvar observer = new this.window.MutationObserver(callback);\r\n\t\tvar params = {childList:true, subtree};\r\n\t\tobserver.observe(el, params);\r\n\t\treturn observer;\r\n\t}\r\n\r\n\t/**\r\n\t * Observes mutations on the given element.\r\n\t *\r\n\t * @param Element\t\t\t\t\tel\r\n\t * @param function\t\t\t\t\tcallback\r\n\t * @param object\t\t\t\t\tparams\r\n\t *\r\n\t * @return MutationObserver\r\n\t */\r\n\tonMutation(el, callback, params) {\r\n\t\tvar observer = new this.window.MutationObserver(callback);\r\n\t\tobserver.observe(el, params);\r\n\t\treturn observer;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param Element subject \r\n\t * @param Function callback \r\n\t */\r\n\t_observe(subject, callback) {\r\n\t\tif (!MutationObserversCache.has(subject)) {\r\n\t\t\tconst callbacks = new Set();\r\n\t\t\tconst observer = new this.window.MutationObserver(mutations => {\r\n\t\t\t\tif (!callbacks.size) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar addedNodes = mutations.reduce((list, mut) => list.concat(_arrFrom(mut.addedNodes)), []),\r\n\t\t\t\tremovedNodes = mutations.reduce((list, mut) => list.concat(_arrFrom(mut.removedNodes)), []),\r\n\t\t\t\tremoved__addedNodes = [],\r\n\t\t\t\tadded__removedNodes = [];\r\n\r\n\t\t\t\taddedNodes = new Set(addedNodes);\r\n\t\t\t\tremovedNodes = new Set(removedNodes);\r\n\t\t\t\taddedNodes.forEach(el => {\r\n\t\t\t\t\tif (removedNodes.has(el)) {\r\n\t\t\t\t\t\tremovedNodes.delete(el);\r\n\t\t\t\t\t\taddedNodes.delete(el);\r\n\t\t\t\t\t\tif (el.isConnected) {\r\n\t\t\t\t\t\t\tremoved__addedNodes.push(el);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tadded__removedNodes.push(el);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\taddedNodes = [...addedNodes];\r\n\t\t\t\tremovedNodes = [...removedNodes];\r\n\r\n\t\t\t\tcallbacks.forEach(callback => callback(removed__addedNodes, added__removedNodes, addedNodes, removedNodes));\r\n\t\t\t});\r\n\t\t\tobserver.observe(subject, {childList:true, subtree:true});\r\n\t\t\tMutationObserversCache.set(subject, {callbacks, observer});\r\n\t\t}\r\n\t\tconst _observer = MutationObserversCache.get(subject);\r\n\t\t_observer.callbacks.add(callback);\r\n\t\treturn {disconnect() {\r\n\t\t\t_observer.callbacks.delete(callback);\r\n\t\t}, reconnect() {\r\n\t\t\t_observer.callbacks.add(callback);\r\n\t\t}};\r\n\t}\r\n};\r\n\r\nconst MutationObserversCache = new Map();\r\n", "\r\n/**\r\n * Applies all supported polyfills\r\n */\r\nexport default function(window) {\r\n    CSS_escape(window);\r\n    Node_isConnected(window);\r\n    Element_matches(window);\r\n}\r\n\r\n/**\r\n * Polyfills the window.CSS object.\r\n *  \r\n * @return void\r\n */\r\nexport function CSS_escape(window) {\r\n    if (!window.CSS) {\r\n        window.CSS = {};\r\n    }\r\n    if (!window.CSS.escape) {\r\n        /**\r\n         * Polyfills the window.CSS.escape() function.\r\n         *  \r\n         * @param string str \r\n         * \r\n         * @return string\r\n         */\r\n        window.CSS.escape = str => str.replace(/([\\:@\\~\\$\\&])/g, '\\\\$1');\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Node.prototype.isConnected property\r\n * \r\n * @see MDN\r\n  *  \r\n * @return bool\r\n*/\r\nexport function Node_isConnected(window) {\r\n    if (!('isConnected' in window.Node.prototype)) {\r\n        Object.defineProperty(window.Node.prototype, 'isConnected', {get: function() {\r\n            return !this.ownerDocument || !(\r\n                this.ownerDocument.compareDocumentPosition(this)\r\n                & this.DOCUMENT_POSITION_DISCONNECTED);\r\n        }});\r\n    }\r\n}\r\n\r\n/**\r\n * Polyfills the Element.prototype.matches() method\r\n * \r\n * @see MDN\r\n  *  \r\n * @return void\r\n*/\r\nexport function Element_matches(window) {\r\n    if (!window.Element.prototype.matches) {\r\n        window.Element.prototype.matches = \r\n        window.Element.prototype.matchesSelector || \r\n        window.Element.prototype.mozMatchesSelector ||\r\n        window.Element.prototype.msMatchesSelector || \r\n        window.Element.prototype.oMatchesSelector || \r\n        window.Element.prototype.webkitMatchesSelector ||\r\n        function(s) {\r\n            var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n                i = matches.length;\r\n            while (--i >= 0 && matches.item(i) !== this) {}\r\n            return i > -1;            \r\n        };\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport _isString from '@webqit/util/js/isString.js';\r\nimport _arrFrom from '@webqit/util/arr/from.js';\r\nimport init from '../index.js';\r\n\r\n/**\r\n * Creates one or a list of DOM elements\r\n * from an input of markup, selector, HTMLElement.\r\n *\r\n * @param mixed \t\t\t\tinput\r\n * @param document|Element\t    context\r\n * @param bool\t\t \t\t\tall\r\n *\r\n * @return Element|Array\r\n */\r\nexport default function query(input, context = null, all = false) {\r\n\tconst WebQit = init.call(this);\r\n\tif (_isString(input)) {\r\n\t\tvar els;\r\n\t\tif (input.trim().startsWith('<')) {\r\n\t\t\t// Create a node from markup\r\n\t\t\tvar temp = WebQit.window.document.createElement('div');\r\n\t\t\ttemp.innerHTML = input;\r\n\t\t\tels = all ? _arrFrom(temp.children) : temp.firstChild;\r\n\t\t} else {\r\n\t\t\tels = all ? _arrFrom(querySelectorAll.call(this, input, context)) : querySelector.call(this, input, context);\r\n\t\t}\r\n\t\treturn els;\r\n\t}\r\n\tif (input instanceof WebQit.window.Element) {\r\n\t\treturn all ? [input] : input;\r\n\t}\r\n\treturn all ? _arrFrom(input) : input;\r\n}\r\n\r\n/**\r\n * Creates a list of DOM elements\r\n * from an input of markup, selector, HTMLElement.\r\n *\r\n * @param mixed \t\t\t\tinput\r\n * @param document|Element\t    context\r\n *\r\n * @return Array\r\n */\r\nexport function queryAll(selector, context = null) {\r\n    return query.call(this, selector, context, true);\r\n}\r\n\r\n/**\r\n * Queries a DOM context for elements matching\r\n * the given selector.\r\n *\r\n * @param string \t\t\t\tselector\r\n * @param document|Element\t    context\r\n * @param bool\t\t \t\t\tall\r\n *\r\n * @return Element|DOMNodeList\r\n */\r\nexport function querySelector(selector, context = null, all = false) {\r\n\tconst WebQit = init.call(this);\r\n    context = context || WebQit.window.document;\r\n\tvar matchedItems, method = all ? 'querySelectorAll' : 'querySelector';\r\n\ttry {\r\n\t\tmatchedItems = context[method](selector);\r\n\t} catch(e) {\r\n\t\ttry {\r\n\t\t\tmatchedItems = context[method](selector.replace(/\\:is\\(/g, ':matches('));\r\n\t\t} catch(e) {\r\n\t\t\ttry {\r\n\t\t\t\tmatchedItems = context[method](selector.replace(/\\:is\\(/g, ':-webkit-any('));\r\n\t\t\t} catch(e) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmatchedItems = context[method](selector.replace(/\\:is\\(/g, ':-moz-any('));\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn matchedItems;\r\n}\r\n\r\n/**\r\n * Queries a DOM context for elements matching\r\n * the given selector.\r\n *\r\n * @param string \t\t\t\tselector\r\n * @param document|Element\t    context\r\n *\r\n * @return DOMNodeList\r\n */\r\nexport function querySelectorAll(selector, context = null) {\r\n    return querySelector.call(this, selector, context, true);\r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"function\".\r\n *\r\n * @param object \t\tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isUndefined from '../js/isUndefined.js';\r\nimport _isNull from '../js/isNull.js';\r\nimport _arrFrom from '../arr/from.js';\r\n\r\n/**\r\n * Retrieves the value at the given path.\r\n *\r\n * A return value of undefined is ambiguous, and can mean either that the\r\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\r\n * know whether the path actually exists, pass an object as a third argument.\r\n * This object will have an \"exists\" key set to true/false.\r\n *\r\n * @param object \t\t\t\tctxt\r\n * @param array \t\t\t\tpath\r\n * @param object \t\t\t\ttrap\r\n * @param object \t\t\t\treciever\r\n *\r\n * @return mixed\r\n */\r\nexport default function(ctxt, path, trap = {}, reciever = {}) {\r\n\tpath = _arrFrom(path).slice();\r\n\tvar _ctxt = ctxt;\r\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\r\n\t\tvar _key = path.shift();\r\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\r\n\t\t\treciever.exists = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\r\n\t}\r\n\treciever.exists = true;\r\n\treturn _ctxt;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\nimport _isArray from '../js/isArray.js';\r\nimport _arrFrom from '../arr/from.js';\r\nimport _get from './get.js';\r\n\r\n/**\r\n * Sets a value to the given path.\r\n *\r\n * @param object \t\t\t\tobj\r\n * @param array \t\t\t\tpath\r\n * @param mixed \t\t\t\tval\r\n * @param object|function \t\tbuildTree\r\n * @param object \t\t\t\ttrap\r\n *\r\n * @return bool\r\n */\r\nexport default function(obj, path, val, buildTree = {}, trap = {}) {\r\n\tconst _set = (target, key, val) => {\r\n\t\tif (trap.set) {\r\n\t\t\treturn trap.set(target, key, val);\r\n\t\t} else {\r\n\t\t\tif (_isNumeric(path[i]) && _isArray(target)) {\r\n\t\t\t\ttarget.push(val);\r\n\t\t\t} else {\r\n\t\t\t\ttarget[key] = val;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\tpath = _arrFrom(path);\r\n\tvar target = obj;\r\n\tfor(var i = 0; i < path.length; i ++) {\r\n\t\tif (i < path.length - 1) {\r\n\t\t\tif (!target || (!_isTypeObject(target) && !_isFunction(target))) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar branch = _get(target, path[i], trap);\r\n\t\t\tif (!_isTypeObject(branch)) {\r\n\t\t\t\tif (trap.buildTree === false) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbranch = _isFunction(trap.buildTree) ? trap.buildTree(i) : (_isNumeric(path[i + 1]) ? [] : {});\r\n\t\t\t\tvar branchSuccess = _set(target, path[i], branch);\r\n\t\t\t\tif (!branchSuccess) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttarget = branch;\r\n\t\t} else {\r\n\t\t\treturn _set(target, path[i], val);\r\n\t\t}\r\n\t}\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _arrFrom from '../arr/from.js';\r\nimport _get from './get.js';\r\n\r\n/**\r\n * Unsets a value from the given path.\r\n *\r\n * @param object \t\t\t\tobj\r\n * @param array \t\t\t\tpath\r\n * @param bool|function \t\treduceTree\r\n * @param object \t\t\t\ttrap\r\n *\r\n * @return bool\r\n */\r\nexport default function(obj, path, reduceTree = false, trap = {}) {\r\n\tpath = _arrFrom(path);\r\n\tvar success = false;\r\n\tdo {\r\n\t\tvar lastKey = path.pop();\r\n\t\tvar lastKey = lastKey === ''/*null*/ ? 0 : lastKey;\r\n\t\tvar _obj = obj;\r\n\t\tif (path.length) {\r\n\t\t\t_obj = _get(obj, path, {}/*reciever*/, trap);\r\n\t\t}\r\n\t\tif ((_isTypeObject(_obj) || _isFunction(_obj)) && (trap.has ? trap.has(_obj, lastKey) : lastKey in _obj)) {\r\n\t\t\tif (trap.deleteProperty) {\r\n\t\t\t\tsuccess = trap.deleteProperty(_obj, lastKey);\r\n\t\t\t} else if (trap.del) {\r\n\t\t\t\tsuccess = trap.del(_obj, lastKey);\r\n\t\t\t} else {\r\n\t\t\t\tdelete _obj[lastKey];\r\n\t\t\t\tsuccess = true;\r\n\t\t\t}\r\n\t\t}\r\n\t} while (success && reduceTree && path.length && (_isTypeObject(_obj) || _isFunction(_obj)) && !(trap.keys ? trap.keys(_obj) : Object.keys(_obj)).length);\r\n\treturn success;\r\n};\r\n", "\n/**\n * @imports\n */\nimport _isNumeric from '@webqit/util/js/isNumeric.js';\nimport _isObject from '@webqit/util/js/isObject.js';\nimport _merge from '@webqit/util/obj/merge.js';\nimport _set from '@webqit/util/obj/set.js';\nimport _get from '@webqit/util/obj/get.js';\nimport _del from '@webqit/util/obj/del.js';\nimport init from '../index.js';\n\n/**\n * A WebQit's meta tag props reader.\n *  \n * @param String name\n * @param Bool\t readWrite\n * \n * @return Object\n */\nexport default function meta(name, readWrite = false) {\n    const WebQit = init.call(this);\n    var metaInstance = {};\n\n    // Initialize reader\n    if (!(metaInstance.el = WebQit.window.document.head.querySelector('meta[name=\"oohtml\"]')) && readWrite) {\n        metaInstance.el = WebQit.window.document.createElement('meta');\n        metaInstance.el.setAttribute('name', name);\n        WebQit.window.document.head.append(metaInstance.el);\n    }\n    if (metaInstance.el) {\n        metaInstance.vars = (metaInstance.el.getAttribute('content') || '').split(';').filter(v => v).reduce((_metaVars, directive) => {\n            var directiveSplit = directive.split('=').map(d => d.trim());\n            _set(_metaVars, directiveSplit[0].split('.'), directiveSplit[1] === 'true' \n                ? true : (directiveSplit[1] === 'false' \n                    ? false : (_isNumeric(directiveSplit[1]) ? parseInt(directiveSplit[1]) : directiveSplit[1])\n                )\n            );\n            return _metaVars;\n        }, {});\n    }\n\n    // Read prop...\n    metaInstance.get = function(prop) {\n        return _get(this.vars, prop.split('.'));\n    }\n\n    // Write prop...\n    metaInstance.set = function(prop, val = null, asDefaults = false) {\n        var props = _isObject(prop) ? prop : {[prop]: val === true ? 'true' : val};\n        asDefaults = arguments.length < 3 ? val : asDefaults;\n        Object.keys(props).forEach(name => {\n            if (props[name] === false) {\n                _del(this.vars, name.split('.'));\n            } else if (_isObject(props[name])) {\n                Object.keys(props[name]).forEach(_prop => {\n                    var _path = (name + '.' + _prop).split('.');\n                    if (!asDefaults || !_get(this.vars, _path)) {\n                        _set(this.vars, _path, props[name][_prop]);\n                    }\n                });\n            } else {\n                var _path = name.split('.');\n                if (!asDefaults || !_get(this.vars, _path)) {\n                    _set(this.vars, _path, props[name]);\n                }\n            }\n        });\n        if (readWrite) {\n            const flatten = (base, obj) => Object.keys(obj).reduce((arr, name) => {\n                var path = (base ? base + '.' : '') + name;\n                if (_isObject(obj[name])) {\n                    arr.push(...flatten(path, obj[name]));\n                } else {\n                    arr.push(path + '=' + obj[name]);\n                }\n                return arr;\n            }, []);\n            this.el.setAttribute('content', flatten('', this.vars).join(';'));\n        }\n        return true;\n    }\n\n    // Write prop...\n    metaInstance.defaults = function(prop, val = null) {\n        return this.set(prop, val, true);\n    };\n\n    return metaInstance;\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport init from '../index.js';\r\nimport Reflow from './Reflow.js';\r\nimport Mutations from './Mutations.js';\r\nimport polyfill from './polyfills.js';\r\nimport query, { queryAll, querySelector, querySelectorAll } from './query.js';\r\nimport ready from './ready.js';\r\nimport meta from './meta.js';\r\n\r\n/**\r\n * ---------------------------\r\n * Ctxt-Scope initializations.\r\n * ---------------------------\r\n */\r\n\r\nexport default function() {\r\n    const WebQit = init.call(this);\r\n    if (WebQit.DOM) {\r\n        return WebQit;\r\n    }\r\n    WebQit.DOM = {};\r\n    polyfill(WebQit.window);\r\n    WebQit.DOM.reflow = new Reflow(WebQit.window);\r\n    WebQit.DOM.mutations = new Mutations(WebQit.window);\r\n    WebQit.DOM.meta = meta.bind(WebQit.window);\r\n    WebQit.DOM.query = query.bind(WebQit.window);\r\n    WebQit.DOM.queryAll = queryAll.bind(WebQit.window);\r\n    WebQit.DOM.ready = ready.bind(WebQit.window);\r\n    // ------\r\n    return WebQit;\r\n}\r\n\r\nexport {\r\n    meta,\r\n    query,\r\n    queryAll,\r\n    querySelector,\r\n    querySelectorAll,\r\n    ready,\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _beforeLast } from '@webqit/util/str/index.js';\r\nimport { _set, _each } from '@webqit/util/obj/index.js';\r\nimport { _isClass, _isArray, _isObject } from '@webqit/util/js/index.js';\r\nimport domInit, { queryAll } from '@webqit/browser-pie/src/dom/index.js';\r\n\r\n/**\r\n * Returns an array of Element object(s).\r\n *\r\n * @param Array|Element input\r\n * @param Element|Document queryContext\r\n * \r\n * @return Array\r\n */\r\nexport function getEls(input, queryContext = null) {\r\n    if (_isObject(input) && input.toArray) {\r\n        return input.toArray();\r\n    }\r\n    return queryAll.call(this, input, queryContext);\r\n}\r\n\r\n/**\r\n * Returns an array of Element object(s).\r\n *\r\n * @param String objectName\r\n * \r\n * @return Array\r\n */\r\nexport function getPlayUIGlobal(objectName) {\r\n    const WebQit = domInit.call(this);\r\n    if (!objectName) {\r\n        return WebQit;\r\n    }\r\n    if (WebQit[objectName]) {\r\n        return WebQit[objectName];\r\n    }\r\n    if (WebQit.DOM && WebQit.DOM[objectName]) {\r\n        return WebQit.DOM[objectName];\r\n    }\r\n    throw new Error(`Play UI: ${objectName} not found in scope.`);\r\n}\r\n\r\n/**\r\n * Create a prototyper.\r\n *\r\n * @param object modules\r\n * @param int depth\r\n * @param object thisContext\r\n * @param object params\r\n * \r\n * @return void\r\n */\r\nexport function build(modules, depth = 0, thisContext = {}, params = {}, $ = null, _namespace = []) {\r\n    // -----------\r\n    if (!$) {\r\n        $ = function(input, queryContext = null) {\r\n            if (!(this instanceof $)) {\r\n                return new $(input, queryContext);\r\n            }\r\n            Object.defineProperty(this, 'input', {get: function() {\r\n                return input;\r\n            }});\r\n            var inputElements;\r\n            Object.defineProperty(this, 'toArray', {value: function() {\r\n                if (!inputElements) {\r\n                    inputElements = getEls.call(thisContext, input, queryContext);\r\n                }\r\n                return inputElements;\r\n            }});\r\n            Object.defineProperty(this, 'each', {value: function(callback) {\r\n                this.toArray().forEach(callback);\r\n                return this;\r\n            }});\r\n        };\r\n    }\r\n    // -----------\r\n    _each(modules, (name, fn) => {\r\n        if (depth || ['classes', 'utils'].includes(name)) {\r\n            build(modules[name], depth - 1, thisContext, params, $, _namespace.concat(name));\r\n        } else if (_isClass(fn) || name.substr(0, 1).toLowerCase() !== name.substr(0, 1)) {\r\n            // As static members\r\n            _set($, _namespace.concat(name), fn);\r\n        } else {\r\n\r\n            // Create instance methods\r\n            if (!['classes', 'utils'].includes(_namespace[_namespace.length - 1])) {\r\n                // As instance methods\r\n                const $fn2 = function(...args) {\r\n                    var ret = fn.call(thisContext, this.toArray(), ...args);\r\n                    if (ret instanceof Promise) {\r\n                        return ret.then(_ret => _ret === thisContext || (_isArray(_ret) && _ret[0] === thisContext) ? this : _ret);\r\n                    }\r\n                    return ret === thisContext ? this : ret;\r\n                };\r\n\r\n                $.prototype[name] = $fn2;\r\n                // Create short form\r\n                if (name.endsWith('Sync') || name.endsWith('Async')) {\r\n                    var nameUnprefixed;\r\n                    if (params.defaultAsync && name.endsWith('Async')) {\r\n                        nameUnprefixed = _beforeLast(name, 'Async');\r\n                    } else if (!params.defaultAsync && name.endsWith('Sync')) {\r\n                        nameUnprefixed = _beforeLast(name, 'Sync');\r\n                    }\r\n                    // Add to prototype now\r\n                    $.prototype[nameUnprefixed] = $fn2;\r\n                }\r\n            }\r\n\r\n            // As static methods\r\n            // We preserve the incoming context so as to return it\r\n            _set($, _namespace.concat(name), function(...args) {\r\n                var ret = fn.call(thisContext, ...args);\r\n                if (ret instanceof Promise) {\r\n                    return ret.then(_ret => _ret === thisContext || (_isArray(_ret) && _ret[0] === thisContext) ? this : _ret);\r\n                }\r\n                return ret === thisContext ? this : ret;\r\n            });\r\n\r\n        }\r\n    });\r\n    // -----------\r\n    return $;\r\n}", "\n/**\n * Tells if ANY items pass the test.\n *\n * @param array \tarr\n * @param function \tcallback\n *\n * @return bool\n */\nexport default function(arr, callback) {\n\treturn arr.reduce((prevTest, itm, i) => prevTest || callback(itm, i), false);\n};\n", "\n/**\n * @imports\n */\nimport _isUndefined from '../js/isUndefined.js';\nimport _isFunction from '../js/isFunction.js';\n\n/**\n * 1. Returns the ENTRY following (either the FIRST or the LAST instance of) the reference.\n * 2. Returns A NUMBER OF ENTRIES counting forwards from (either the FIRST or the LAST instance of) the given reference.\n *\n * @param array \t\tarr\n * @param mixed\t \t\treference\n * @param int|bool \t\tlength\n * @param bool|function\t loop\n * @param bool\t \t\tlastReference\n *\n * @return mixed|array\n */\nexport default function(arr, reference, length = false, loop = false, lastReference = false) {\n\tif (arr.indexOf(reference) === -1) {\n\t\treturn length ? [] : undefined;\n\t}\n\tvar amount = length === true ? arr.length - 1 : (length === false ? 1 : length);\n\tvar from = lastReference ? arr.lastIndexOf(reference) + 1 : arr.indexOf(reference) + 1;\n\tvar after = !_isUndefined(reference) ? arr.slice(from, from + amount) : [];\n\tif (loop && after.length < amount && after.length < arr.length) {\n\t\tif (!_isFunction(loop) || loop(amount - after.length)) {\n\t\t\tafter = after.concat(arr.slice(0, amount - after.length));\n\t\t}\n\t};\n\treturn length ? after : after[0];\n};\n", "\n/**\n * Removes instances of reference up to <limit> times.\n *\n * @param array \tarr\n * @param mixed\t \titm\n * @param int|bool \tlimit\n *\n * @return array\n */\nexport default function(arr, itm, limit = false) {\n\tvar i = arr.indexOf(itm);\n\twhile (i > -1 && (limit || limit === false)) {\n\t\tarr.splice(i, 1);\n\t\tif (limit > 0) {\n\t\t\tlimit --;\n\t\t};\n\t\ti = arr.indexOf(itm);\n\t};\n\treturn arr;\n};\n", "\n/**\n * @imports\n */\nimport _remove from './remove.js';\n\n/**\n * Removes all instances of each item.\n *\n * @param array \tarr\n * @param array\t \titms\n *\n * @return array\n */\nexport default function(arr, ...itms) {\n\titms.forEach(itm => _remove(arr, itm));\n\treturn arr;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the intersection of two arrays;\n * optionally using a custom matching function.\n *\n * @param array \tarr\n * @param array\t \tarr2\n * @param function \tcallback\n *\n * @return array\n */\nexport default function(arr, arr2, callback = null) {\n\treturn !_isArray(arr2) ? [] : arr.filter(val1 => callback \n\t\t? arr2.filter(val2 => callback(val1, val2)).length \n\t\t: arr2.indexOf(val1) !== -1\n\t);\n};\n", "\n/**\n * Returns the middle item of an array.\n *\n * @param array \tarr\n * @param bool \t\tall\n *\n * @return any\n */\nexport default function(arr, all = false) {\n\tvar mid = [];\n\tif (arr.length) {\n\t\tif (arr.length % 2) {\n\t\t\tvar start = Math.round(arr.length / 2) - 1;\n\t\t\tmid = arr.slice(start, start + 1);\n\t\t} else {\n\t\t\tvar start = (arr.length / 2) - 1;\n\t\t\tmid = arr.slice(start, start + 2);\n\t\t}\n\t}\n\treturn all ? mid : mid[0];\n};\n", "\n/**\n * Returns a list of unique items.\n *\n * @param array\t \t\t\t\tarr\n *\t *\n * @return array\n */\nexport default function(arr) {\n\tconst distinct = (value, index, self) => {\n\t\treturn self.indexOf(value) === index;\n\t};\n\treturn arr.filter(distinct);\n};\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _fromCamel, _toCamel } from '@webqit/util/str/index.js';\r\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\r\nimport { _isArray } from '@webqit/util/js/index.js';\r\nimport { getPlayUIGlobal } from '../util.js';\r\n\r\n/**\r\n * CSS properties that must go with a unit.\r\n *\r\n * @var array\r\n */\r\nexport const unitBasedProps = ['width', 'height', 'top', 'left', 'right', 'bottom',\r\n\t'padding', 'padding-top', 'padding-left', 'padding-right', 'padding-bottom',\r\n\t'margin', 'margin-top', 'margin-left', 'margin-right', 'margin-bottom',\r\n\t'border-width', 'border-top-width', 'border-left-width', 'border-right-width', 'border-bottom-width',\r\n\t'outline-width', 'outline-top-width', 'outline-left-width', 'outline-right-width', 'outline-bottom-width',\r\n].reduce((props, prop) => props.concat(prop, _toCamel(prop)), []);\r\n\r\n/**\r\n * Derives a unique selector for the given element following directives in params.\r\n * \r\n * @param Element el \r\n * @param Object params \r\n * \r\n * @return String\r\n */\r\nvar uuSelectorIndex = 0;\r\nvar getUuid = () => (+ new Date()) + (uuSelectorIndex ++);\r\nexport function deriveSelector(el, params) {\r\n\tif (!el.id && params.autoId) {\r\n\t\tel.id = getUuid();\r\n\t}\r\n\tif (el.id) {\r\n\t\treturn `#${el.id}`;\r\n\t}\r\n\tvar uuid = el.getAttribute('playui-uuid');\r\n\tif (!uuid && params.autoUuid !== false) {\r\n\t\tuuid = getUuid();\r\n\t\tel.setAttribute('playui-uuid', uuid);\r\n\t}\r\n\tif (!uuid) {\r\n\t\tthrow new Error(`All strategies to derive a selector for element has been disabled.`);\r\n\t}\r\n\treturn `[playui-uuid=\"${uuid}\"]`;\r\n}\r\n\r\n/**\r\n * Returns the vendor-specific css property if supported. NULL if not.\r\n *\r\n * @param String|Array \tprops\r\n * @param Bool \twithStd\r\n *\r\n * @return Array\r\n */\r\nexport function vendorize(props, withStd = true) {\r\n    const window  = getPlayUIGlobal.call(this, 'window');\r\n    const prefix = getPlayUIGlobal.call(this, 'vendor').getPrefix();\r\n    var vendorizedProps = _arrFrom(props).reduce((all, prop) => {\r\n        var camelCasedProp = _toCamel(prop, true);\r\n        if ((prefix.api + camelCasedProp) in window.document.body.style) {\r\n            all.push(prop.includes('-') \r\n                ? prefix.css + _fromCamel(prop, '-').toLowerCase()\r\n                : prefix.api + camelCasedProp\r\n            );\r\n            if (!withStd) {\r\n                return all;\r\n            }\r\n        }\r\n        return all.concat(prop);\r\n    }, []);\r\n    return vendorizedProps;\r\n}\r\n\r\n/**\r\n * Returns the value of a CSS variable.\r\n *\r\n * @param String \tname\r\n * @param Element \tcontext\r\n *\r\n * @return String|NULL\r\n */\r\nexport function readVar(name, context = null) {\r\n    const window  = getPlayUIGlobal.call(this, 'window');\r\n    var name = !name.indexOf('-') ? _fromCamel(name, '-') : name;\r\n    return window.getComputedStyle(context || window.document.body).getPropertyValue('--' + name);\r\n}\r\n\r\n/**\r\n * FInds the keyframes of the given animation name(s) across all stylesheets.\r\n *\r\n * @param string|array\t\tname\r\n * @param bool\t\t\t\tnoCache\r\n * @param bool\t\t\t\tnormalize\r\n *\r\n * @return NULL|bool\r\n */\r\nexport function readKeyframes(name, noCache, normalize = true) {\r\n\tconst window  = getPlayUIGlobal.call(this, 'window');\r\n\tconst prefix  = getPlayUIGlobal.call(this, 'prefix').getPrefix();\r\n\t\r\n\t// Ask cache first...\r\n\tvar cacheKey = _isArray(name) ? name.join('|') : name;\r\n\tif (!noCache && stylesheetKeyframesCache[cacheKey]) {\r\n\t\treturn stylesheetKeyframesCache[cacheKey];\r\n\t}\r\n\t// Parse keyframes rule\r\n\tvar parseKeyframes = function(ruleDefinition) {\r\n\t\tvar keyframes = [];\r\n\t\tfor (var i = 0; i < ruleDefinition.cssRules.length; i ++) {\r\n\t\t\tvar keyframeRule = ruleDefinition.cssRules[i];\r\n\t\t\tvar keyframe = CSSRule.parse(keyframeRule.cssText.replace(keyframeRule.keyText, '').replace('{', '').replace('}', '').trim());\r\n\t\t\tvar offsets = (keyframeRule.keyText || ' ').split(',').map(key => key === 'from' ? 0 : (key === 'to' ? 1 : (parseInt(key) / 100)));\r\n\t\t\tif (normalize) {\r\n\t\t\t\tnormalizeToWAAPI(keyframe, ['animation-', 'transition-']);\r\n\t\t\t\twhile(offsets.length) {\r\n\t\t\t\t\tvar _keyframe = _copyPlain(keyframe);\r\n\t\t\t\t\t_keyframe.offset = offsets.shift();\r\n\t\t\t\t\tkeyframes.push(_keyframe);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tkeyframe.offset = offsets.length > 1 ? offsets : offsets[0];\r\n\t\t\t\tkeyframes.push(keyframe);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn keyframes.sort((a, b) => a.offset === b.offset ? 0 : a.offset > b.offset ? 1 : -1);\r\n\t};\r\n\t// Find keyframes\r\n\tvar allKeyframes = [];\r\n\tnormalizeStylesheetProps.call(this, ruleDefinition => {\r\n\t\tif ((ruleDefinition.type === window.CSSRule.KEYFRAMES_RULE || ruleDefinition.type === window.CSSRule[prefix.api.toUpperCase() + '_KEYFRAMES_RULE'])\r\n\t\t&& (_isArray(name) ? name : [name]).indexOf(ruleDefinition.name) > -1) {\r\n\t\t\tallKeyframes = allKeyframes.concat(allKeyframes, parseKeyframes(ruleDefinition));\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}, true/*reversed*/);\r\n\t// Save\r\n\tstylesheetKeyframesCache[cacheKey] = allKeyframes;\r\n\treturn allKeyframes;\r\n}\r\n\r\n/**\r\n * Loops thru all rules in all stylesheets (in reverse order possible).\r\n *\r\n * @param function\t\t\tcallback\r\n * @param bool\t\t\t\treversed\r\n *\r\n * @return NULL|bool\r\n */\r\nexport function normalizeStylesheetProps(callback, reversed = false) {\r\n    const window  = getPlayUIGlobal.call(this, 'window');\r\n\tvar stylesheets = window.document.styleSheets;\r\n\tvar stylesheetCallback = function(stylesheet) {\r\n\t\ttry {\r\n\t\t\tfor (var k = 0; k < stylesheet.cssRules.length; k ++) {\r\n\t\t\t\tvar ruleDefinition = stylesheet.cssRules[k];\r\n\t\t\t\tif (callback(ruleDefinition) === true) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {}\r\n\t}\r\n\tif (reversed) {\r\n\t\tfor (var i = stylesheets.length - 1; i >= 0; i --) {\r\n\t\t\tif (stylesheetCallback(stylesheets[i]) === true) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tfor (var i = 0; i < stylesheets.length; i ++) {\r\n\t\t\tif (stylesheetCallback(stylesheets[i]) === true) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Normalizes CSS animation properties to WAAPI compatible properties\r\n *\r\n * @param object\t\t\tanimationProps\r\n * @param string|arrau\t\tprefix\r\n * @param string|arrau\t\toffset\r\n *\r\n * @return null\r\n */\r\nconst normalizeToWAAPI = function(animationProps, offset, prefix = '') {\r\n\tif (_isArray(prefix)) {\r\n\t\tprefix.forEach(pref => normalizeToWAAPI(animationProps, pref));\r\n\t\treturn;\r\n\t}\r\n\tif (animationProps[prefix + 'timing-function']) {\r\n\t\tanimationProps.easing = animationProps[prefix + 'timing-function'];\r\n\t\tdelete animationProps[prefix + 'timing-function'];\r\n\t}\r\n\tif (animationProps[prefix + 'fill-mode']) {\r\n\t\tanimationProps.fill = animationProps[prefix + 'fill-mode'];\r\n\t\tdelete animationProps[prefix + 'fill-mode'];\r\n\t}\r\n\tif (animationProps[prefix + 'iteration-count']) {\r\n\t\tanimationProps.iterations = animationProps[prefix + 'iteration-count'];\r\n\t\tdelete animationProps[prefix + 'iteration-count'];\r\n\t\tif (animationProps.iterations === 'infinite') {\r\n\t\t\tanimationProps.iterations = Infinity;\r\n\t\t}\r\n\t}\r\n};\r\n\t\r\n/**\r\n * @var object\r\n */\r\nconst stylesheetKeyframesCache = {};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _each } from '@webqit/util/obj/index.js';\r\nimport { _toTitle } from '@webqit/util/str/index.js';\r\nimport { _isArray, _isNumeric } from '@webqit/util/js/index.js';\r\nimport { getPlayUIGlobal } from '../../util.js';\r\n\r\n/**\r\n * ------------------------------\r\n * The little transform utility class\r\n * and stringifyer classes.\r\n * ------------------------------\r\n */\r\nexport default class TransformRule {\r\n\t\r\n\t/**\r\n\t * Creates a new TransformRule instance\r\n\t * and each rule's appropriate class.\r\n\t *\r\n\t * @param object\t\t transformRules\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(transformRules) {\r\n\t\tif (transformRules === 'none') {\r\n\t\t\tthis.isNone = true;\r\n\t\t} else {\r\n\t\t\t_each(transformRules, (rule, value) => {\r\n\t\t\t\tif (['rotate', 'scale', 'skew', 'translate'].includes(rule)) {\r\n\t\t\t\t\tvar _Rule = _toTitle(rule);\r\n\t\t\t\t\tthis[_Rule] = _isArray(value)\r\n\t\t\t\t\t\t? new TransformRule[_Rule](...value)\r\n\t\t\t\t\t\t: new TransformRule[_Rule](value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * @alias of this.stringify()\r\n     * \r\n     * @return String\r\n     */\r\n\ttoString() {\r\n        return this.stringify()\r\n    }\r\n\t\r\n\t/**\r\n\t * Stringifies the current instance of transform rules to string.\r\n\t *\r\n\t * @param Object params\r\n\t * \r\n\t * @return string\r\n\t */\r\n\tstringify(params = {}) {\r\n\t\tif (this.isNone) {\r\n\t\t\treturn 'none';\r\n\t\t}\r\n\t\treturn ['rotate', 'scale', 'skew', 'translate'].reduce((str, rule) => {\r\n\t\t\tvar _Rule = _toTitle(rule);\r\n\t\t\treturn str + (this[_Rule] && this[_Rule].length ? ' ' + this[_Rule] : '');\r\n\t\t}, '').trim();\r\n\t}\r\n\r\n\t/**\r\n\t * Parses/decodes transform rule\r\n\t *\r\n\t * @param string str\r\n\t *\r\n\t * @return object\r\n\t */\r\n\t static parse(str, CTXT = null) {\r\n\t\tif (str === 'none') {\r\n\t\t\treturn new this(str);\r\n\t\t}\r\n\t\tif (!['translate', 'scale', 'rotate'].reduce((t, p) => t || str.startsWith(p), false)) {\r\n\t\t\treturn this.parseMatrix(str, CTXT);\r\n\t\t}\r\n\t\tvar transform = {};\r\n\t\tvar regex = /(\\w+)\\((.+?)\\)/g;\r\n\t\tvar match = null;\r\n\t\twhile(match = regex.exec(str)) {\r\n\t\t\ttransform[match[1]] = (match[2].indexOf(',') > -1 ? match[2].replace(' ', '').split(',') : match[2]);\r\n\t\t}\r\n\t\treturn new this(transform);\r\n\t}\r\n\r\n\t/**\r\n\t * Unmatrix: parse the values of the matrix\r\n\t *\r\n\t * Algorithm from:\r\n\t *\r\n\t * https://github.com/matthewmueller/unmatrix/blob/master/index.js\r\n\t * @see http://hg.mozilla.org/mozilla-central/file/7cb3e9795d04/layout/style/nsStyleAnimation.cpp\r\n\t *\r\n\t * @param string \t str\r\n\t *\r\n\t * @return {Object}\r\n\t */\r\n\tstatic parseMatrix(str, CTXT = null) {\r\n\t\tif (str === 'none') {\r\n\t\t\treturn new this(str);\r\n\t\t}\r\n\t\tconst window = getPlayUIGlobal(CTXT, 'window');\r\n\t\t// String to matrix\r\n\t\tvar stom = function(transformStr) {\r\n\t\t\tvar m = [];\r\n\t\t\tif (window.WebKitCSSMatrix) {\r\n\t\t\t\tm = new window.WebKitCSSMatrix(transformStr);\r\n\t\t\t\treturn [m.a, m.b, m.c, m.d, m.e, m.f];\r\n\t\t\t}\r\n\t\t\tvar rdigit = /[\\d\\.\\-]+/g;\r\n\t\t\tvar n;\r\n\t\t\twhile(n = rdigit.exec(transformStr)) {\r\n\t\t\t\tm.push(+n);\r\n\t\t\t}\r\n\t\t\treturn m;\r\n\t\t};\r\n\t\t// Round to the nearest hundredth\r\n\t\tvar round = function(n) {\r\n\t\t\treturn Math.round(n * 100) / 100;\r\n\t\t};\r\n\t\t// Radians to degrees\r\n\t\tvar r2d = function(radians) {\r\n\t\t\tvar deg = radians * 180 / Math.PI;\r\n\t\t\treturn round(deg);\r\n\t\t};\r\n\t\t// ---------------------------------\r\n\t\tvar m = stom(str);\r\n\t\tvar A = m[0];\r\n\t\tvar B = m[1];\r\n\t\tvar C = m[2];\r\n\t\tvar D = m[3];\r\n\t\tif (A * D == B * C) throw new Error('Dramatic.parseTransform: matrix is singular');\r\n\t\t// step (3)\r\n\t\tvar scaleX = Math.sqrt(A * A + B * B);\r\n\t\tA /= scaleX;\r\n\t\tB /= scaleX;\r\n\t\t// step (4)\r\n\t\tvar skew = A * C + B * D;\r\n\t\tC -= A * skew;\r\n\t\tD -= B * skew;\r\n\t\t// step (5)\r\n\t\tvar scaleY = Math.sqrt(C * C + D * D);\r\n\t\tC /= scaleY;\r\n\t\tD /= scaleY;\r\n\t\tskew /= scaleY;\r\n\t\t// step (6)\r\n\t\tif ( A * D < B * C ) {\r\n\t\t\tA = -A;\r\n\t\t\tB = -B;\r\n\t\t\tskew = -skew;\r\n\t\t\tscaleX = -scaleX;\r\n\t\t}\r\n\t\treturn new this({\r\n\t\t\ttranslate: [/*x*/m[4], /*y*/m[5],],\r\n\t\t\tscale: [/*x*/round(scaleX), /*y*/round(scaleY),],\r\n\t\t\trotate: r2d(Math.atan2(B, A)),\r\n\t\t\tskew: r2d(Math.atan(skew)),\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * -------------\r\n * The \"rotate\" value class\r\n * -------------\r\n */\r\nTransformRule.Rotate = class extends Array {\r\n\t\r\n\t/**\r\n\t * Returns \"rotate\" values as a CSS function\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\tvar values = this.map(val => _isNumeric(val) ? val + 'deg' : val);\r\n\t\treturn 'rotate(' + values.join(', ') + ')';\r\n\t}\r\n};\r\n\r\n/**\r\n * -------------\r\n * The \"scale\" array class\r\n * -------------\r\n */\r\nTransformRule.Scale = class extends Array {\r\n\t\r\n\t/**\r\n\t * Returns \"scale\" values as a CSS function\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\treturn 'scale(' + this.join(', ') + ')';\r\n\t}\r\n};\r\n\r\n/**\r\n * -------------\r\n * The \"skew\" array class\r\n * -------------\r\n */\r\nTransformRule.Skew = class extends Array {\r\n\t\r\n\t/**\r\n\t * Returns \"skew\" values as a CSS function\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\tvar values = this.map(val => _isNumeric(val) ? val + 'deg' : val);\r\n\t\treturn 'skew(' + values.join(', ') + ')';\r\n\t}\r\n};\r\n\r\n/**\r\n * -------------\r\n * The \"translate\" array class\r\n * -------------\r\n */\r\nTransformRule.Translate = class extends Array {\r\n\t\r\n\t/**\r\n\t * Returns \"translate\" values as a CSS function\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\tvar values = this.map(val => _isNumeric(val) ? val + 'px' : val);\r\n\t\treturn 'translate(' + values.join(', ') + ')';\r\n\t}\r\n};", "\r\n/**\r\n * ----------------------------------------\r\n * An object of CSS quad shorthand rules - padding, margin, inset\r\n * ----------------------------------------\r\n */\r\n\r\nexport default class QuadRule {\r\n\r\n    /**\r\n     * Constructor\r\n     * \r\n     * @param Object rules \r\n     */\r\n    constructor(ruleObj) {\r\n        _each(ruleObj, (propName, value) => {\r\n            Object.defineProperty(this, propName, {value, enumerable: true});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @alias of this.stringify()\r\n     * \r\n     * @return String\r\n     */\r\n    toString() {\r\n        return this.stringify()\r\n    }\r\n\r\n    /**\r\n     * Stringifies the current instance of CSS quad shorthand into a string.\r\n     * \r\n     * @param Object params \r\n     * \r\n     * @return String\r\n     */\r\n    stringify(params = {}) {\r\n        return this.constructor.props.map(p => this[p]).filter(v => v).join(' ');\r\n    }\r\n\r\n    /**\r\n     * Parses a CSS quad shorthand string into a harsh.\r\n     *\r\n     * @param String\t \tshorthand\r\n     *\r\n     * @return Object\r\n     */\r\n    static parse(shorthand) {\r\n        return new this(shorthand.split(' ').filter(v => v).reduce((valsObj, val, i) => {\r\n            valsObj[this.props[i]] = val;\r\n            return valsObj;\r\n        }, {}));\r\n    }\r\n}\r\n\r\n/**\r\n * @var Array\r\n */\r\nQuadRule.props = ['top', 'right', 'bottom', 'left'];", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumeric, _isString } from '@webqit/util/js/index.js';\r\nimport { _beforeLast } from '@webqit/util/str/index.js';\r\n\r\n /**\r\n  * ----------------------------------------\r\n  * An object representing a CSS value and unit.\r\n  * ----------------------------------------\r\n  */\r\n \r\nexport default class CSSValue {\r\n\r\n    /**\r\n     * Constructor\r\n     * \r\n     * @param Number val \r\n     * @param String unit \r\n     */\r\n    constructor(val, unit = null) {\r\n        this.val = val;\r\n        this.unit = unit;\r\n    }\r\n\r\n    /**\r\n     * Returns the type of unit of the current value\r\n     */\r\n    get unitType() {\r\n        return this.constructor.absUnits.includes(this.unit) ? 'absolute' : (\r\n            this.constructor.relUnits.includes(this.unit) ? 'relative' : null\r\n        )\r\n    }\r\n\r\n    /**\r\n     * @valueOf()\r\n     * \r\n     * @return Any\r\n     */\r\n    valueOf() {\r\n        return this.stringify();\r\n    }\r\n\r\n    /**\r\n     * @alias of this.stringify()\r\n     * \r\n     * @return String\r\n     */\r\n    toString() {\r\n        return this.stringify();\r\n    }\r\n\r\n    /**\r\n     * Stringifies the current instance of CSS value into a string.\r\n     *\r\n     * @param Object params\r\n     *\r\n     * @return String\r\n     */\r\n    stringify(params = {}) {\r\n        return this.val + (this.unit ? this.unit : '');\r\n    }\r\n\r\n    /**\r\n     * Parses a CSS value that may go with a unit.\r\n     * \r\n     * @param String val\r\n     *\r\n     * @return this\r\n     */\r\n    static parse(val) {\r\n        var unitTest;\r\n        if (_isString(val) && (unitTest = this.absUnits.concat(this.relUnits).reduce((test, unit) => test || (val.endsWith(unit) ? unit : null), null))) {\r\n            var _val = _beforeLast(val, unitTest);\r\n            if (_isNumeric(_val)) {\r\n                val = _val;\r\n            }\r\n        }\r\n        return new this(val, unitTest);\r\n    }\r\n}\r\n\r\n/**\r\n * CSS absolute units.\r\n *\r\n * @var array\r\n */\r\nCSSValue.absUnits = ['cm', 'mm', 'Q', 'in', 'pc', 'pt', 'px'];\r\n\r\n/**\r\n * CSS relative units.\r\n *\r\n * @var array\r\n */\r\nCSSValue.relUnits = ['em', 'ex', 'ch', 'rem', 'lh', 'vw', 'vh', 'vmin', 'vmax'];", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isObject, _isNumeric } from '@webqit/util/js/index.js';\r\nimport { unitBasedProps } from '../global-css.js';\r\nimport TransformRule from './TransformRule.js';\r\nimport QuadRule from './QuadRule.js';\r\nimport CSSValue from './CSSValue.js';\r\n\r\n/**\r\n * ----------------------------------------\r\n * An object of rules. Contains utilities\r\n * for parsing different CSS rules\r\n * ----------------------------------------\r\n */\r\n\r\nexport default class CSSRule {\r\n\r\n    /**\r\n     * Constructor\r\n     * \r\n     * @param String name \r\n     * @param Any value \r\n     */\r\n    constructor(name, value) {\r\n        this.name = name;\r\n        this.value = value;\r\n    }\r\n\r\n    /**\r\n     * @alias of this.stringify()\r\n     * \r\n     * @return String\r\n     */\r\n    toString() {\r\n        return this.stringify();\r\n    }\r\n\r\n    /**\r\n     * Stringifies a value for the given prop type.\r\n     * \r\n     * @param Object params\r\n     * \r\n     * @return String\r\n     */\r\n    stringify(params = {}) {\r\n        var prop = this.name;\r\n        var val = this.value;\r\n        if (_isObject(val)) {\r\n\t\t\tif (QuadRule.props.includes(prop) && !(val instanceof QuadRule)) {\r\n\t\t\t\tval = new QuadRule(val);\r\n\t\t\t} else if (prop === 'transform' && !(val instanceof TransformRule)) {\r\n\t\t\t\tval = new TransformRule(val);\r\n\t\t\t} else if (val instanceof CSSValue) {\r\n\t\t\t    val = val.stringify(params);\r\n            } else {\r\n                val = val.toString();\r\n            }\r\n\t\t}\r\n        return val;\r\n    }\r\n\r\n    /**\r\n     * Parses a value for the given prop type.\r\n     * \r\n     * @param String prop \r\n     * @param Any val \r\n     * @param Object CNTXT\r\n     * \r\n     * @return this\r\n     */\r\n    static parse(prop, val, CNTXT = null) {\r\n        if (QuadRule.props.includes(prop)) {\r\n            val = QuadRule.parse(val, CNTXT);\r\n        } else if (prop === 'transform') {\r\n            val = TransformRule.parse(val, CNTXT);\r\n        } else {\r\n            val = CSSValue.parse(val);\r\n            if (unitBasedProps.includes(prop)) {\r\n                if (_isNumeric(val.val) && !val.unit) {\r\n                    val.unit = 'px';\r\n                }\r\n            }\r\n        }\r\n        return new this(prop, val);\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _each } from '@webqit/util/obj/index.js';\r\nimport CSSRule from './CSSRule.js';\r\n\r\n/**\r\n * ----------------------------------------\r\n * An object of typed CSS rules.\r\n * ----------------------------------------\r\n */\r\n\r\nexport default class CSSOM {\r\n\r\n    /**\r\n     * Constructor\r\n     * \r\n     * @param Object rules \r\n     */\r\n    constructor(ruleObj) {\r\n        _each(ruleObj, (prop, value) => {\r\n            Object.defineProperty(this, prop, {value, enumerable: true});\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @alias of this.stringify()\r\n     * \r\n     * @return String\r\n     */\r\n    toString() {\r\n        return this.stringify();\r\n    }\r\n\r\n    /**\r\n     * Stringifies the current instance of CSS rules into a string.\r\n     *\r\n     * @param Object params\r\n     *\r\n     * @return String\r\n     */\r\n    stringify(params = {}) {\r\n        var rules = [];\r\n        _each(this.stringifyEach(params), (prop, value) => {\r\n            rules.push(`${prop}: ${value}`);\r\n        });\r\n        return rules.join('; ');\r\n    }\r\n\r\n    /**\r\n     * Stringifies the current instance of CSS rules into a string.\r\n     *\r\n     * @param Object params\r\n     *\r\n     * @return Object\r\n     */\r\n    stringifyEach(params = {}) {\r\n        var ruleObj = {};\r\n        _each(this, (prop, value) => {\r\n            if (value instanceof CSSRule) {\r\n                value = value.stringify(params);\r\n            } else if (_isObject(value)) {\r\n                value = value.toString();\r\n            }\r\n            ruleObj[prop] = value;\r\n        });\r\n        return ruleObj;\r\n    }\r\n\r\n    /**\r\n     * Parses a string of rules CSS into a harsh.\r\n     *\r\n     * @param String\t \tcss\r\n     *\r\n     * @return this\r\n     */\r\n    static parse(css, CNTXT = null) {\r\n        return this.parseEach(css.split(';').filter(r => r).reduce((rules, rule) => {\r\n            rules[rule[0].trim()] = rule[1].trim();\r\n            return rules;\r\n        }, {}), CNTXT);\r\n    }\r\n\r\n    /**\r\n     * Normalizes each rule.\r\n     * \r\n     * @param Object rules\r\n     * \r\n     * @return this\r\n     */\r\n    static parseEach(rules, CNTXT = null) {\r\n        var ruleObj = {};\r\n        _each(rules, (prop, val) => {\r\n            ruleObj[prop] = CSSRule.parse(prop, val, CNTXT);\r\n        });\r\n        return new this(ruleObj);\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isFunction, _isString, _isObject, _isArray } from '@webqit/util/js/index.js';\r\nimport { _each, _merge, _from as _objFrom } from '@webqit/util/obj/index.js';\r\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\r\nimport { _beforeLast } from '@webqit/util/str/index.js';\r\nimport { vendorize, normalizeStylesheetProps, deriveSelector } from './global-css.js';\r\nimport { getPlayUIGlobal, getEls } from '../util.js';\r\nimport CSSOM from './classes/CSSOM.js';\r\n\r\n/**\r\n * The readSync() and writeSync() function in one signature.\r\n *\r\n * @param Array|Element\t\tels\r\n * @param array\t\t\t\t...args\r\n *\r\n * @return mixed\r\n */\r\nexport default function(els, ...args) {\r\n\tif ((args.length > 1 && _isString(args[0])) || _isObject(args[0])) {\r\n\t\treturn writeSync.call(this, els, ...args);\r\n\t}\r\n\treturn readSync.call(this, els, ...args);\r\n}\r\n\r\n/**\r\n * Returns computed CSS properties.\r\n *\r\n * @param Array|Element\t\tels\r\n * @param string|array\t\tprops\r\n * @param object\t\t\tparams\r\n *\r\n * @return object|string\r\n */\r\nexport function readSync(els, props, params = {}) {\r\n\tconst window  = getPlayUIGlobal.call(this, 'window');\r\n\tconst _el = getEls.call(this, els)[0];\r\n\tparams = params || {};\r\n\t// ------------\r\n\tif (params.scope === 'global') {\r\n\t\treturn readGlobal.call(this, els, props, params);\r\n\t}\r\n\tif (params.scope === 'inline') {\r\n\t\tif (params.pseudo) {\r\n\t\t\tthrow new Error(`Cannot read inline styles for pseudo element ${params.pseudo}. Invalid operation. Consider omitting the 'inline' flag.`);\r\n\t\t}\r\n\t\treturn readInline.call(this, els, props);\r\n\t}\r\n\tvar style = window.getComputedStyle(_el, params.pseudo);\r\n\tvar valsObj = _arrFrom(props).reduce((valsObj, prop) => {\r\n\t\tvalsObj[prop] = style.getPropertyValue(params.vendorize ? vendorize.call(this, prop)[0] : prop);\r\n\t\treturn valsObj;\r\n\t}, {});\r\n\treturn _isArray(props) ? valsObj : valsObj[props];\r\n}\r\n\r\n/**\r\n * Returns inline-only CSS properties.\r\n *\r\n * @param Array|Element\t\tels\r\n * @param string|object\t\tprop\r\n * @param object\t\t\tparams\r\n *\r\n * @return mixed\r\n */\r\nexport function readInline(els, props, params = {}) {\r\n\tconst _els = getEls.call(this, els);\r\n\tparams = params || {};\r\n\t// ------------\r\n\tvar style = _els[0].getAttribute('style');\r\n\tif (props === 'all') {\r\n\t\tprops = style.split(';').map(str => str.split(':')[0]);\r\n\t}\r\n\tvar rulesObj = (params.vendorize ? vendorize.call(this, props) : _arrFrom(props)).reduce((_rulesObj, prop) => {\r\n\t\tvar regex = new RegExp(';[ ]*?' + prop + ':([^;]+);?', 'g');\r\n\t\t_rulesObj[prop] = (regex.exec(';' + style) || ['', ''])[1].trim();\r\n\t\treturn _rulesObj;\r\n\t}, {});\r\n\treturn _isArray(props) ? rulesObj : rulesObj[props];\r\n}\r\n\r\n/**\r\n * Returns stylesheet-based CSS properties for an element.\r\n *\r\n * @param Array|Element\t\tels\r\n * @param string|object\t\tprops\r\n * @param object\t\t\tparams\r\n *\r\n * @return object|string\r\n */\r\nexport function readGlobal(els, props, params = {}) {\r\n\tconst window  = getPlayUIGlobal.call(this, 'window');\r\n\tconst _el = getEls.call(this, els)[0];\r\n\tparams = params || {};\r\n\t// ------------\r\n\t// Ask cache first...\r\n\tvar cacheKey = _isArray(props) ? props.join('|') : props;\r\n\tif (!params.noCache && stylesheetCache[cacheKey] && stylesheetCache[cacheKey].el === _el) {\r\n\t\tvar copy = stylesheetCache[cacheKey].slice();\r\n\t\tdelete copy.el;\r\n\t\treturn copy;\r\n\t}\r\n\t// Find rules\r\n\tvar allRules = [];\r\n\tnormalizeStylesheetProps.call(this, ruleDefinition => {\r\n\t\tvar selectorToMatch = ruleDefinition.selectorText;\r\n\t\tif (params.pseudo) {\r\n\t\t\tvar normalizedPseudo = params.pseudo.startsWith(':') && !params.pseudo.startsWith('::') \r\n\t\t\t\t? ':' + params.pseudo \r\n\t\t\t\t: params.pseudo;\r\n\t\t\tif (!ruleDefinition.selectorText.endsWith(normalizedPseudo)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tselectorToMatch = _beforeLast(ruleDefinition.selectorText, normalizedPseudo);\r\n\t\t}\r\n\t\tif (ruleDefinition.type === window.CSSRule.STYLE_RULE && _el.matches(selectorToMatch)) {\r\n\t\t\tvar propsList = _arrFrom(props);\r\n\t\t\tif (!props/*original*/) {\r\n\t\t\t\tpropsList = [];\r\n\t\t\t\tfor (var i = 0; i < ruleDefinition.style.length; i ++) {\r\n\t\t\t\t\tpropsList.push(ruleDefinition.style[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tallRules.push((params.vendorize ? vendorize.call(this, propsList) : propsList).reduce((_rulesObj, prop) => {\r\n\t\t\t\t_rulesObj[prop] = ruleDefinition.style[prop];\r\n\t\t\t\treturn _rulesObj;\r\n\t\t\t}, {}));\r\n\t\t}\r\n\t});\r\n\tstylesheetCache[cacheKey] = allRules.slice();\r\n\tstylesheetCache[cacheKey].el = _el;\r\n\tif (params.all) {\r\n\t\treturn allRules;\r\n\t}\r\n\t// TODO: Handle priority\r\n\treturn allRules.reduce((ruleObj, rules) => _merge(ruleObj, rules), {});\r\n}\r\n\t\r\n/**\r\n * @var object\r\n */\r\nconst stylesheetCache = {};\r\n\r\n\r\n/**\r\n * Sets new CSS properties.\r\n *\r\n * @param Array|Element\t\tels\r\n * @param string|object\t\tnameOrProps\r\n * @param string|number\t\tval\r\n * @param object\t\t\tparams\r\n *\r\n * @return this\r\n */\r\nexport function writeSync(els, nameOrProps, val = null, params = {}) {\r\n\tparams = (_isObject(nameOrProps) ? val : params) || {};\r\n\tnameOrProps = _isObject(nameOrProps) ? nameOrProps : _objFrom(nameOrProps, val);\r\n\t// ------------\r\n\tvar ruleObj = nameOrProps instanceof CSSOM \r\n\t\t? nameOrProps.stringifyEach() \r\n\t\t: CSSOM.parseEach(nameOrProps, this).stringifyEach();\r\n\t// ------------\r\n\tif (params.scope === 'global') {\r\n\t\treturn writeGlobal.call(this, els, ruleObj, params);\r\n\t}\r\n\tif (params.pseudo) {\r\n\t\tthrow new Error(`Cannot write inline styles for pseudo element ${params.pseudo}. Invalid operation. Consider adding the 'global' flag.`);\r\n\t}\r\n\tconst window  = getPlayUIGlobal.call(this, 'window');\r\n\tconst _els = getEls.call(this, els);\r\n\tvar propText;\r\n\tif (params.scope === 'inline' || params.prepend) {\r\n\t\tpropText = Object.keys(ruleObj).map(prop => `${params.vendorize ? vendorize.call(this, prop)[0] : prop}: ${ruleObj[prop]}`).join(';');\r\n\t}\r\n\t_els.forEach(el => {\r\n\t\tif (params.scope === 'inline' || params.prepend) {\r\n\t\t\tvar style = el.getAttribute('style') || '';\r\n\t\t\tif (!params.prepend && !style.trim().endsWith(';')) {\r\n\t\t\t\tstyle = style + ';';\r\n\t\t\t}\r\n\t\t\tel.setAttribute('style', (params.prepend ? propText + style : style + propText));\r\n\t\t} else {\r\n\t\t\tvar style = el.style;\r\n\t\t\t_each(ruleObj, (prop, val) => {\r\n\t\t\t\tstyle.setProperty(params.vendorize ? vendorize.call(this, prop)[0] : prop, val);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\treturn this;\r\n}\r\n\r\n/**\r\n * Sets new CSS properties globally.\r\n *\r\n * @param Array|Element\t\tels\r\n * @param string|object\t\tnameOrProps\r\n * @param string|number\t\tval\r\n * @param object\t\t\tparams\r\n *\r\n * @return this\r\n */\r\nvar scratchPadEl, uuidCount = 0;\r\nexport function writeGlobal(els, nameOrProps, val = null, params = {}) {\r\n\tconst window  = getPlayUIGlobal.call(this, 'window');\r\n\tconst _els = getEls.call(this, els);\r\n\tparams = (_isObject(nameOrProps) ? val : params) || {};\r\n\tnameOrProps = _isObject(nameOrProps) ? nameOrProps : _objFrom(nameOrProps, val);\r\n\t// ------------\r\n\tvar sheet;\r\n\tif (params.noScratchPad) {\r\n\t\tsheet = _arrFrom(window.document.styleSheets).reduce((prev, current) => {\r\n\t\t\ttry {\r\n\t\t\t\t// Test we can modify this stylesheet due to CORS\r\n\t\t\t\tcurrent.cssRules;\r\n\t\t\t\tif (current.ownerNode.id !== 'Play-UI-Scratch-Pad') {\r\n\t\t\t\t\treturn current;\r\n\t\t\t\t}\r\n\t\t\t} catch(e) {}\r\n\t\t\treturn prev;\r\n\t\t}, null);\r\n\t\tif (!sheet) {\r\n\t\t\tthrow new Error(`No editable stylesheet in document. Consider allowing to use a \"scratchpad\" stylesheet.`)\r\n\t\t}\r\n\t}\r\n\tif (!sheet) {\r\n\t\tif (!scratchPadEl) {\r\n\t\t\tscratchPadEl = window.document.createElement('style');\r\n\t\t\twindow.document.head.appendChild(scratchPadEl);\r\n\t\t\tscratchPadEl.id = 'Play-UI-Scratch-Pad';\r\n\t\t}\r\n\t\tsheet = scratchPadEl.sheet;\r\n\t}\r\n\t// -------------------\r\n\tvar propText = Object.keys(nameOrProps).map(prop => `${params.vendorize ? vendorize.call(this, prop)[0] : prop}: ${nameOrProps[prop]}`).join(';');\r\n\t_els.forEach(el => {\r\n\t\tvar selector = deriveSelector.call(this, el, params);\r\n\t\tif (params.pseudo) {\r\n\t\t\tselector = `${selector}${params.pseudo}`;\r\n\t\t}\r\n\t\tsheet.insertRule(`${selector} {${propText}}`, params.prepend ? 0 : sheet.cssRules.length);\r\n\t});\r\n\t// -------------------\r\n\treturn this;\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isString, _isObject } from '@webqit/util/js/index.js';\r\nimport { getPlayUIGlobal } from '../util.js';\r\nimport cssSync from './cssSync.js';\r\n\r\n/**\r\n * The async type of css().\r\n *\r\n * @see css()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, ...args) {\r\n\tconst Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n\tconst reflowPhrase = (args.length > 1 && _isString(args[0])) || _isObject(args[0]) \r\n\t\t? 'onwrite' \r\n\t\t: 'onread';\r\n\treturn Reflow[reflowPhrase]((resolve, reject) => {\r\n\t\tresolve(cssSync.call(this, els, ...args));\r\n\t}, true/*withPromise*/);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isObject, _isNumeric } from '@webqit/util/js/index.js';\r\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\r\n\r\n/**\r\n * ----------------------------------------\r\n * Establishes an operatiom that can be rolledback\r\n * without altering similar operation by other code.\r\n * ----------------------------------------\r\n */\r\n \r\nexport default class Transaction {\r\n\r\n\t/**\r\n\t * Creates a new transaction instance.\r\n\t *\r\n\t * If a callback is provided, it synces the entire operation with Reflow's normal read/write cycles.\r\n\t *\r\n\t * @param Element\t\t\t\tel \r\n\t * @param string|array|object\tprops\r\n\t * @param function\t \t\t\treadCallback\r\n\t * @param function\t \t\t\twriteCallback\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(el, props, readCallback, writeCallback) {\r\n\t\tthis.el = el;\r\n\t\tthis.props = _arrFrom(props);\r\n\t\tthis.readCallback = readCallback;\r\n\t\tthis.writeCallback = writeCallback;\r\n\t\tthis.$savepoints = [];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Creates a savepoint that can be later rolled back to.\r\n\t *\r\n\t * @return Promise|mixed\r\n\t */\r\n\tsavepoint() {\r\n\t\tvar readerDisposition = this.readCallback(this.el, this.props);\r\n\t\tif (readerDisposition instanceof Promise) {\r\n\t\t\treturn readerDisposition.then(record => {\r\n\t\t\t\tif (_isObject(record)) {\r\n\t\t\t\t\tthis.$savepoints.push(record);\r\n\t\t\t\t}\r\n\t\t\t\treturn record;\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (_isObject(readerDisposition)) {\r\n\t\t\tthis.$savepoints.push(readerDisposition);\r\n\t\t\treturn readerDisposition;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Calls writeCallback.\r\n\t *\r\n\t * @param object\trecord\r\n\t * \r\n\t * @return Promise|mixed\r\n\t */\r\n\tapply(record) {\r\n\t\treturn this.writeCallback(this.el, record);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Marks recods a commited.\r\n\t *\r\n\t * @param int\tsavepoint\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tcommit(savepoint = 0) {\r\n\t\tfor (var i = 0; i <= savepoint && savepoint < this.$savepoints.length; i ++) {\r\n\t\t\tthis.$savepoints[i] = null;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Rolls the transaction back to a savepoint.\r\n\t *\r\n\t * @param int\tsavepoint\r\n\t * @param bool\tpreserveCurrentState\r\n\t *\r\n\t * @return void}Promise\r\n\t */\r\n\trollback(savepoint = 0, preserveCurrentState = false) {\r\n\t\tif (!_isNumeric(savepoint)) {\r\n\t\t\tthrow new Error('A valid transaction ID transaction must be provided!');\r\n\t\t}\r\n\t\t// -----------------------\r\n\t\tvar getRollbackData = currentState => {\r\n\t\t\tvar savepoints = this.$savepoints.splice(savepoint);\r\n\t\t\t// ToSavepoint is our target point\r\n\t\t\tvar toSavepoint = savepoints.shift();\r\n\t\t\tif (!toSavepoint) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t\t// FromSavepoint is our last point before current,\r\n\t\t\t// which we need to validate with current\r\n\t\t\tvar latestTransactionRecord = savepoints.pop();\r\n\t\t\tvar record = {};\r\n\t\t\t// Restore only what's applicable.\r\n\t\t\tthis.props.forEach(prop => {\r\n\t\t\t\t// We'll restore only values that have\r\n\t\t\t\t// NOT changed from what we earlier RECORDED...\r\n\t\t\t\tif (preserveCurrentState && latestTransactionRecord && currentState[prop] !== latestTransactionRecord[prop]) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// We'll restore only values that\r\n\t\t\t\t// HAVE changed from what we earlier RECORDED...\r\n\t\t\t\tif (currentState[prop] !== toSavepoint[prop]) {\r\n\t\t\t\t\trecord[prop] = toSavepoint[prop];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn record;\r\n\t\t};\r\n\t\t// -----------------------\r\n\t\tvar currentState = preserveCurrentState ? this.readCallback(this.el, this.props) : {};\r\n\t\tif (currentState instanceof Promise) {\r\n\t\t\treturn currentState.then(currentState => this.apply(getRollbackData(currentState)));\r\n\t\t}\r\n\t\treturn this.apply(getRollbackData(currentState));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns the number of pushes.\r\n\t *\r\n\t * @return int\r\n\t */\r\n\tget length() {\r\n\t\treturn this.$savepoints.length;\r\n\t}\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport Transaction from '../misc/classes/Transaction.js';\r\nimport { readInline } from './cssSync.js';\r\nimport cssAsync from './cssAsync.js';\r\nimport cssSync from './cssSync.js';\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Establishes a CSS operatiom that can be rolledback without altering similar operation by other code.\r\n *\r\n * @param Array|Element\t\t\tels\r\n * @param string|array\t\t\tprops\r\n * @param bool\t\t\t\t\tasyncWrites\r\n *\r\n * @return Transaction\r\n */\r\nexport default function(els, props, asyncWrites = false) {\r\n\tconst _el = getEls.call(this, els);\r\n\tconst cssModule = asyncWrites ? cssAsync : cssSync;\r\n\treturn new Transaction(_el[0], props, (el, props) => {\r\n\t\treturn readInline.call(this, el, props);\r\n\t}, (el, data) => {\r\n\t\treturn cssModule.call(this, el, data);\r\n\t});\r\n}\r\n", "/**\r\n * @imports\r\n */\r\nimport CSSOM from './CSSOM.js';\r\nimport CSSRule from './CSSRule.js';\r\nimport CSSValue from './CSSValue.js';\r\nimport QuadRule from './QuadRule.js';\r\nimport TransformRule from './TransformRule.js';\r\n\r\n/**\r\n * @exports\r\n */\r\nexport {\r\n    CSSOM,\r\n    CSSRule,\r\n    CSSValue,\r\n    QuadRule,\r\n    TransformRule,\r\n}", "/**\r\n * @imports\r\n */\r\nimport appendAsync from './appendAsync.js';\r\nimport appendSync from './appendSync.js';\r\nimport appendToAsync from './appendToAsync.js';\r\nimport appendToSync from './appendToSync.js';\r\nimport attrAsync from './attrAsync.js';\r\nimport attrSync from './attrSync.js';\r\nimport classSync from './classSync.js';\r\nimport classAsync from './classAsync.js';\r\nimport getTextNodes from './getTextNodes.js';\r\nimport htmlAsync from './htmlAsync.js';\r\nimport htmlSync from './htmlSync.js';\r\nimport prependAsync from './prependAsync.js';\r\nimport prependSync from './prependSync.js';\r\nimport prependToAsync from './prependToAsync.js';\r\nimport prependToSync from './prependToSync.js';\r\nimport itemize from './itemize.js';\r\nimport textAsync from './textAsync.js';\r\nimport textSync from './textSync.js';\r\n\r\n/**\r\n * @exports\r\n */\r\nexport {\r\n    appendAsync,\r\n    appendSync,\r\n    appendToAsync,\r\n    appendToSync,\r\n    attrAsync,\r\n    attrSync,\r\n    classSync,\r\n    classAsync,\r\n    getTextNodes,\r\n    htmlAsync,\r\n    htmlSync,\r\n    prependAsync,\r\n    prependSync,\r\n    prependToAsync,\r\n    prependToSync,\r\n    itemize,\r\n    textAsync,\r\n    textSync,\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isUndefined } from '@webqit/util/js/index.js';\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Appends new content.\r\n *\r\n * @param array \t\t\t\t...args\r\n *\r\n * @return this\r\n */\r\nexport default function(els, ...args) {\r\n\tif (_isUndefined(args[0])) {\r\n\t\targs[0] = '';\r\n\t}\r\n\tgetEls.call(this, els).forEach(el => {\r\n\t\tel.append(...args); \r\n\t});\r\n\treturn this; \r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { getPlayUIGlobal } from '../util.js';\r\nimport domAppend from './appendSync.js';\r\n\r\n/**\r\n * The async type of domAppend().\r\n *\r\n * @see domAppend()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, ...args) {\r\n\tconst Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n\treturn Reflow.onwrite((resolve, reject) => {\r\n\t\tresolve(domAppend.call(this, els, ...args));\r\n\t}, true/*withPromise*/);\r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Appends matched to targets.\r\n *\r\n * @param Array|Element\t\t\tels\r\n * @param Array|Element\t\t\ttargets\r\n *\r\n * @return this\r\n */\r\nexport default function(els, targets) {\r\n\tconst _els = getEls.call(this, els);\r\n\tconst _targets = getEls.call(this, targets);\r\n\t_targets.forEach((target, i) => {\r\n\t\tvar __els = _els;\r\n\t\tif (i < _targets.length - 1) {\r\n\t\t\t__els = _els.map(el => el.cloneNode(true));\r\n\t\t}\r\n\t\t__els.forEach(el => {\r\n\t\t\ttarget.append(el); \r\n\t\t});\r\n\t});\r\n\treturn this; \r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { getPlayUIGlobal } from '../util.js';\r\nimport domAppendTo from './appendToSync.js';\r\n\r\n/**\r\n * The async type of domAppendTo().\r\n *\r\n * @see domAppendTo()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, ...args) {\r\n\tconst Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n\treturn Reflow.onwrite((resolve, reject) => {\r\n\t\tresolve(domAppendTo.call(this, els, ...args));\r\n\t}, true/*withPromise*/);\r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport {\r\n\t_intersect, _unique, _from as _arrFrom\r\n} from '@webqit/util/arr/index.js';\r\nimport { _isString, _isArray, _isObject } from '@webqit/util/js/index.js';\r\nimport { _each, _from as _objFrom } from '@webqit/util/obj/index.js';\r\nimport { _toCamel } from '@webqit/util/str/index.js';\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Gets an attribute or a list of attributes,\r\n * or sets an attribute or a list of attributes.\r\n *\r\n * @param Array|Element\t\t\tels\r\n * @param string|array|object\trequestOrPayload\r\n * @param string|bool|void\t\tvalOrStateOrTokens\r\n * @param bool|void\t\t\t\ttokensState\r\n *\r\n * @return mixed\r\n */\r\nexport default function(els, requestOrPayload, valOrStateOrTokens = null, tokensState = null) {\r\n\tconst _els = getEls.call(this, els);\r\n\tif (arguments.length === 2) {\r\n\t\tif (_isString(requestOrPayload)) {\r\n\t\t\treturn _els[0].getAttribute(requestOrPayload);\r\n\t\t}\r\n\t\tif (_isArray(requestOrPayload)) {\r\n\t\t\tvar vals = {};\r\n\t\t\trequestOrPayload.forEach(request => {\r\n\t\t\t\tvals[request] = _els[0].getAttribute(request);\r\n\t\t\t});\r\n\t\t\treturn vals;\r\n\t\t}\r\n\t}\r\n\tvar payload;\r\n\tif (_isObject(requestOrPayload)) {\r\n\t\tpayload = requestOrPayload;\r\n\t} else if (arguments.length === 4) {\r\n\t\tpayload = {[requestOrPayload]/* attr name */: {\r\n\t\t\t[_arrFrom(valOrStateOrTokens).reduce((list, c) => list.concat(c.split(' ')), []).join(' ')]/* tokens */: tokensState/* tokens state */\r\n\t\t}};\r\n\t} else {\r\n\t\t// arguments.length === 3\r\n\t\tpayload = _arrFrom(requestOrPayload/* attr name(s) */).reduce((_payload, name) => (_payload[name] = valOrStateOrTokens, _payload), {});\r\n\t}\r\n\t_els.forEach(el => {\r\n\t\t_each(payload, (name, valOrStateOrTokens) => {\r\n\t\t\tif (_isObject(valOrStateOrTokens)) {\r\n\t\t\t\t// Tokens Config\r\n\t\t\t\tvar currentVal = el.getAttribute(name);\r\n\t\t\t\tvar currentValArray = currentVal ? currentVal.split(' ').map(val => val.trim()).filter(a => a) : [];\r\n\t\t\t\t// -----------------------\r\n\t\t\t\t// Add or remove\r\n\t\t\t\t// -----------------------\r\n\t\t\t\tvar newValueArray = currentValArray;\r\n\t\t\t\t_each(valOrStateOrTokens, (tokens, state) => {\r\n\t\t\t\t\ttokens = tokens.split(' ').map(a => a.trim()).filter(a => a);\r\n\t\t\t\t\tif (!state) {\r\n\t\t\t\t\t\tnewValueArray = newValueArray.filter(t => {\r\n\t\t\t\t\t\t\tfor (let _t of tokens) {\r\n\t\t\t\t\t\t\t\tif (t === _t || (_t.endsWith('-') && t.startsWith(_t))) return false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewValueArray = _unique(newValueArray.concat(tokens));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (!(newValueArray.length === currentValArray.length === _intersect(newValueArray, currentValArray).length)) {\r\n\t\t\t\t\tel.setAttribute(name, newValueArray.join(' '));\r\n\t\t\t\t}\r\n\t\t\t} else if (valOrStateOrTokens === false) {\r\n\t\t\t\t// State: false\r\n\t\t\t\tel.removeAttribute(name);\r\n\t\t\t} else if (valOrStateOrTokens === true) {\r\n\t\t\t\t// State: true\r\n\t\t\t\tel.setAttribute(name, 'true');\r\n\t\t\t} else { \r\n\t\t\t\t// Val\r\n\t\t\t\tel.setAttribute(name, valOrStateOrTokens);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\treturn this;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport domAttr from './attrSync.js';\r\nimport { getPlayUIGlobal } from '../util.js';\r\n\r\n/**\r\n * The async type of domAttr().\r\n *\r\n * @see domAttr()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, requestOrPayload, valOrMutation = null, subValMutation = null) {\r\n\tconst Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n\tif (arguments.length === 2) {\r\n\t\treturn Reflow.onwrite(resolve => {\r\n\t\t\tresolve(domAttr.call(this, ...arguments));\r\n\t\t}, true/*withPromise*/);\r\n\t}\r\n\treturn Reflow.onread(resolve => {\r\n\t\tresolve(domAttr.call(this, ...arguments));\r\n\t}, true/*withPromise*/);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _intersect, _from as _arrFrom } from '@webqit/util/arr/index.js';\r\nimport { _isObject } from '@webqit/util/js/index.js';\r\nimport attrSync from './attrSync.js';\r\n\r\n/**\r\n * A derivative of attrSync().\r\n *\r\n * @see attrSync()\r\n *\r\n * @return mixed\r\n */\r\nexport default function(els, ...args) {\r\n\tif (arguments.length === 2 && !_isObject(args[0])) {\r\n\t\tvar imputClassList = _arrFrom(args[0]).reduce((list, c) => list.concat(c.split(' ')), []).map(a => a.trim()).filter(a => a);\r\n\t\tvar classList = getEls.call(this, els)[0].getAttribute('class');\r\n\t\treturn classList ? _intersect(classList.split(' ').map(a => a.trim()).filter(a => a), imputClassList).length === imputClassList.length : false;\r\n\t}\r\n\treturn attrSync.call(this, els, 'class', ...args);\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport attrAsync from './attrAsync.js';\r\n\r\n/**\r\n * A derivative of attrSync().\r\n *\r\n * @see attrAsync()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, ...args) {\r\n\treturn attrAsync.call(this, els, 'class', ...args);\r\n};", "\r\n/**\r\n * @imports \r\n */\r\nimport { getPlayUIGlobal, getEls } from '../util.js';\r\n\r\n/**\r\n * Returns all, only text nodes.\r\n *\r\n * @param Array|Element \t\t\tels\r\n *\r\n * @return array\r\n */\r\nexport default function(els) {\r\n\tconst window  = getPlayUIGlobal.call(this, 'window');\r\n\t// Filter\r\n\tvar rejectScriptTextFilter = {\r\n\t\tacceptNode: function(node) {\r\n\t\t\tif (node.parentNode.nodeName !== 'SCRIPT') {\r\n\t\t\t\treturn window.NodeFilter.FILTER_ACCEPT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t// Walker\r\n\tvar textNodes = [];\r\n\tgetEls.call(this, els).forEach(el => {\r\n\t\tvar walker = window.document.createTreeWalker(el, window.NodeFilter.SHOW_TEXT, rejectScriptTextFilter, false);\r\n\t\tvar node;\r\n\t\twhile(node = walker.nextNode()) {\r\n\t\t\ttextNodes.push(node.nodeValue);\r\n\t\t}\r\n\t});\r\n\treturn textNodes;\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isString, _isUndefined } from '@webqit/util/js/index.js';\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Sets or gets HTML content.\r\n *\r\n * @param string|HTMLElement\tcontent\r\n *\r\n * @return void|string\r\n */\r\nexport default function(els, content = null) {\r\n\tconst _els = getEls.call(this, els);\r\n\tif (arguments.length > 1) {\r\n\t\t_els.forEach(el => {\r\n\t\t\tif (_isString(content)) {\r\n\t\t\t\tel.innerHTML = content;\r\n\t\t\t} else {\r\n\t\t\t\tel.innerHTML = '';\r\n\t\t\t\tif (!_isUndefined(content)) {\r\n\t\t\t\t\tel.append(content);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\treturn _els[0].innerHTML;  \r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport domHtml from './htmlSync.js';\r\nimport { getPlayUIGlobal } from '../util.js';\r\n\r\n/**\r\n * The async type of domHtml().\r\n *\r\n * @see domHtml()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, write = null) {\r\n\tlet Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n\tif (arguments.length > 1) {\r\n\t\treturn Reflow.onwrite((resolve, reject) => {\r\n\t\t\tresolve(domHtml.call(this, ...arguments));\r\n\t\t}, true/*withPromise*/);\r\n\t}\r\n\treturn Reflow.onread((resolve, reject) => {\r\n\t\tresolve(domHtml.call(this, ...arguments));\r\n\t}, true/*withPromise*/);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isUndefined } from '@webqit/util/js/index.js';\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Appends new content.\r\n *\r\n * @param array \t\t\t\t...args\r\n *\r\n * @return this\r\n */\r\nexport default function(els, ...args) {\r\n\tif (_isUndefined(args[0])) {\r\n\t\targs[0] = '';\r\n\t}\r\n\tgetEls.call(this, els).forEach(el => {\r\n\t\tel.prepend(...args); \r\n\t});\r\n\treturn this; \r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport domPrepend from './prependSync.js';\r\nimport { getPlayUIGlobal } from '../util.js';\r\n\r\n/**\r\n * The async type of domPrepend().\r\n *\r\n * @see domAppend()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, ...args) {\r\n\tconst Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n\treturn Reflow.onwrite((resolve, reject) => {\r\n\t\tresolve(domPrepend.call(this, els, ...args));\r\n\t}, true/*withPromise*/);\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Appends matched to targets.\r\n *\r\n * @param Array|Element\t\t\tels\r\n * @param Array|Element\t\t\ttargets\r\n *\r\n * @return this\r\n */\r\nexport default function(els, targets) {\r\n\tconst _els = getEls.call(this, els);\r\n\tconst _targets = getEls.call(this, targets);\r\n\t_targets.forEach((target, i) => {\r\n\t\tvar __els = _els;\r\n\t\tif (i < _targets.length - 1) {\r\n\t\t\t__els = _els.map(el => el.cloneNode(true));\r\n\t\t}\r\n\t\t__els.forEach(el => {\r\n\t\t\ttarget.prepend(el); \r\n\t\t});\r\n\t});\r\n\treturn this; \r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { getPlayUIGlobal } from '../util.js';\r\nimport domPrependTo from './prependToSync.js';\r\n\r\n/**\r\n * The async type of domPrependTo().\r\n *\r\n * @see domPrependTo()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, ...args) {\r\n\tconst Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n\treturn Reflow.onwrite((resolve, reject) => {\r\n\t\tresolve(domPrependTo.call(this, els, ...args));\r\n\t}, true/*withPromise*/);\r\n}\r\n", "\r\n/**\r\n * @_import\r\n */\r\nimport { _isTypeObject, _isFunction, _isNumeric, _isEmpty, _isArray } from '@webqit/util/js/index.js';\r\nimport { _following, _mid, _from as _arrFrom } from '@webqit/util/arr/index.js';\r\nimport { _each } from '@webqit/util/obj/index.js';\r\nimport { getPlayUIGlobal, getEls } from '../util.js';\r\nimport _internals from '@webqit/util/js/internals.js';\r\n\r\n/**\r\n * Binds a (reactive) list context to the instance.\r\n * Childnodes will be automatically created/removed per key.\r\n *\r\n * @param Array|Element \t\tels\r\n * @param array \t\t        items\r\n * @param Object \t\t        params\r\n *\r\n * @return this\r\n */\r\nexport default function list(els, items, params = {}) {\r\n    const window = getPlayUIGlobal.call(this, 'window');\r\n    const Observer = getPlayUIGlobal.call(this, 'Observer');\r\n    const Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n    const OOHTML = getPlayUIGlobal.call(this, 'OOHTML');\r\n    const itemIndexAttribute = params.itemIndexAttribute || 'data-index';\r\n    // -----------------\r\n    let fireCallback = ( callback, ...args ) => {\r\n        try { return callback( ...args );  } catch( e ) {}\r\n    };\r\n    const _set = (el, templateExportsObject, itemExportId, key, itemData, isUpdate) => {\r\n        var itemEl;\r\n        if (isUpdate && el.children.length) {\r\n            itemEl = childSelector(el, '[' + itemIndexAttribute + '=\"' + key + '\"]');\r\n        } \r\n        if (!itemEl) {\r\n            // --------------\r\n            var exports;\r\n            if (_isFunction(itemExportId)) {\r\n                exports = itemExportId(itemData, templateExportsObject);\r\n            } else if (\r\n            (!itemExportId || _isEmpty(exports = templateExportsObject[itemExportId])) \r\n            && _isEmpty(exports = templateExportsObject[key])\r\n            && (_isNumeric(key) && _isEmpty(exports = templateExportsObject['#']))\r\n            ) {\r\n                exports = templateExportsObject['default'];\r\n            }\r\n            // --------------\r\n            if (!_isEmpty(exports)) {\r\n                itemEl = exports[0].cloneNode(true);\r\n                var existing = {};\r\n                _arrFrom(el.children).forEach(_el => {\r\n                    existing[_el.getAttribute(itemIndexAttribute)] = _el;\r\n                })\r\n                var following = _following(Object.keys(existing), key + ''/*numeric key needs this*/, true/*length*/)\r\n                    .reduce((closest, _key) => closest || existing[_key], null);\r\n                if (following) {\r\n                    following.before(itemEl);\r\n                } else {\r\n                    el.append(itemEl);\r\n                }\r\n                itemEl.setAttribute(itemIndexAttribute, key);\r\n            }\r\n        }\r\n        if (itemEl) {\r\n            if (!(_isFunction(params.renderCallback) && fireCallback(params.renderCallback, 'render', itemEl, itemData, key, isUpdate) === false)) {\r\n                if (_isTypeObject(itemData)) {\r\n                    let setState = OOHTML.meta.get('api.setState');\r\n                    itemEl[setState](itemData);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    // -----------------\r\n    const _del = (el, key, oldValue) => {\r\n        var itemEl = childSelector(el, '[' + itemIndexAttribute + '=\"' + key + '\"]');\r\n        if (itemEl) {\r\n            var rspns;\r\n            if (!(_isFunction(params.renderCallback) && fireCallback(params.renderCallback, 'unrender', itemEl, oldValue, key) === false)) {\r\n                let clearState = OOHTML.meta.get('api.clearState');\r\n                itemEl[clearState]();\r\n            }\r\n            var remove = () => itemEl.remove();\r\n            if (rspns instanceof Promise) {\r\n                rspns.then(remove).catch(remove);\r\n            } else {\r\n                remove();\r\n            }\r\n        }\r\n    };\r\n    getEls.call(this, els).forEach(el => {\r\n        const previousBindings = _internals(el, 'play-ui').get('list-bindings');   \r\n        if (params.clearDOM) {\r\n            childSelectorAll(el, '[' + itemIndexAttribute + ']').forEach(_el => _el.remove());\r\n        } else if (previousBindings) {\r\n            _each(previousBindings, (key, data) => {\r\n                if (!_isTypeObject(items) || !(key in items)) {\r\n                    var itemEl = childSelector(el, '[' + itemIndexAttribute + '=\"' + key + '\"]');\r\n                    if (itemEl) itemEl.remove();\r\n                }\r\n            });\r\n        }\r\n        let moduleref = el.getAttribute(OOHTML.meta.get('attr.moduleref')),\r\n            itemExportId = params.itemExportId || ((moduleref || '').includes('#') ? moduleref.split('#')[1] : null);\r\n        let templateEl = el[OOHTML.meta.get('api.moduleref')];\r\n        let templateExportsObject = templateEl ? templateEl[OOHTML.meta.get('api.exports')] : null;\r\n        if (!templateEl || !templateExportsObject || !_isTypeObject(items)) {\r\n            return;\r\n        }\r\n        // -----------------\r\n        var isUpdate = childSelector(el, '[' + itemIndexAttribute + ']') ? true : false;\r\n        _each(items, (key, item) => _set(el, templateExportsObject, itemExportId, key, item, isUpdate));\r\n        if (params.live !== false && Observer.observe) {\r\n            if (previousBindings) {\r\n                Observer.unobserve(previousBindings, null, null, {tags: ['#playui-list', list, this]});\r\n            }\r\n            Observer.observe(items, mutations => {\r\n                mutations.forEach(mutation => {\r\n                    if (_isArray(items) && mutation.name === 'length') {\r\n                        return;\r\n                    }\r\n                    if (mutation.type === 'deleteProperty') {\r\n                        _del(el, mutation.name, mutation.oldValue);\r\n                    } else if (mutation.type === 'set' || mutation.type === 'defineProperty') {\r\n                        _set(el, templateExportsObject, itemExportId, mutation.name, mutation.value, mutation.isUpdate);\r\n                    }\r\n                });\r\n            }, {tags: ['#playui-list', list, this]});\r\n            _internals(el, 'play-ui').set('list-bindings', items);\r\n        }\r\n        // -----------------\r\n        if (params.overflowCallback) {\r\n            var normalizationState, collapsed = new Map;\r\n            var reflow = async (contentRect = null, boundingRect = null, isRerun = false) => {\r\n                // ---------------\r\n                var uncollapsed = Object.values(items).filter(item => !collapsed.has(item));\r\n                if (!isRerun && _isFunction(params.overflowContainerCallback)) {\r\n                    var shouldContinue = await fireCallback(params.overflowContainerCallback, true, el, uncollapsed.length, collapsed.size);\r\n                    if (shouldContinue === false) {\r\n                        return;\r\n                    }\r\n                }\r\n                // ---------------\r\n                if (!contentRect || !boundingRect) {\r\n                    // Block nw ResizeObserver events\r\n                    normalizationState = normalizationState || true;\r\n                    // Read rects performantly\r\n                    await Reflow.onread(resolve => {\r\n                        if (params.parentalOverflowBounds !== false) {\r\n                            boundingRect = boundingRect || el.parentNode.getBoundingClientRect();\r\n                            contentRect = contentRect || el.getBoundingClientRect();\r\n                        } else {\r\n                            boundingRect = boundingRect || el.getBoundingClientRect();\r\n                            contentRect = {width: el.scrollWidth, height: el.scrollHeight};\r\n                            // If there's a chance contentRect is smaller than what scrollWidth and scrollHeight can tell\r\n                            if ((params.orientation === 'vertical' && boundingRect.height === contentRect.height)\r\n                            || (params.orientation !== 'vertical' && boundingRect.width === contentRect.width)) {\r\n                                contentRect = uncollapsed.reduce((rect, item) => {\r\n                                    var itemRect = itemDetails(item).el.getBoundingClientRect();\r\n                                    return {\r\n                                        width: rect.width + itemRect.width,\r\n                                        height: rect.height + itemRect.height,\r\n                                    };\r\n                                }, {width: 0, height: 0});\r\n                            }\r\n                        }\r\n                        resolve();\r\n                    }, true/* withPromise */);\r\n                }\r\n                // ---------------\r\n                // Compare rects\r\n                var currentContainerSize, currentElSize;\r\n                if (params.orientation === 'vertical') {\r\n                    currentContainerSize = boundingRect.height;\r\n                    currentElSize = contentRect.height;\r\n                } else {\r\n                    currentContainerSize = boundingRect.width;\r\n                    currentElSize = contentRect.width;\r\n                }\r\n                // ---------------\r\n                // Reflow...\r\n                if (currentElSize > currentContainerSize) {\r\n                    normalizationState = 'collapsing';\r\n                    var _item = params.collapsionPoint === 'start' ? uncollapsed.shift() \r\n                        : (params.collapsionPoint === 'center' || params.collapsionPoint === 'center-start' ? _mid(uncollapsed) \r\n                            : (params.collapsionPoint === 'center-end' ? _mid(uncollapsed, true).pop() : uncollapsed.pop()));\r\n                    if (_item) {\r\n                        // --------\r\n                        // Save collapsion_size\r\n                        var _itemDetails = itemDetails(_item);\r\n                        await Reflow.onread(resolve => {\r\n                            var itemRect = _itemDetails.el.getBoundingClientRect();\r\n                            collapsed.set(_item, params.orientation === 'vertical' ? itemRect.height : itemRect.width);\r\n                            resolve();\r\n                        }, true/* withPromise */);\r\n                        // --------\r\n                        await fireCallback(params.overflowCallback, 'collapse', _itemDetails.el, _item, _itemDetails.key, collapsed.size);\r\n                    } else {\r\n                        normalizationState = null;\r\n                    }\r\n                } else if (currentElSize < currentContainerSize) {\r\n                    if (normalizationState === 'collapsing') {\r\n                        normalizationState = null;\r\n                    } else if (collapsed.size) {\r\n                        normalizationState = 'restoring';\r\n                        var _item, _itemDetails, keysIterator = collapsed.keys(), keysIteratorCurrent;\r\n                        while((keysIteratorCurrent = keysIterator.next()) && !keysIteratorCurrent.done) {\r\n                            _item = keysIteratorCurrent.value;\r\n                        }\r\n                        var allowance = currentContainerSize - currentElSize;\r\n                        if (allowance >= collapsed.get(_item)/* collapsion_size */ && (_itemDetails = itemDetails(_item))) {\r\n                            collapsed.delete(_item);\r\n                            await fireCallback(params.overflowCallback, 'restore', _itemDetails.el, _item, _itemDetails.key, collapsed.size);\r\n                        } else {\r\n                            normalizationState = null;\r\n                        }\r\n                    } else {\r\n                        normalizationState = null;\r\n                    }\r\n                } else {\r\n                    normalizationState = null;\r\n                }\r\n                // ---------------\r\n                // Loop until no more normalizing\r\n                if (normalizationState) {\r\n                    await reflow(null, null, true);\r\n                } else if (_isFunction(params.overflowContainerCallback)) {\r\n                    await fireCallback(params.overflowContainerCallback, false, el, uncollapsed.length, collapsed.size);\r\n                }\r\n            };\r\n            // ---------------\r\n            const itemDetails = item => Object.keys(items).reduce((result, key) => result || (items[key] === item ? {\r\n                el: childSelector(el, '[' + itemIndexAttribute + '=\"' + key + '\"]'),\r\n                key,\r\n            } : null), null);\r\n            // ---------------\r\n            var initialCall = true;\r\n            observeResize(window, el, params.parentalOverflowBounds !== false ? el.parentNode : el, rect => {\r\n                if (!initialCall && normalizationState) { return; }\r\n                initialCall = false;\r\n                reflow(null, rect);\r\n            });\r\n            setTimeout(() => {\r\n                if (previousBindings && !normalizationState) {\r\n                    reflow();\r\n                }\r\n            }, 0);\r\n        }\r\n    });\r\n    return this;\r\n}\r\n\r\n/**\r\n * Helper\r\n * \r\n * @param Element   el \r\n * @param String    selector \r\n * \r\n * @return object\r\n */\r\nexport const childSelector = (el, selector) => {\r\n    return _arrFrom(el.children).reduce((match, child) => match || (child.matches(selector) ? child : null), null);\r\n}\r\nexport const childSelectorAll = (el, selector) => {\r\n    return _arrFrom(el.children).filter(child => child.matches(selector));\r\n}\r\n\r\n/**\r\n * @observeResize\r\n * \r\n * @param Element   el \r\n * @param Function  callback \r\n * \r\n * @return object\r\n */\r\nvar sharedResizeObserver, callbacksList;\r\nfunction observeResize(window, referenceElement, boundsElement, callback) {\r\n    if (!sharedResizeObserver) {\r\n        if (!window.ResizeObserver) {\r\n            return;\r\n        }\r\n        callbacksList = new Map;\r\n        sharedResizeObserver = new window.ResizeObserver(entries => {\r\n            entries.forEach(entry => {\r\n                callbacksList.get(entry.target).forEach(callback => callback(entry.contentRect));\r\n            });\r\n        });\r\n    }\r\n    let callbackGroup = callbacksList.get(boundsElement);\r\n    if (!callbackGroup) {\r\n        sharedResizeObserver.observe(boundsElement);\r\n        callbackGroup = new Map;\r\n        callbacksList.set(boundsElement, callbackGroup);\r\n    }\r\n    callbackGroup.set(referenceElement, callback);\r\n};\r\n", "\r\n/**\r\n * @_import\r\n */\r\nimport list from '../data/list.js';\r\nexport default list;\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isUndefined } from '@webqit/util/js/index.js';\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Sets or gets text content.\r\n *\r\n * @param string \t\t\t\tcontent\r\n *\r\n * @return void|string\r\n */\r\nexport default function(els, content = null) {\r\n\tconst _els = getEls.call(this, els);\r\n\tif (arguments.length > 1) {\r\n\t\tif (_isUndefined(content)) {\r\n\t\t\tcontent = '';\r\n\t\t}\r\n\t\t_els.forEach(el => {\r\n\t\t\tel.innerText = content;\r\n\t\t})\r\n\t\treturn this;\r\n\t}\r\n\treturn _els[0].innerText;  \r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport domText from './textSync.js';\r\nimport { getPlayUIGlobal } from '../util.js';\r\n\r\n/**\r\n * The async type of domText().\r\n *\r\n * @see domText()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(els, write = null) {\r\n\tconst Reflow = getPlayUIGlobal.call(this, 'reflow');\r\n\tif (arguments.length > 1) {\r\n\t\treturn Reflow.onwrite(resolve => {\r\n\t\t\tresolve(domText.call(this, ...arguments));\r\n\t\t}, true/*withPromise*/);\r\n\t}\r\n\treturn Reflow.onread(resolve => {\r\n\t\tresolve(domText.call(this, ...arguments));\r\n\t}, true/*withPromise*/);\r\n};\r\n", "/**\r\n * @imports\r\n */\r\nimport data from './data.js';\r\nimport list from './list.js';\r\nimport form from './form.js';\r\n\r\n/**\r\n * @exports\r\n */\r\nexport {\r\n    data,\r\n    list,\r\n    form,\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isString, _isArray, _isObject, _isUndefined } from '@webqit/util/js/index.js';\r\nimport { _each, _from as _objFrom } from '@webqit/util/obj/index.js';\r\nimport { _internals } from '@webqit/util/js/index.js';\r\nimport { getEls } from '../util.js';\r\n\r\n/**\r\n * Gets or sets custom data.\r\n *\r\n * @param Array|Element\t\t\tels\r\n * @param string|array|object\trequestOrPayload\r\n * @param mixed|void\t\t\tval\r\n *\r\n * @return mixed\r\n */\r\nexport default function(els, requestOrPayload, val = null) {\r\n\tconst _els = getEls.call(this, els);\r\n\tif (arguments.length === 1 || (\r\n\t\targuments.length === 2 && (_isString(requestOrPayload) || _isArray(requestOrPayload))\r\n\t)) {\r\n\t\tconst playUiStub = _internals(_els[0], 'play-ui', 'data');\r\n\t\t// ------------------\r\n\t\t// Retrieve single prop\r\n\t\tif (_isString(requestOrPayload)) {\r\n\t\t\treturn playUiStub.get(requestOrPayload);\r\n\t\t}\r\n\t\t// ------------------\r\n\t\t// Retrieve all props\r\n\t\tif (arguments.length === 1) {\r\n\t\t\trequestOrPayload = playUiStub.keys();\r\n\t\t}\r\n\t\t// ------------------\r\n\t\t// Retrieve listed props\r\n\t\tif (_isArray(requestOrPayload)) {\r\n\t\t\tvar vals = {};\r\n\t\t\trequestOrPayload.forEach(key => {\r\n\t\t\t\tvals[key] = playUiStub.get(key);\r\n\t\t\t});\r\n\t\t\treturn vals;\r\n\t\t}\r\n\t}\r\n\r\n\tvar payload = requestOrPayload;\r\n\tif (!_isObject(requestOrPayload)) {\r\n\t\tpayload = _objFrom(requestOrPayload, val);\r\n\t}\r\n\t_els.forEach(el => {\r\n\t\tconst playUiStub = _internals(el, 'play-ui', 'data');\r\n\t\t_each(payload, (key, val) => {\r\n\t\t\t// ------------------\r\n\t\t\t// Unset prop?\r\n\t\t\tif (_isUndefined(val)) {\r\n\t\t\t\tplayUiStub.delete(key);\r\n\t\t\t}\r\n\t\t\t// ------------------\r\n\t\t\t// Set prop\r\n\t\t\telse {\r\n\t\t\t\tplayUiStub.set(key, val);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\treturn this;\r\n}", "\r\n/**\r\n * @_import\r\n */\r\nimport { _isFunction } from '@webqit/util/js/index.js';\r\nimport list from './list.js';\r\n\r\n/**\r\n * Binds a (reactive) form context to the instance.\r\n * Childnodes will be automatically created/removed per key.\r\n *\r\n * @param Array|Element \t\tels\r\n * @param Object|Array \t\t    entries\r\n * @param Object \t\t        params\r\n *\r\n * @return this\r\n */\r\nexport default function form(els, entries, params = {}) {\r\n    const _params = { ...params };\r\n    _params.itemExportId = (entry, templateExportsObject) => {\r\n        if (_isFunction(params.itemExportId)) {\r\n            return params.itemExportId(entry, templateExportsObject);\r\n        }\r\n        return templateExportsObject[entry.display.type];\r\n    };\r\n    return list(els, entries, _params);\r\n}", "/**\r\n * @imports\r\n */\r\nimport transaction from './transaction.js';\r\nimport * as classes from './classes/index.js';\r\n\r\n/**\r\n * @exports\r\n */\r\nexport {\r\n    transaction,\r\n    classes,\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport Transaction from './classes/Transaction.js';\r\n\r\n/**\r\n * Creates and returns an instance of Transaction for the first element in the set.\r\n *\r\n * @param Array|Element\t\t\tels\r\n * @param String|Array          props\r\n * @param Function\t\t\t    readCallback\r\n * @param Function\t\t\t    writeCallback\r\n *\r\n * @return Transaction\r\n */\r\nexport default function(els, props, readCallback, writeCallback) {\r\n    const _el = getEls.call(this, els)[0];\r\n    return new Transaction(_el, props, readCallback, writeCallback);\r\n}", "/**\r\n * @imports\r\n */\r\nimport Transaction from './Transaction.js';\r\n\r\n/**\r\n * @exports\r\n */\r\nexport {\r\n    Transaction,\r\n}", "/**\r\n * @imports\r\n */\r\nimport CustomEvents from './interaction/CustomEvents.js';\r\nimport off from './interaction/off.js';\r\nimport on from './interaction/on.js';\r\nimport play from './animation/play.js';\r\nimport rect from './vector/rect.js';\r\nimport trigger from './interaction/trigger.js';\r\n\r\nexport {\r\n    CustomEvents,\r\n    off,\r\n    on,\r\n    play,\r\n    rect,\r\n    trigger,\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _from as _objFrom } from '@webqit/util/obj/index.js';\r\n\r\n/**\r\n * ---------------------------\r\n * Custom events\r\n * ---------------------------\r\n *\r\n * @var object\r\n */\t\t\t\t\r\nconst CustomEvents = {};\r\n\r\n/**\r\n * Multitap events\r\n */\r\nconst Multitap = class {\r\n\t\r\n\t/**\r\n\t * Binds all multitap events.\r\n\t */\r\n\tsetup(el, eventName, fireCallback, hammertime) {\r\n\t\tif (!WebQit.DOM.window.Hammer) {\r\n\t\t\tthrow new Error('The Hammerjs library is needed to use the ' + eventName + ' gesture.');\r\n\t\t}\r\n\t\t// --------------------------\r\n\t\tthis.el = el;\r\n\t\tthis.eventName = eventName;\r\n\t\tthis.fireCallback = fireCallback;\r\n\t\tthis.hammertime = hammertime;\r\n\t\t// --------------------------\r\n\t\tvar allSetup = true;\r\n\t\tvar recognizers = MultitapEvents.map((tapType, i) => {\r\n\t\t\tvar recognizer = this.hammertime.get(tapType);\r\n\t\t\tif (!recognizer) {\r\n\t\t\t\tallSetup = false;\r\n\t\t\t\trecognizer = new ENV.window.Hammer.Tap({\r\n\t\t\t\t\tevent: tapType,\r\n\t\t\t\t\ttaps: MultitapEvents.length - i,\r\n\t\t\t\t});\r\n\t\t\t\tthis.hammertime.add(recognizer);\r\n\t\t\t}\r\n\t\t\treturn recognizer;\r\n\t\t});\r\n\t\tif (!allSetup) {\r\n\t\t\t// From left to right, recognizeWith all others ahead\r\n\t\t\tvar recgzr, recgzrs = recognizers.slice();\r\n\t\t\twhile((recgzr = recgzrs.shift()) && recgzrs.length) {\r\n\t\t\t\trecgzr.recognizeWith(recgzrs);\r\n\t\t\t}\r\n\t\t\t// From right to left, recognizeWith all others behind\r\n\t\t\tvar recgzr2, recgzrs2 = recognizers.slice();\r\n\t\t\twhile((recgzr2 = recgzrs2.pop()) && recgzrs2.length) {\r\n\t\t\t\trecgzr2.requireFailure(recgzrs2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.hammertime.on(this.eventName, this.fireCallback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Unbinds all multitap events.\r\n\t */\r\n\tteardown() {\r\n\t\tthis.hammertime.off(this.eventName);\r\n\t}\r\n};\r\n\r\n/**\r\n * Now additional taps is achieved by\r\n * simply prepending to this array.\r\n */\r\nconst MultitapEvents = ['tripletap', 'doubletap', 'singletap'];\r\n// Add all to CustomEvents\r\nMultitapEvents.forEach(event => {\r\n\tCustomEvents[event] = Multitap;\r\n});\r\n\r\n/**\r\n * @exports\r\n */\r\nexport {\r\n\tCustomEvents as default,\r\n\tMultitap\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isTypeObject, _isFunction, _getType, _internals } from '@webqit/util/js/index.js';\r\n\r\n/**\r\n * Returns an subject's firebase.\r\n *\r\n * @param array|object\tsubject\r\n * @param string      \tfirebaseKey\r\n * @param object      \tBase\r\n *\r\n * @return Firebase\r\n */\r\nexport default function(subject, firebaseKey, Base = null) {\r\n    if (!_isTypeObject(subject)) {\r\n        throw new Error('Subject must be of type object; \"' + _getType(subject) + '\" given!');\r\n    }\r\n    var firebase, playUiStub = _internals(subject, 'play-ui');\r\n    if (!(firebase = playUiStub.get(firebaseKey)) && Base) {\r\n        firebase = new Base(subject);\r\n        playUiStub.set(firebaseKey, firebase);\r\n    }\r\n    return firebase;\r\n};", "\r\n/**\r\n * @imports\r\n */\r\nimport { _intersect, _from as _arrFrom } from '@webqit/util/arr/index.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Firebase class\r\n * ---------------------------\r\n */\r\n\r\nexport default class {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param object\tsubject\r\n\t * \r\n\t * @return void\r\n\t */\r\n\tconstructor(subject) {\r\n\t\tthis.subject = subject;\r\n\t\tthis.fireables = [];\r\n\t\tthis.currentlyFiring = [];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Adds an Fireable instance\r\n\t * with optional tags.\r\n\t *\r\n\t * @param Fireable\t\t\tfireable\r\n\t *\r\n\t * @return Fireable\r\n\t */\r\n\tadd(fireable) {\r\n\t\tthis.fireables.push(fireable);\r\n\t\treturn fireable;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes fireables by definition.\r\n\t *\r\n\t * @param object\t\t\tdfn\r\n\t *\r\n\t * @return array\r\n\t */\r\n\tforget(dfn) {\r\n\t\tthis.filter(dfn).forEach(fireable => {\r\n\t\t\tthis.fireables = this.fireables.filter(_fireable => _fireable !== fireable);\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Finds fireables by definition.\r\n\t *\r\n\t * @param object\t\t\tdfn\r\n\t *\r\n\t * @return array\r\n\t */\r\n\tfilter(dfn) {\r\n\t\treturn this.fireables.filter(fireable => {\r\n\t\t\tvar fireableFilter = _arrFrom(fireable.filter);\r\n\t\t\tvar fireableTags = _arrFrom((fireable.params || {}).tags);\r\n\t\t\t// -----------------------\r\n\t\t\tvar dfnFilter = _arrFrom(dfn.filter);\r\n\t\t\tvar dfnTags = _arrFrom((dfn.params || {}).tags);\r\n\t\t\t// -----------------------\r\n\t\t\treturn (!dfn.originalHandler || fireable.handler === dfn.originalHandler)\r\n\t\t\t\t&& (!dfnFilter.length || (dfnFilter.length === fireableFilter.length && _intersect(fireableFilter, dfnFilter).length === dfnFilter.length))\r\n\t\t\t\t&& (!dfnTags.length || (dfnTags.length === fireableTags.length && _intersect(fireableTags, dfnTags).length === dfnTags.length));\r\n\t\t});\r\n\t}\r\n};", "\r\n/**\r\n * ---------------------------\r\n * The Fireable class\r\n * ---------------------------\r\n */\r\n\r\nexport default class {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param object|array\t\tsubject\r\n\t * @param object\t\t\tdfn\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(subject, dfn) {\r\n\t\tthis.subject = subject;\r\n\t\tthis.handler = dfn.handler;\r\n\t\tthis.filter = dfn.filter;\r\n\t\tthis.params = dfn.params;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a \"disconnected\" flag on the Fireable.\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tdisconnect() {\r\n\t\tthis.disconnected = true;\r\n\t}\r\n};", "\r\n/**\r\n * @imports\r\n */\r\nimport Fireable from './Fireable.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Listener class\r\n * ---------------------------\r\n */\t\t\t\t\r\nexport default class extends Fireable {\r\n\r\n\t/**\r\n\t * Calls the observer's handler function\r\n\t * on matching with the event's fields.\r\n\t *\r\n\t * @param Event\t\t\t \tevt\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tfire(evt) {\r\n\t\tif (this.filter === evt.type) {\r\n\t\t\tevt.response(this.handler.call(this.subject, evt));\r\n\t\t}\r\n\t}\r\n};", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isUndefined, _isObject } from '@webqit/util/js/index.js';\r\nimport { _each } from '@webqit/util/obj/index.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Event class\r\n * ---------------------------\r\n */\r\n\r\nexport default class {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param array|object\t\ttarget\r\n\t * @param object\t\t\te\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(target, e) {\r\n\t\tthis.$ = {};\r\n\t\tthis.$.target = target;\r\n\t\tthis.$.e = e;\r\n\t\tthis.$.propagationStopped = false;\r\n\t\tthis.$.defaultPrevented = false;\r\n\t\tthis.$.promisesInstance = null;\r\n\t\tthis.$.promises = [];\r\n\t\t// -----------------------\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the \"target\" object.\r\n\t *\r\n\t * @return array|object\r\n\t */\r\n\tget type() {\r\n\t\treturn this.$.e.type;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the \"target\" object.\r\n\t *\r\n\t * @return array|object\r\n\t */\r\n\tget target() {\r\n\t\treturn this.$.e.target;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the \"details\" object.\r\n\t *\r\n\t * @return object\r\n\t */\r\n\tget e() {\r\n\t\treturn this.$.e;\r\n\t}\r\n\r\n\t/**\r\n\t * -----------------------\r\n\t * RESPONSE HANDLERS\r\n\t * -----------------------\r\n\t */\r\n\r\n\t/**\r\n\t * Stops the evnt from reaching other listeners.\r\n\t *\r\n\t * @return bool\r\n\t */\r\n\tstopPropagation() {\r\n\t\tthis.$.propagationStopped = true;\r\n\t\ttry {\r\n\t\t\tthis.$.e.stopPropagation();\r\n\t\t} catch(e) {}\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * (Readonly) tells if stopPropagation() has been called.\r\n\t *\r\n\t * @return bool\r\n\t */\r\n\tget propagationStopped() {\r\n\t\treturn this.$.propagationStopped;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Sets a disposition that asks event initiator not to\r\n\t * proceed with default action.\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tpreventDefault() {\r\n\t\tthis.$.defaultPrevented = true;\r\n\t\ttry {\r\n\t\t\tthis.$.e.preventDefault();\r\n\t\t} catch(e) {}\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * (Readonly) tells if preventDefault() has been called.\r\n\t *\r\n\t * @return bool\r\n\t */\r\n\tget defaultPrevented() {\r\n\t\treturn this.$.defaultPrevented;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Sets a Promise disposition.\r\n\t *\r\n\t * @param Promise\tpromise\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tpromise(promise) {\r\n\t\tif (!(promise instanceof Promise)) {\r\n\t\t\tthrow new Error('Event.promise() must be called with a Promise.');\r\n\t\t}\r\n\t\tthis.$.promises.push(promise);\r\n\t\tthis.$.promisesInstance = null;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * (Readonly) returns all promises.\r\n\t *\r\n\t * @return Promise|null\r\n\t */\r\n\tget promises() {\r\n\t\tif (!this.$.promisesInstance && this.$.promises.length) {\r\n\t\t\tthis.$.promisesInstance = Promise.all(this.$.promises);\r\n\t\t}\r\n\t\treturn this.$.promisesInstance;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Evaluates the given disposition value and\r\n\t * calls an appropriate disposition method.\r\n\t *\r\n\t * @params mixed \trspns\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tresponse(rspns) {\r\n\t\tvar proms;\r\n\t\tvar isEvent = _isObject(rspns) && !_isUndefined(rspns.propagationStopped) && !_isUndefined(rspns.defaultPrevented)\r\n\t\tif ((rspns === false) || (isEvent && rspns.propagationStopped)) {\r\n\t\t\tthis.stopPropagation();\r\n\t\t} else if ((rspns === false) || (isEvent && rspns.defaultPrevented)) {\r\n\t\t\tthis.preventDefault();\r\n\t\t} else if ((rspns instanceof Promise && (proms = rspns))\r\n\t\t|| (isEvent && (proms = rspns.promises))) {\r\n\t\t\tthis.promise(proms);\r\n\t\t}\r\n\t}\r\n};", "\r\n/**\r\n * @imports\r\n */\r\nimport { _find } from '@webqit/util/obj/index.js';\r\nimport { _toTitle } from '@webqit/util/str/index.js';\r\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\r\nimport { _isString, _isFunction, _isClass } from '@webqit/util/js/index.js';\r\nimport CustomEvents from './CustomEvents.js';\r\nimport Firebase from './Firebase.js';\r\nimport Listener from './Listener.js';\r\nimport Event from './Event.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Listeners class\r\n * ---------------------------\r\n */\t\t\t\t\r\nexport default class Listeners extends Firebase {\r\n\r\n\t/**\r\n\t * Constructs a new observable and returns a proxy wrapper.\r\n\t *\r\n\t * @param HTMLElement\t\t\tsubject\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(subject) {\r\n\t\tsuper(subject);\r\n\t\tthis.handlersList = {};\r\n\t\tthis.hammertime = () => {\r\n\t\t\tif (!this.hmm) {\r\n\t\t\t\tif (typeof window === 'undefined' || !window.Hammer) {\r\n\t\t\t\t\tconsole.error('The Hammerjs library is needed to use gestures.');\r\n\t\t\t\t\treturn;\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.hmm == new window.Hammer.Manager(this.subject);\r\n\t\t\t}\r\n\t\t\treturn this.hmm;\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Sets up an event type when its first listener is added.\r\n\t *\r\n\t * @param string TYPE \r\n\t * @param object params \r\n\t *\r\n\t * @return void\r\n\t */\r\n\t_setup(TYPE, params) {\r\n\t\t// We register an event only once.\r\n\t\tif (this.handlersList[TYPE]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar hammertime;\r\n\t\tif (CustomEvents[TYPE]) {\r\n\t\t\tif (_isString(CustomEvents[TYPE])) {\r\n\t\t\t\t// >> LINK THE ALIAS EVENT TO THIS FIREBASE\r\n\t\t\t\tthis.handlersList[TYPE] = e => this.fire({type:TYPE, e});\r\n\t\t\t\tthis.add(new Listener(this.subject, {\r\n\t\t\t\t\thandler: this.handlersList[TYPE],\r\n\t\t\t\t\tfilter: CustomEvents[TYPE],\r\n\t\t\t\t}));\r\n\t\t\t} else if (_isClass(CustomEvents[TYPE])) {\r\n\t\t\t\t// >> LINK THE CUSTOM EVENT TO THIS FIREBASE\r\n\t\t\t\tthis.handlersList[TYPE] = new CustomEvents[TYPE];\r\n\t\t\t\tif (!_isFunction(this.handlersList[TYPE].setup)) {\r\n\t\t\t\t\tthrow new Error('The \"' + TYPE + '\" event hook must implement a \"setup\" method!');\r\n\t\t\t\t}\r\n\t\t\t\tif (hammertime = this.hammertime()) {\r\n\t\t\t\t\tthis.handlersList[TYPE].setup(this.subject, TYPE, e => {\r\n\t\t\t\t\t\tthis.fire({type:TYPE, e});\r\n\t\t\t\t\t}, hammertime);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error('The \"' + TYPE + '\" event hook must be either a string (alias) or a class!');\r\n\t\t\t}\r\n\t\t} else if (recognizeGesture(TYPE.split('+')[0])) {\r\n\t\t\t// Lets work as if if always a list\r\n\t\t\tif (hammertime = this.hammertime()) {\r\n\t\t\t\tvar recognizers = TYPE.split('+').map(gestureName => {\r\n\t\t\t\t\tvar mainGestureName = recognizeGesture(gestureName);\r\n\t\t\t\t\tvar recognizer = hammertime.get(mainGestureName);\r\n\t\t\t\t\tif (!recognizer) {\r\n\t\t\t\t\t\trecognizer = new Hammer[_toTitle(mainGestureName)];\r\n\t\t\t\t\t\thammertime.add(recognizer);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn recognizer;\r\n\t\t\t\t});\r\n\t\t\t\t// From right to left, recognizeWith all others ahead\r\n\t\t\t\trecognizers.forEach((recognizer, i) => {\r\n\t\t\t\t\trecognizer.recognizeWith(recognizers.slice(i + 1));\r\n\t\t\t\t});\r\n\t\t\t\t// >> LINK THE HAMMER EVENT TO THIS FIREBASE\r\n\t\t\t\tthis.handlersList[TYPE] = e => this.fire({type:TYPE, e});\r\n\t\t\t\thammertime.on(TYPE.split('+').join(' '), this.handlersList[TYPE]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// >> LINK THE DOM EVENT TO THIS FIREBASE\r\n\t\t\tthis.handlersList[TYPE] = e => this.fire(e);\r\n\t\t\tthis.subject.addEventListener(TYPE, this.handlersList[TYPE]);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Tears down an event type when its last listener is removed.\r\n\t *\r\n\t * @param string TYPE \r\n\t *\r\n\t * @return void\r\n\t */\r\n\t_teardown(TYPE) {\r\n\t\t// We register an event only once.\r\n\t\tif (!this.handlersList[TYPE]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (CustomEvents[TYPE]) {\r\n\t\t\tif (_isString(CustomEvents[TYPE])) {\r\n\t\t\t\t// Level1 custom event\r\n\t\t\t\tremoveListener(this.subject, CustomEvents[TYPE], this.handlersList[TYPE]);\r\n\t\t\t} else if (this.handlersList[TYPE]) {\r\n\t\t\t\tif (_isFunction(this.handlersList[TYPE].teardown)) {\r\n\t\t\t\t\t// Level2 custom event. We supply the this.unobserve method incase it'll be needed.\r\n\t\t\t\t\tthis.handlersList[TYPE].teardown();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error('The \"' + TYPE + '\" event hook must implement a \"teardown\" function!');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if ((hammertime = this.hammertime()) && recognizeGesture(TYPE.split('+')[0])) {\r\n\t\t\thammertime.off(TYPE.split('+').join(' '), this.handlersList[TYPE]);\r\n\t\t} else {\r\n\t\t\t// Native event\r\n\t\t\tthis.subject.removeEventListener(TYPE, this.handlersList[TYPE]);\r\n\t\t}\r\n\t\tdelete this.handlersList[TYPE];\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritdoc\r\n\t */\r\n\tadd(dfn) {\r\n\t\tthis._setup(dfn.filter, dfn.params);\r\n\t\treturn super.add(new Listener(this.subject, dfn));\r\n\t}\r\n\r\n\t/**\r\n\t * Fires all observers with the given evt (change).\r\n\t *\r\n\t * @param Event\t\t\t\tevt\r\n\t *\r\n\t * @return Event\r\n\t */\r\n\tfire(evt) {\r\n\t\tif (!(evt instanceof Event)) {\r\n\t\t\tevt = new Event(this.subject, evt);\r\n\t\t}\r\n\t\tthis.fireables.forEach(listener => {\r\n\t\t\tif (evt.propagationStopped) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlistener.fire(evt);\r\n\t\t});\r\n\t\treturn evt;\r\n\t}\r\n};\r\n\r\n/**\r\n * Finds the recognizer for a gestureName.\r\n *\r\n * @param string\tgestureName\r\n *\r\n * @return string\r\n */\r\nconst recognizeGesture = function(gestureName) {\r\n\treturn _find(gestureIndex, list => list.includes(gestureName), false/*deep*/);\r\n};\r\n\r\n/**\r\n * Gesture reference.\r\n */\r\nconst gestureIndex = {\r\n\tpress: \t['press', 'pressup',], \r\n\trotate:\t['rotate', 'rotatestart', 'rotatemove', 'rotateend', 'rotatecancel',],\r\n\tpinch: \t['pinch', 'pinchstart', 'pinchmove', 'pinchend', 'pinchcancel', 'pinchin', 'pinchout',], \r\n\tpan: \t['pan', 'panstart', 'panmove', 'panend', 'pancancel', 'panleft', 'panright', 'panup', 'pandown',],\r\n\tswipe: \t['swipe', 'swipeleft', 'swiperight', 'swipeup', 'swipedown',],\r\n\ttap: \t['tap',],\r\n};\r\n", "/**\r\n * @imports\r\n */\r\nimport getFirebase from './getFirebase.js';\r\nimport Listeners from './Listeners.js';\r\n\r\n/**\r\n * Returns Observers List handle.\r\n * \r\n * @param object    object \r\n * @param bool      createIfNotExist \r\n * \r\n * @returns Observers\r\n */\r\nexport default function(object, createIfNotExist = true) {\r\n    return getFirebase(object, 'listeners', createIfNotExist ? Listeners : null);\r\n};", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isFunction, _isTypeObject, _getType } from '@webqit/util/js/index.js';\r\nimport getListeners from './getListeners.js';\r\nimport { getEls } from '../../util.js';\r\n\r\n/**\r\n * Removes listeners from an subject's firebase.\r\n *\r\n * @param array|Element\t\t\t\tels\r\n * @param string|array|function\t\tfilter\r\n * @param function\t\t\t\t\toriginalHandler\r\n * @param object\t\t\t\t\tparams\r\n *\r\n * @return void\r\n */\r\nexport default function(els, filter, originalHandler = null, params = {}) {\r\n\tif (_isFunction(filter)) {\r\n\t\tparams = arguments.length > 2 ? originalHandler : {};\r\n\t\toriginalHandler = filter;\r\n\t\tfilter = null;\r\n\t}\r\n\tif (originalHandler && !_isFunction(originalHandler)) {\r\n\t\tthrow new Error('Handler must be of type function; \"' + _getType(originalHandler) + '\" given!');\r\n\t}\r\n\treturn getEls.call(this, els).reduce((_, el) => {\r\n\t\tif (!el || !_isTypeObject(el)) {\r\n\t\t\tthrow new Error('Subject element must be of type object; \"' + _getType(el) + '\" given!');\r\n\t\t}\r\n\t\tvar listeners;\r\n\t\tif (listeners = getListeners(el, false)) {\r\n\t\t\treturn listeners.forget({filter, originalHandler, params,});\r\n\t\t}\r\n\t}, null);\r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isFunction, _isTypeObject, _getType } from '@webqit/util/js/index.js';\r\nimport getListeners from './getListeners.js';\r\nimport { getEls } from '../../util.js';\r\n\r\n/**\r\n * Adds a listener to an subject's firebase.\r\n *\r\n * @param array|Element\t\t\t\tels\r\n * @param string|array|function\t\tfilter\r\n * @param function\t\t\t\t\thandler\r\n * @param object\t\t\t\t\tparams\r\n *\r\n * @return Listener\r\n */\r\nexport default function(els, filter, handler, params = {}) {\r\n\tif (_isFunction(filter)) {\r\n\t\tparams = arguments.length > 2 ? handler : {};\r\n\t\thandler = filter;\r\n\t\tfilter = null;\r\n\t}\r\n\tif (!_isFunction(handler)) {\r\n\t\tthrow new Error('Callback must be of type function; \"' + _getType(handler) + '\" given!');\r\n\t}\r\n\tvar args = {filter, handler, params,};\r\n\treturn getEls.call(this, els).reduce((_, el) => {\r\n\t\tif (!el || !_isTypeObject(el)) {\r\n\t\t\tthrow new Error('Subject element must be of type Object; \"' + _getType(el) + '\" given!');\r\n\t\t}\r\n\t\tvar listeners = getListeners(el);\r\n\t\tvar existing;\r\n\t\tif (args.params.unique && (existing = listeners.filter(args)).length) {\r\n\t\t\treturn existing[0];\r\n\t\t}\r\n\t\treturn listeners.add(args);\r\n\t}, null);\r\n};", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumber, _isFunction } from '@webqit/util/js/index.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Element utility class\r\n * ---------------------------\r\n */\r\n\t\t\t\r\nexport default class AnimationAPI {\r\n\t\r\n\t/**\r\n\t * Creates an amiation from\r\n\t * any of keyframes, CSS keyframe name, or CSS object.\r\n\t *\r\n\t * @param Element\t\t\t\tel\r\n\t * @param any\t\t\t\t\teffect\r\n\t * @param object\t\t\t\tparams\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(el, effect, params = {}) {\r\n\t\t// Private properties\r\n\t\tthis.el = el;\r\n\t\tthis.$ = {\r\n\t\t\tel,\r\n\t\t\treadyCallbacks: [],\r\n\t\t\tfinishCallbacks: [],\r\n\t\t\tcancelCallbacks: [],\r\n\t\t\tparams: {...params},\r\n\t\t\tcallFinish() {\r\n\t\t\t\tthis.finishCallbacks.forEach(callback => {\r\n\t\t\t\t\tcallback(this.el);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcallCancel() {\r\n\t\t\t\tthis.cancelCallbacks.forEach(callback => {\r\n\t\t\t\t\tcallback(this.el);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.$.params.delay = _isNumber(this.$.params.delay) ? this.$.params.delay : 0;\r\n\t\tthis.$.params.duration = _isNumber(this.$.params.duration) ? this.$.params.duration : 400;\r\n\t\tthis.$.params.endDelay = _isNumber(this.$.params.endDelay) ? this.$.params.endDelay : 0;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Returns the animation.\r\n\t *\r\n\t * @return Animation\r\n\t */\r\n\tget anim() {\r\n\t\treturn this.$.anim;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a function to the \"onfinish\" event.\r\n\t *\r\n\t * @param function callback\r\n\t *\r\n\t * @return this\r\n\t *\r\n\t */\r\n\tonfinish(callback) {\r\n\t\tif (!_isFunction(callback)) {\r\n\t\t\tthrow new Error(\"Onfinish() accepts only a function.\");\r\n\t\t}\r\n\t\tthis.$.finishCallbacks.push(callback);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a function to the \"oncancel\" event.\r\n\t *\r\n\t * @param function callback\r\n\t *\r\n\t * @return this\r\n\t *\r\n\t */\r\n\toncancel(callback) {\r\n\t\tif (!_isFunction(callback)) {\r\n\t\t\tthrow new Error(\"Oncancel() accepts only a function.\");\r\n\t\t}\r\n\t\tthis.$.cancelCallbacks.push(callback);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns the animation's progress.\r\n\t *\r\n\t * @return number\r\n\t */\r\n\tprogress() {\r\n\t\tif (this.$.anim) {\r\n\t\t\treturn this.$.anim.currentTime / this.$.anim.effect.duration;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Seeks the animation to a time.\r\n\t *\r\n\t * @param number to\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tseek(to) {\r\n\t\tif (!_isNumber(to)) {\r\n\t\t\tthrow new Error(\"Seek() accepts only a numeric value.\");\r\n\t\t}\r\n\t\tthis.ready((anim, params) => {\r\n\t\t\tvar totalDuration = params.duration + (params.delay || 0) + (params.endDelay || 0);\r\n\t\t\tanim.currentTime = Math.max(0, Math.min(to * totalDuration, totalDuration));\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Reverses the animation.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\treverse() {\r\n\t\tthis.ready(anim => anim.reverse());\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Plays the animation.\r\n\t * Returns an \"onfinish\" promise.\r\n\t *\r\n\t * @return Promise\r\n\t */\r\n\tplay() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.ready(anim => {\r\n\t\t\t\tanim.play();\r\n\t\t\t\tthis.onfinish(() => resolve(this));\r\n\t\t\t\tthis.oncancel(() => reject(this));\r\n\t\t\t}, reject);\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Pauses the animation.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tpause() {\r\n\t\tthis.ready(anim => anim.pause());\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Finishes the animation.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tfinish() {\r\n\t\tthis.ready(anim => anim.finish());\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Cancels the animation.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tcancel() {\r\n\t\tthis.ready(anim => anim.cancel());\r\n\t\treturn this;\r\n\t}\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport {\r\n\t_isString, _isArray, _isObject, _isNumeric,\r\n\t_isFunction, _isEmpty, _isUndefined\r\n} from '@webqit/util/js/index.js';\r\nimport { _exclude, _last, _pushUnique } from '@webqit/util/arr/index.js';\r\nimport { _each } from '@webqit/util/obj/index.js';\r\n// ------------------------------------\r\nimport { readVar, readKeyframes } from '../../css/global-css.js';\r\nimport transactCss from '../../css/cssTransaction.js';\r\nimport cssSync from '../../css/cssSync.js';\r\nimport CSSOM from '../../css/classes/CSSOM.js';\r\n// ------------------------------------\r\nimport AnimationAPI from './AnimationAPI.js';\r\nimport { getPlayUIGlobal } from '../../util.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Animation class\r\n * ---------------------------\r\n */\r\n\r\nconst cssAnimationNameCache = {};\r\nexport default class Animation extends AnimationAPI {\r\n\t\r\n\t/**\r\n\t * Creates an amiation from\r\n\t * any of keyframes, CSS keyframe name, or CSS object.\r\n\t *\r\n\t * @param Element\t\t\t\tel\r\n\t * @param array|object|string\teffect\r\n\t * @param object\t\t\t\tparams\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(el, effect, params = {}, cntxt = null) {\r\n\t\tsuper(el, effect, params);\r\n\t\tWebQit = getPlayUIGlobal.call(cntxt);\r\n\t\t// -----------------------------\r\n\t\tthis.$.params.fill = this.$.params.fill || 'forwards';\r\n\t\tif (!('duration' in this.$.params)) {\r\n\t\t\tthis.$.params.duration = 400;\r\n\t\t}\r\n\t\t// Convert certain easing strings to beizier curves\r\n\t\tif (this.$.params.easing && ['ease-in', 'ease-out', 'ease-in-out'].indexOf(this.$.params.easing) === -1 && this.$.params.easing.indexOf('(') === -1) {\r\n\t\t\t// Native easings, custom cubic-beziers, or Dramatic's cubic-beziers\r\n\t\t\tthis.$.params.easing = readVar.call(WebQit, this.$.params.easing) || this.$.params.easing;\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// Normalize keyframes...\r\n\t\t// -----------------------------\r\n\t\tconst init = keyframes => {\r\n\t\t\tkeyframes = keyframes.slice();\r\n\t\t\t// Mine out end-state properties\r\n\t\t\tvar firstFrame = {};\r\n\t\t\tvar lastFrame = {};\r\n\t\t\tkeyframes = keyframes.map(keyframe => {\r\n\t\t\t\tkeyframe = CSSOM.parseEach(keyframe).stringifyEach();\r\n\t\t\t\t// Marshal out its properties\r\n\t\t\t\t_exclude(Object.keys(keyframe), 'offset', 'easing').forEach(prop => {\r\n\t\t\t\t\t// Save last seen value of this property\r\n\t\t\t\t\t// across all keyframes...\r\n\t\t\t\t\tfirstFrame[prop] = typeof firstFrame[prop] === 'undefined' ? keyframe[prop] : firstFrame[prop];\r\n\t\t\t\t\tlastFrame[prop] = keyframe[prop];\r\n\t\t\t\t});\r\n\t\t\t\treturn keyframe;\r\n\t\t\t});\r\n\t\t\t// Try to get original\r\n\t\t\tvar lastFramFill = _isArray(effect) ? _last(effect) : (\r\n\t\t\t\t_isObject(effect) ? effect : lastFrame\r\n\t\t\t);\r\n\t\t\t// -----------------------------\r\n\t\t\t// The animation...\r\n\t\t\t// -----------------------------\r\n\t\t\ttry {\r\n\t\t\t\tvar anim = this.el.animate(keyframes, this.$.params);\r\n\t\t\t} catch(e) {\r\n\t\t\t\tthis.$.error = e;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Reverse\r\n\t\t\tif (this.$.params.reverse) {\r\n\t\t\t\tanim.reverse();\r\n\t\t\t}\r\n\t\t\t// A little polifyll\r\n\t\t\tif (!anim.effect) {\r\n\t\t\t\tanim.effect = {};\r\n\t\t\t}\r\n\t\t\tif (!anim.effect.duration) {\r\n\t\t\t\tanim.effect.duration = this.$.params.duration;\r\n\t\t\t}\r\n\t\t\t// -----------------------------\r\n\t\t\t// \"onfinish\" and \"oncancel\" listener\r\n\t\t\t// -----------------------------\r\n\t\t\tanim.onfinish = () => {\r\n\t\t\t\t// As getter, as it were\r\n\t\t\t\tif (this.$.params.cancelForCss) {\r\n\t\t\t\t\tanim.cancel();\r\n\t\t\t\t\tif (this.$.params.fill === 'forwards' || this.$.params.fill === 'both') {\r\n\t\t\t\t\t\tcssSync.call(WebQit, this.el, lastFramFill);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$.callFinish();\r\n\t\t\t};\r\n\t\t\t// oncancel listener\r\n\t\t\tanim.oncancel = () => this.$.callCancel();\r\n\t\t\t// -------------------\r\n\t\t\tthis.$.anim = anim;\r\n\t\t\tthis.$.firstFrame = firstFrame;\r\n\t\t\tthis.$.lastFrame = lastFrame;\r\n\t\t\tif (this.$.readyCallbacks.length) {\r\n\t\t\t\tthis.$.readyCallbacks.forEach(callback => callback(anim, this.$.params, firstFrame, lastFrame));\r\n\t\t\t}\r\n\t\t\t// -------------------\r\n\t\t};\r\n\t\tif (_isFunction(effect)) {\r\n\t\t\teffect(el, init);\r\n\t\t} else {\r\n\t\t\tAnimation.createCallback(el, effect, init, error => {\r\n\t\t\t\t// -------------------\r\n\t\t\t\tthis.$.error = error;\r\n\t\t\t\t// -------------------\r\n\t\t\t}, this.$.params.animNameNoCache, WebQit);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Animation-ready callback.\r\n\t *\r\n\t * @param function\t\tsucces\r\n\t * @param function\t\terror\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tready(succes, error) {\r\n\t\tif (this.$.error) {\r\n\t\t\tif (error) {\r\n\t\t\t\terror(this.$.error);\r\n\t\t\t}\r\n\t\t} else if (this.$.anim) {\r\n\t\t\tsucces(this.$.anim, this.$.params, this.$.firstFrame, this.$.lastFrame);\r\n\t\t} else {\r\n\t\t\tthis.$.readyCallbacks.push(succes);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Resolves the given effect into valid keyframes.\r\n\t *\r\n\t * Effect can be CSS animation name,\r\n\t * or an object of CSS properties that represent the end keyframe.\r\n\t *\r\n\t * @param Element\t\t\t\tel\r\n\t * @param array|object|string\teffect\r\n\t * @param function\t\t\t\tready\r\n\t * @param function\t\t\t\terror\r\n\t * @param bool\t\t\t\t\tanimNameNoCache\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tstatic createCallback(el, effect, ready, error, animNameNoCache, WebQit) {\r\n\t\t// -----------------------------\r\n\t\t// Resolve firstFrame from current state?\r\n\t\t// -----------------------------\r\n\t\tvar isObjectAndOnlyLastKeyframe = _isObject(effect) && !Object.values(effect).filter(v => _isArray(v)).length;\r\n\t\tvar isArrayButEmptyFirstKeyframe = _isArray(effect) && effect.length > 1 && _isEmpty(effect[0]);\r\n\t\tif (isObjectAndOnlyLastKeyframe || isArrayButEmptyFirstKeyframe) {\r\n\t\t\t// Get first keyframe from current state\r\n\t\t\tWebQit.DOM.reflow.onread(() => {\r\n\t\t\t\tif (isArrayButEmptyFirstKeyframe) {\r\n\t\t\t\t\teffect.shift();\r\n\t\t\t\t\tthis.createCallback(el, [cssSync.call(WebQit, el, Object.keys(effect[0])), ...effect], ready, error, animNameNoCache, WebQit);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.createCallback(el, [cssSync.call(WebQit, el, Object.keys(effect)), {...effect}/*clone*/], ready, error, animNameNoCache, WebQit);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// Create keyframes from CSS animation name...\r\n\t\t// -----------------------------\r\n\t\tif (_isString(effect)) {\r\n\t\t\t// Retrieve keyframes of the given animation name from css\r\n\t\t\tif (!cssAnimationNameCache[effect] || !cssAnimationNameCache[effect].length || animNameNoCache) {\r\n\t\t\t\tcssAnimationNameCache[effect] = readKeyframes.call(WebQit, effect);\r\n\t\t\t\tif (!cssAnimationNameCache[effect].length && error) {\r\n\t\t\t\t\terror('Animation name \"' + effect + '\" not found in any stylesheet!');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\teffect = cssAnimationNameCache[effect];\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// Resolve auto pixels...\r\n\t\t// -----------------------------\r\n\t\tif (_isArray(effect)) {\r\n\t\t\tvar keyframesWithAutoSizes = [], css = {};\r\n\t\t\t_each(effect, (i, keyframe) => {\r\n\t\t\t\t// We can animate to auto width and height\r\n\t\t\t\tif (keyframe.height === 'auto') {\r\n\t\t\t\t\tcss.height = 'auto';\r\n\t\t\t\t\t_pushUnique(keyframesWithAutoSizes, i);\r\n\t\t\t\t}\r\n\t\t\t\tif (keyframe.width === 'auto') {\r\n\t\t\t\t\tcss.width = 'auto';\r\n\t\t\t\t\t_pushUnique(keyframesWithAutoSizes, i);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (keyframesWithAutoSizes.length) {\r\n\t\t\t\t// apply() will be called when ready\r\n\t\t\t\t// We return transactCss(), which in itself returns the return of apply()\r\n\t\t\t\tvar props = Object.keys(css);\r\n\t\t\t\tvar transaction = transactCss.call(WebQit, el, props);\r\n\t\t\t\t// -------------------\r\n\t\t\t\t// Recored initial state\r\n\t\t\t\ttransaction.savepoint();\r\n\t\t\t\t// Apply auto values\r\n\t\t\t\ttransaction.apply(css);\r\n\t\t\t\t// Record rect\r\n\t\t\t\tvar _rect = el.getBoundingClientRect();\r\n\t\t\t\tvar rect = props.reduce((rect, prop) => {\r\n\t\t\t\t\trect[prop] = _rect[prop];\r\n\t\t\t\t\treturn rect;\r\n\t\t\t\t}, {});\r\n\t\t\t\ttransaction.rollback();\r\n\t\t\t\t// -------------------\r\n\t\t\t\t// Clone\r\n\t\t\t\teffect = effect.map(kf => ({...kf}));\r\n\t\t\t\tkeyframesWithAutoSizes.forEach(i => {\r\n\t\t\t\t\tif (effect[i].width === 'auto') {\r\n\t\t\t\t\t\teffect[i].width = rect.width + 'px';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (effect[i].height === 'auto') {\r\n\t\t\t\t\t\teffect[i].height = rect.height + 'px';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tready(effect);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// Return result...\r\n\t\t// -----------------------------\r\n\t\t// We return the return of success()\r\n\t\tready(effect);\r\n\t}\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _internals } from '@webqit/util/js/index.js';\r\nimport AnimationAPI from './AnimationAPI.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Animation2 class\r\n * ---------------------------\r\n */\r\n\t\t\t\r\nexport default class Animation2 extends AnimationAPI {\r\n\t\r\n\t/**\r\n\t * Creates an amiation from\r\n\t * any of keyframes, CSS keyframe name, or CSS object.\r\n\t *\r\n\t * @param Element\t\t\t\tel\r\n\t * @param function\t\t\t\tcallback\r\n\t * @param object\t\t\t\tparams\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(el, callback, params = {}) {\r\n\t\tsuper(el, callback, params);\r\n\t\t// -----------------------------\r\n\t\t// The state...\r\n\t\t// -----------------------------\r\n\t\tconst _this = this;\r\n\t\tthis.$.anim = {\r\n\t\t\tel,\r\n\t\t\ttiming: {\r\n\t\t\t\tcurrentTime: 0,\r\n\t\t\t\tdelay: _this.$.params.delay,\r\n\t\t\t\tduration: _this.$.params.duration,\r\n\t\t\t\tendDelay: _this.$.params.endDelay,\r\n\t\t\t\tcalculate() {\r\n\t\t\t\t\tvar active = this.state === 'playing' || this.state === 'paused';\r\n\t\t\t\t\tvar delay = active ? this.delay : _this.$.params.delay,\r\n\t\t\t\t\t\tduration = active ? this.duration : _this.$.params.duration,\r\n\t\t\t\t\t\tendDelay = active ? this.endDelay : _this.$.params.endDelay;\r\n\t\t\t\t\tvar currentDelay = delay,\r\n\t\t\t\t\t\ttotalDuration = currentDelay + duration,\r\n\t\t\t\t\t\ttotalTiming = totalDuration + endDelay;\r\n\t\t\t\t\tthis.delay = Math.max(0, Math.min(delay, this.currentTime >= currentDelay ? 0 : currentDelay - this.currentTime));\r\n\t\t\t\t\tthis.duration = Math.max(0, Math.min(duration, this.currentTime >= totalDuration ? 0 : totalDuration - this.currentTime));\r\n\t\t\t\t\tthis.endDelay = Math.max(0, Math.min(endDelay, this.currentTime >= totalTiming ? 0 : totalTiming - this.currentTime));\r\n\t\t\t\t},\r\n\t\t\t\tstart(callback) {\r\n\t\t\t\t\tif (_internals(_this.$.anim.el, 'play-ui').has('anim')) {\r\n\t\t\t\t\t\t_internals(_this.$.anim.el, 'play-ui').get('anim').finish();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_internals(_this.$.anim.el, 'play-ui').get('anim', _this.$.anim);\r\n\t\t\t\t\t// ---------------\r\n\t\t\t\t\tthis.state = 'playing';\r\n\t\t\t\t\tthis.calculate();\r\n\t\t\t\t\tif (!this.delay) {\r\n\t\t\t\t\t\tcallback(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.interval = setInterval(() => {\r\n\t\t\t\t\t\tthis.currentTime ++;\r\n\t\t\t\t\t\tif (this.currentTime === this.delay) {\r\n\t\t\t\t\t\t\tcallback(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.currentTime === this.delay + this.duration) {\r\n\t\t\t\t\t\t\tcallback(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.currentTime === this.delay + this.duration + this.endDelay) {\r\n\t\t\t\t\t\t\tthis.state = 'finished';\r\n\t\t\t\t\t\t\tthis.stop();\r\n\t\t\t\t\t\t\tcallback(2);\r\n\t\t\t\t\t\t\tthis.currentTime = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t},\r\n\t\t\t\tstop() {\r\n\t\t\t\t\t// Interval is cleared at the entire end\r\n\t\t\t\t\t// duration: delay + duration + endDelay\r\n\t\t\t\t\tclearInterval(this.interval);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\tset currentTime(currentTime) {\r\n\t\t\t\tthis.timing.currentTime = currentTime;\r\n\t\t\t\tif (this.timing.state === 'playing') {\r\n\t\t\t\t\tthis.timing.stop();\r\n\t\t\t\t\tthis.play();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tget currentTime() {\r\n\t\t\t\treturn this.timing.currentTime;\r\n\t\t\t},\r\n\r\n\t\t\t_callBegin() {\r\n\t\t\t\treturn callback(this.el, 'begin', this.reversed, this.currentTime);\r\n\t\t\t},\r\n\r\n\t\t\t_callPause() {\r\n\t\t\t\treturn callback(this.el, 'pause', this.reversed, this.currentTime);\r\n\t\t\t},\r\n\r\n\t\t\t_callEnd() {\r\n\t\t\t\treturn callback(this.el, 'end', this.reversed, this.currentTime);\r\n\t\t\t},\r\n\r\n\t\t\tplay() {\r\n\t\t\t\tthis.timing.start(phase => {\r\n\t\t\t\t\tif (phase === 0) {\r\n\t\t\t\t\t\tthis._callBegin();\r\n\t\t\t\t\t} else if (phase === 1) {\r\n\t\t\t\t\t\tthis._callEnd();\r\n\t\t\t\t\t} else if (phase === 2) {\r\n\t\t\t\t\t\t_this.$.callFinish();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\treverse() {\r\n\t\t\t\tthis.reversed = !this.reversed;\r\n\t\t\t\tif (this.timing.state === 'playing') {\r\n\t\t\t\t\tthis.timing.stop();\r\n\t\t\t\t\tthis.play();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tpause() {\r\n\t\t\t\t// Is pause supported by handler?\r\n\t\t\t\tif (this._callPause() !== false) {\r\n\t\t\t\t\tthis.timing.state = 'paused';\r\n\t\t\t\t\tthis.timing.stop();\r\n\t\t\t\t}\r\n\t\t\t},\t\t\t\r\n\r\n\t\t\tfinish() {\r\n\t\t\t\tthis.timing.state = 'finished';\r\n\t\t\t\tthis.timing.stop();\r\n\t\t\t\tthis._callEnd();\r\n\t\t\t\t_this.$.callFinish();\r\n\t\t\t},\r\n\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.timing.state = 'cancelled';\r\n\t\t\t\tthis.timing.stop();\r\n\t\t\t\t_this.$.callCancel();\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\t// A little polifyll\r\n\t\tif (!this.$.anim.effect) {\r\n\t\t\tthis.$.anim.effect = {};\r\n\t\t}\r\n\t\tif (!this.$.anim.effect.duration) {\r\n\t\t\tthis.$.anim.effect.duration = this.$.params.delay + this.$.params.duration + this.$.params.endDelay;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Animation-ready callback.\r\n\t *\r\n\t * @param function\t\tsucces\r\n\t * @param function\t\terror\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tready(succes, error) {\r\n\t\tsucces(this.$.anim, this.$.params);\r\n\t}\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isFunction } from '@webqit/util/js/index.js';\r\nimport { getEls } from '../../util.js';\r\nimport Animation from './Animation.js';\r\nimport Animation2 from './Animation2.js';\r\n\r\n/**\r\n * Creates and plays an amiation.\r\n * @see Animation\r\n *\r\n * @param Array|Element|Any\t\tels\r\n * @param array|object|string\teffect\r\n * @param object\t\t\t\tparams\r\n *\r\n * @return Promise\r\n */\r\nexport default function play(els, effect, params = {}) {\r\n\tvar _Animation = _isFunction(effect) ? Animation2 : Animation;\r\n\treturn Promise.all(getEls.call(this, els).map(el => (new _Animation(el, effect, params, this)).play().then(() => this)));\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\r\nimport { _copy } from '@webqit/util/obj/index.js';\r\nimport UIRect from './UIRect.js';\r\n\r\n/**\r\n * -----------\r\n * The Proximity class\r\n * -----------\r\n */\r\nexport default class Proximity {\r\n\r\n    /**\r\n     * \r\n     * @param Object props \r\n     * @param Object params \r\n     */\r\n    constructor(props, params = {}) {\r\n        Object.keys(props).forEach(key => {\r\n            Object.defineProperty(this, key, {get: () => props[key]});\r\n        });\r\n        this.params = params;\r\n    }\r\n\r\n\t/**\r\n\t * Computes the percentage proximity between two rects.\r\n\t *\r\n\t * @param object\t\trect1\r\n\t * @param object\t\trect2\r\n\t * @param string|array\taxis\r\n\t * @param object\t\tpreviousProximity\r\n     * @param Object        params\r\n\t *\r\n\t * @return object\r\n\t */\r\n\tstatic calculate(rect1, rect2, axis, previousProximity, params = {}) {\r\n\t\tvar $proximity = {intersection: UIRect.calculate(rect1, params).intersectionWith(rect2)};\t\t\t\t\r\n\t\t$proximity.x = $proximity.x || {};\r\n\t\t$proximity.y = $proximity.y || {};\r\n\t\tpreviousProximity = _copy(previousProximity);\r\n\t\t// X,Y processing...\r\n\t\t(axis ? _arrFrom(axis) : ['x', 'y']).forEach(axis => {\r\n\t\t\t// In the context of the given axis...\r\n\t\t\tvar distanceBefore = axis === 'x' ? 'left' : 'top';\r\n\t\t\tvar distanceAfter = axis === 'x' ? 'right' : 'bottom';\r\n\t\t\tvar rect1Length = rect1[axis === 'x' ? 'width' : 'height'];\r\n\t\t\tvar rect2Length = rect2[axis === 'x' ? 'width' : 'height'];\r\n\t\t\t// ----- In which direction are we advancement\r\n\t\t\t$proximity[axis].advancement = undefined;\r\n\t\t\tif (previousProximity.intersection) {\r\n\t\t\t\t$proximity[axis].advancement = previousProximity.intersection[distanceBefore] > $proximity.intersection[distanceBefore] \r\n\t\t\t\t\t? 'positive' : (previousProximity.intersection[distanceBefore] < $proximity.intersection[distanceBefore] \r\n\t\t\t\t\t\t? 'negative' : previousProximity[axis].advancement);\r\n\t\t\t}\r\n\t\t\t// ----- Cross-in percentage\r\n\t\t\tvar percentageIn = 0;\r\n\t\t\t// Element topline touches or passes Anchor bottom line\r\n\t\t\tif ($proximity.intersection[distanceBefore] <= rect2Length\r\n\t\t\t// Element bottom line is yet to touch, or is just touches Anchor bottom line\r\n\t\t\t&& $proximity.intersection[distanceAfter] <= 0) {\r\n\t\t\t\tpercentageIn = (rect1Length - Math.abs($proximity.intersection[distanceAfter])) / rect1Length;\r\n\t\t\t} else if ($proximity.intersection[distanceAfter] > 0) {\r\n\t\t\t\tpercentageIn = 1;\r\n\t\t\t}\r\n\t\t\t// ----- Cross-out percentage\r\n\t\t\tvar percentageOut = 0;\r\n\t\t\t// Element topline touches or passes Anchor top line\r\n\t\t\tif ($proximity.intersection[distanceBefore] <= 0\r\n\t\t\t// Element bottom line is yet to touch, or is just touches Anchor top line\r\n\t\t\t&& $proximity.intersection[distanceAfter] <= rect2Length) {\r\n\t\t\t\tpercentageOut = Math.abs($proximity.intersection[distanceBefore]) / rect1Length;\r\n\t\t\t} else if ($proximity.intersection[distanceAfter] > rect2Length) {\r\n\t\t\t\tpercentageOut = 1;\r\n\t\t\t}\r\n\t\t\t// ----- Cross-pass percentage\r\n\t\t\tvar percentagePass = 0;\r\n\t\t\t// Element topline touches or passes Anchor bottom line\r\n\t\t\tif ($proximity.intersection[distanceBefore] <= rect2Length\r\n\t\t\t// Element bottom line is yet to touch, or is just touches Anchor top line\r\n\t\t\t&& $proximity.intersection[distanceAfter] <= rect2Length) {\r\n\t\t\t\tvar totalDistance = rect2Length + rect1Length;\r\n\t\t\t\tvar currentPass = $proximity.intersection[distanceBefore] + rect1Length;\r\n\t\t\t\tpercentagePass = (totalDistance - currentPass) / totalDistance;\r\n\t\t\t} else if ($proximity.intersection[distanceAfter] > rect2Length) {\r\n\t\t\t\tpercentagePass = 1;\r\n\t\t\t}\r\n\t\t\t// ----- Cross-overflow percentage\r\n\t\t\tvar percentageContained = 0;\r\n\t\t\tif (rect1Length > rect2Length) {\r\n\t\t\t\t// Element is larger than, and covering Anchor top/bottom lines\r\n\t\t\t\tif ($proximity.intersection[distanceBefore] <= 0\r\n\t\t\t\t&& $proximity.intersection[distanceAfter] <= 0) {\r\n\t\t\t\t\tvar lengthDifference = rect1Length - rect2Length;\r\n\t\t\t\t\tpercentageContained = Math.abs($proximity.intersection[distanceBefore]) / lengthDifference;\r\n\t\t\t\t} else if ($proximity.intersection[distanceAfter] > 0) {\r\n\t\t\t\t\tpercentageContained = 1;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// Element is smaller than, and within Anchor top/bottom lines\r\n\t\t\t\tif ($proximity.intersection[distanceBefore] >= 0\r\n\t\t\t\t&& $proximity.intersection[distanceAfter] >= 0) {\r\n\t\t\t\t\tvar lengthDifference = rect2Length - rect1Length;\r\n\t\t\t\t\tpercentageContained = $proximity.intersection[distanceAfter] / lengthDifference;\r\n\t\t\t\t} else if ($proximity.intersection[distanceBefore] < 0) {\r\n\t\t\t\t\tpercentageContained = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// ------ Bind the values to the instance object\r\n\t\t\tif ($proximity[axis].advancement === 'positive') {\r\n\t\t\t\t$proximity[axis].percentageIn = percentageIn;\r\n\t\t\t\t$proximity[axis].percentageOut = percentageOut;\r\n\t\t\t\t$proximity[axis].percentagePass = percentagePass;\r\n\t\t\t\t$proximity[axis].percentageContained = percentageContained;\r\n\t\t\t} else {\r\n\t\t\t\t$proximity[axis].percentageIn = 1 - percentageOut;\r\n\t\t\t\t$proximity[axis].percentageOut = 1 - percentageIn;\r\n\t\t\t\t$proximity[axis].percentagePass = 1 - percentagePass;\r\n\t\t\t\t$proximity[axis].percentageContained = 1 - percentageContained;\r\n\t\t\t}\r\n\t\t\tif (rect1Length > rect2Length) {\r\n\t\t\t\t$proximity[axis].percentageContained *= -1;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn new this($proximity, params);\r\n\t}\r\n}\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isNumeric } from '@webqit/util/js/index.js';\r\nimport UIRect from './UIRect.js';\r\n\r\n/**\r\n * -----------\r\n * The Angle class\r\n * -----------\r\n */\r\n\r\nexport default class Angle {\r\n\r\n    /**\r\n     * \r\n     * @param Object props \r\n     * @param Object params \r\n     */\r\n    constructor(props, params = {}) {\r\n        Object.keys(props).forEach(key => {\r\n            Object.defineProperty(this, key, {get: () => props[key]});\r\n        });\r\n        this.params = params;\r\n    }\r\n\r\n    /**\r\n     * Returns values of the angle between two rects.\r\n     *\r\n     * @param UIRect|Element|Event|window \trect1\r\n     * @param UIRect|Element|Event|window \trect2\r\n     * @param Object                     \tparams\r\n     *\r\n     * @return Angle\r\n     */\r\n    static calculate(rect1, rect2, params = {}) {\r\n        rect1 = UIRect.calculate(rect1, params);\r\n        rect2 = UIRect.calculate(rect2, params);\r\n        var $angle = {};\r\n        // Centers of the two rects\r\n        $angle.x = (rect2.left + (rect2.width / 2)) - (rect1.left + (rect1.width / 2));\r\n        $angle.y = (rect2.top + (rect2.height / 2)) - (rect1.top + (rect1.height / 2));\r\n        // Hypotheneus\r\n        $angle.z = Math.sqrt(Math.pow($angle.x, 2) + Math.pow($angle.y, 2));\r\n        // Angle\r\n        if (_isNumeric($angle.y) && _isNumeric($angle.x)) {\r\n            $angle.angleOfElevation = Math.atan($angle.y / $angle.x);\r\n        } else if (_isNumeric($angle.x) && _isNumeric($angle.z)) {\r\n            $angle.angleOfElevation = Math.acos($angle.x / $angle.z);\r\n        } else if (_isNumeric($angle.y) && _isNumeric($angle.z)) {\r\n            $angle.angleOfElevation = Math.asin($angle.y / $angle.z);\r\n        }\r\n        $angle.angleOfDepression = 180 - 90 - $angle.angleOfElevation;\r\n        $angle.isHorizontal = $angle.angleOfElevation < 45;\r\n        $angle.isVertical = $angle.angleOfDepression < 45;\r\n        return new this($angle, params);\r\n    }\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { _isObject, _isNumeric } from '@webqit/util/js/index.js';\r\nimport { _any } from '@webqit/util/arr/index.js';\r\nimport Proximity from './Proximity.js';\r\nimport Angle from './Angle.js';\r\n//import Rotation from './Rotation.js';\r\n//import Scale from './Scale.js';\r\n//import Translation from './Translation.js';\r\n\r\n/**\r\n * The UIRect class.\r\n */\r\nexport default class UIRect {\r\n\r\n    /**\r\n     * Initializes a new UIRect instance.\r\n     *\r\n     * @param object\t \t\t\t\t\tprops\r\n     * @param object\t \t\t\t\t\tparams\r\n     *\r\n     * @return void\r\n     */\r\n    constructor(props, params) {\r\n        Object.keys(props).forEach(key => {\r\n            Object.defineProperty(this, key, {\r\n                get: () => props[key],\r\n                enumerable: ['left', 'top', 'bottom', 'right', 'width', 'height',].includes(key),\r\n            });\r\n        });\r\n        Object.defineProperty(this, 'params', {\r\n            get: () => params,\r\n            enumerable: false,\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * UIRecturns the offset values.\r\n     * \r\n     * @return object\r\n     */\r\n    get offset() {\r\n        return {\r\n            top: this.top,\r\n            left: this.left,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * UIRecturns the size values.\r\n     * \r\n     * @return object\r\n     */\r\n    get size() {\r\n        return {\r\n            width: this.width,\r\n            height: this.height,\r\n        };\r\n    }\r\n\r\n    /** --------- */\r\n\r\n    /**\r\n     * Calculates the angle of two rects.\r\n     *\r\n     * @param UIRect|Element|Event|window \treference\r\n     * @param Object                        params\r\n     *\r\n     * @return Angle\r\n     */\r\n    angleWith(reference, params = {}) {\r\n        return Angle.calculate(this, reference, params);\r\n    }\r\n     \r\n    /**\r\n     * Calculates the proximity of two rects.\r\n     *\r\n     * @param UIRect|Element|Event|window \treference\r\n     * @param string|array\t                axis\r\n     * @param object\t\t                previousProximity\r\n     * @param Object                        params\r\n     *\r\n     * @return Proximity\r\n     */\r\n    proximityWith(reference, axis, previousProximity = null, params = {}) {\r\n        return Proximity.calculate(this, reference, axis, previousProximity, params);\r\n    }\r\n    \r\n    /** --------- */\r\n\r\n    /**\r\n     * Calculates the intersection of two rects.\r\n     *\r\n    * @param UIRect|Element|Event|window \toperand\r\n    * @param Object                         params\r\n     *\r\n     * @return this\r\n     */\r\n    intersectionWith(operand, params = {}) {\r\n        var UIRect = this.constructor;\r\n        operand = UIRect.calculate(operand, params);\r\n        var $rect = {\r\n            left: this.left - operand.left,\r\n            top: this.top - operand.top,\r\n            right: (operand.left + operand.width) - (this.left + this.width),\r\n            bottom: (operand.top + operand.height) - (this.top + this.height),\r\n            geometry: 'intersection',\r\n        };\r\n        // More offsets\r\n        var leftline = Math.max(this.left, operand.left);\r\n        var rightline = Math.min(this.left + this.width, operand.left + operand.width);\r\n        var topline = Math.max(this.top, operand.top);\r\n        var bottomline = Math.min(this.top + this.height, operand.top + operand.height);\r\n        $rect.width = rightline > leftline ? rightline - leftline : 0;\r\n        $rect.height = bottomline > topline ? bottomline - topline : 0;\r\n        // The raw values\r\n        $rect.base = this;\r\n        $rect.operand = operand;\r\n        return new UIRect($rect, params);\r\n    }\r\n\r\n    /**\r\n     * Calculates the union of two rects.\r\n     *\r\n     * @param UIRect|Element|Event|window \toperand\r\n     * @param Object                        params\r\n     *\r\n     * @return Union\r\n     */\r\n    unionWith(operand, params = {}) {\r\n        var UIRect = this.constructor;\r\n        operand = UIRect.calculate(operand, params);\r\n        var $rect = {\r\n            left: Math.min(this.left, operand.left),\r\n            top: Math.min(this.top, operand.top),\r\n            right: Math.max((this.left + this.width), (operand.left + operand.width)),\r\n            bottom: Math.max((this.top + this.height), (operand.top + operand.height)),\r\n            geometry: 'union',\r\n        };\r\n        // More offsets\r\n        $rect.width = $rect.right - $rect.left;\r\n        $rect.height = $rect.bottom - $rect.top;\r\n        // The raw values\r\n        $rect.base = this;\r\n        $rect.operand = operand;\r\n        return new UIRect($rect, params);\r\n    }\r\n    \r\n    /** --------- */\r\n\r\n    /**\r\n     * Calculates the rotation to another rects.\r\n     *\r\n     * @param UIRect|Element|Event|window \toperand\r\n     * @param Object                        params\r\n     *\r\n     * @return Rotation\r\n     */\r\n    rotationTo(operand, params = {}) {\r\n        var $rect = {base: this, operand, transformation: 'rotation', ...this};\r\n        if (_isNumeric(operand)) {\r\n            $rect.angle = operand;\r\n        } else {\r\n            if (!(operand instanceof Angle)) {\r\n                operand  = this.angleWith(operand);\r\n            }\r\n            $rect.angle = operand.angleOfElevation;\r\n        }\r\n        // Centers of the two rects\r\n        //$rect.x = (rect2.left + (rect2.width / 2)) - (this.left + (this.width / 2));\r\n        //$rect.y = (rect2.top + (rect2.height / 2)) - (this.top + (this.height / 2));\r\n        // New coords\r\n        $rect.left = this.left * Math.cos(radians($rect.angle)) + this.top * -Math.sin(radians($rect.angle));\r\n        $rect.top = this.left * Math.sin(radians($rect.angle)) + this.top * Math.cos(radians($rect.angle));\r\n        var UIRect = this.constructor;\r\n        return new UIRect($rect, params);\r\n    }\r\n\r\n    /**\r\n     * Returns a new rect of rect1 scaled to rect2.\r\n     *\r\n     * @param UIRect|Element|Event|window \toperand\r\n     * @param object                     \tparams\r\n     *\r\n     * @return Scale\r\n     */\r\n    scaleTo(operand, params = {}) {\r\n        var UIRect = this.constructor;\r\n        operand = UIRect.calculate(operand, params);\r\n        var $rect = {base: this, operand, transformation: 'scale', ...this};\r\n        $rect.left -= (operand.width - this.width) / 2;\r\n        $rect.top -= (operand.height - this.height) / 2;\r\n        return new UIRect($rect, params);\r\n    }\r\n\r\n    /**\r\n     * Returns a new rect of base aligning with operand.\r\n     *\r\n     * @param UIRect|Element|Event|window \toperand\r\n     * @param object                     \talignment\r\n     * @param Object                     \tparams\r\n     *\r\n     * @return this\r\n     */\r\n    translationTo(operand, alignment = {}, params = {}) {\r\n        var UIRect = this.constructor;\r\n        var intersection = this.intersectionWith(operand);\r\n        var alignment = {};\r\n        var $rect = {base: this, operand, alignment, transformation: 'translation', ...this};\r\n        var length = {x:'width', y:'height'};\r\n        var start = {x:'left', y:'top'},\r\n            end = {x:'right', y:'bottom'};\r\n        ['x', 'y'].forEach(axis => {\r\n            if (params[axis] === false) {\r\n                return;\r\n            }\r\n            var thisLength = this[length[axis]/*height*/];\r\n            // Distinguish and predicate\r\n            alignment[axis] = parseDirective(params[axis] || '');\r\n            switch(alignment[axis].keyword) {\r\n                case 'before':\r\n                    // Pull beyond start\r\n                    $rect[start[axis]/*top*/] = - (intersection[start[axis]/*top*/] + thisLength);\r\n                break;\r\n                case 'after':\r\n                    // Push beyond end\r\n                    $rect[start[axis]/*top*/] = intersection[end[axis]/*bottom*/] + thisLength;\r\n                break;\r\n                case 'start':\r\n                    // Pull to start\r\n                    $rect[start[axis]/*top*/] = - intersection[start[axis]/*top*/];\r\n                break;\r\n                case 'end':\r\n                    // Push to end\r\n                    $rect[start[axis]/*top*/] = intersection[end[axis]/*bottom*/];\r\n                break;\r\n                default:\r\n                    // Align to center\r\n                    $rect[start[axis]/*top*/] = intersection.delta[axis];\r\n            }\r\n            // Apply predicates\r\n            if (alignment[axis].predicates) {\r\n                $rect[start[axis]/*top*/] += evalDirectivePredicates(alignment[axis].predicates, thisLength);\r\n            }\r\n        });\r\n        return new UIRect($rect, params);\r\n    }\r\n\r\n    /**\r\n     * Gets the element's width/height values or left/top offsets or both.\r\n     *\r\n     * A context can be specified from which to resolve left/top distances.\r\n     * document origins are used by default.\r\n     *\r\n     * This function can calculate the rect of 3 different types of object:\r\n     * - DOM element: offsets are calculated from el.getBoundingClientUIRect() and resolved relative to the specified params.offsetOrigin.\r\n     *\t\twidth and height are calculated from el.getBoundingClientUIRect().\r\n     * - Event object: offsets are calculated as the event's (client|offset|page) x/y, depending on the specified params.offsetOrigin.\r\n     *\t\twidth and height are always 0, 0.\r\n     * - Window object: offsets are calculated as the current left/top scroll, as determined by the value of params.offsetOrigin.\r\n     *\t\twidth and height are always the window's inner width/height values.\r\n     *\r\n     * @param UIRect|Element|Event|window \tnode\r\n     * @param object\t \t\t\t\t\tparams\r\n     *\r\n     * @return object\r\n     */\r\n    static calculate(node, params = {}) {\r\n        if (node instanceof UIRect) {\r\n            return node;\r\n        }\r\n        var $rect;\r\n        // --------------------------\r\n        // WHERE params.offsetOrigin is an element or another rect,\r\n        // both rects must be resolved on the same offsets: \"page\", \"client\", \"offset\"\r\n        // --------------------------\r\n        var offsetsResolution = ['page', 'document', window.document].includes(params.offsetOrigin) ? 'page' \r\n            : ((params.offsetOrigin instanceof window.Element) || params.offsetOrigin === 'offset' || params.offsetOrigin === true ? 'offset' \r\n                : (_isObject(params.offsetOrigin) && _isString(params.offsetOrigin.offsetsResolution) ? params.offsetOrigin.offsetsResolution \r\n                    : 'client'));\r\n        // ---------------------------\r\n        if (_isObject(node) && node !== window/*window also has screenX and screenY*/ \r\n        && _any(['clientX', 'clientY', 'offsetX', 'offsetY', 'pageX', 'pageY', 'screenX', 'screenY'], prop => prop in node)) {\r\n            $rect = {width:0, height:0, type: 'event',};\r\n            if (offsetsResolution === 'page') {\r\n                // Relative to document\r\n                $rect.left = $rect.right = node.pageX;\r\n                $rect.top = $rect.bottom = node.pageY;\r\n            } else if (offsetsResolution === 'offset') {\r\n                // Relative to offset parent\r\n                $rect.left = $rect.right = node.offsetX;\r\n                $rect.top = $rect.bottom = node.offsetY;\r\n                $rect.offsetOrigin = node.originalTarget;\r\n            } else {\r\n                // Relative to window\r\n                $rect.left = $rect.right = node.clientX;\r\n                $rect.top = $rect.bottom = node.clientY;\r\n            }\r\n        } else if (node === window) {\r\n            $rect = {width: window.innerWidth, height: window.innerHeight, type: 'window',};\r\n            if (offsetsResolution === 'page') {\r\n                // Relative to document\r\n                $rect.left = window.pageXOffset;// || document.documentElement.scrollLeft;\r\n                $rect.top = window.pageYOffset;// || document.documentElement.scrollTop;\r\n            } else {\r\n                $rect.left = 0;\r\n                $rect.top = 0;\r\n            }\r\n            $rect.right = $rect.left + $rect.width;\r\n            $rect.bottom = $rect.top + $rect.height;\r\n        } else if (node instanceof window.Element) {\r\n            $rect = node.getBoundingClientRect().toJSON();\r\n            $rect.type = 'element';\r\n            delete $rect.x;\r\n            delete $rect.y;\r\n            // Resolves on \"client\" by default. Otherwise...\r\n            if (offsetsResolution === 'page') {\r\n                // Relative to document\r\n                $rect.left += window.pageXOffset;// || document.documentElement.scrollLeft);\r\n                $rect.top += window.pageYOffset;// || document.documentElement.scrollTop);\r\n            } else if (params.offsetOrigin/* original */ === 'offset') {\r\n                params.offsetOrigin = node.offsetParent;\r\n            }\r\n        } else if (node instanceof window.DOMRect) {\r\n            $rect = node.toJSON();\r\n            $rect.type = 'rect';\r\n            delete $rect.x;\r\n            delete $rect.y;\r\n            // Resolves on \"client\" by default. Otherwise...\r\n            if (offsetsResolution === 'page') {\r\n                // Relative to document\r\n                $rect.left += window.pageXOffset;// || document.documentElement.scrollLeft);\r\n                $rect.top += window.pageYOffset;// || document.documentElement.scrollTop);\r\n            } else if (offsetsResolution === 'offset') {\r\n                throw new Error('DOMRects do not resolve on an offset!');\r\n            }\r\n        } else {\r\n            throw new Error('Unknown object type!');\r\n        }\r\n        // -------------\r\n        if (params.offsetOrigin instanceof window.Element) {\r\n            var contextOffset = this.calculate(params.offsetOrigin, {\r\n                ...params,\r\n                instantiate: false,\r\n                offsetOrigin: 'client',\r\n            });\r\n            $rect.left -= contextOffset.left;\r\n            $rect.top -= contextOffset.top;\r\n            $rect.right -= contextOffset.left;\r\n            $rect.bottom -= contextOffset.top;\r\n            $rect.offsetOrigin = params.offsetOrigin;\r\n        }\r\n        $rect.node = node;\r\n        $rect.offsetsResolution = offsetsResolution;\r\n        if (params.instantiate === false) {\r\n            return $rect;\r\n        }\r\n        return new this($rect, params);\r\n    }\r\n}\r\n\r\n/** ------- */\r\n\r\n/**\r\n * @radians()\r\n */\r\nfunction radians(deg) {\r\n    return deg * (Math.PI / 180);\r\n}\r\n\r\n/**\r\n * Parses a directive to obtain a placement keyword and alignment.\r\n *\r\n * @param string\t\t\t \texpr\r\n *\r\n * @return object\r\n */\r\nfunction parseDirective(expr) {\r\n    var regPlacement = new RegExp('(before|after|start|end|center)', 'g');\r\n    var regModifiers = new RegExp('[\\-\\+][0-9]+(%)?', 'g');\r\n    return {\r\n        keyword: (expr.match(regPlacement) || [])[0],\r\n        predicates: expr.match(regModifiers.replace(/ /g, '')),\r\n    };\r\n}\r\n\r\n/**\r\n * Sums a list of Mathematical expressions.\r\n *\r\n * @param array\t\t\t\t \talignment\r\n * @param number \t\t\t\tpercentageContext\r\n *\r\n * @return number\r\n */\r\nfunction evalDirectivePredicates(alignment, percentageContext) {\r\n    return alignment.reduce((total, modifier) => total + (modifier.endsWith('%') \r\n        ? parseFloat(modifier) / 100 * percentageContext\r\n        : parseFloat(modifier)\r\n    ), 0);\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport { getEls } from '../../util.js';\r\nimport UIRect from './UIRect.js';\r\n\r\n/**\r\n * Creates and plays an amiation.\r\n * @see Animation\r\n *\r\n * @param Array|Element|Any\t\tels\r\n * @param object\t\t\t\tparams\r\n *\r\n * @return Rect\r\n */\r\nexport default function rect(els, params = {}) {\r\n\tvar _el = getEls.call(this, els)[0];\r\n\treturn UIRect.calculate(_el, {CNTXT: this, ...params});\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport getListeners from './getListeners.js';\r\nimport { getEls } from '../../util.js';\r\n\r\n/**\r\n * Fires an event on an object's listenerBase.\r\n *\r\n * @param array|Element \t\tels\r\n * @param string                type\r\n * @param object                data\r\n *\r\n * @return Event\r\n */\r\nexport default function(els, type, data = {}) {\r\n\treturn getEls.call(this, els).reduce((_, el) => {\r\n\t\tvar listeners;\r\n\t\tif (listeners = getListeners(el, false)) {\r\n\t\t\treturn listeners.fire({target: el, type, data});\r\n\t\t}\r\n\t}, null);\r\n};", "\r\n/**\r\n * @imports\r\n */\r\nimport * as css from './css/index.js';\r\nimport * as dom from './dom/index.js';\r\nimport * as data from './data/index.js';\r\nimport * as misc from './misc/index.js';\r\nimport * as ui from './ui/index.js';\r\nimport { build } from './util.js';\r\n   \r\n// As globals\r\nexport default function(params = {}) {\r\n    return build({\r\n        css,\r\n        dom,\r\n        data,\r\n        misc,\r\n        ui,\r\n    }, 1, this, params);\r\n}\r\n\r\n /**\r\n  * @exports\r\n  */\r\n export {\r\n     css,\r\n     dom,\r\n     data,\r\n     misc,\r\n     ui,\r\n }\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport PlayUI from './index.js';\r\n\r\nif (!window.WebQit) {\r\n    window.WebQit = {};\r\n}\r\n// As globals\r\nwindow.WebQit.$ = PlayUI.call(window);"],
  "mappings": "mGAAA,IAAAA,GAAA,GAAAC,GAAAD,GAAA,aAAAE,GAAA,aAAAC,GAAA,YAAAC,EAAA,mBAAAC,GAAA,UAAAC,KCQe,SAARC,EAAiBC,EAAK,CAC5B,MAAO,CAAC,MAAM,QAAQA,CAAG,GAAK,OAAOA,GAAQ,UAAYA,CAC1D,CCFe,SAARC,EAAiBC,EAAK,CAC5B,OAAO,OAAOA,CACf,CCDe,SAARC,EAA2BC,KAAQC,EAAY,CAC7C,WAAW,0BACZ,WAAW,wBAA0B,IAAI,KAE7C,IAAIC,EAAQ,WAAW,wBAAwB,IAAIF,CAAG,EACtD,GAAI,CAACE,EAAO,CAER,GADAA,EAAQ,IAAI,IACRD,EAAW,KAAO,GAElB,OAAOC,EAEX,WAAW,wBAAwB,IAAIF,EAAKE,CAAK,CACrD,CAEA,QADIC,EAAKC,EACDD,EAAMF,EAAW,MAAM,GAC3B,IAAKG,EAASF,IAAU,EAAEA,EAAQA,EAAM,IAAIC,CAAG,GAAI,CAE/C,GADAD,EAAQ,IAAI,IACRD,EAAW,KAAO,GAElB,OAAOC,EAEXE,EAAO,IAAID,EAAKD,CAAK,CACzB,CAEJ,OAAOA,CACX,CC1Be,SAARG,EAAiBC,EAAK,CAC5B,OAAO,MAAM,QAAQA,CAAG,CACzB,CCDe,SAARC,GAAiBC,EAAK,CAC5B,OAAO,OAAOA,GAAQ,UACvB,CCEe,SAARC,GAAiBC,EAAK,CAC5B,OAAOC,GAAgBD,CAAG,GAAK,YAAY,KAAK,SAAS,UAAU,SAAS,KAAKA,CAAG,CAAC,CACtF,CCPe,SAARE,GAAiBC,EAAK,CAC5B,OAAOA,IAAQ,MAAQA,IAAQ,EAChC,CCFe,SAARC,EAAiBC,EAAK,CAC5B,OAAO,UAAU,SAAWA,IAAQ,QAAa,OAAOA,EAAQ,IACjE,CCIe,SAARC,EAAiBC,EAAK,CAC5B,OAAO,MAAM,QAAQA,CAAG,GAAM,OAAOA,GAAQ,UAAYA,GAAQC,GAAgBD,CAAG,CACrF,CCCe,SAARE,EAAiBC,EAAK,CAC5B,OAAOC,GAAQD,CAAG,GAAKE,EAAaF,CAAG,GAAKA,IAAQ,IAASA,IAAQ,GAChEG,EAAcH,CAAG,GAAK,CAAC,OAAO,KAAKA,CAAG,EAAE,MAC9C,CCPe,SAARI,EAAiBC,EAAK,CAC5B,OAAOC,GAAgBD,CAAG,GAAMA,GAAO,CAAC,EAAE,SAAS,KAAKA,CAAG,IAAM,mBAClE,CCPe,SAARE,EAAiBC,EAAK,CAC5B,OAAOA,aAAe,QAAW,OAAOA,GAAQ,QACjD,CCGe,SAARC,EAAiBC,EAAK,CAC5B,OAAOC,EAAUD,CAAG,GAAMA,IAAQ,IAAQA,IAAQ,IAASA,IAAQ,MAAQA,IAAQ,IAAM,CAAC,MAAMA,EAAM,CAAC,CACxG,CCPe,SAARE,EAAiBC,EAAK,CAC5B,OAAOA,aAAe,QAAW,OAAOA,GAAQ,UAAYA,IAAQ,IACrE,CCKe,SAARC,GAAiBC,EAAK,CAC5B,MAAO,CAACC,EAAUD,CAAG,GAAK,CAACE,EAAaF,EAAI,MAAM,CACnD,CCRe,SAARG,GAAiBC,EAAKC,EAAS,EAAG,CACxC,IAAIC,EAAQ,EACZF,EAAI,QAAQG,GAAO,CAClBD,GACD,CAAC,EACD,IAAIE,EAASJ,EAAI,MAAMA,EAAI,OAASE,EAAOD,CAAM,EACjD,OAAO,UAAU,OAAS,EAAIG,EAASA,EAAO,EAC/C,CCFe,SAARC,GAAiBC,EAAKC,EAAS,EAAG,CACxC,OAAO,UAAU,OAAS,EACvBC,GAAOF,EAAI,MAAM,EAAE,QAAQ,EAAGC,CAAM,EAAE,QAAQ,EAC9CC,GAAOF,EAAI,MAAM,EAAE,QAAQ,CAAC,CAChC,CCTe,SAARG,GAAiBC,KAAQC,EAAO,CACtC,OAAAA,EAAM,QAAQC,GAAO,CAChBF,EAAI,QAAQE,CAAG,EAAI,GACtBF,EAAI,KAAKE,CAAG,CAEd,CAAC,EACMF,CACR,CCFe,SAARG,GAAiBC,EAAKC,EAAO,CACnCA,EAAQA,GAAS,OAAO,UACxBA,EAAQA,GAAS,CAACC,EAASD,CAAK,EAAI,CAACA,CAAK,EAAIA,EAI9C,QAFIE,EAAkB,CAAC,EACnBH,EAAMA,EACHA,IAAQ,CAACC,GAASA,EAAM,QAAQD,CAAG,EAAI,IAAMA,EAAI,OAAS,WAChEG,EAAgB,KAAKH,CAAG,EACxBA,EAAMA,EAAM,OAAO,eAAeA,CAAG,EAAI,KAE1C,OAAOG,CACR,CCVe,SAARC,GAAiBC,EAAKC,EAAO,CACnC,IAAIC,EAAU,CAAC,EACf,OAAAC,GAAmBH,EAAKC,CAAK,EAAE,QAAQD,GAAO,CAC7CI,GAAYF,EAAS,GAAG,OAAO,oBAAoBF,CAAG,CAAC,CACxD,CAAC,EACME,CACR,CCFe,SAARG,EAA+BC,EAAMC,EAAUC,EAAY,GAAOC,EAAY,GAAOC,EAAc,GAAO,CAChH,IAAIC,EAAQ,EACRC,EAAON,EAAK,MAAM,EAKtB,IAJIO,EAAWD,CAAI,GAAKA,IAAS,IAAQA,IAAS,MACjDD,EAAQC,EACRA,EAAON,EAAK,MAAM,GAEf,CAACA,EAAK,OACT,MAAM,IAAI,MAAM,8CAA8C,EAE/D,OAAAA,EAAK,QAAQ,CAACQ,EAAMC,IAAM,CACrB,CAACC,EAAcF,CAAI,GAAK,CAACG,EAAYH,CAAI,IAG5CN,EAAYU,GAAqBJ,CAAI,EAAI,OAAO,oBAAoBA,CAAI,GAAG,QAAQK,GAAO,CAC1F,GAAI,EAACZ,EAASY,EAAKP,EAAME,EAAMC,CAAC,EAGhC,KAAIK,EAAYR,EAAKO,GACjBE,EAAYP,EAAKK,GACrB,IAAMG,EAASF,CAAS,GAAKE,EAASD,CAAS,GAAOE,EAAUH,CAAS,GAAKG,EAAUF,CAAS,KAC7FV,IAAU,IAAQA,EAAQ,GAE7BC,EAAKO,GAAOG,EAASF,CAAS,GAAKE,EAASD,CAAS,EAAI,CAAC,EAAI,CAAC,EAC/DhB,EAAc,CAACQ,EAAWF,CAAK,EAAIA,EAAQ,EAAIA,EAAOC,EAAKO,GAAMC,EAAWC,CAAS,EAAGd,EAAUC,EAAWC,EAAWC,CAAW,UAE/HY,EAASV,CAAI,GAAKU,EAASR,CAAI,EAC9BL,EACHG,EAAKO,GAAOE,EAEZT,EAAK,KAAKS,CAAS,MAIpB,IAAI,CACCX,EACH,OAAO,eAAeE,EAAMO,EAAK,OAAO,yBAAyBL,EAAMK,CAAG,CAAC,EAE3EP,EAAKO,GAAOL,EAAKK,EAEnB,MAAE,CAAU,EAGf,CAAC,CACF,CAAC,EACMP,CACR,CCjDe,SAARY,EAAiBC,EAAKC,EAAU,CACtC,IAAIC,EAAc,OAClB,OAAIC,EAAcH,CAAG,GACpB,OAAO,KAAKA,CAAG,EAAE,QAAQ,CAACI,EAAGC,IAAM,CAC9BH,IAAgB,KACnBA,EAAcD,EAASK,EAAWF,CAAC,EAAI,WAAWA,CAAC,EAAIA,EAAGJ,EAAII,GAAIC,CAAC,EAErE,CAAC,EAEKH,CACR,CCZe,SAARK,MAAoBC,EAAM,CAChC,OAAOC,EAAeD,EAAM,CAACE,EAAGC,EAAMC,IAC9B,GACL,GAAoB,GAAoB,EAAoB,CAChE,CCRe,SAARC,GAAiBC,EAASC,EAAQC,EAAa,GAAO,CAC5D,GAAID,GAAU,GACb,OAAOD,EAER,IAAIG,EAAMD,EAAaF,EAAQ,YAAYC,CAAM,EAAID,EAAQ,QAAQC,CAAM,EAC3E,OAAIE,IAAQ,GACJH,EAEDA,EAAQ,OAAO,EAAGG,CAAG,CAC7B,CCLe,SAARC,EAAiBC,EAASC,EAAQ,CACxC,OAAOC,GAAQF,EAASC,EAAQ,EAAI,CACrC,CCPe,SAARE,GAAiBC,EAAKC,EAAW,CACvC,OAAOD,IAAQ,OAAY,GAAKA,EAAI,MAAM,WAAW,EAAE,KAAKC,GAAwB,GAAG,CACxF,CCFe,SAARC,GAAiBC,EAAKC,EAAQ,CACpC,OAAI,OAAOD,GAAQ,SACXA,EAEDA,EAAI,QAAQ,SAAW,SAASE,EAAK,CAAE,OAAOA,EAAI,OAAO,CAAC,EAAE,YAAY,GAAM,OAAOD,IAAW,QAAaA,EAAUC,EAAI,OAAO,CAAC,EAAE,YAAY,EAAIA,EAAI,OAAO,CAAC,EAAI,CAAC,CAC9K,CCAe,SAARC,GAAiBC,EAAKC,EAAW,CAEvC,OAAAD,EAAME,GAASF,EAAI,QAAQ,KAAM,GAAG,CAAC,EAAE,QAAQ,KAAM,EAAE,EAChDC,EAAYD,EAAMA,EAAI,GAAG,YAAY,EAAIA,EAAI,OAAO,CAAC,CAC7D,CCAe,SAARG,GAAiBC,EAAKC,EAAS,CAAC,EAAGC,EAAc,GAAM,CAC7D,IAAIC,EAAQ,EACZ,OAAIC,EAAW,UAAU,EAAE,GAAKC,EAAc,UAAU,EAAE,IACzDF,EAAQ,UAAU,GAClBH,EAAM,UAAU,GAChBC,EAAS,UAAU,IAAM,CAAC,GAEpBK,EAAe,CAACH,EAAO,CAAC,EAAGH,CAAG,EAAG,CAACO,EAAKC,EAAMC,IAC5CC,EAAYT,CAAM,EAAIA,EAAOM,CAAG,EACnCI,EAASV,CAAM,GAAKA,EAAO,OAASA,EAAO,QAAQM,CAAG,EAAI,GAAK,GACjE,GAAoB,GAAoBL,CAAW,CACvD,CCZe,SAARU,EAAiBC,EAAKC,EAAa,GAAM,CAC/C,OAAIC,EAASF,CAAG,EACRA,EAEJ,CAACC,GAAcE,EAAUH,CAAG,EACxB,CAACA,CAAG,EAERA,IAAQ,IAASA,IAAQ,GAAKI,EAASJ,CAAG,EACtC,CAAC,EAELK,GAAaL,CAAG,EACZ,MAAM,UAAU,MAAM,KAAKA,CAAG,EAElCG,EAAUH,CAAG,EACT,OAAO,OAAOA,CAAG,EAElB,CAACA,CAAG,CACZ,CChBA,IAAMM,GAAQ,SAASC,EAAKC,EAAUC,EAAO,GAAO,CACnD,IAAIC,EAAO,KACPC,EAASJ,EACRK,EAASL,CAAG,IAChBG,EAAO,OAAO,KAAKH,CAAG,EACtBI,EAAS,OAAO,OAAOJ,CAAG,GAE3B,IAAIM,EAAS,OACTC,EAAQH,EAAO,OAAO,CAACI,EAAMC,IAC5BH,IAAW,SACVL,EAASQ,EAAMD,CAAI,GAGnBN,IAASQ,EAAcD,CAAI,GAAKE,EAAYF,CAAI,KAAOH,EAASP,GAAMU,EAAMR,EAAUC,CAAI,KAAO,QAC7FO,EAGFD,EACL,MAAS,EACZ,GAAID,IAAU,OAAW,CACxB,IAAIK,EAAMT,EAAOA,EAAKC,EAAO,QAAQG,CAAK,GAAKH,EAAO,QAAQG,CAAK,EACnE,OAAOD,IAAW,OAAY,CAACM,CAAG,EAAE,OAAOC,EAASP,CAAM,CAAC,EAAIM,CAChE,CACD,EAKOE,GAAQf,GC/BA,SAARgB,GAAiBC,EAAKC,EAAM,KAAM,CACxC,IAAIC,EAAM,CAAC,EACX,OAAI,UAAU,SAAW,IACpBC,EAASH,CAAG,GAAKG,EAASF,CAAG,EAChCD,EAAI,QAAQ,CAACI,EAAGC,IAAMH,EAAIE,GAAKH,EAAII,EAAE,EAErCH,EAAIF,GAAOC,GAGNC,CACR,CCDe,SAARI,GAAiBC,EAAMC,EAAMC,EAAO,CAAC,EAAGC,EAAW,CAAC,EAAG,CAC7DF,EAAOG,EAASH,CAAI,EAAE,MAAM,EAE5B,QADII,EAAQL,EACN,CAACM,EAAaD,CAAK,GAAK,CAACE,GAAQF,CAAK,GAAKJ,EAAK,QAAQ,CAC7D,IAAIO,EAAOP,EAAK,MAAM,EACtB,GAAI,EAAEC,EAAK,IAAMA,EAAK,IAAIG,EAAOG,CAAI,EAAKC,EAAcJ,CAAK,EAAIG,KAAQH,EAAQA,EAAMG,IAAS,CAC/FL,EAAS,OAAS,GAClB,MACD,CACAE,EAAQH,EAAK,IAAMA,EAAK,IAAIG,EAAOG,CAAI,EAAIH,EAAMG,EAClD,CACA,OAAAL,EAAS,OAAS,GACXE,CACR,CCfe,SAARK,GAAiBC,EAAKC,EAAMC,EAAKC,EAAY,CAAC,EAAGC,EAAO,CAAC,EAAG,CAClE,IAAMC,EAAO,CAACC,EAAQC,EAAKL,IACtBE,EAAK,IACDA,EAAK,IAAIE,EAAQC,EAAKL,CAAG,GAE5BM,EAAWP,EAAKQ,EAAE,GAAKC,EAASJ,CAAM,EACzCA,EAAO,KAAKJ,CAAG,EAEfI,EAAOC,GAAOL,EAER,IAGTD,EAAOU,EAASV,CAAI,EAEpB,QADIK,EAASN,EACLS,EAAI,EAAGA,EAAIR,EAAK,OAAQQ,IAC/B,GAAIA,EAAIR,EAAK,OAAS,EAAG,CACxB,GAAI,CAACK,GAAW,CAACM,EAAcN,CAAM,GAAK,CAACO,EAAYP,CAAM,EAC5D,MAAO,GAER,IAAIQ,EAASC,GAAKT,EAAQL,EAAKQ,GAAIL,CAAI,EACvC,GAAI,CAACQ,EAAcE,CAAM,EAAG,CAC3B,GAAIV,EAAK,YAAc,GACtB,MAAO,GAERU,EAASD,EAAYT,EAAK,SAAS,EAAIA,EAAK,UAAUK,CAAC,EAAKD,EAAWP,EAAKQ,EAAI,EAAE,EAAI,CAAC,EAAI,CAAC,EAC5F,IAAIO,EAAgBX,EAAKC,EAAQL,EAAKQ,GAAIK,CAAM,EAChD,GAAI,CAACE,EACJ,MAAO,EAET,CACAV,EAASQ,CACV,KACC,QAAOT,EAAKC,EAAQL,EAAKQ,GAAIP,CAAG,CAGnC,CClDe,SAARe,EAAiBC,EAAK,CAC5B,MAAO,CAAC,MAAM,QAAQA,CAAG,GAAK,OAAOA,GAAQ,UAAYA,CAC1D,CCFO,SAASC,GAAQC,EAAQ,CAE5B,IAAIC,EAAY,OAAOD,EAAO,eAAmB,IACjD,GAAIC,EACA,MAAO,UAGX,IAAIC,EAAW,eAAe,KAAKF,EAAO,WAAW,GAAM,SAAUG,EAAG,CAAE,OAAOA,EAAE,SAAS,IAAM,mCAAqC,EAAG,CAACH,EAAO,QAAc,OAAOA,EAAO,OAAW,KAAeA,EAAO,OAAO,gBAAiB,EACvO,GAAIE,EACA,MAAO,SAGX,IAAIE,EAAW,CAAC,CAACJ,EAAO,SAAW,CAAC,CAACA,EAAO,OAAO,UAAY,CAAC,CAACA,EAAO,OAAO,SAE3EK,EAAiBD,GAAaJ,EAAO,UAAU,UAAU,QAAQ,KAAK,GAAK,GAE3EM,EAAW,CAAC,CAACN,EAAO,KAAO,CAAC,CAACA,EAAO,IAAI,QAAW,CAAC,CAACA,EAAO,OAASA,EAAO,UAAU,UAAU,QAAQ,OAAO,GAAK,EAGpHO,EAA4B,CAAC,CAACP,EAAO,SAAS,aAE9CQ,EAAS,CAACD,GAAQ,CAAC,CAACP,EAAO,WAE3BS,GAAWL,GAAYE,IAAY,CAAC,CAACN,EAAO,IAChD,OAAOQ,EAAS,OACZD,EAAO,KACHD,EAAU,QACND,EAAiB,cACbD,EAAW,SAAW,SAK1C,CAOO,SAASM,GAAUV,EAAQ,CAC9B,IAAIW,EAASX,EAAO,iBAAiBA,EAAO,SAAS,gBAAiB,EAAE,EACpEY,GAAU,MAAM,UAAU,MAAM,KAAKD,CAAM,EAAE,KAAK,EAAE,EAAE,MAAM,mBAAmB,GAAKA,EAAO,QAAU,IAAM,CAAC,GAAI,GAAG,GAAG,GACtHE,GAAQ,kBAAmB,MAAM,IAAI,OAAO,IAAMD,EAAS,IAAK,GAAG,CAAC,GAAK,CAAC,GAAG,GACjF,MAAO,CACH,IAAAC,EACA,OAAAD,EACA,IAAK,IAAMA,EAAS,GACxB,CACJ,CCxCe,SAARE,GAAmB,CACtB,GAAI,EAAEC,EAAU,IAAI,GAAK,KAAK,SAAY,OAAO,OAAW,IACxD,MAAM,IAAI,MAAM,+BAA+B,EAEnD,IAAMC,EAAUD,EAAU,IAAI,GAAK,KAAK,OAAS,KAAK,OAAS,OAK/D,GAHKC,EAAQ,SACTA,EAAQ,OAAS,CAAC,GAElB,CAACA,EAAQ,OAAO,OAAQ,CAExB,IAAIC,EAASC,EACb,OAAO,eAAeF,EAAQ,OAAQ,SAAU,CAAC,IAAK,IAAMA,CAAO,CAAC,EACpE,OAAO,eAAeA,EAAQ,OAAQ,SAAU,CAAC,MAAO,CACpD,QAAS,KACAC,IACDA,EAAUE,GAAcH,CAAO,GAE5BC,GAEX,UAAW,KACFC,IACDA,EAAUE,GAAgBJ,CAAO,GAE9BE,EAEf,CAAC,CAAC,CACN,CACA,OAAOF,EAAQ,MAClB,CCrCc,SAARK,GAAiBC,EAAK,CAC5B,OAAO,OAAOA,GAAQ,UACvB,CCGe,SAARC,EAAiBC,EAAK,CAC5B,OAAO,MAAM,QAAQA,CAAG,GAAM,OAAOA,GAAQ,UAAYA,GAAQC,GAAgBD,CAAG,CACrF,CCRe,SAARE,GAAiBC,EAAK,CAC5B,OAAOA,aAAe,QAAW,OAAOA,GAAQ,QACjD,CCGe,SAARC,GAAiBC,EAAK,CAC5B,OAAOC,GAAUD,CAAG,GAAMA,IAAQ,IAAQA,IAAQ,IAASA,IAAQ,MAAQA,IAAQ,IAAM,CAAC,MAAMA,EAAM,CAAC,CACxG,CCFA,IAAqBE,GAArB,KAA4B,CAO3B,YAAYC,EAAQC,EAAW,GAAM,CACpC,KAAK,OAASD,EACd,KAAK,MAAQC,EACb,KAAK,cAAgB,CAAC,EACtB,KAAK,eAAiB,CAAC,EACvB,KAAK,KAAK,CACX,CAEA,MAAO,CACN,KAAK,OAAO,sBAAsB,IAAM,CACvC,KAAK,cAAc,QAAQ,CAACC,EAAUC,IAAM,CACvCD,GAAY,CAACA,EAAS,IACzB,KAAK,cAAcC,GAAK,KAE1B,CAAC,EACD,KAAK,eAAe,QAAQ,CAACD,EAAUC,IAAM,CACxCD,GAAY,CAACA,EAAS,IACzB,KAAK,eAAeC,GAAK,KAE3B,CAAC,EACD,KAAK,KAAK,CACX,CAAC,CACF,CAUA,OAAOD,EAAUE,EAAc,GAAO,CACrC,GAAIA,EACH,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACnC,KAAK,QAAU,GAClBJ,EAASG,EAASC,CAAM,EAExB,KAAK,cAAc,KAAK,IAAM,CAC7BJ,EAASG,EAASC,CAAM,CACzB,CAAC,CAEH,CAAC,EAEE,KAAK,QAAU,GAClBJ,EAAS,EAET,KAAK,cAAc,KAAKA,CAAQ,CAElC,CAUA,QAAQA,EAAUE,EAAc,GAAO,CACtC,GAAIA,EACH,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACnC,KAAK,QAAU,GAClBJ,EAASG,EAASC,CAAM,EAExB,KAAK,eAAe,KAAK,IAAM,CAC9BJ,EAASG,EAASC,CAAM,CACzB,CAAC,CAEH,CAAC,EAEE,KAAK,QAAU,GAClBJ,EAAS,EAET,KAAK,eAAe,KAAKA,CAAQ,CAEnC,CAYA,MAAMK,EAAMC,EAAOC,EAAiB,CACnC,KAAK,OAAO,IAAM,CAEjB,IAAIC,EAAaH,EAAKE,CAAe,EACrC,GAAIC,EAAY,CAEf,IAAIC,EAAaD,GAAe,CAC/B,KAAK,QAAQ,IAAM,CAClB,IAAIE,EAAcJ,EAAME,EAAYD,CAAe,EACnD,GAAIG,EAAa,CAEhB,IAAIC,EAAqBD,GAAgB,CACxC,KAAK,MAAML,EAAMC,EAAOI,CAAW,CACpC,EAIIA,aAAuB,QAC1BA,EAAY,KAAKC,CAAiB,EAElCA,EAAkB,CAEpB,CACD,CAAC,CACF,EAIIH,aAAsB,QACzBA,EAAW,KAAKC,CAAS,EAEzBA,EAAU,CAEZ,CACD,CAAC,CACF,CAED,ECzIe,SAARG,EAAiBC,EAAK,CAC5B,OAAOA,aAAe,QAAW,OAAOA,GAAQ,UAAYA,IAAQ,IACrE,CCFe,SAARC,GAAiBC,EAAK,CAC5B,OAAO,MAAM,QAAQA,CAAG,CACzB,CCFe,SAARC,GAAiBC,EAAK,CAC5B,OAAO,UAAU,SAAWA,IAAQ,QAAa,OAAOA,EAAQ,IACjE,CCKe,SAARC,GAAiBC,EAAK,CAC5B,MAAO,CAACC,EAAUD,CAAG,GAAK,CAACE,GAAaF,EAAI,MAAM,CACnD,CCTe,SAARG,GAAiBC,EAAK,CAC5B,OAAOA,IAAQ,MAAQA,IAAQ,EAChC,CCOe,SAARC,GAAiBC,EAAK,CAC5B,OAAOC,GAAQD,CAAG,GAAKE,GAAaF,CAAG,GAAKA,IAAQ,IAASA,IAAQ,GAChEG,EAAcH,CAAG,GAAK,CAAC,OAAO,KAAKA,CAAG,EAAE,MAC9C,CCHe,SAARI,EAAiBC,EAAKC,EAAa,GAAM,CAC/C,OAAIC,GAASF,CAAG,EACRA,EAEJ,CAACC,GAAcE,EAAUH,CAAG,EACxB,CAACA,CAAG,EAERA,IAAQ,IAASA,IAAQ,GAAKI,GAASJ,CAAG,EACtC,CAAC,EAELK,GAAaL,CAAG,EACZ,MAAM,UAAU,MAAM,KAAKA,CAAG,EAElCG,EAAUH,CAAG,EACT,OAAO,OAAOA,CAAG,EAElB,CAACA,CAAG,CACZ,CC5Be,SAARM,GAAiBC,EAAU,CAC9B,IAAMC,EAASC,EAAK,KAAK,IAAI,EACzBD,EAAO,IAAI,YAAcA,EAAO,OAAO,SAAS,aAAe,WAC/DD,EAASC,EAAO,MAAM,GAEjBA,EAAO,OAAO,oBACfA,EAAO,OAAO,kBAAoB,CAAC,EACnCA,EAAO,OAAO,SAAS,iBAAiB,mBAAoB,IAAM,CAC9DA,EAAO,IAAI,WAAa,GACxBA,EAAO,OAAO,kBAAkB,OAAO,CAAC,EAAE,QAAQE,GAAMA,EAAGF,EAAO,MAAM,CAAC,CAC7E,EAAG,EAAK,GAEZA,EAAO,OAAO,kBAAkB,KAAKD,CAAQ,EAErD,CCNA,IAAqBI,GAArB,KAA+B,CAO9B,YAAYC,EAAQ,CACnB,KAAK,OAASA,CACf,CAqBA,QAAQC,EAAKC,EAAUC,EAAS,CAAC,EAAG,CACnC,OAAAA,EAAO,GAAK,QACL,KAAK,iBAAiBF,EAAK,CAACG,EAAIC,EAAUC,EAAaC,EAAYC,IAAiB,CAC1FN,EAASE,EAAIC,EAAUC,EAAaC,EAAYC,CAAY,CAC7D,EAAGL,CAAM,CACV,CAcA,UAAUF,EAAKC,EAAUC,EAAS,CAAC,EAAG,CACrC,OAAAA,EAAO,GAAK,UACL,KAAK,iBAAiBF,EAAK,CAACG,EAAIC,EAAUC,EAAaC,EAAYC,IAAiB,CAC1FN,EAASE,EAAIC,EAAUC,EAAaC,EAAYC,CAAY,CAC7D,EAAGL,CAAM,CACV,CAYA,UAAUM,EAAUP,EAAUC,EAAS,CAAC,EAAG,CAE1CO,GAAS,KAAK,KAAK,OAAQ,IAAM,CAE5B,KAAK,OAAO,kBACf,KAAK,QAAQD,EAAU,CAACR,EAAKI,IAAa,CACzCJ,EAAI,QAAQG,GAAMF,EAASE,EAAIC,CAAQ,CAAC,CACzC,EAAGF,CAAM,EAENQ,EAAUF,CAAQ,EAGrBG,EAAS,KAAK,OAAO,SAAS,iBAAiBH,CAAQ,CAAC,EAAE,QAAQL,GAAMF,EAASE,EAAI,CAAC,CAAC,EAC7EK,EAAS,YACnBP,EAASO,EAAU,CAAC,CAEtB,CAAC,CACF,CAYA,SAASA,EAAUP,EAAUC,EAAS,CAAC,EAAG,CAEzCO,GAAS,KAAK,KAAK,OAAQ,IAAM,CAE5B,KAAK,OAAO,kBACf,UAAUD,EAAU,CAACR,EAAKI,IAAa,CACtCJ,EAAI,QAAQG,GAAMF,EAASE,EAAIC,CAAQ,CAAC,CACzC,EAAGF,CAAM,EAENQ,EAAUF,CAAQ,EAGjBG,EAAS,KAAK,OAAO,SAAS,iBAAiBH,CAAQ,CAAC,EAAE,SAAW,GACxEP,EAAS,KAAM,CAAC,EAENO,EAAS,YACpBP,EAASO,EAAU,CAAC,CAEtB,CAAC,CACF,CAYA,iBAAiBR,EAAKC,EAAUC,EAAS,CAAC,EAAG,CAC5CF,EAAMW,EAASX,EAAK,EAAmB,EACvC,IAAIY,EAAS,CAACT,EAAIU,IAAkB,CAGnC,GADAA,EAAgBA,EAAc,OAAOC,GAAQA,EAAK,OAAO,EACrDJ,EAAUP,CAAE,EAAG,CAElB,IAAIY,EAAUF,EAAc,OAAOC,GAAQA,EAAK,QAAQX,CAAE,CAAC,EAE3D,GAAID,EAAO,0BAA4B,KACtCa,EAAUF,EACR,OAAO,CAACG,EAAYF,IAASE,EAAW,OAAOL,EAASG,EAAK,iBAAiBX,CAAE,CAAC,CAAC,EAAGY,CAAO,EAC1FA,EAAQ,QACX,OAAOA,CAGV,KAAO,CAEN,GAAIF,EAAc,SAASV,CAAE,EAC5B,MAAO,CAACA,CAAE,EAGX,GAAID,EAAO,0BAA4B,IAASW,EAAc,QAE7D,QADII,EAAad,EACXc,EAAaA,EAAW,YAC7B,GAAIJ,EAAc,SAASI,CAAU,EACpC,MAAO,CAACd,CAAE,EAId,CACD,EACIe,EAAQ,CAAClB,EAAKmB,KAIZA,EAAY,gBAChBA,EAAY,cAAgB,IAAI,KAG1BnB,EAAI,OAAO,CAACe,EAASZ,IAAO,CAElC,IAAIiB,EACJ,OAAID,EAAY,cAAc,IAAIhB,CAAE,EACnCiB,EAAWD,EAAY,cAAc,IAAIhB,CAAE,GAE3CiB,EAAWR,EAAOT,EAAIgB,EAAaT,EAAUP,CAAE,CAAC,GAAK,CAAC,EACtDgB,EAAY,cAAc,IAAIhB,EAAIiB,CAAQ,GAEpCL,EAAQ,OAAOK,CAAQ,CAC/B,EAAG,CAAC,CAAC,GAEFd,EAAa,IAAI,IAAOC,EAAe,IAAI,IAC3Cc,EAAO,CAACC,EAAMC,EAAOlB,IAAgB,CACnCkB,GAASrB,EAAO,KAAO,WAAe,CAACqB,GAASrB,EAAO,KAAO,UAG9DoB,EAAOJ,EAAMlB,EAAKsB,CAAI,GAAG,SACzBpB,EAAO,mBACVoB,EAAK,QAAQnB,GAAM,CACdoB,GACHjB,EAAW,IAAIH,CAAE,EACjBI,EAAa,OAAOJ,CAAE,IAEtBG,EAAW,OAAOH,CAAE,EACpBI,EAAa,IAAIJ,CAAE,EAErB,CAAC,EACDF,EAASqB,EAAMC,EAAOlB,EAAaC,EAAYC,CAAY,GAE3DN,EAASqB,EAAMC,EAAOlB,CAAW,EAGpC,EACImB,EAAUtB,EAAO,SAAW,KAAK,OAAO,SAAS,gBACjDuB,EAAK,KAAK,SAASD,EAAS,CAACE,EAAqBC,EAAqBC,EAAYC,IAAiB,CAClG3B,EAAO,mBACXmB,EAAKK,EAAqB,EAAG,EAAI,EACjCL,EAAKK,EAAoB,OAAOC,CAAmB,EAAG,EAAG,EAAI,EAC7DN,EAAKM,EAAqB,EAAG,EAAI,GAElCN,EAAKQ,EAAc,CAAC,EACpBR,EAAKO,EAAY,CAAC,CACnB,CAAC,EACD,OAAOH,CACR,CAiBA,aAAatB,EAAIF,EAAU6B,EAAS,CAAC,EAAG,CACvC,IAAIC,EAAW,IAAI,KAAK,OAAO,iBAAiB9B,CAAQ,EACpDC,EAAS,CAAC,WAAW,GAAM,kBAAkB,EAAI,EACrD,OAAI4B,IACH5B,EAAO,gBAAkB4B,GAE1BC,EAAS,QAAQ5B,EAAID,CAAM,EACpB6B,CACR,CAWA,aAAa5B,EAAIF,EAAU+B,EAAU,GAAO,CAC3C,IAAID,EAAW,IAAI,KAAK,OAAO,iBAAiB9B,CAAQ,EACpDC,EAAS,CAAC,UAAU,GAAM,QAAA8B,CAAO,EACrC,OAAAD,EAAS,QAAQ5B,EAAID,CAAM,EACpB6B,CACR,CAWA,WAAW5B,EAAIF,EAAUC,EAAQ,CAChC,IAAI6B,EAAW,IAAI,KAAK,OAAO,iBAAiB9B,CAAQ,EACxD,OAAA8B,EAAS,QAAQ5B,EAAID,CAAM,EACpB6B,CACR,CAOA,SAASP,EAASvB,EAAU,CAC3B,GAAI,CAACgC,GAAuB,IAAIT,CAAO,EAAG,CACzC,IAAMU,EAAY,IAAI,IAChBH,EAAW,IAAI,KAAK,OAAO,iBAAiBI,GAAa,CAC9D,GAAI,EAACD,EAAU,KAIf,KAAIN,EAAaO,EAAU,OAAO,CAACb,EAAMc,IAAQd,EAAK,OAAOX,EAASyB,EAAI,UAAU,CAAC,EAAG,CAAC,CAAC,EAC1FP,EAAeM,EAAU,OAAO,CAACb,EAAMc,IAAQd,EAAK,OAAOX,EAASyB,EAAI,YAAY,CAAC,EAAG,CAAC,CAAC,EAC1FV,EAAsB,CAAC,EACvBC,EAAsB,CAAC,EAEvBC,EAAa,IAAI,IAAIA,CAAU,EAC/BC,EAAe,IAAI,IAAIA,CAAY,EACnCD,EAAW,QAAQzB,GAAM,CACpB0B,EAAa,IAAI1B,CAAE,IACtB0B,EAAa,OAAO1B,CAAE,EACtByB,EAAW,OAAOzB,CAAE,EAChBA,EAAG,YACNuB,EAAoB,KAAKvB,CAAE,EAE3BwB,EAAoB,KAAKxB,CAAE,EAG9B,CAAC,EAEDyB,EAAa,CAAC,GAAGA,CAAU,EAC3BC,EAAe,CAAC,GAAGA,CAAY,EAE/BK,EAAU,QAAQjC,GAAYA,EAASyB,EAAqBC,EAAqBC,EAAYC,CAAY,CAAC,EAC3G,CAAC,EACDE,EAAS,QAAQP,EAAS,CAAC,UAAU,GAAM,QAAQ,EAAI,CAAC,EACxDS,GAAuB,IAAIT,EAAS,CAAC,UAAAU,EAAW,SAAAH,CAAQ,CAAC,CAC1D,CACA,IAAMM,EAAYJ,GAAuB,IAAIT,CAAO,EACpD,OAAAa,EAAU,UAAU,IAAIpC,CAAQ,EACzB,CAAC,YAAa,CACpBoC,EAAU,UAAU,OAAOpC,CAAQ,CACpC,EAAG,WAAY,CACdoC,EAAU,UAAU,IAAIpC,CAAQ,CACjC,CAAC,CACF,CACD,EAEMgC,GAAyB,IAAI,ICzUpB,SAARK,GAAiBC,EAAQ,CAC5BC,GAAWD,CAAM,EACjBE,GAAiBF,CAAM,EACvBG,GAAgBH,CAAM,CAC1B,CAOO,SAASC,GAAWD,EAAQ,CAC1BA,EAAO,MACRA,EAAO,IAAM,CAAC,GAEbA,EAAO,IAAI,SAQZA,EAAO,IAAI,OAASI,GAAOA,EAAI,QAAQ,iBAAkB,MAAM,EAEvE,CASO,SAASF,GAAiBF,EAAQ,CAC/B,gBAAiBA,EAAO,KAAK,WAC/B,OAAO,eAAeA,EAAO,KAAK,UAAW,cAAe,CAAC,IAAK,UAAW,CACzE,MAAO,CAAC,KAAK,eAAiB,EAC1B,KAAK,cAAc,wBAAwB,IAAI,EAC7C,KAAK,+BACf,CAAC,CAAC,CAEV,CASO,SAASG,GAAgBH,EAAQ,CAC/BA,EAAO,QAAQ,UAAU,UAC1BA,EAAO,QAAQ,UAAU,QACzBA,EAAO,QAAQ,UAAU,iBACzBA,EAAO,QAAQ,UAAU,oBACzBA,EAAO,QAAQ,UAAU,mBACzBA,EAAO,QAAQ,UAAU,kBACzBA,EAAO,QAAQ,UAAU,uBACzB,SAASK,EAAG,CAGR,QAFIC,GAAW,KAAK,UAAY,KAAK,eAAe,iBAAiBD,CAAC,EAClE,EAAIC,EAAQ,OACT,EAAE,GAAK,GAAKA,EAAQ,KAAK,CAAC,IAAM,MAAM,CAC7C,OAAO,EAAI,EACf,EAER,CCpDe,SAARC,GAAuBC,EAAOC,EAAU,KAAMC,EAAM,GAAO,CACjE,IAAMC,EAASC,EAAK,KAAK,IAAI,EAC7B,GAAIC,EAAUL,CAAK,EAAG,CACrB,IAAIM,EACJ,GAAIN,EAAM,KAAK,EAAE,WAAW,GAAG,EAAG,CAEjC,IAAIO,EAAOJ,EAAO,OAAO,SAAS,cAAc,KAAK,EACrDI,EAAK,UAAYP,EACjBM,EAAMJ,EAAMM,EAASD,EAAK,QAAQ,EAAIA,EAAK,UAC5C,MACCD,EAAMJ,EAAMM,EAASC,GAAiB,KAAK,KAAMT,EAAOC,CAAO,CAAC,EAAIS,GAAc,KAAK,KAAMV,EAAOC,CAAO,EAE5G,OAAOK,CACR,CACA,OAAIN,aAAiBG,EAAO,OAAO,QAC3BD,EAAM,CAACF,CAAK,EAAIA,EAEjBE,EAAMM,EAASR,CAAK,EAAIA,CAChC,CAWO,SAASW,GAASC,EAAUX,EAAU,KAAM,CAC/C,OAAOF,GAAM,KAAK,KAAMa,EAAUX,EAAS,EAAI,CACnD,CAYO,SAASS,GAAcE,EAAUX,EAAU,KAAMC,EAAM,GAAO,CACpE,IAAMC,EAASC,EAAK,KAAK,IAAI,EAC1BH,EAAUA,GAAWE,EAAO,OAAO,SACtC,IAAIU,EAAcC,EAASZ,EAAM,mBAAqB,gBACtD,GAAI,CACHW,EAAeZ,EAAQa,GAAQF,CAAQ,CACxC,MAAE,CACD,GAAI,CACHC,EAAeZ,EAAQa,GAAQF,EAAS,QAAQ,UAAW,WAAW,CAAC,CACxE,MAAE,CACD,GAAI,CACHC,EAAeZ,EAAQa,GAAQF,EAAS,QAAQ,UAAW,eAAe,CAAC,CAC5E,MAAE,CACD,GAAI,CACHC,EAAeZ,EAAQa,GAAQF,EAAS,QAAQ,UAAW,YAAY,CAAC,CACzE,OAAQG,EAAN,CACD,MAAMA,CACP,CACD,CACD,CACD,CACA,OAAOF,CACR,CAWO,SAASJ,GAAiBG,EAAUX,EAAU,KAAM,CACvD,OAAOS,GAAc,KAAK,KAAME,EAAUX,EAAS,EAAI,CAC3D,CCnFe,SAARe,GAAiBC,EAAK,CAC5B,OAAOC,GAAgBD,CAAG,GAAMA,GAAO,CAAC,EAAE,SAAS,KAAKA,CAAG,IAAM,mBAClE,CCSe,SAARE,GAAiBC,EAAMC,EAAMC,EAAO,CAAC,EAAGC,EAAW,CAAC,EAAG,CAC7DF,EAAOG,EAASH,CAAI,EAAE,MAAM,EAE5B,QADII,EAAQL,EACN,CAACM,GAAaD,CAAK,GAAK,CAACE,GAAQF,CAAK,GAAKJ,EAAK,QAAQ,CAC7D,IAAIO,EAAOP,EAAK,MAAM,EACtB,GAAI,EAAEC,EAAK,IAAMA,EAAK,IAAIG,EAAOG,CAAI,EAAKC,EAAcJ,CAAK,EAAIG,KAAQH,EAAQA,EAAMG,IAAS,CAC/FL,EAAS,OAAS,GAClB,MACD,CACAE,EAAQH,EAAK,IAAMA,EAAK,IAAIG,EAAOG,CAAI,EAAIH,EAAMG,EAClD,CACA,OAAAL,EAAS,OAAS,GACXE,CACR,CCfe,SAARK,GAAiBC,EAAKC,EAAMC,EAAKC,EAAY,CAAC,EAAGC,EAAO,CAAC,EAAG,CAClE,IAAMC,EAAO,CAACC,EAAQC,EAAKL,IACtBE,EAAK,IACDA,EAAK,IAAIE,EAAQC,EAAKL,CAAG,GAE5BM,GAAWP,EAAKQ,EAAE,GAAKC,GAASJ,CAAM,EACzCA,EAAO,KAAKJ,CAAG,EAEfI,EAAOC,GAAOL,EAER,IAGTD,EAAOU,EAASV,CAAI,EAEpB,QADIK,EAASN,EACLS,EAAI,EAAGA,EAAIR,EAAK,OAAQQ,IAC/B,GAAIA,EAAIR,EAAK,OAAS,EAAG,CACxB,GAAI,CAACK,GAAW,CAACM,EAAcN,CAAM,GAAK,CAACO,GAAYP,CAAM,EAC5D,MAAO,GAER,IAAIQ,EAASC,GAAKT,EAAQL,EAAKQ,GAAIL,CAAI,EACvC,GAAI,CAACQ,EAAcE,CAAM,EAAG,CAC3B,GAAIV,EAAK,YAAc,GACtB,MAAO,GAERU,EAASD,GAAYT,EAAK,SAAS,EAAIA,EAAK,UAAUK,CAAC,EAAKD,GAAWP,EAAKQ,EAAI,EAAE,EAAI,CAAC,EAAI,CAAC,EAC5F,IAAIO,EAAgBX,EAAKC,EAAQL,EAAKQ,GAAIK,CAAM,EAChD,GAAI,CAACE,EACJ,MAAO,EAET,CACAV,EAASQ,CACV,KACC,QAAOT,EAAKC,EAAQL,EAAKQ,GAAIP,CAAG,CAGnC,CCvCe,SAARe,GAAiBC,EAAKC,EAAMC,EAAa,GAAOC,EAAO,CAAC,EAAG,CACjEF,EAAOG,EAASH,CAAI,EACpB,IAAII,EAAU,GACd,EAAG,CACF,IAAIC,EAAUL,EAAK,IAAI,EACnBK,EAAUA,IAAY,GAAa,EAAIA,EACvCC,EAAOP,EACPC,EAAK,SACRM,EAAOC,GAAKR,EAAKC,EAAM,CAAC,EAAeE,CAAI,IAEvCM,EAAcF,CAAI,GAAKG,GAAYH,CAAI,KAAOJ,EAAK,IAAMA,EAAK,IAAII,EAAMD,CAAO,EAAIA,KAAWC,KAC9FJ,EAAK,eACRE,EAAUF,EAAK,eAAeI,EAAMD,CAAO,EACjCH,EAAK,IACfE,EAAUF,EAAK,IAAII,EAAMD,CAAO,GAEhC,OAAOC,EAAKD,GACZD,EAAU,IAGb,OAASA,GAAWH,GAAcD,EAAK,SAAWQ,EAAcF,CAAI,GAAKG,GAAYH,CAAI,IAAM,EAAEJ,EAAK,KAAOA,EAAK,KAAKI,CAAI,EAAI,OAAO,KAAKA,CAAI,GAAG,QAClJ,OAAOF,CACR,CCrBe,SAARM,GAAsBC,EAAMC,EAAY,GAAO,CAClD,IAAMC,EAASC,EAAK,KAAK,IAAI,EAC7B,IAAIC,EAAe,CAAC,EAGpB,MAAI,EAAEA,EAAa,GAAKF,EAAO,OAAO,SAAS,KAAK,cAAc,qBAAqB,IAAMD,IACzFG,EAAa,GAAKF,EAAO,OAAO,SAAS,cAAc,MAAM,EAC7DE,EAAa,GAAG,aAAa,OAAQJ,CAAI,EACzCE,EAAO,OAAO,SAAS,KAAK,OAAOE,EAAa,EAAE,GAElDA,EAAa,KACbA,EAAa,MAAQA,EAAa,GAAG,aAAa,SAAS,GAAK,IAAI,MAAM,GAAG,EAAE,OAAOC,GAAKA,CAAC,EAAE,OAAO,CAACC,EAAWC,IAAc,CAC3H,IAAIC,EAAiBD,EAAU,MAAM,GAAG,EAAE,IAAIE,GAAKA,EAAE,KAAK,CAAC,EAC3D,OAAAC,GAAKJ,EAAWE,EAAe,GAAG,MAAM,GAAG,EAAGA,EAAe,KAAO,OAC9D,GAAQA,EAAe,KAAO,QAC1B,GAASG,GAAWH,EAAe,EAAE,EAAI,SAASA,EAAe,EAAE,EAAIA,EAAe,EAEhG,EACOF,CACX,EAAG,CAAC,CAAC,GAITF,EAAa,IAAM,SAASQ,EAAM,CAC9B,OAAOC,GAAK,KAAK,KAAMD,EAAK,MAAM,GAAG,CAAC,CAC1C,EAGAR,EAAa,IAAM,SAASQ,EAAME,EAAM,KAAMC,EAAa,GAAO,CAC9D,IAAIC,EAAQC,EAAUL,CAAI,EAAIA,EAAO,CAAC,CAACA,GAAOE,IAAQ,GAAO,OAASA,CAAG,EAmBzE,GAlBAC,EAAa,UAAU,OAAS,EAAID,EAAMC,EAC1C,OAAO,KAAKC,CAAK,EAAE,QAAQhB,GAAQ,CAC/B,GAAIgB,EAAMhB,KAAU,GAChBkB,GAAK,KAAK,KAAMlB,EAAK,MAAM,GAAG,CAAC,UACxBiB,EAAUD,EAAMhB,EAAK,EAC5B,OAAO,KAAKgB,EAAMhB,EAAK,EAAE,QAAQmB,GAAS,CACtC,IAAIC,GAASpB,EAAO,IAAMmB,GAAO,MAAM,GAAG,GACtC,CAACJ,GAAc,CAACF,GAAK,KAAK,KAAMO,CAAK,IACrCV,GAAK,KAAK,KAAMU,EAAOJ,EAAMhB,GAAMmB,EAAM,CAEjD,CAAC,MACE,CACH,IAAIC,EAAQpB,EAAK,MAAM,GAAG,GACtB,CAACe,GAAc,CAACF,GAAK,KAAK,KAAMO,CAAK,IACrCV,GAAK,KAAK,KAAMU,EAAOJ,EAAMhB,EAAK,CAE1C,CACJ,CAAC,EACGC,EAAW,CACX,IAAMoB,EAAU,CAACC,EAAMC,IAAQ,OAAO,KAAKA,CAAG,EAAE,OAAO,CAACC,EAAKxB,IAAS,CAClE,IAAIyB,GAAQH,EAAOA,EAAO,IAAM,IAAMtB,EACtC,OAAIiB,EAAUM,EAAIvB,EAAK,EACnBwB,EAAI,KAAK,GAAGH,EAAQI,EAAMF,EAAIvB,EAAK,CAAC,EAEpCwB,EAAI,KAAKC,EAAO,IAAMF,EAAIvB,EAAK,EAE5BwB,CACX,EAAG,CAAC,CAAC,EACL,KAAK,GAAG,aAAa,UAAWH,EAAQ,GAAI,KAAK,IAAI,EAAE,KAAK,GAAG,CAAC,CACpE,CACA,MAAO,EACX,EAGAjB,EAAa,SAAW,SAASQ,EAAME,EAAM,KAAM,CAC/C,OAAO,KAAK,IAAIF,EAAME,EAAK,EAAI,CACnC,EAEOV,CACX,CCvEe,SAARsB,IAAmB,CACtB,IAAMC,EAASC,EAAK,KAAK,IAAI,EAC7B,OAAID,EAAO,MAGXA,EAAO,IAAM,CAAC,EACdE,GAASF,EAAO,MAAM,EACtBA,EAAO,IAAI,OAAS,IAAIG,GAAOH,EAAO,MAAM,EAC5CA,EAAO,IAAI,UAAY,IAAII,GAAUJ,EAAO,MAAM,EAClDA,EAAO,IAAI,KAAOK,GAAK,KAAKL,EAAO,MAAM,EACzCA,EAAO,IAAI,MAAQM,GAAM,KAAKN,EAAO,MAAM,EAC3CA,EAAO,IAAI,SAAWO,GAAS,KAAKP,EAAO,MAAM,EACjDA,EAAO,IAAI,MAAQQ,GAAM,KAAKR,EAAO,MAAM,GAEpCA,CACX,CChBO,SAASS,EAAOC,EAAOC,EAAe,KAAM,CAC/C,OAAIC,EAAUF,CAAK,GAAKA,EAAM,QACnBA,EAAM,QAAQ,EAElBG,GAAS,KAAK,KAAMH,EAAOC,CAAY,CAClD,CASO,SAASG,EAAgBC,EAAY,CACxC,IAAMC,EAASC,GAAQ,KAAK,IAAI,EAChC,GAAI,CAACF,EACD,OAAOC,EAEX,GAAIA,EAAOD,GACP,OAAOC,EAAOD,GAElB,GAAIC,EAAO,KAAOA,EAAO,IAAID,GACzB,OAAOC,EAAO,IAAID,GAEtB,MAAM,IAAI,MAAM,YAAYA,uBAAgC,CAChE,CAYO,SAASG,GAAMC,EAASC,EAAQ,EAAGC,EAAc,CAAC,EAAGC,EAAS,CAAC,EAAGC,EAAI,KAAMC,EAAa,CAAC,EAAG,CAEhG,OAAKD,IACDA,EAAI,SAASb,EAAOC,EAAe,KAAM,CACrC,GAAI,EAAE,gBAAgBY,GAClB,OAAO,IAAIA,EAAEb,EAAOC,CAAY,EAEpC,OAAO,eAAe,KAAM,QAAS,CAAC,IAAK,UAAW,CAClD,OAAOD,CACX,CAAC,CAAC,EACF,IAAIe,EACJ,OAAO,eAAe,KAAM,UAAW,CAAC,MAAO,UAAW,CACtD,OAAKA,IACDA,EAAgBhB,EAAO,KAAKY,EAAaX,EAAOC,CAAY,GAEzDc,CACX,CAAC,CAAC,EACF,OAAO,eAAe,KAAM,OAAQ,CAAC,MAAO,SAASC,EAAU,CAC3D,YAAK,QAAQ,EAAE,QAAQA,CAAQ,EACxB,IACX,CAAC,CAAC,CACN,GAGJC,EAAMR,EAAS,CAACS,EAAMC,IAAO,CACzB,GAAIT,GAAS,CAAC,UAAW,OAAO,EAAE,SAASQ,CAAI,EAC3CV,GAAMC,EAAQS,GAAOR,EAAQ,EAAGC,EAAaC,EAAQC,EAAGC,EAAW,OAAOI,CAAI,CAAC,UACxEE,GAASD,CAAE,GAAKD,EAAK,OAAO,EAAG,CAAC,EAAE,YAAY,IAAMA,EAAK,OAAO,EAAG,CAAC,EAE3EG,GAAKR,EAAGC,EAAW,OAAOI,CAAI,EAAGC,CAAE,MAChC,CAGH,GAAI,CAAC,CAAC,UAAW,OAAO,EAAE,SAASL,EAAWA,EAAW,OAAS,EAAE,EAAG,CAEnE,IAAMQ,EAAO,YAAYC,EAAM,CAC3B,IAAIC,EAAML,EAAG,KAAKR,EAAa,KAAK,QAAQ,EAAG,GAAGY,CAAI,EACtD,OAAIC,aAAe,QACRA,EAAI,KAAKC,GAAQA,IAASd,GAAgBe,EAASD,CAAI,GAAKA,EAAK,KAAOd,EAAe,KAAOc,CAAI,EAEtGD,IAAQb,EAAc,KAAOa,CACxC,EAIA,GAFAX,EAAE,UAAUK,GAAQI,EAEhBJ,EAAK,SAAS,MAAM,GAAKA,EAAK,SAAS,OAAO,EAAG,CACjD,IAAIS,EACAf,EAAO,cAAgBM,EAAK,SAAS,OAAO,EAC5CS,EAAiBC,EAAYV,EAAM,OAAO,EACnC,CAACN,EAAO,cAAgBM,EAAK,SAAS,MAAM,IACnDS,EAAiBC,EAAYV,EAAM,MAAM,GAG7CL,EAAE,UAAUc,GAAkBL,CAClC,CACJ,CAIAD,GAAKR,EAAGC,EAAW,OAAOI,CAAI,EAAG,YAAYK,EAAM,CAC/C,IAAIC,EAAML,EAAG,KAAKR,EAAa,GAAGY,CAAI,EACtC,OAAIC,aAAe,QACRA,EAAI,KAAKC,GAAQA,IAASd,GAAgBe,EAASD,CAAI,GAAKA,EAAK,KAAOd,EAAe,KAAOc,CAAI,EAEtGD,IAAQb,EAAc,KAAOa,CACxC,CAAC,CAEL,CACJ,CAAC,EAEMX,CACX,CCrHe,SAARgB,GAAiBC,EAAKC,EAAU,CACtC,OAAOD,EAAI,OAAO,CAACE,EAAUC,EAAKC,IAAMF,GAAYD,EAASE,EAAKC,CAAC,EAAG,EAAK,CAC5E,CCQe,SAARC,GAAiBC,EAAKC,EAAWC,EAAS,GAAOC,EAAO,GAAOC,EAAgB,GAAO,CAC5F,GAAIJ,EAAI,QAAQC,CAAS,IAAM,GAC9B,OAAOC,EAAS,CAAC,EAAI,OAEtB,IAAIG,EAASH,IAAW,GAAOF,EAAI,OAAS,EAAKE,IAAW,GAAQ,EAAIA,EACpEI,EAAOF,EAAgBJ,EAAI,YAAYC,CAAS,EAAI,EAAID,EAAI,QAAQC,CAAS,EAAI,EACjFM,EAASC,EAAaP,CAAS,EAAqC,CAAC,EAAlCD,EAAI,MAAMM,EAAMA,EAAOD,CAAM,EACpE,OAAIF,GAAQI,EAAM,OAASF,GAAUE,EAAM,OAASP,EAAI,SACnD,CAACS,EAAYN,CAAI,GAAKA,EAAKE,EAASE,EAAM,MAAM,KACnDA,EAAQA,EAAM,OAAOP,EAAI,MAAM,EAAGK,EAASE,EAAM,MAAM,CAAC,GAGnDL,EAASK,EAAQA,EAAM,EAC/B,CCtBe,SAARG,GAAiBC,EAAKC,EAAKC,EAAQ,GAAO,CAEhD,QADI,EAAIF,EAAI,QAAQC,CAAG,EAChB,EAAI,KAAOC,GAASA,IAAU,KACpCF,EAAI,OAAO,EAAG,CAAC,EACXE,EAAQ,GACXA,IAED,EAAIF,EAAI,QAAQC,CAAG,EAEpB,OAAOD,CACR,CCNe,SAARG,GAAiBC,KAAQC,EAAM,CACrC,OAAAA,EAAK,QAAQC,GAAOC,GAAQH,EAAKE,CAAG,CAAC,EAC9BF,CACR,CCDe,SAARI,GAAiBC,EAAKC,EAAMC,EAAW,KAAM,CACnD,OAAQC,EAASF,CAAI,EAASD,EAAI,OAAOI,GAAQF,EAC9CD,EAAK,OAAOI,GAAQH,EAASE,EAAMC,CAAI,CAAC,EAAE,OAC1CJ,EAAK,QAAQG,CAAI,IAAM,EAC1B,EAHyB,CAAC,CAI3B,CCZe,SAARE,GAAiBC,EAAKC,EAAM,GAAO,CACzC,IAAIC,EAAM,CAAC,EACX,GAAIF,EAAI,OACP,GAAIA,EAAI,OAAS,EAAG,CACnB,IAAIG,EAAQ,KAAK,MAAMH,EAAI,OAAS,CAAC,EAAI,EACzCE,EAAMF,EAAI,MAAMG,EAAOA,EAAQ,CAAC,CACjC,KAAO,CACN,IAAIA,EAASH,EAAI,OAAS,EAAK,EAC/BE,EAAMF,EAAI,MAAMG,EAAOA,EAAQ,CAAC,CACjC,CAED,OAAOF,EAAMC,EAAMA,EAAI,EACxB,CCbe,SAARE,GAAiBC,EAAK,CAC5B,IAAMC,EAAW,CAACC,EAAOC,EAAOC,IACxBA,EAAK,QAAQF,CAAK,IAAMC,EAEhC,OAAOH,EAAI,OAAOC,CAAQ,CAC3B,CCCO,IAAMI,GAAiB,CAAC,QAAS,SAAU,MAAO,OAAQ,QAAS,SACzE,UAAW,cAAe,eAAgB,gBAAiB,iBAC3D,SAAU,aAAc,cAAe,eAAgB,gBACvD,eAAgB,mBAAoB,oBAAqB,qBAAsB,sBAC/E,gBAAiB,oBAAqB,qBAAsB,sBAAuB,sBACpF,EAAE,OAAO,CAACC,EAAOC,IAASD,EAAM,OAAOC,EAAMC,GAASD,CAAI,CAAC,EAAG,CAAC,CAAC,EAU5DE,GAAkB,EAClBC,GAAU,IAAO,CAAE,IAAI,KAAWD,KAC/B,SAASE,GAAeC,EAAIC,EAAQ,CAI1C,GAHI,CAACD,EAAG,IAAMC,EAAO,SACpBD,EAAG,GAAKF,GAAQ,GAEbE,EAAG,GACN,MAAO,IAAIA,EAAG,KAEf,IAAIE,EAAOF,EAAG,aAAa,aAAa,EAKxC,GAJI,CAACE,GAAQD,EAAO,WAAa,KAChCC,EAAOJ,GAAQ,EACfE,EAAG,aAAa,cAAeE,CAAI,GAEhC,CAACA,EACJ,MAAM,IAAI,MAAM,oEAAoE,EAErF,MAAO,iBAAiBA,KACzB,CAUO,SAASC,GAAUT,EAAOU,EAAU,GAAM,CAC7C,IAAMC,EAAUC,EAAgB,KAAK,KAAM,QAAQ,EAC7CC,EAASD,EAAgB,KAAK,KAAM,QAAQ,EAAE,UAAU,EAC9D,IAAIE,EAAkBC,EAASf,CAAK,EAAE,OAAO,CAACgB,EAAKf,IAAS,CACxD,IAAIgB,EAAiBf,GAASD,EAAM,EAAI,EACxC,OAAKY,EAAO,IAAMI,KAAmBN,EAAO,SAAS,KAAK,QACtDK,EAAI,KAAKf,EAAK,SAAS,GAAG,EACpBY,EAAO,IAAMK,GAAWjB,EAAM,GAAG,EAAE,YAAY,EAC/CY,EAAO,IAAMI,CACnB,EACI,CAACP,GACMM,EAGRA,EAAI,OAAOf,CAAI,CAC1B,EAAG,CAAC,CAAC,EACL,OAAOa,CACX,CAUO,SAASK,GAAQC,EAAMC,EAAU,KAAM,CAC1C,IAAMV,EAAUC,EAAgB,KAAK,KAAM,QAAQ,EACnD,IAAIQ,EAAQA,EAAK,QAAQ,GAAG,EAA4BA,EAAxBF,GAAWE,EAAM,GAAG,EACpD,OAAOT,EAAO,iBAAiBU,GAAWV,EAAO,SAAS,IAAI,EAAE,iBAAiB,KAAOS,CAAI,CAChG,CAWO,SAASE,GAAcF,EAAMG,EAASC,EAAY,GAAM,CAC9D,IAAMb,EAAUC,EAAgB,KAAK,KAAM,QAAQ,EAC7CC,EAAUD,EAAgB,KAAK,KAAM,QAAQ,EAAE,UAAU,EAG/D,IAAIa,EAAWC,EAASN,CAAI,EAAIA,EAAK,KAAK,GAAG,EAAIA,EACjD,GAAI,CAACG,GAAWI,GAAyBF,GACxC,OAAOE,GAAyBF,GAGjC,IAAIG,EAAiB,SAASC,EAAgB,CAE7C,QADIC,EAAY,CAAC,EACRC,EAAI,EAAGA,EAAIF,EAAe,SAAS,OAAQE,IAAM,CACzD,IAAIC,EAAeH,EAAe,SAASE,GACvCE,EAAW,QAAQ,MAAMD,EAAa,QAAQ,QAAQA,EAAa,QAAS,EAAE,EAAE,QAAQ,IAAK,EAAE,EAAE,QAAQ,IAAK,EAAE,EAAE,KAAK,CAAC,EACxHE,GAAWF,EAAa,SAAW,KAAK,MAAM,GAAG,EAAE,IAAIG,GAAOA,IAAQ,OAAS,EAAKA,IAAQ,KAAO,EAAK,SAASA,CAAG,EAAI,GAAK,EACjI,GAAIX,EAEH,IADAY,GAAiBH,EAAU,CAAC,aAAc,aAAa,CAAC,EAClDC,EAAQ,QAAQ,CACrB,IAAIG,EAAY,WAAWJ,CAAQ,EACnCI,EAAU,OAASH,EAAQ,MAAM,EACjCJ,EAAU,KAAKO,CAAS,CACzB,MAEAJ,EAAS,OAASC,EAAQ,OAAS,EAAIA,EAAUA,EAAQ,GACzDJ,EAAU,KAAKG,CAAQ,CAEzB,CACA,OAAOH,EAAU,KAAK,CAACQ,EAAGC,IAAMD,EAAE,SAAWC,EAAE,OAAS,EAAID,EAAE,OAASC,EAAE,OAAS,EAAI,EAAE,CACzF,EAEIC,EAAe,CAAC,EACpB,OAAAC,GAAyB,KAAK,KAAMZ,GAAkB,CACrD,IAAKA,EAAe,OAASlB,EAAO,QAAQ,gBAAkBkB,EAAe,OAASlB,EAAO,QAAQE,EAAO,IAAI,YAAY,EAAI,sBAC5Ha,EAASN,CAAI,EAAIA,EAAO,CAACA,CAAI,GAAG,QAAQS,EAAe,IAAI,EAAI,GAClE,OAAAW,EAAeA,EAAa,OAAOA,EAAcZ,EAAeC,CAAc,CAAC,EACxE,EAET,EAAG,EAAgB,EAEnBF,GAAyBF,GAAYe,EAC9BA,CACR,CAUO,SAASC,GAAyBC,EAAUC,EAAW,GAAO,CAEpE,IAAIC,EADehC,EAAgB,KAAK,KAAM,QAAQ,EAC7B,SAAS,YAC9BiC,EAAqB,SAASC,EAAY,CAC7C,GAAI,CACH,QAASC,EAAI,EAAGA,EAAID,EAAW,SAAS,OAAQC,IAAM,CACrD,IAAIlB,EAAiBiB,EAAW,SAASC,GACzC,GAAIL,EAASb,CAAc,IAAM,GAChC,MAAO,EAET,CACD,MAAE,CAAW,CACd,EACA,GAAIc,GACH,QAASZ,EAAIa,EAAY,OAAS,EAAGb,GAAK,EAAGA,IAC5C,GAAIc,EAAmBD,EAAYb,EAAE,IAAM,GAC1C,MAAO,OAIT,SAASA,EAAI,EAAGA,EAAIa,EAAY,OAAQb,IACvC,GAAIc,EAAmBD,EAAYb,EAAE,IAAM,GAC1C,MAAO,EAIX,CAWA,IAAMK,GAAmB,SAASY,EAAgBC,EAAQpC,EAAS,GAAI,CACtE,GAAIa,EAASb,CAAM,EAAG,CACrBA,EAAO,QAAQqC,GAAQd,GAAiBY,EAAgBE,CAAI,CAAC,EAC7D,MACD,CACIF,EAAenC,EAAS,qBAC3BmC,EAAe,OAASA,EAAenC,EAAS,mBAChD,OAAOmC,EAAenC,EAAS,oBAE5BmC,EAAenC,EAAS,eAC3BmC,EAAe,KAAOA,EAAenC,EAAS,aAC9C,OAAOmC,EAAenC,EAAS,cAE5BmC,EAAenC,EAAS,qBAC3BmC,EAAe,WAAaA,EAAenC,EAAS,mBACpD,OAAOmC,EAAenC,EAAS,mBAC3BmC,EAAe,aAAe,aACjCA,EAAe,WAAa,KAG/B,EAKMrB,GAA2B,CAAC,ECtMlC,IAAqBwB,EAArB,KAAmC,CAUlC,YAAYC,EAAgB,CACvBA,IAAmB,OACtB,KAAK,OAAS,GAEdC,EAAMD,EAAgB,CAACE,EAAMC,IAAU,CACtC,GAAI,CAAC,SAAU,QAAS,OAAQ,WAAW,EAAE,SAASD,CAAI,EAAG,CAC5D,IAAIE,EAAQC,GAASH,CAAI,EACzB,KAAKE,GAASE,EAASH,CAAK,EACzB,IAAIJ,EAAcK,GAAO,GAAGD,CAAK,EACjC,IAAIJ,EAAcK,GAAOD,CAAK,CAClC,CACD,CAAC,CAEH,CAOA,UAAW,CACJ,OAAO,KAAK,UAAU,CAC1B,CASH,UAAUI,EAAS,CAAC,EAAG,CACtB,OAAI,KAAK,OACD,OAED,CAAC,SAAU,QAAS,OAAQ,WAAW,EAAE,OAAO,CAACC,EAAKN,IAAS,CACrE,IAAIE,EAAQC,GAASH,CAAI,EACzB,OAAOM,GAAO,KAAKJ,IAAU,KAAKA,GAAO,OAAS,IAAM,KAAKA,GAAS,GACvE,EAAG,EAAE,EAAE,KAAK,CACb,CASC,OAAO,MAAMI,EAAKC,EAAO,KAAM,CAC/B,GAAID,IAAQ,OACX,OAAO,IAAI,KAAKA,CAAG,EAEpB,GAAI,CAAC,CAAC,YAAa,QAAS,QAAQ,EAAE,OAAO,CAACE,EAAGC,IAAMD,GAAKF,EAAI,WAAWG,CAAC,EAAG,EAAK,EACnF,OAAO,KAAK,YAAYH,EAAKC,CAAI,EAKlC,QAHIG,EAAY,CAAC,EACbC,EAAQ,kBACRC,EAAQ,KACNA,EAAQD,EAAM,KAAKL,CAAG,GAC3BI,EAAUE,EAAM,IAAOA,EAAM,GAAG,QAAQ,GAAG,EAAI,GAAKA,EAAM,GAAG,QAAQ,IAAK,EAAE,EAAE,MAAM,GAAG,EAAIA,EAAM,GAElG,OAAO,IAAI,KAAKF,CAAS,CAC1B,CAcA,OAAO,YAAYJ,EAAKC,EAAO,KAAM,CACpC,GAAID,IAAQ,OACX,OAAO,IAAI,KAAKA,CAAG,EAEpB,IAAMO,EAASC,EAAgBP,EAAM,QAAQ,EAE7C,IAAIQ,EAAO,SAASC,EAAc,CACjC,IAAIC,EAAI,CAAC,EACT,GAAIJ,EAAO,gBACV,OAAAI,EAAI,IAAIJ,EAAO,gBAAgBG,CAAY,EACpC,CAACC,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,CAAC,EAIrC,QAFIC,EAAS,aACTC,EACEA,EAAID,EAAO,KAAKF,CAAY,GACjCC,EAAE,KAAK,CAACE,CAAC,EAEV,OAAOF,CACR,EAEIG,EAAQ,SAASD,EAAG,CACvB,OAAO,KAAK,MAAMA,EAAI,GAAG,EAAI,GAC9B,EAEIE,EAAM,SAASC,EAAS,CAC3B,IAAIC,EAAMD,EAAU,IAAM,KAAK,GAC/B,OAAOF,EAAMG,CAAG,CACjB,EAEIN,EAAIF,EAAKT,CAAG,EACZkB,EAAIP,EAAE,GACNQ,EAAIR,EAAE,GACNS,EAAIT,EAAE,GACNU,EAAIV,EAAE,GACV,GAAIO,EAAIG,GAAKF,EAAIC,EAAG,MAAM,IAAI,MAAM,6CAA6C,EAEjF,IAAIE,EAAS,KAAK,KAAKJ,EAAIA,EAAIC,EAAIA,CAAC,EACpCD,GAAKI,EACLH,GAAKG,EAEL,IAAIC,EAAOL,EAAIE,EAAID,EAAIE,EACvBD,GAAKF,EAAIK,EACTF,GAAKF,EAAII,EAET,IAAIC,EAAS,KAAK,KAAKJ,EAAIA,EAAIC,EAAIA,CAAC,EACpC,OAAAD,GAAKI,EACLH,GAAKG,EACLD,GAAQC,EAEHN,EAAIG,EAAIF,EAAIC,IAChBF,EAAI,CAACA,EACLC,EAAI,CAACA,EACLI,EAAO,CAACA,EACRD,EAAS,CAACA,GAEJ,IAAI,KAAK,CACf,UAAW,CAAMX,EAAE,GAASA,EAAE,EAAG,EACjC,MAAO,CAAMG,EAAMQ,CAAM,EAAQR,EAAMU,CAAM,CAAE,EAC/C,OAAQT,EAAI,KAAK,MAAMI,EAAGD,CAAC,CAAC,EAC5B,KAAMH,EAAI,KAAK,KAAKQ,CAAI,CAAC,CAC1B,CAAC,CACF,CACD,EAOAhC,EAAc,OAAS,cAAc,KAAM,CAO1C,UAAW,CACV,IAAIkC,EAAS,KAAK,IAAIC,GAAOC,EAAWD,CAAG,EAAIA,EAAM,MAAQA,CAAG,EAChE,MAAO,UAAYD,EAAO,KAAK,IAAI,EAAI,GACxC,CACD,EAOAlC,EAAc,MAAQ,cAAc,KAAM,CAOzC,UAAW,CACV,MAAO,SAAW,KAAK,KAAK,IAAI,EAAI,GACrC,CACD,EAOAA,EAAc,KAAO,cAAc,KAAM,CAOxC,UAAW,CACV,IAAIkC,EAAS,KAAK,IAAIC,GAAOC,EAAWD,CAAG,EAAIA,EAAM,MAAQA,CAAG,EAChE,MAAO,QAAUD,EAAO,KAAK,IAAI,EAAI,GACtC,CACD,EAOAlC,EAAc,UAAY,cAAc,KAAM,CAO7C,UAAW,CACV,IAAIkC,EAAS,KAAK,IAAIC,GAAOC,EAAWD,CAAG,EAAIA,EAAM,KAAOA,CAAG,EAC/D,MAAO,aAAeD,EAAO,KAAK,IAAI,EAAI,GAC3C,CACD,ECnOA,IAAqBG,EAArB,KAA8B,CAO1B,YAAYC,EAAS,CACjB,MAAMA,EAAS,CAACC,EAAUC,IAAU,CAChC,OAAO,eAAe,KAAMD,EAAU,CAAC,MAAAC,EAAO,WAAY,EAAI,CAAC,CACnE,CAAC,CACL,CAOA,UAAW,CACP,OAAO,KAAK,UAAU,CAC1B,CASA,UAAUC,EAAS,CAAC,EAAG,CACnB,OAAO,KAAK,YAAY,MAAM,IAAIC,GAAK,KAAKA,EAAE,EAAE,OAAOC,GAAKA,CAAC,EAAE,KAAK,GAAG,CAC3E,CASA,OAAO,MAAMC,EAAW,CACpB,OAAO,IAAI,KAAKA,EAAU,MAAM,GAAG,EAAE,OAAOD,GAAKA,CAAC,EAAE,OAAO,CAACE,EAASC,EAAKC,KACtEF,EAAQ,KAAK,MAAME,IAAMD,EAClBD,GACR,CAAC,CAAC,CAAC,CACV,CACJ,EAKAR,EAAS,MAAQ,CAAC,MAAO,QAAS,SAAU,MAAM,EC7ClD,IAAqBW,EAArB,KAA8B,CAQ1B,YAAYC,EAAKC,EAAO,KAAM,CAC1B,KAAK,IAAMD,EACX,KAAK,KAAOC,CAChB,CAKA,IAAI,UAAW,CACX,OAAO,KAAK,YAAY,SAAS,SAAS,KAAK,IAAI,EAAI,WACnD,KAAK,YAAY,SAAS,SAAS,KAAK,IAAI,EAAI,WAAa,IAErE,CAOA,SAAU,CACN,OAAO,KAAK,UAAU,CAC1B,CAOA,UAAW,CACP,OAAO,KAAK,UAAU,CAC1B,CASA,UAAUC,EAAS,CAAC,EAAG,CACnB,OAAO,KAAK,KAAO,KAAK,KAAO,KAAK,KAAO,GAC/C,CASA,OAAO,MAAMF,EAAK,CACd,IAAIG,EACJ,GAAIC,EAAUJ,CAAG,IAAMG,EAAW,KAAK,SAAS,OAAO,KAAK,QAAQ,EAAE,OAAO,CAACE,EAAMJ,IAASI,IAASL,EAAI,SAASC,CAAI,EAAIA,EAAO,MAAO,IAAI,GAAI,CAC7I,IAAIK,EAAOC,EAAYP,EAAKG,CAAQ,EAChCK,EAAWF,CAAI,IACfN,EAAMM,EAEd,CACA,OAAO,IAAI,KAAKN,EAAKG,CAAQ,CACjC,CACJ,EAOAJ,EAAS,SAAW,CAAC,KAAM,KAAM,IAAK,KAAM,KAAM,KAAM,IAAI,EAO5DA,EAAS,SAAW,CAAC,KAAM,KAAM,KAAM,MAAO,KAAM,KAAM,KAAM,OAAQ,MAAM,EC9E9E,IAAqBU,GAArB,KAA6B,CAQzB,YAAYC,EAAMC,EAAO,CACrB,KAAK,KAAOD,EACZ,KAAK,MAAQC,CACjB,CAOA,UAAW,CACP,OAAO,KAAK,UAAU,CAC1B,CASA,UAAUC,EAAS,CAAC,EAAG,CACnB,IAAIC,EAAO,KAAK,KACZC,EAAM,KAAK,MACf,OAAIC,EAAUD,CAAG,IAClBE,EAAS,MAAM,SAASH,CAAI,GAAK,EAAEC,aAAeE,GACrDF,EAAM,IAAIE,EAASF,CAAG,EACZD,IAAS,aAAe,EAAEC,aAAeG,GACnDH,EAAM,IAAIG,EAAcH,CAAG,EACjBA,aAAeI,EACtBJ,EAAMA,EAAI,UAAUF,CAAM,EAEjBE,EAAMA,EAAI,SAAS,GAGpBA,CACX,CAWA,OAAO,MAAMD,EAAMC,EAAKK,EAAQ,KAAM,CAClC,OAAIH,EAAS,MAAM,SAASH,CAAI,EAC5BC,EAAME,EAAS,MAAMF,EAAKK,CAAK,EACxBN,IAAS,YAChBC,EAAMG,EAAc,MAAMH,EAAKK,CAAK,GAEpCL,EAAMI,EAAS,MAAMJ,CAAG,EACpBM,GAAe,SAASP,CAAI,GACxBQ,EAAWP,EAAI,GAAG,GAAK,CAACA,EAAI,OAC5BA,EAAI,KAAO,OAIhB,IAAI,KAAKD,EAAMC,CAAG,CAC7B,CACJ,EC1EA,IAAqBQ,EAArB,KAA2B,CAOvB,YAAYC,EAAS,CACjBC,EAAMD,EAAS,CAACE,EAAMC,IAAU,CAC5B,OAAO,eAAe,KAAMD,EAAM,CAAC,MAAAC,EAAO,WAAY,EAAI,CAAC,CAC/D,CAAC,CACL,CAOA,UAAW,CACP,OAAO,KAAK,UAAU,CAC1B,CASA,UAAUC,EAAS,CAAC,EAAG,CACnB,IAAIC,EAAQ,CAAC,EACb,OAAAJ,EAAM,KAAK,cAAcG,CAAM,EAAG,CAACF,EAAMC,IAAU,CAC/CE,EAAM,KAAK,GAAGH,MAASC,GAAO,CAClC,CAAC,EACME,EAAM,KAAK,IAAI,CAC1B,CASA,cAAcD,EAAS,CAAC,EAAG,CACvB,IAAIJ,EAAU,CAAC,EACf,OAAAC,EAAM,KAAM,CAACC,EAAMC,IAAU,CACrBA,aAAiBG,GACjBH,EAAQA,EAAM,UAAUC,CAAM,EACvB,UAAUD,CAAK,IACtBA,EAAQA,EAAM,SAAS,GAE3BH,EAAQE,GAAQC,CACpB,CAAC,EACMH,CACX,CASA,OAAO,MAAMO,EAAKC,EAAQ,KAAM,CAC5B,OAAO,KAAK,UAAUD,EAAI,MAAM,GAAG,EAAE,OAAOE,GAAKA,CAAC,EAAE,OAAO,CAACJ,EAAOK,KAC/DL,EAAMK,EAAK,GAAG,KAAK,GAAKA,EAAK,GAAG,KAAK,EAC9BL,GACR,CAAC,CAAC,EAAGG,CAAK,CACjB,CASA,OAAO,UAAUH,EAAOG,EAAQ,KAAM,CAClC,IAAIR,EAAU,CAAC,EACf,OAAAC,EAAMI,EAAO,CAACH,EAAMS,IAAQ,CACxBX,EAAQE,GAAQI,GAAQ,MAAMJ,EAAMS,EAAKH,CAAK,CAClD,CAAC,EACM,IAAI,KAAKR,CAAO,CAC3B,CACJ,EC9Ee,SAARY,EAAiBC,KAAQC,EAAM,CACrC,OAAKA,EAAK,OAAS,GAAKC,EAAUD,EAAK,EAAE,GAAME,EAAUF,EAAK,EAAE,EACxDG,GAAU,KAAK,KAAMJ,EAAK,GAAGC,CAAI,EAElCI,GAAS,KAAK,KAAML,EAAK,GAAGC,CAAI,CACxC,CAWO,SAASI,GAASL,EAAKM,EAAOC,EAAS,CAAC,EAAG,CACjD,IAAMC,EAAUC,EAAgB,KAAK,KAAM,QAAQ,EAC7CC,EAAMC,EAAO,KAAK,KAAMX,CAAG,EAAE,GAGnC,GAFAO,EAASA,GAAU,CAAC,EAEhBA,EAAO,QAAU,SACpB,OAAOK,GAAW,KAAK,KAAMZ,EAAKM,EAAOC,CAAM,EAEhD,GAAIA,EAAO,QAAU,SAAU,CAC9B,GAAIA,EAAO,OACV,MAAM,IAAI,MAAM,gDAAgDA,EAAO,iEAAiE,EAEzI,OAAOM,GAAW,KAAK,KAAMb,EAAKM,CAAK,CACxC,CACA,IAAIQ,EAAQN,EAAO,iBAAiBE,EAAKH,EAAO,MAAM,EAClDQ,EAAUC,EAASV,CAAK,EAAE,OAAO,CAACS,EAASE,KAC9CF,EAAQE,GAAQH,EAAM,iBAAiBP,EAAO,UAAYW,GAAU,KAAK,KAAMD,CAAI,EAAE,GAAKA,CAAI,EACvFF,GACL,CAAC,CAAC,EACL,OAAOI,EAASb,CAAK,EAAIS,EAAUA,EAAQT,EAC5C,CAWO,SAASO,GAAWb,EAAKM,EAAOC,EAAS,CAAC,EAAG,CACnD,IAAMa,EAAOT,EAAO,KAAK,KAAMX,CAAG,EAClCO,EAASA,GAAU,CAAC,EAEpB,IAAIO,EAAQM,EAAK,GAAG,aAAa,OAAO,EACpCd,IAAU,QACbA,EAAQQ,EAAM,MAAM,GAAG,EAAE,IAAIO,GAAOA,EAAI,MAAM,GAAG,EAAE,EAAE,GAEtD,IAAIC,GAAYf,EAAO,UAAYW,GAAU,KAAK,KAAMZ,CAAK,EAAIU,EAASV,CAAK,GAAG,OAAO,CAACiB,EAAWN,IAAS,CAC7G,IAAIO,EAAQ,IAAI,OAAO,SAAWP,EAAO,aAAc,GAAG,EAC1D,OAAAM,EAAUN,IAASO,EAAM,KAAK,IAAMV,CAAK,GAAK,CAAC,GAAI,EAAE,GAAG,GAAG,KAAK,EACzDS,CACR,EAAG,CAAC,CAAC,EACL,OAAOJ,EAASb,CAAK,EAAIgB,EAAWA,EAAShB,EAC9C,CAWO,SAASM,GAAWZ,EAAKM,EAAOC,EAAS,CAAC,EAAG,CACnD,IAAMC,EAAUC,EAAgB,KAAK,KAAM,QAAQ,EAC7CC,EAAMC,EAAO,KAAK,KAAMX,CAAG,EAAE,GACnCO,EAASA,GAAU,CAAC,EAGpB,IAAIkB,EAAWN,EAASb,CAAK,EAAIA,EAAM,KAAK,GAAG,EAAIA,EACnD,GAAI,CAACC,EAAO,SAAWmB,GAAgBD,IAAaC,GAAgBD,GAAU,KAAOf,EAAK,CACzF,IAAIiB,EAAOD,GAAgBD,GAAU,MAAM,EAC3C,cAAOE,EAAK,GACLA,CACR,CAEA,IAAIC,EAAW,CAAC,EA4BhB,OA3BAC,GAAyB,KAAK,KAAMC,GAAkB,CACrD,IAAIC,EAAkBD,EAAe,aACrC,GAAIvB,EAAO,OAAQ,CAClB,IAAIyB,EAAmBzB,EAAO,OAAO,WAAW,GAAG,GAAK,CAACA,EAAO,OAAO,WAAW,IAAI,EACnF,IAAMA,EAAO,OACbA,EAAO,OACV,GAAI,CAACuB,EAAe,aAAa,SAASE,CAAgB,EACzD,OAEDD,EAAkBE,EAAYH,EAAe,aAAcE,CAAgB,CAC5E,CACA,GAAIF,EAAe,OAAStB,EAAO,QAAQ,YAAcE,EAAI,QAAQqB,CAAe,EAAG,CACtF,IAAIG,EAAYlB,EAASV,CAAK,EAC9B,GAAI,CAACA,EAAmB,CACvB4B,EAAY,CAAC,EACb,QAASC,EAAI,EAAGA,EAAIL,EAAe,MAAM,OAAQK,IAChDD,EAAU,KAAKJ,EAAe,MAAMK,EAAE,CAExC,CACAP,EAAS,MAAMrB,EAAO,UAAYW,GAAU,KAAK,KAAMgB,CAAS,EAAIA,GAAW,OAAO,CAACX,EAAWN,KACjGM,EAAUN,GAAQa,EAAe,MAAMb,GAChCM,GACL,CAAC,CAAC,CAAC,CACP,CACD,CAAC,EACDG,GAAgBD,GAAYG,EAAS,MAAM,EAC3CF,GAAgBD,GAAU,GAAKf,EAC3BH,EAAO,IACHqB,EAGDA,EAAS,OAAO,CAACQ,EAASC,IAAUC,GAAOF,EAASC,CAAK,EAAG,CAAC,CAAC,CACtE,CAKA,IAAMX,GAAkB,CAAC,EAalB,SAAStB,GAAUJ,EAAKuC,EAAaC,EAAM,KAAMjC,EAAS,CAAC,EAAG,CACpEA,GAAUJ,EAAUoC,CAAW,EAAIC,EAAMjC,IAAW,CAAC,EACrDgC,EAAcpC,EAAUoC,CAAW,EAAIA,EAAcvB,GAASuB,EAAaC,CAAG,EAE9E,IAAIJ,EAAUG,aAAuBE,EAClCF,EAAY,cAAc,EAC1BE,EAAM,UAAUF,EAAa,IAAI,EAAE,cAAc,EAEpD,GAAIhC,EAAO,QAAU,SACpB,OAAOmC,GAAY,KAAK,KAAM1C,EAAKoC,EAAS7B,CAAM,EAEnD,GAAIA,EAAO,OACV,MAAM,IAAI,MAAM,iDAAiDA,EAAO,+DAA+D,EAExI,IAAMC,EAAUC,EAAgB,KAAK,KAAM,QAAQ,EAC7CW,EAAOT,EAAO,KAAK,KAAMX,CAAG,EAClC,IAAI2C,EACJ,OAAIpC,EAAO,QAAU,UAAYA,EAAO,WACvCoC,EAAW,OAAO,KAAKP,CAAO,EAAE,IAAInB,GAAQ,GAAGV,EAAO,UAAYW,GAAU,KAAK,KAAMD,CAAI,EAAE,GAAKA,MAASmB,EAAQnB,IAAO,EAAE,KAAK,GAAG,GAErIG,EAAK,QAAQwB,GAAM,CAClB,GAAIrC,EAAO,QAAU,UAAYA,EAAO,QAAS,CAChD,IAAIO,EAAQ8B,EAAG,aAAa,OAAO,GAAK,GACpC,CAACrC,EAAO,SAAW,CAACO,EAAM,KAAK,EAAE,SAAS,GAAG,IAChDA,EAAQA,EAAQ,KAEjB8B,EAAG,aAAa,QAAUrC,EAAO,QAAUoC,EAAW7B,EAAQA,EAAQ6B,CAAS,CAChF,KAAO,CACN,IAAI7B,EAAQ8B,EAAG,MACfC,EAAMT,EAAS,CAACnB,EAAMuB,IAAQ,CAC7B1B,EAAM,YAAYP,EAAO,UAAYW,GAAU,KAAK,KAAMD,CAAI,EAAE,GAAKA,EAAMuB,CAAG,CAC/E,CAAC,CACF,CACD,CAAC,EACM,IACR,CAYA,IAAIM,GACG,SAASC,GAAYC,EAAKC,EAAaC,EAAM,KAAMC,EAAS,CAAC,EAAG,CACtE,IAAMC,EAAUC,EAAgB,KAAK,KAAM,QAAQ,EAC7CC,EAAOC,EAAO,KAAK,KAAMP,CAAG,EAClCG,GAAUK,EAAUP,CAAW,EAAIC,EAAMC,IAAW,CAAC,EACrDF,EAAcO,EAAUP,CAAW,EAAIA,EAAcQ,GAASR,EAAaC,CAAG,EAE9E,IAAIQ,EACJ,GAAIP,EAAO,eACVO,EAAQD,EAASL,EAAO,SAAS,WAAW,EAAE,OAAO,CAACO,EAAMC,IAAY,CACvE,GAAI,CAGH,GADAA,EAAQ,SACJA,EAAQ,UAAU,KAAO,sBAC5B,OAAOA,CAET,MAAE,CAAU,CACZ,OAAOD,CACR,EAAG,IAAI,EACH,CAACD,GACJ,MAAM,IAAI,MAAM,yFAAyF,EAGtGA,IACCG,KACJA,GAAeT,EAAO,SAAS,cAAc,OAAO,EACpDA,EAAO,SAAS,KAAK,YAAYS,EAAY,EAC7CA,GAAa,GAAK,uBAEnBH,EAAQG,GAAa,OAGtB,IAAIC,EAAW,OAAO,KAAKb,CAAW,EAAE,IAAIc,GAAQ,GAAGZ,EAAO,UAAYa,GAAU,KAAK,KAAMD,CAAI,EAAE,GAAKA,MAASd,EAAYc,IAAO,EAAE,KAAK,GAAG,EAChJ,OAAAT,EAAK,QAAQW,GAAM,CAClB,IAAIC,EAAWC,GAAe,KAAK,KAAMF,EAAId,CAAM,EAC/CA,EAAO,SACVe,EAAW,GAAGA,IAAWf,EAAO,UAEjCO,EAAM,WAAW,GAAGQ,MAAaJ,KAAaX,EAAO,QAAU,EAAIO,EAAM,SAAS,MAAM,CACzF,CAAC,EAEM,IACR,CCtOe,SAARU,GAAiBC,KAAQC,EAAM,CACrC,IAAMC,EAASC,EAAgB,KAAK,KAAM,QAAQ,EAC5CC,EAAgBH,EAAK,OAAS,GAAKI,EAAUJ,EAAK,EAAE,GAAMK,EAAUL,EAAK,EAAE,EAC9E,UACA,SACH,OAAOC,EAAOE,GAAc,CAACG,EAASC,IAAW,CAChDD,EAAQE,EAAQ,KAAK,KAAMT,EAAK,GAAGC,CAAI,CAAC,CACzC,EAAG,EAAmB,CACvB,CCTA,IAAqBS,GAArB,KAAiC,CAchC,YAAYC,EAAIC,EAAOC,EAAcC,EAAe,CACnD,KAAK,GAAKH,EACV,KAAK,MAAQI,EAASH,CAAK,EAC3B,KAAK,aAAeC,EACpB,KAAK,cAAgBC,EACrB,KAAK,YAAc,CAAC,CACrB,CAOA,WAAY,CACX,IAAIE,EAAoB,KAAK,aAAa,KAAK,GAAI,KAAK,KAAK,EAC7D,GAAIA,aAA6B,QAChC,OAAOA,EAAkB,KAAKC,IACzBC,EAAUD,CAAM,GACnB,KAAK,YAAY,KAAKA,CAAM,EAEtBA,EACP,EAEF,GAAIC,EAAUF,CAAiB,EAC9B,YAAK,YAAY,KAAKA,CAAiB,EAChCA,CAET,CASA,MAAMC,EAAQ,CACb,OAAO,KAAK,cAAc,KAAK,GAAIA,CAAM,CAC1C,CASA,OAAOE,EAAY,EAAG,CACrB,QAASC,EAAI,EAAGA,GAAKD,GAAaA,EAAY,KAAK,YAAY,OAAQC,IACtE,KAAK,YAAYA,GAAK,KAEvB,OAAO,IACR,CAUA,SAASD,EAAY,EAAGE,EAAuB,GAAO,CACrD,GAAI,CAACC,EAAWH,CAAS,EACxB,MAAM,IAAI,MAAM,sDAAsD,EAGvE,IAAII,EAAkBC,GAAgB,CACrC,IAAIC,EAAa,KAAK,YAAY,OAAON,CAAS,EAE9CO,EAAcD,EAAW,MAAM,EACnC,GAAI,CAACC,EACJ,MAAO,CAAC,EAIT,IAAIC,EAA0BF,EAAW,IAAI,EACzCR,EAAS,CAAC,EAEd,YAAK,MAAM,QAAQW,GAAQ,CAGtBP,GAAwBM,GAA2BH,EAAaI,KAAUD,EAAwBC,IAKlGJ,EAAaI,KAAUF,EAAYE,KACtCX,EAAOW,GAAQF,EAAYE,GAE7B,CAAC,EACMX,CACR,EAEIO,EAAeH,EAAuB,KAAK,aAAa,KAAK,GAAI,KAAK,KAAK,EAAI,CAAC,EACpF,OAAIG,aAAwB,QACpBA,EAAa,KAAKA,GAAgB,KAAK,MAAMD,EAAgBC,CAAY,CAAC,CAAC,EAE5E,KAAK,MAAMD,EAAgBC,CAAY,CAAC,CAChD,CAOA,IAAI,QAAS,CACZ,OAAO,KAAK,YAAY,MACzB,CACD,ECtHe,SAARK,GAAiBC,EAAKC,EAAOC,EAAc,GAAO,CACxD,IAAMC,EAAMC,EAAO,KAAK,KAAMJ,CAAG,EAC3BK,EAAYH,EAAcI,GAAWC,EAC3C,OAAO,IAAIC,GAAYL,EAAI,GAAIF,EAAO,CAACQ,EAAIR,IACnCS,GAAW,KAAK,KAAMD,EAAIR,CAAK,EACpC,CAACQ,EAAIE,IACAN,EAAU,KAAK,KAAMI,EAAIE,CAAI,CACpC,CACF,CC3BA,IAAAC,GAAA,GAAAC,GAAAD,GAAA,WAAAE,EAAA,YAAAC,GAAA,aAAAC,EAAA,aAAAC,EAAA,kBAAAC,I9EYA,IAAMC,GAAQ,CACV,cAAAC,GACA,QAAAC,GACA,UAAAC,EACJ,E+EhBA,IAAAC,GAAA,GAAAC,GAAAD,GAAA,iBAAAE,GAAA,eAAAC,GAAA,kBAAAC,GAAA,iBAAAC,GAAA,cAAAC,GAAA,aAAAC,GAAA,eAAAC,GAAA,cAAAC,GAAA,iBAAAC,GAAA,cAAAC,GAAA,aAAAC,GAAA,YAAAC,GAAA,iBAAAC,GAAA,gBAAAC,GAAA,mBAAAC,GAAA,kBAAAC,GAAA,cAAAC,GAAA,aAAAC,KCce,SAARC,GAAiBC,KAAQC,EAAM,CACrC,OAAIC,EAAaD,EAAK,EAAE,IACvBA,EAAK,GAAK,IAEXE,EAAO,KAAK,KAAMH,CAAG,EAAE,QAAQI,GAAM,CACpCA,EAAG,OAAO,GAAGH,CAAI,CAClB,CAAC,EACM,IACR,CCRe,SAARI,GAAiBC,KAAQC,EAAM,CAErC,OADeC,EAAgB,KAAK,KAAM,QAAQ,EACpC,QAAQ,CAACC,EAASC,IAAW,CAC1CD,EAAQE,GAAU,KAAK,KAAML,EAAK,GAAGC,CAAI,CAAC,CAC3C,EAAG,EAAmB,CACvB,CCLe,SAARK,GAAiBC,EAAKC,EAAS,CACrC,IAAMC,EAAOC,EAAO,KAAK,KAAMH,CAAG,EAC5BI,EAAWD,EAAO,KAAK,KAAMF,CAAO,EAC1C,OAAAG,EAAS,QAAQ,CAACC,EAAQC,IAAM,CAC/B,IAAIC,EAAQL,EACRI,EAAIF,EAAS,OAAS,IACzBG,EAAQL,EAAK,IAAIM,GAAMA,EAAG,UAAU,EAAI,CAAC,GAE1CD,EAAM,QAAQC,GAAM,CACnBH,EAAO,OAAOG,CAAE,CACjB,CAAC,CACF,CAAC,EACM,IACR,CCbe,SAARC,GAAiBC,KAAQC,EAAM,CAErC,OADeC,EAAgB,KAAK,KAAM,QAAQ,EACpC,QAAQ,CAACC,EAASC,IAAW,CAC1CD,EAAQE,GAAY,KAAK,KAAML,EAAK,GAAGC,CAAI,CAAC,CAC7C,EAAG,EAAmB,CACvB,CCIe,SAARK,GAAiBC,EAAKC,EAAkBC,EAAqB,KAAMC,EAAc,KAAM,CAC7F,IAAMC,EAAOC,EAAO,KAAK,KAAML,CAAG,EAClC,GAAI,UAAU,SAAW,EAAG,CAC3B,GAAIM,EAAUL,CAAgB,EAC7B,OAAOG,EAAK,GAAG,aAAaH,CAAgB,EAE7C,GAAIM,EAASN,CAAgB,EAAG,CAC/B,IAAIO,EAAO,CAAC,EACZ,OAAAP,EAAiB,QAAQQ,GAAW,CACnCD,EAAKC,GAAWL,EAAK,GAAG,aAAaK,CAAO,CAC7C,CAAC,EACMD,CACR,CACD,CACA,IAAIE,EACJ,OAAIC,EAAUV,CAAgB,EAC7BS,EAAUT,EACA,UAAU,SAAW,EAC/BS,EAAU,CAAC,CAACT,GAAkC,CAC7C,CAACW,EAASV,CAAkB,EAAE,OAAO,CAACW,EAAMC,IAAMD,EAAK,OAAOC,EAAE,MAAM,GAAG,CAAC,EAAG,CAAC,CAAC,EAAE,KAAK,GAAG,GAAgBX,CAC1G,CAAC,EAGDO,EAAUE,EAASX,CAAkC,EAAE,OAAO,CAACc,EAAUC,KAAUD,EAASC,GAAQd,EAAoBa,GAAW,CAAC,CAAC,EAEtIX,EAAK,QAAQa,GAAM,CAClBC,EAAMR,EAAS,CAACM,EAAMd,IAAuB,CAC5C,GAAIS,EAAUT,CAAkB,EAAG,CAElC,IAAIiB,EAAaF,EAAG,aAAaD,CAAI,EACjCI,EAAkBD,EAAaA,EAAW,MAAM,GAAG,EAAE,IAAIE,GAAOA,EAAI,KAAK,CAAC,EAAE,OAAOC,GAAKA,CAAC,EAAI,CAAC,EAI9FC,EAAgBH,EACpBF,EAAMhB,EAAoB,CAACsB,EAAQC,IAAU,CAC5CD,EAASA,EAAO,MAAM,GAAG,EAAE,IAAIF,GAAKA,EAAE,KAAK,CAAC,EAAE,OAAOA,GAAKA,CAAC,EACtDG,EAQJF,EAAgBG,GAAQH,EAAc,OAAOC,CAAM,CAAC,EAPpDD,EAAgBA,EAAc,OAAOI,GAAK,CACzC,QAASC,KAAMJ,EACd,GAAIG,IAAMC,GAAOA,EAAG,SAAS,GAAG,GAAKD,EAAE,WAAWC,CAAE,EAAI,MAAO,GAEhE,MAAO,EACR,CAAC,CAIH,CAAC,EACKL,EAAc,SAAWH,EAAgB,SAAWS,GAAWN,EAAeH,CAAe,EAAE,QACpGH,EAAG,aAAaD,EAAMO,EAAc,KAAK,GAAG,CAAC,CAE/C,MAAWrB,IAAuB,GAEjCe,EAAG,gBAAgBD,CAAI,EACbd,IAAuB,GAEjCe,EAAG,aAAaD,EAAM,MAAM,EAG5BC,EAAG,aAAaD,EAAMd,CAAkB,CAE1C,CAAC,CACF,CAAC,EACM,IACR,CCzEe,SAAR4B,GAAiBC,EAAKC,EAAkBC,EAAgB,KAAMC,EAAiB,KAAM,CAC3F,IAAMC,EAASC,EAAgB,KAAK,KAAM,QAAQ,EAClD,OAAI,UAAU,SAAW,EACjBD,EAAO,QAAQE,GAAW,CAChCA,EAAQC,GAAQ,KAAK,KAAM,GAAG,SAAS,CAAC,CACzC,EAAG,EAAmB,EAEhBH,EAAO,OAAOE,GAAW,CAC/BA,EAAQC,GAAQ,KAAK,KAAM,GAAG,SAAS,CAAC,CACzC,EAAG,EAAmB,CACvB,CCTe,SAARC,GAAiBC,KAAQC,EAAM,CACrC,GAAI,UAAU,SAAW,GAAK,CAACC,EAAUD,EAAK,EAAE,EAAG,CAClD,IAAIE,EAAiBC,EAASH,EAAK,EAAE,EAAE,OAAO,CAACI,EAAMC,IAAMD,EAAK,OAAOC,EAAE,MAAM,GAAG,CAAC,EAAG,CAAC,CAAC,EAAE,IAAIC,GAAKA,EAAE,KAAK,CAAC,EAAE,OAAOA,GAAKA,CAAC,EACtHC,EAAY,OAAO,KAAK,KAAMR,CAAG,EAAE,GAAG,aAAa,OAAO,EAC9D,OAAOQ,EAAYC,GAAWD,EAAU,MAAM,GAAG,EAAE,IAAID,GAAKA,EAAE,KAAK,CAAC,EAAE,OAAOA,GAAKA,CAAC,EAAGJ,CAAc,EAAE,SAAWA,EAAe,OAAS,EAC1I,CACA,OAAOO,GAAS,KAAK,KAAMV,EAAK,QAAS,GAAGC,CAAI,CACjD,CCTe,SAARU,GAAiBC,KAAQC,EAAM,CACrC,OAAOC,GAAU,KAAK,KAAMF,EAAK,QAAS,GAAGC,CAAI,CAClD,CCFe,SAARE,GAAiBC,EAAK,CAC5B,IAAMC,EAAUC,EAAgB,KAAK,KAAM,QAAQ,EAEnD,IAAIC,EAAyB,CAC5B,WAAY,SAASC,EAAM,CAC1B,GAAIA,EAAK,WAAW,WAAa,SAChC,OAAOH,EAAO,WAAW,aAE3B,CACD,EAEII,EAAY,CAAC,EACjB,OAAAC,EAAO,KAAK,KAAMN,CAAG,EAAE,QAAQO,GAAM,CAGpC,QAFIC,EAASP,EAAO,SAAS,iBAAiBM,EAAIN,EAAO,WAAW,UAAWE,EAAwB,EAAK,EACxGC,EACEA,EAAOI,EAAO,SAAS,GAC5BH,EAAU,KAAKD,EAAK,SAAS,CAE/B,CAAC,EACMC,CACR,CCnBe,SAARI,GAAiBC,EAAKC,EAAU,KAAM,CAC5C,IAAMC,EAAOC,EAAO,KAAK,KAAMH,CAAG,EAClC,OAAI,UAAU,OAAS,GACtBE,EAAK,QAAQE,GAAM,CACdC,EAAUJ,CAAO,EACpBG,EAAG,UAAYH,GAEfG,EAAG,UAAY,GACVE,EAAaL,CAAO,GACxBG,EAAG,OAAOH,CAAO,EAGpB,CAAC,EACM,MAEDC,EAAK,GAAG,SAChB,CChBe,SAARK,GAAiBC,EAAKC,EAAQ,KAAM,CAC1C,IAAIC,EAASC,EAAgB,KAAK,KAAM,QAAQ,EAChD,OAAI,UAAU,OAAS,EACfD,EAAO,QAAQ,CAACE,EAASC,IAAW,CAC1CD,EAAQE,GAAQ,KAAK,KAAM,GAAG,SAAS,CAAC,CACzC,EAAG,EAAmB,EAEhBJ,EAAO,OAAO,CAACE,EAASC,IAAW,CACzCD,EAAQE,GAAQ,KAAK,KAAM,GAAG,SAAS,CAAC,CACzC,EAAG,EAAmB,CACvB,CCVe,SAARC,GAAiBC,KAAQC,EAAM,CACrC,OAAIC,EAAaD,EAAK,EAAE,IACvBA,EAAK,GAAK,IAEXE,EAAO,KAAK,KAAMH,CAAG,EAAE,QAAQI,GAAM,CACpCA,EAAG,QAAQ,GAAGH,CAAI,CACnB,CAAC,EACM,IACR,CCRe,SAARI,GAAiBC,KAAQC,EAAM,CAErC,OADeC,EAAgB,KAAK,KAAM,QAAQ,EACpC,QAAQ,CAACC,EAASC,IAAW,CAC1CD,EAAQE,GAAW,KAAK,KAAML,EAAK,GAAGC,CAAI,CAAC,CAC5C,EAAG,EAAmB,CACvB,CCLe,SAARK,GAAiBC,EAAKC,EAAS,CACrC,IAAMC,EAAOC,EAAO,KAAK,KAAMH,CAAG,EAC5BI,EAAWD,EAAO,KAAK,KAAMF,CAAO,EAC1C,OAAAG,EAAS,QAAQ,CAACC,EAAQC,IAAM,CAC/B,IAAIC,EAAQL,EACRI,EAAIF,EAAS,OAAS,IACzBG,EAAQL,EAAK,IAAIM,GAAMA,EAAG,UAAU,EAAI,CAAC,GAE1CD,EAAM,QAAQC,GAAM,CACnBH,EAAO,QAAQG,CAAE,CAClB,CAAC,CACF,CAAC,EACM,IACR,CCbe,SAARC,GAAiBC,KAAQC,EAAM,CAErC,OADeC,EAAgB,KAAK,KAAM,QAAQ,EACpC,QAAQ,CAACC,EAASC,IAAW,CAC1CD,EAAQE,GAAa,KAAK,KAAML,EAAK,GAAGC,CAAI,CAAC,CAC9C,EAAG,EAAmB,CACvB,CCCe,SAARK,GAAsBC,EAAKC,EAAOC,EAAS,CAAC,EAAG,CAClD,IAAMC,EAASC,EAAgB,KAAK,KAAM,QAAQ,EAC5CC,EAAWD,EAAgB,KAAK,KAAM,UAAU,EAChDE,EAASF,EAAgB,KAAK,KAAM,QAAQ,EAC5CG,EAASH,EAAgB,KAAK,KAAM,QAAQ,EAC5CI,EAAqBN,EAAO,oBAAsB,aAEpDO,EAAe,CAAEC,KAAaC,IAAU,CACxC,GAAI,CAAE,OAAOD,EAAU,GAAGC,CAAK,CAAI,MAAE,CAAY,CACrD,EACMC,EAAO,CAACC,EAAIC,EAAuBC,EAAcC,EAAKC,EAAUC,IAAa,CAC/E,IAAIC,EAIJ,GAHID,GAAYL,EAAG,SAAS,SACxBM,EAASC,GAAcP,EAAI,IAAML,EAAqB,KAAOQ,EAAM,IAAI,GAEvE,CAACG,EAAQ,CAET,IAAIE,EAWJ,GAVIC,EAAYP,CAAY,EACxBM,EAAUN,EAAaE,EAAUH,CAAqB,GAEzD,CAACC,GAAgBQ,EAASF,EAAUP,EAAsBC,EAAa,IACrEQ,EAASF,EAAUP,EAAsBE,EAAI,GAC5CQ,EAAWR,CAAG,GAAKO,EAASF,EAAUP,EAAsB,IAAI,IAEhEO,EAAUP,EAAsB,SAGhC,CAACS,EAASF,CAAO,EAAG,CACpBF,EAASE,EAAQ,GAAG,UAAU,EAAI,EAClC,IAAII,EAAW,CAAC,EAChBC,EAASb,EAAG,QAAQ,EAAE,QAAQc,GAAO,CACjCF,EAASE,EAAI,aAAanB,CAAkB,GAAKmB,CACrD,CAAC,EACD,IAAIC,GAAYC,GAAW,OAAO,KAAKJ,CAAQ,EAAGT,EAAM,GAA8B,EAAc,EAC/F,OAAO,CAACc,EAASC,IAASD,GAAWL,EAASM,GAAO,IAAI,EAC1DH,GACAA,GAAU,OAAOT,CAAM,EAEvBN,EAAG,OAAOM,CAAM,EAEpBA,EAAO,aAAaX,EAAoBQ,CAAG,CAC/C,CACJ,CACA,GAAIG,GACI,EAAEG,EAAYpB,EAAO,cAAc,GAAKO,EAAaP,EAAO,eAAgB,SAAUiB,EAAQF,EAAUD,EAAKE,CAAQ,IAAM,KACvHc,EAAcf,CAAQ,EAAG,CACzB,IAAIgB,EAAW1B,EAAO,KAAK,IAAI,cAAc,EAC7CY,EAAOc,GAAUhB,CAAQ,CAC7B,CAGZ,EAEMiB,EAAO,CAACrB,EAAIG,EAAKmB,IAAa,CAChC,IAAIhB,EAASC,GAAcP,EAAI,IAAML,EAAqB,KAAOQ,EAAM,IAAI,EAC3E,GAAIG,EAAQ,CACR,IAAIiB,EACJ,GAAI,EAAEd,EAAYpB,EAAO,cAAc,GAAKO,EAAaP,EAAO,eAAgB,WAAYiB,EAAQgB,EAAUnB,CAAG,IAAM,IAAQ,CAC3H,IAAIqB,EAAa9B,EAAO,KAAK,IAAI,gBAAgB,EACjDY,EAAOkB,GAAY,CACvB,CACA,IAAIC,EAAS,IAAMnB,EAAO,OAAO,EAC7BiB,aAAiB,QACjBA,EAAM,KAAKE,CAAM,EAAE,MAAMA,CAAM,EAE/BA,EAAO,CAEf,CACJ,EACA,OAAAC,EAAO,KAAK,KAAMvC,CAAG,EAAE,QAAQa,GAAM,CACjC,IAAM2B,EAAmBC,EAAW5B,EAAI,SAAS,EAAE,IAAI,eAAe,EAClEX,EAAO,SACPwC,GAAiB7B,EAAI,IAAML,EAAqB,GAAG,EAAE,QAAQmB,GAAOA,EAAI,OAAO,CAAC,EACzEa,GACPG,EAAMH,EAAkB,CAACxB,EAAK4B,IAAS,CACnC,GAAI,CAACZ,EAAc/B,CAAK,GAAK,EAAEe,KAAOf,GAAQ,CAC1C,IAAIkB,EAASC,GAAcP,EAAI,IAAML,EAAqB,KAAOQ,EAAM,IAAI,EACvEG,GAAQA,EAAO,OAAO,CAC9B,CACJ,CAAC,EAEL,IAAI0B,EAAYhC,EAAG,aAAaN,EAAO,KAAK,IAAI,gBAAgB,CAAC,EAC7DQ,EAAeb,EAAO,gBAAkB2C,GAAa,IAAI,SAAS,GAAG,EAAIA,EAAU,MAAM,GAAG,EAAE,GAAK,MACnGC,EAAajC,EAAGN,EAAO,KAAK,IAAI,eAAe,GAC/CO,EAAwBgC,EAAaA,EAAWvC,EAAO,KAAK,IAAI,aAAa,GAAK,KACtF,GAAI,GAACuC,GAAc,CAAChC,GAAyB,CAACkB,EAAc/B,CAAK,GAIjE,KAAIiB,EAAW,EAAAE,GAAcP,EAAI,IAAML,EAAqB,GAAG,EAqB/D,GApBAmC,EAAM1C,EAAO,CAACe,EAAK+B,IAASnC,EAAKC,EAAIC,EAAuBC,EAAcC,EAAK+B,EAAM7B,CAAQ,CAAC,EAC1FhB,EAAO,OAAS,IAASG,EAAS,UAC9BmC,GACAnC,EAAS,UAAUmC,EAAkB,KAAM,KAAM,CAAC,KAAM,CAAC,eAAgBzC,GAAM,IAAI,CAAC,CAAC,EAEzFM,EAAS,QAAQJ,EAAO+C,GAAa,CACjCA,EAAU,QAAQC,GAAY,CACtBC,EAASjD,CAAK,GAAKgD,EAAS,OAAS,WAGrCA,EAAS,OAAS,iBAClBf,EAAKrB,EAAIoC,EAAS,KAAMA,EAAS,QAAQ,GAClCA,EAAS,OAAS,OAASA,EAAS,OAAS,mBACpDrC,EAAKC,EAAIC,EAAuBC,EAAckC,EAAS,KAAMA,EAAS,MAAOA,EAAS,QAAQ,EAEtG,CAAC,CACL,EAAG,CAAC,KAAM,CAAC,eAAgBlD,GAAM,IAAI,CAAC,CAAC,EACvC0C,EAAW5B,EAAI,SAAS,EAAE,IAAI,gBAAiBZ,CAAK,GAGpDC,EAAO,iBAAkB,CACzB,IAAIiD,EAAoBC,EAAY,IAAI,IACpCC,GAAS,MAAOC,EAAc,KAAMC,EAAe,KAAMC,GAAU,KAAU,CAE7E,IAAIC,GAAc,OAAO,OAAOxD,CAAK,EAAE,OAAO8C,IAAQ,CAACK,EAAU,IAAIL,EAAI,CAAC,EAC1E,GAAI,CAACS,IAAWlC,EAAYpB,EAAO,yBAAyB,EAAG,CAC3D,IAAIwD,GAAiB,MAAMjD,EAAaP,EAAO,0BAA2B,GAAMW,EAAI4C,GAAY,OAAQL,EAAU,IAAI,EACtH,GAAIM,KAAmB,GACnB,MAER,EAEI,CAACJ,GAAe,CAACC,KAEjBJ,EAAqBA,GAAsB,GAE3C,MAAM7C,EAAO,OAAOqD,IAAW,CACvBzD,EAAO,yBAA2B,IAClCqD,EAAeA,GAAgB1C,EAAG,WAAW,sBAAsB,EACnEyC,EAAcA,GAAezC,EAAG,sBAAsB,IAEtD0C,EAAeA,GAAgB1C,EAAG,sBAAsB,EACxDyC,EAAc,CAAC,MAAOzC,EAAG,YAAa,OAAQA,EAAG,YAAY,GAExDX,EAAO,cAAgB,YAAcqD,EAAa,SAAWD,EAAY,QAC1EpD,EAAO,cAAgB,YAAcqD,EAAa,QAAUD,EAAY,SACxEA,EAAcG,GAAY,OAAO,CAACG,GAAMb,KAAS,CAC7C,IAAIc,GAAWC,EAAYf,EAAI,EAAE,GAAG,sBAAsB,EAC1D,MAAO,CACH,MAAOa,GAAK,MAAQC,GAAS,MAC7B,OAAQD,GAAK,OAASC,GAAS,MACnC,CACJ,EAAG,CAAC,MAAO,EAAG,OAAQ,CAAC,CAAC,IAGhCF,GAAQ,CACZ,EAAG,EAAqB,GAI5B,IAAII,GAAsBC,GAU1B,GATI9D,EAAO,cAAgB,YACvB6D,GAAuBR,EAAa,OACpCS,GAAgBV,EAAY,SAE5BS,GAAuBR,EAAa,MACpCS,GAAgBV,EAAY,OAI5BU,GAAgBD,GAAsB,CACtCZ,EAAqB,aACrB,IAAIc,EAAQ/D,EAAO,kBAAoB,QAAUuD,GAAY,MAAM,EAC5DvD,EAAO,kBAAoB,UAAYA,EAAO,kBAAoB,eAAiBgE,GAAKT,EAAW,EAC/FvD,EAAO,kBAAoB,aAAegE,GAAKT,GAAa,EAAI,EAAE,IAAI,EAAIA,GAAY,IAAI,EACrG,GAAIQ,EAAO,CAGP,IAAIE,GAAeL,EAAYG,CAAK,EACpC,MAAM3D,EAAO,OAAOqD,IAAW,CAC3B,IAAIE,GAAWM,GAAa,GAAG,sBAAsB,EACrDf,EAAU,IAAIa,EAAO/D,EAAO,cAAgB,WAAa2D,GAAS,OAASA,GAAS,KAAK,EACzFF,GAAQ,CACZ,EAAG,EAAqB,EAExB,MAAMlD,EAAaP,EAAO,iBAAkB,WAAYiE,GAAa,GAAIF,EAAOE,GAAa,IAAKf,EAAU,IAAI,CACpH,MACID,EAAqB,IAE7B,SAAWa,GAAgBD,GACvB,GAAIZ,IAAuB,aACvBA,EAAqB,aACdC,EAAU,KAAM,CACvBD,EAAqB,YAErB,QADIc,EAAOE,GAAcC,GAAehB,EAAU,KAAK,EAAGiB,IACnDA,GAAsBD,GAAa,KAAK,IAAM,CAACC,GAAoB,MACtEJ,EAAQI,GAAoB,MAEhC,IAAIC,GAAYP,GAAuBC,GACnCM,IAAalB,EAAU,IAAIa,CAAK,IAA2BE,GAAeL,EAAYG,CAAK,IAC3Fb,EAAU,OAAOa,CAAK,EACtB,MAAMxD,EAAaP,EAAO,iBAAkB,UAAWiE,GAAa,GAAIF,EAAOE,GAAa,IAAKf,EAAU,IAAI,GAE/GD,EAAqB,IAE7B,MACIA,EAAqB,UAGzBA,EAAqB,KAIrBA,EACA,MAAME,GAAO,KAAM,KAAM,EAAI,EACtB/B,EAAYpB,EAAO,yBAAyB,GACnD,MAAMO,EAAaP,EAAO,0BAA2B,GAAOW,EAAI4C,GAAY,OAAQL,EAAU,IAAI,CAE1G,EAEA,IAAMU,EAAcf,GAAQ,OAAO,KAAK9C,CAAK,EAAE,OAAO,CAACsE,EAAQvD,KAAQuD,IAAWtE,EAAMe,MAAS+B,EAAO,CACpG,GAAI3B,GAAcP,EAAI,IAAML,EAAqB,KAAOQ,GAAM,IAAI,EAClE,IAAAA,EACJ,EAAI,MAAO,IAAI,EAEf,IAAIwD,EAAc,GAClBC,GAActE,EAAQU,EAAIX,EAAO,yBAA2B,GAAQW,EAAG,WAAaA,EAAI+C,GAAQ,CACxF,CAACY,GAAerB,IACpBqB,EAAc,GACdnB,GAAO,KAAMO,CAAI,EACrB,CAAC,EACD,WAAW,IAAM,CACTpB,GAAoB,CAACW,GACrBE,GAAO,CAEf,EAAG,CAAC,CACR,EACJ,CAAC,EACM,IACX,CAUO,IAAMjC,GAAgB,CAACP,EAAI6D,IACvBhD,EAASb,EAAG,QAAQ,EAAE,OAAO,CAAC8D,EAAOC,IAAUD,IAAUC,EAAM,QAAQF,CAAQ,EAAIE,EAAQ,MAAO,IAAI,EAEpGlC,GAAmB,CAAC7B,EAAI6D,IAC1BhD,EAASb,EAAG,QAAQ,EAAE,OAAO+D,GAASA,EAAM,QAAQF,CAAQ,CAAC,EAWpEG,GAAsBC,GAC1B,SAASL,GAActE,EAAQ4E,EAAkBC,EAAetE,EAAU,CACtE,GAAI,CAACmE,GAAsB,CACvB,GAAI,CAAC1E,EAAO,eACR,OAEJ2E,GAAgB,IAAI,IACpBD,GAAuB,IAAI1E,EAAO,eAAe8E,GAAW,CACxDA,EAAQ,QAAQC,GAAS,CACrBJ,GAAc,IAAII,EAAM,MAAM,EAAE,QAAQxE,GAAYA,EAASwE,EAAM,WAAW,CAAC,CACnF,CAAC,CACL,CAAC,CACL,CACA,IAAIC,EAAgBL,GAAc,IAAIE,CAAa,EAC9CG,IACDN,GAAqB,QAAQG,CAAa,EAC1CG,EAAgB,IAAI,IACpBL,GAAc,IAAIE,EAAeG,CAAa,GAElDA,EAAc,IAAIJ,EAAkBrE,CAAQ,CAChD,CClSA,IAAO0E,GAAQC,GCSA,SAARC,GAAiBC,EAAKC,EAAU,KAAM,CAC5C,IAAMC,EAAOC,EAAO,KAAK,KAAMH,CAAG,EAClC,OAAI,UAAU,OAAS,GAClBI,EAAaH,CAAO,IACvBA,EAAU,IAEXC,EAAK,QAAQG,GAAM,CAClBA,EAAG,UAAYJ,CAChB,CAAC,EACM,MAEDC,EAAK,GAAG,SAChB,CCZe,SAARI,GAAiBC,EAAKC,EAAQ,KAAM,CAC1C,IAAMC,EAASC,EAAgB,KAAK,KAAM,QAAQ,EAClD,OAAI,UAAU,OAAS,EACfD,EAAO,QAAQE,GAAW,CAChCA,EAAQC,GAAQ,KAAK,KAAM,GAAG,SAAS,CAAC,CACzC,EAAG,EAAmB,EAEhBH,EAAO,OAAOE,GAAW,CAC/BA,EAAQC,GAAQ,KAAK,KAAM,GAAG,SAAS,CAAC,CACzC,EAAG,EAAmB,CACvB,CCxBA,IAAAC,GAAA,GAAAC,GAAAD,GAAA,UAAAE,GAAA,SAAAC,GAAA,SAAAC,KCkBe,SAARC,GAAiBC,EAAKC,EAAkBC,EAAM,KAAM,CAC1D,IAAMC,EAAOC,EAAO,KAAK,KAAMJ,CAAG,EAClC,GAAI,UAAU,SAAW,GACxB,UAAU,SAAW,IAAMK,EAAUJ,CAAgB,GAAKK,EAASL,CAAgB,GACjF,CACF,IAAMM,EAAaC,EAAWL,EAAK,GAAI,UAAW,MAAM,EAGxD,GAAIE,EAAUJ,CAAgB,EAC7B,OAAOM,EAAW,IAAIN,CAAgB,EASvC,GALI,UAAU,SAAW,IACxBA,EAAmBM,EAAW,KAAK,GAIhCD,EAASL,CAAgB,EAAG,CAC/B,IAAIQ,EAAO,CAAC,EACZ,OAAAR,EAAiB,QAAQS,GAAO,CAC/BD,EAAKC,GAAOH,EAAW,IAAIG,CAAG,CAC/B,CAAC,EACMD,CACR,CACD,CAEA,IAAIE,EAAUV,EACd,OAAKW,EAAUX,CAAgB,IAC9BU,EAAUE,GAASZ,EAAkBC,CAAG,GAEzCC,EAAK,QAAQW,GAAM,CAClB,IAAMP,EAAaC,EAAWM,EAAI,UAAW,MAAM,EACnDC,EAAMJ,EAAS,CAACD,EAAKR,IAAQ,CAGxBc,EAAad,CAAG,EACnBK,EAAW,OAAOG,CAAG,EAKrBH,EAAW,IAAIG,EAAKR,CAAG,CAEzB,CAAC,CACF,CAAC,EAEM,IACR,CCjDe,SAARe,GAAsBC,EAAKC,EAASC,EAAS,CAAC,EAAG,CACpD,IAAMC,EAAU,CAAE,GAAGD,CAAO,EAC5B,OAAAC,EAAQ,aAAe,CAACC,EAAOC,IACvBC,EAAYJ,EAAO,YAAY,EACxBA,EAAO,aAAaE,EAAOC,CAAqB,EAEpDA,EAAsBD,EAAM,QAAQ,MAExCG,GAAKP,EAAKC,EAASE,CAAO,CACrC,CC1BA,IAAAK,GAAA,GAAAC,GAAAD,GAAA,aAAAE,GAAA,gBAAAC,KCgBe,SAARC,GAAiBC,EAAKC,EAAOC,EAAcC,EAAe,CAC7D,IAAMC,EAAM,OAAO,KAAK,KAAMJ,CAAG,EAAE,GACnC,OAAO,IAAIK,GAAYD,EAAKH,EAAOC,EAAcC,CAAa,CAClE,CCnBA,IAAAG,GAAA,GAAAC,GAAAD,GAAA,iBAAAE,KCAA,IAAAC,GAAA,GAAAC,GAAAD,GAAA,kBAAAE,EAAA,QAAAC,GAAA,OAAAC,GAAA,SAAAC,GAAA,SAAAC,GAAA,YAAAC,KCaA,IAAMC,EAAe,CAAC,EAKhBC,GAAW,KAAM,CAKtB,MAAMC,EAAIC,EAAWC,EAAcC,EAAY,CAC9C,GAAI,CAAC,OAAO,IAAI,OAAO,OACtB,MAAM,IAAI,MAAM,6CAA+CF,EAAY,WAAW,EAGvF,KAAK,GAAKD,EACV,KAAK,UAAYC,EACjB,KAAK,aAAeC,EACpB,KAAK,WAAaC,EAElB,IAAIC,EAAW,GACXC,EAAcC,GAAe,IAAI,CAACC,EAASC,IAAM,CACpD,IAAIC,EAAa,KAAK,WAAW,IAAIF,CAAO,EAC5C,OAAKE,IACJL,EAAW,GACXK,EAAa,IAAI,IAAI,OAAO,OAAO,IAAI,CACtC,MAAOF,EACP,KAAMD,GAAe,OAASE,CAC/B,CAAC,EACD,KAAK,WAAW,IAAIC,CAAU,GAExBA,CACR,CAAC,EACD,GAAI,CAACL,EAAU,CAGd,QADIM,EAAQC,EAAUN,EAAY,MAAM,GACjCK,EAASC,EAAQ,MAAM,IAAMA,EAAQ,QAC3CD,EAAO,cAAcC,CAAO,EAI7B,QADIC,EAASC,EAAWR,EAAY,MAAM,GACnCO,EAAUC,EAAS,IAAI,IAAMA,EAAS,QAC5CD,EAAQ,eAAeC,CAAQ,CAEjC,CACA,KAAK,WAAW,GAAG,KAAK,UAAW,KAAK,YAAY,CACrD,CAKA,UAAW,CACV,KAAK,WAAW,IAAI,KAAK,SAAS,CACnC,CACD,EAMMP,GAAiB,CAAC,YAAa,YAAa,WAAW,EAE7DA,GAAe,QAAQQ,GAAS,CAC/BhB,EAAagB,GAASf,EACvB,CAAC,EC9Dc,SAARgB,GAAiBC,EAASC,EAAaC,EAAO,KAAM,CACvD,GAAI,CAACC,EAAcH,CAAO,EACtB,MAAM,IAAI,MAAM,oCAAsCI,EAASJ,CAAO,EAAI,UAAU,EAExF,IAAIK,EAAUC,EAAaC,EAAWP,EAAS,SAAS,EACxD,MAAI,EAAEK,EAAWC,EAAW,IAAIL,CAAW,IAAMC,IAC7CG,EAAW,IAAIH,EAAKF,CAAO,EAC3BM,EAAW,IAAIL,EAAaI,CAAQ,GAEjCA,CACX,CCbA,IAAOG,GAAP,KAAqB,CASpB,YAAYC,EAAS,CACpB,KAAK,QAAUA,EACf,KAAK,UAAY,CAAC,EAClB,KAAK,gBAAkB,CAAC,CACzB,CAUA,IAAIC,EAAU,CACb,YAAK,UAAU,KAAKA,CAAQ,EACrBA,CACR,CASA,OAAOC,EAAK,CACX,KAAK,OAAOA,CAAG,EAAE,QAAQD,GAAY,CACpC,KAAK,UAAY,KAAK,UAAU,OAAOE,GAAaA,IAAcF,CAAQ,CAC3E,CAAC,CACF,CASA,OAAOC,EAAK,CACX,OAAO,KAAK,UAAU,OAAOD,GAAY,CACxC,IAAIG,EAAiBC,EAASJ,EAAS,MAAM,EACzCK,EAAeD,GAAUJ,EAAS,QAAU,CAAC,GAAG,IAAI,EAEpDM,EAAYF,EAASH,EAAI,MAAM,EAC/BM,EAAUH,GAAUH,EAAI,QAAU,CAAC,GAAG,IAAI,EAE9C,OAAQ,CAACA,EAAI,iBAAmBD,EAAS,UAAYC,EAAI,mBACpD,CAACK,EAAU,QAAWA,EAAU,SAAWH,EAAe,QAAUK,GAAWL,EAAgBG,CAAS,EAAE,SAAWA,EAAU,UAC/H,CAACC,EAAQ,QAAWA,EAAQ,SAAWF,EAAa,QAAUG,GAAWH,EAAcE,CAAO,EAAE,SAAWA,EAAQ,OACzH,CAAC,CACF,CACD,EClEA,IAAOE,GAAP,KAAqB,CAUpB,YAAYC,EAASC,EAAK,CACzB,KAAK,QAAUD,EACf,KAAK,QAAUC,EAAI,QACnB,KAAK,OAASA,EAAI,OAClB,KAAK,OAASA,EAAI,MAEnB,CAOA,YAAa,CACZ,KAAK,aAAe,EACrB,CACD,ECtBA,IAAOC,GAAP,cAA6BC,EAAS,CAUrC,KAAKC,EAAK,CACL,KAAK,SAAWA,EAAI,MACvBA,EAAI,SAAS,KAAK,QAAQ,KAAK,KAAK,QAASA,CAAG,CAAC,CAEnD,CACD,ECbA,IAAOC,GAAP,KAAqB,CAUpB,YAAYC,EAAQC,EAAG,CACtB,KAAK,EAAI,CAAC,EACV,KAAK,EAAE,OAASD,EAChB,KAAK,EAAE,EAAIC,EACX,KAAK,EAAE,mBAAqB,GAC5B,KAAK,EAAE,iBAAmB,GAC1B,KAAK,EAAE,iBAAmB,KAC1B,KAAK,EAAE,SAAW,CAAC,CAEpB,CAOA,IAAI,MAAO,CACV,OAAO,KAAK,EAAE,EAAE,IACjB,CAOA,IAAI,QAAS,CACZ,OAAO,KAAK,EAAE,EAAE,MACjB,CAOA,IAAI,GAAI,CACP,OAAO,KAAK,EAAE,CACf,CAaA,iBAAkB,CACjB,KAAK,EAAE,mBAAqB,GAC5B,GAAI,CACH,KAAK,EAAE,EAAE,gBAAgB,CAC1B,MAAE,CAAU,CACb,CAOA,IAAI,oBAAqB,CACxB,OAAO,KAAK,EAAE,kBACf,CAQA,gBAAiB,CAChB,KAAK,EAAE,iBAAmB,GAC1B,GAAI,CACH,KAAK,EAAE,EAAE,eAAe,CACzB,MAAE,CAAU,CACb,CAOA,IAAI,kBAAmB,CACtB,OAAO,KAAK,EAAE,gBACf,CASA,QAAQC,EAAS,CAChB,GAAI,EAAEA,aAAmB,SACxB,MAAM,IAAI,MAAM,gDAAgD,EAEjE,KAAK,EAAE,SAAS,KAAKA,CAAO,EAC5B,KAAK,EAAE,iBAAmB,IAC3B,CAOA,IAAI,UAAW,CACd,MAAI,CAAC,KAAK,EAAE,kBAAoB,KAAK,EAAE,SAAS,SAC/C,KAAK,EAAE,iBAAmB,QAAQ,IAAI,KAAK,EAAE,QAAQ,GAE/C,KAAK,EAAE,gBACf,CAUA,SAASC,EAAO,CACf,IAAIC,EACAC,EAAUC,EAAUH,CAAK,GAAK,CAACI,EAAaJ,EAAM,kBAAkB,GAAK,CAACI,EAAaJ,EAAM,gBAAgB,EAC5GA,IAAU,IAAWE,GAAWF,EAAM,mBAC1C,KAAK,gBAAgB,EACVA,IAAU,IAAWE,GAAWF,EAAM,iBACjD,KAAK,eAAe,GACTA,aAAiB,UAAYC,EAAQD,IAC7CE,IAAYD,EAAQD,EAAM,YAC7B,KAAK,QAAQC,CAAK,CAEpB,CACD,EC3IA,IAAqBI,GAArB,cAAuCC,EAAS,CAS/C,YAAYC,EAAS,CACpB,MAAMA,CAAO,EACb,KAAK,aAAe,CAAC,EACrB,KAAK,WAAa,IAAM,CACvB,GAAI,CAAC,KAAK,IAAK,CACd,GAAI,OAAO,OAAW,KAAe,CAAC,OAAO,OAAQ,CACpD,QAAQ,MAAM,iDAAiD,EAC/D,MACD,CACA,KAAK,KAAO,IAAI,OAAO,OAAO,QAAQ,KAAK,OAAO,CACnD,CACA,OAAO,KAAK,GACb,CACD,CAUA,OAAOC,EAAMC,EAAQ,CAEpB,GAAI,MAAK,aAAaD,GAGtB,KAAIE,EACJ,GAAIC,EAAaH,GAChB,GAAII,EAAUD,EAAaH,EAAK,EAE/B,KAAK,aAAaA,GAAQK,GAAK,KAAK,KAAK,CAAC,KAAKL,EAAM,EAAAK,CAAC,CAAC,EACvD,KAAK,IAAI,IAAIC,GAAS,KAAK,QAAS,CACnC,QAAS,KAAK,aAAaN,GAC3B,OAAQG,EAAaH,EACtB,CAAC,CAAC,UACQO,GAASJ,EAAaH,EAAK,EAAG,CAGxC,GADA,KAAK,aAAaA,GAAQ,IAAIG,EAAaH,GACvC,CAACQ,EAAY,KAAK,aAAaR,GAAM,KAAK,EAC7C,MAAM,IAAI,MAAM,QAAUA,EAAO,+CAA+C,GAE7EE,EAAa,KAAK,WAAW,IAChC,KAAK,aAAaF,GAAM,MAAM,KAAK,QAASA,EAAMK,GAAK,CACtD,KAAK,KAAK,CAAC,KAAKL,EAAM,EAAAK,CAAC,CAAC,CACzB,EAAGH,CAAU,CAEf,KACC,OAAM,IAAI,MAAM,QAAUF,EAAO,0DAA0D,UAElFS,GAAiBT,EAAK,MAAM,GAAG,EAAE,EAAE,GAE7C,GAAIE,EAAa,KAAK,WAAW,EAAG,CACnC,IAAIQ,EAAcV,EAAK,MAAM,GAAG,EAAE,IAAIW,GAAe,CACpD,IAAIC,EAAkBH,GAAiBE,CAAW,EAC9CE,EAAaX,EAAW,IAAIU,CAAe,EAC/C,OAAKC,IACJA,EAAa,IAAI,OAAOC,GAASF,CAAe,GAChDV,EAAW,IAAIW,CAAU,GAEnBA,CACR,CAAC,EAEDH,EAAY,QAAQ,CAACG,EAAYE,IAAM,CACtCF,EAAW,cAAcH,EAAY,MAAMK,EAAI,CAAC,CAAC,CAClD,CAAC,EAED,KAAK,aAAaf,GAAQK,GAAK,KAAK,KAAK,CAAC,KAAKL,EAAM,EAAAK,CAAC,CAAC,EACvDH,EAAW,GAAGF,EAAK,MAAM,GAAG,EAAE,KAAK,GAAG,EAAG,KAAK,aAAaA,EAAK,CACjE,OAGA,KAAK,aAAaA,GAAQK,GAAK,KAAK,KAAKA,CAAC,EAC1C,KAAK,QAAQ,iBAAiBL,EAAM,KAAK,aAAaA,EAAK,EAE7D,CASA,UAAUA,EAAM,CAEf,GAAI,EAAC,KAAK,aAAaA,GAGvB,IAAIG,EAAaH,IAChB,GAAII,EAAUD,EAAaH,EAAK,EAE/B,eAAe,KAAK,QAASG,EAAaH,GAAO,KAAK,aAAaA,EAAK,UAC9D,KAAK,aAAaA,GAC5B,GAAIQ,EAAY,KAAK,aAAaR,GAAM,QAAQ,EAE/C,KAAK,aAAaA,GAAM,SAAS,MAEjC,OAAM,IAAI,MAAM,QAAUA,EAAO,oDAAoD,OAG5E,WAAa,KAAK,WAAW,IAAMS,GAAiBT,EAAK,MAAM,GAAG,EAAE,EAAE,EACjF,WAAW,IAAIA,EAAK,MAAM,GAAG,EAAE,KAAK,GAAG,EAAG,KAAK,aAAaA,EAAK,EAGjE,KAAK,QAAQ,oBAAoBA,EAAM,KAAK,aAAaA,EAAK,EAE/D,OAAO,KAAK,aAAaA,GAC1B,CAKA,IAAIgB,EAAK,CACR,YAAK,OAAOA,EAAI,OAAQA,EAAI,MAAM,EAC3B,MAAM,IAAI,IAAIV,GAAS,KAAK,QAASU,CAAG,CAAC,CACjD,CASA,KAAKC,EAAK,CACT,OAAMA,aAAeC,KACpBD,EAAM,IAAIC,GAAM,KAAK,QAASD,CAAG,GAElC,KAAK,UAAU,QAAQE,GAAY,CAC9BF,EAAI,oBAGRE,EAAS,KAAKF,CAAG,CAClB,CAAC,EACMA,CACR,CACD,EASMR,GAAmB,SAASE,EAAa,CAC9C,OAAOS,GAAMC,GAAcC,GAAQA,EAAK,SAASX,CAAW,EAAG,EAAa,CAC7E,EAKMU,GAAe,CACpB,MAAQ,CAAC,QAAS,SAAU,EAC5B,OAAQ,CAAC,SAAU,cAAe,aAAc,YAAa,cAAe,EAC5E,MAAQ,CAAC,QAAS,aAAc,YAAa,WAAY,cAAe,UAAW,UAAW,EAC9F,IAAM,CAAC,MAAO,WAAY,UAAW,SAAU,YAAa,UAAW,WAAY,QAAS,SAAU,EACtG,MAAQ,CAAC,QAAS,YAAa,aAAc,UAAW,WAAY,EACpE,IAAM,CAAC,KAAM,CACd,EC9Ke,SAARE,GAAiBC,EAAQC,EAAmB,GAAM,CACrD,OAAOC,GAAYF,EAAQ,YAAaC,EAAmBE,GAAY,IAAI,CAC/E,CCEe,SAARC,GAAiBC,EAAKC,EAAQC,EAAkB,KAAMC,EAAS,CAAC,EAAG,CAMzE,GALIC,EAAYH,CAAM,IACrBE,EAAS,UAAU,OAAS,EAAID,EAAkB,CAAC,EACnDA,EAAkBD,EAClBA,EAAS,MAENC,GAAmB,CAACE,EAAYF,CAAe,EAClD,MAAM,IAAI,MAAM,sCAAwCG,EAASH,CAAe,EAAI,UAAU,EAE/F,OAAOI,EAAO,KAAK,KAAMN,CAAG,EAAE,OAAO,CAACO,EAAGC,IAAO,CAC/C,GAAI,CAACA,GAAM,CAACC,EAAcD,CAAE,EAC3B,MAAM,IAAI,MAAM,4CAA8CH,EAASG,CAAE,EAAI,UAAU,EAExF,IAAIE,EACJ,GAAIA,EAAYC,GAAaH,EAAI,EAAK,EACrC,OAAOE,EAAU,OAAO,CAAC,OAAAT,EAAQ,gBAAAC,EAAiB,OAAAC,CAAO,CAAC,CAE5D,EAAG,IAAI,CACR,CClBe,SAARS,GAAiBC,EAAKC,EAAQC,EAASC,EAAS,CAAC,EAAG,CAM1D,GALIC,EAAYH,CAAM,IACrBE,EAAS,UAAU,OAAS,EAAID,EAAU,CAAC,EAC3CA,EAAUD,EACVA,EAAS,MAEN,CAACG,EAAYF,CAAO,EACvB,MAAM,IAAI,MAAM,uCAAyCG,EAASH,CAAO,EAAI,UAAU,EAExF,IAAII,EAAO,CAAC,OAAAL,EAAQ,QAAAC,EAAS,OAAAC,CAAO,EACpC,OAAOI,EAAO,KAAK,KAAMP,CAAG,EAAE,OAAO,CAACQ,EAAGC,IAAO,CAC/C,GAAI,CAACA,GAAM,CAACC,EAAcD,CAAE,EAC3B,MAAM,IAAI,MAAM,4CAA8CJ,EAASI,CAAE,EAAI,UAAU,EAExF,IAAIE,EAAYC,GAAaH,CAAE,EAC3BI,EACJ,OAAIP,EAAK,OAAO,SAAWO,EAAWF,EAAU,OAAOL,CAAI,GAAG,OACtDO,EAAS,GAEVF,EAAU,IAAIL,CAAI,CAC1B,EAAG,IAAI,CACR,CC3BA,IAAqBQ,GAArB,KAAkC,CAYjC,YAAYC,EAAIC,EAAQC,EAAS,CAAC,EAAG,CAEpC,KAAK,GAAKF,EACV,KAAK,EAAI,CACR,GAAAA,EACA,eAAgB,CAAC,EACjB,gBAAiB,CAAC,EAClB,gBAAiB,CAAC,EAClB,OAAQ,CAAC,GAAGE,CAAM,EAClB,YAAa,CACZ,KAAK,gBAAgB,QAAQC,GAAY,CACxCA,EAAS,KAAK,EAAE,CACjB,CAAC,CACF,EACA,YAAa,CACZ,KAAK,gBAAgB,QAAQA,GAAY,CACxCA,EAAS,KAAK,EAAE,CACjB,CAAC,CACF,CACD,EACA,KAAK,EAAE,OAAO,MAAQC,EAAU,KAAK,EAAE,OAAO,KAAK,EAAI,KAAK,EAAE,OAAO,MAAQ,EAC7E,KAAK,EAAE,OAAO,SAAWA,EAAU,KAAK,EAAE,OAAO,QAAQ,EAAI,KAAK,EAAE,OAAO,SAAW,IACtF,KAAK,EAAE,OAAO,SAAWA,EAAU,KAAK,EAAE,OAAO,QAAQ,EAAI,KAAK,EAAE,OAAO,SAAW,CACvF,CAOA,IAAI,MAAO,CACV,OAAO,KAAK,EAAE,IACf,CAUA,SAASD,EAAU,CAClB,GAAI,CAACE,EAAYF,CAAQ,EACxB,MAAM,IAAI,MAAM,qCAAqC,EAEtD,YAAK,EAAE,gBAAgB,KAAKA,CAAQ,EAC7B,IACR,CAUA,SAASA,EAAU,CAClB,GAAI,CAACE,EAAYF,CAAQ,EACxB,MAAM,IAAI,MAAM,qCAAqC,EAEtD,YAAK,EAAE,gBAAgB,KAAKA,CAAQ,EAC7B,IACR,CAOA,UAAW,CACV,OAAI,KAAK,EAAE,KACH,KAAK,EAAE,KAAK,YAAc,KAAK,EAAE,KAAK,OAAO,SAE9C,CACR,CASA,KAAKG,EAAI,CACR,GAAI,CAACF,EAAUE,CAAE,EAChB,MAAM,IAAI,MAAM,sCAAsC,EAEvD,YAAK,MAAM,CAACC,EAAML,IAAW,CAC5B,IAAIM,EAAgBN,EAAO,UAAYA,EAAO,OAAS,IAAMA,EAAO,UAAY,GAChFK,EAAK,YAAc,KAAK,IAAI,EAAG,KAAK,IAAID,EAAKE,EAAeA,CAAa,CAAC,CAC3E,CAAC,EACM,IACR,CAOA,SAAU,CACT,YAAK,MAAMD,GAAQA,EAAK,QAAQ,CAAC,EAC1B,IACR,CAQA,MAAO,CACN,OAAO,IAAI,QAAQ,CAACE,EAASC,IAAW,CACvC,KAAK,MAAMH,GAAQ,CAClBA,EAAK,KAAK,EACV,KAAK,SAAS,IAAME,EAAQ,IAAI,CAAC,EACjC,KAAK,SAAS,IAAMC,EAAO,IAAI,CAAC,CACjC,EAAGA,CAAM,CACV,CAAC,CACF,CAOA,OAAQ,CACP,YAAK,MAAMH,GAAQA,EAAK,MAAM,CAAC,EACxB,IACR,CAOA,QAAS,CACR,YAAK,MAAMA,GAAQA,EAAK,OAAO,CAAC,EACzB,IACR,CAOA,QAAS,CACR,YAAK,MAAMA,GAAQA,EAAK,OAAO,CAAC,EACzB,IACR,CACD,ECtJA,IAAMI,GAAwB,CAAC,EACVC,GAArB,cAAuCC,EAAa,CAYnD,YAAYC,EAAIC,EAAQC,EAAS,CAAC,EAAGC,EAAQ,KAAM,CAClD,MAAMH,EAAIC,EAAQC,CAAM,EACxB,OAASE,EAAgB,KAAKD,CAAK,EAEnC,KAAK,EAAE,OAAO,KAAO,KAAK,EAAE,OAAO,MAAQ,WACrC,aAAc,KAAK,EAAE,SAC1B,KAAK,EAAE,OAAO,SAAW,KAGtB,KAAK,EAAE,OAAO,QAAU,CAAC,UAAW,WAAY,aAAa,EAAE,QAAQ,KAAK,EAAE,OAAO,MAAM,IAAM,IAAM,KAAK,EAAE,OAAO,OAAO,QAAQ,GAAG,IAAM,KAEhJ,KAAK,EAAE,OAAO,OAASE,GAAQ,KAAK,OAAQ,KAAK,EAAE,OAAO,MAAM,GAAK,KAAK,EAAE,OAAO,QAKpF,IAAMC,EAAOC,GAAa,CACzBA,EAAYA,EAAU,MAAM,EAE5B,IAAIC,EAAa,CAAC,EACdC,EAAY,CAAC,EACjBF,EAAYA,EAAU,IAAIG,IACzBA,EAAWC,EAAM,UAAUD,CAAQ,EAAE,cAAc,EAEnDE,GAAS,OAAO,KAAKF,CAAQ,EAAG,SAAU,QAAQ,EAAE,QAAQG,GAAQ,CAGnEL,EAAWK,GAAQ,OAAOL,EAAWK,GAAU,IAAcH,EAASG,GAAQL,EAAWK,GACzFJ,EAAUI,GAAQH,EAASG,EAC5B,CAAC,EACMH,EACP,EAED,IAAII,EAAeC,EAASd,CAAM,EAAIe,GAAMf,CAAM,EACjDgB,EAAUhB,CAAM,EAAIA,EAASQ,EAK9B,GAAI,CACH,IAAIS,EAAO,KAAK,GAAG,QAAQX,EAAW,KAAK,EAAE,MAAM,CACpD,OAAQY,EAAN,CACD,KAAK,EAAE,MAAQA,EACf,MACD,CAEI,KAAK,EAAE,OAAO,SACjBD,EAAK,QAAQ,EAGTA,EAAK,SACTA,EAAK,OAAS,CAAC,GAEXA,EAAK,OAAO,WAChBA,EAAK,OAAO,SAAW,KAAK,EAAE,OAAO,UAKtCA,EAAK,SAAW,IAAM,CAEjB,KAAK,EAAE,OAAO,eACjBA,EAAK,OAAO,GACR,KAAK,EAAE,OAAO,OAAS,YAAc,KAAK,EAAE,OAAO,OAAS,SAC/DE,EAAQ,KAAK,OAAQ,KAAK,GAAIN,CAAY,GAG5C,KAAK,EAAE,WAAW,CACnB,EAEAI,EAAK,SAAW,IAAM,KAAK,EAAE,WAAW,EAExC,KAAK,EAAE,KAAOA,EACd,KAAK,EAAE,WAAaV,EACpB,KAAK,EAAE,UAAYC,EACf,KAAK,EAAE,eAAe,QACzB,KAAK,EAAE,eAAe,QAAQY,GAAYA,EAASH,EAAM,KAAK,EAAE,OAAQV,EAAYC,CAAS,CAAC,CAGhG,EACIa,EAAYrB,CAAM,EACrBA,EAAOD,EAAIM,CAAI,EAEfR,GAAU,eAAeE,EAAIC,EAAQK,EAAMiB,GAAS,CAEnD,KAAK,EAAE,MAAQA,CAEhB,EAAG,KAAK,EAAE,OAAO,gBAAiB,MAAM,CAE1C,CAUA,MAAMC,EAAQD,EAAO,CACpB,OAAI,KAAK,EAAE,MACNA,GACHA,EAAM,KAAK,EAAE,KAAK,EAET,KAAK,EAAE,KACjBC,EAAO,KAAK,EAAE,KAAM,KAAK,EAAE,OAAQ,KAAK,EAAE,WAAY,KAAK,EAAE,SAAS,EAEtE,KAAK,EAAE,eAAe,KAAKA,CAAM,EAE3B,IACR,CAgBA,OAAO,eAAexB,EAAIC,EAAQwB,EAAOF,EAAOG,EAAiBC,EAAQ,CAIxE,IAAIC,EAA8BX,EAAUhB,CAAM,GAAK,CAAC,OAAO,OAAOA,CAAM,EAAE,OAAO4B,GAAKd,EAASc,CAAC,CAAC,EAAE,OACnGC,EAA+Bf,EAASd,CAAM,GAAKA,EAAO,OAAS,GAAK8B,EAAS9B,EAAO,EAAE,EAC9F,GAAI2B,GAA+BE,EAA8B,CAEhEH,EAAO,IAAI,OAAO,OAAO,IAAM,CAC1BG,GACH7B,EAAO,MAAM,EACb,KAAK,eAAeD,EAAI,CAACoB,EAAQ,KAAKO,EAAQ3B,EAAI,OAAO,KAAKC,EAAO,EAAE,CAAC,EAAG,GAAGA,CAAM,EAAGwB,EAAOF,EAAOG,EAAiBC,CAAM,GAE5H,KAAK,eAAe3B,EAAI,CAACoB,EAAQ,KAAKO,EAAQ3B,EAAI,OAAO,KAAKC,CAAM,CAAC,EAAG,CAAC,GAAGA,CAAM,CAAU,EAAGwB,EAAOF,EAAOG,EAAiBC,CAAM,CAEtI,CAAC,EACD,MACD,CAiBA,GAbIK,EAAU/B,CAAM,KAEf,CAACJ,GAAsBI,IAAW,CAACJ,GAAsBI,GAAQ,QAAUyB,KAC9E7B,GAAsBI,GAAUgC,GAAc,KAAKN,EAAQ1B,CAAM,EAC7D,CAACJ,GAAsBI,GAAQ,QAAUsB,GAC5CA,EAAM,mBAAqBtB,EAAS,gCAAgC,GAGtEA,EAASJ,GAAsBI,IAK5Bc,EAASd,CAAM,EAAG,CACrB,IAAIiC,EAAyB,CAAC,EAAGC,EAAM,CAAC,EAYxC,GAXAC,EAAMnC,EAAQ,CAACoC,EAAG3B,IAAa,CAE1BA,EAAS,SAAW,SACvByB,EAAI,OAAS,OACbG,GAAYJ,EAAwBG,CAAC,GAElC3B,EAAS,QAAU,SACtByB,EAAI,MAAQ,OACZG,GAAYJ,EAAwBG,CAAC,EAEvC,CAAC,EACGH,EAAuB,OAAQ,CAGlC,IAAIK,EAAQ,OAAO,KAAKJ,CAAG,EACvBK,EAAcC,GAAY,KAAKd,EAAQ3B,EAAIuC,CAAK,EAGpDC,EAAY,UAAU,EAEtBA,EAAY,MAAML,CAAG,EAErB,IAAIO,EAAQ1C,EAAG,sBAAsB,EACjC2C,EAAOJ,EAAM,OAAO,CAACI,EAAM9B,KAC9B8B,EAAK9B,GAAQ6B,EAAM7B,GACZ8B,GACL,CAAC,CAAC,EACLH,EAAY,SAAS,EAGrBvC,EAASA,EAAO,IAAI2C,IAAO,CAAC,GAAGA,CAAE,EAAE,EACnCV,EAAuB,QAAQG,GAAK,CAC/BpC,EAAOoC,GAAG,QAAU,SACvBpC,EAAOoC,GAAG,MAAQM,EAAK,MAAQ,MAE5B1C,EAAOoC,GAAG,SAAW,SACxBpC,EAAOoC,GAAG,OAASM,EAAK,OAAS,KAEnC,CAAC,EACDlB,EAAMxB,CAAM,EACZ,MACD,CACD,CAKAwB,EAAMxB,CAAM,CACb,CACD,EC5OA,IAAqB4C,GAArB,cAAwCC,EAAa,CAYpD,YAAYC,EAAIC,EAAUC,EAAS,CAAC,EAAG,CACtC,MAAMF,EAAIC,EAAUC,CAAM,EAI1B,IAAMC,EAAQ,KACd,KAAK,EAAE,KAAO,CACb,GAAAH,EACA,OAAQ,CACP,YAAa,EACb,MAAOG,EAAM,EAAE,OAAO,MACtB,SAAUA,EAAM,EAAE,OAAO,SACzB,SAAUA,EAAM,EAAE,OAAO,SACzB,WAAY,CACX,IAAIC,EAAS,KAAK,QAAU,WAAa,KAAK,QAAU,SACpDC,EAAQD,EAAS,KAAK,MAAQD,EAAM,EAAE,OAAO,MAChDG,EAAWF,EAAS,KAAK,SAAWD,EAAM,EAAE,OAAO,SACnDI,EAAWH,EAAS,KAAK,SAAWD,EAAM,EAAE,OAAO,SAChDK,EAAeH,EAClBI,EAAgBD,EAAeF,EAC/BI,EAAcD,EAAgBF,EAC/B,KAAK,MAAQ,KAAK,IAAI,EAAG,KAAK,IAAIF,EAAO,KAAK,aAAeG,EAAe,EAAIA,EAAe,KAAK,WAAW,CAAC,EAChH,KAAK,SAAW,KAAK,IAAI,EAAG,KAAK,IAAIF,EAAU,KAAK,aAAeG,EAAgB,EAAIA,EAAgB,KAAK,WAAW,CAAC,EACxH,KAAK,SAAW,KAAK,IAAI,EAAG,KAAK,IAAIF,EAAU,KAAK,aAAeG,EAAc,EAAIA,EAAc,KAAK,WAAW,CAAC,CACrH,EACA,MAAMT,EAAU,CACXU,EAAWR,EAAM,EAAE,KAAK,GAAI,SAAS,EAAE,IAAI,MAAM,GACpDQ,EAAWR,EAAM,EAAE,KAAK,GAAI,SAAS,EAAE,IAAI,MAAM,EAAE,OAAO,EAE3DQ,EAAWR,EAAM,EAAE,KAAK,GAAI,SAAS,EAAE,IAAI,OAAQA,EAAM,EAAE,IAAI,EAE/D,KAAK,MAAQ,UACb,KAAK,UAAU,EACV,KAAK,OACTF,EAAS,CAAC,EAEX,KAAK,SAAW,YAAY,IAAM,CACjC,KAAK,cACD,KAAK,cAAgB,KAAK,OAC7BA,EAAS,CAAC,EAEP,KAAK,cAAgB,KAAK,MAAQ,KAAK,UAC1CA,EAAS,CAAC,EAEP,KAAK,cAAgB,KAAK,MAAQ,KAAK,SAAW,KAAK,WAC1D,KAAK,MAAQ,WACb,KAAK,KAAK,EACVA,EAAS,CAAC,EACV,KAAK,YAAc,EAErB,EAAG,CAAC,CACL,EACA,MAAO,CAGN,cAAc,KAAK,QAAQ,CAC5B,CACD,EAEA,IAAI,YAAYW,EAAa,CAC5B,KAAK,OAAO,YAAcA,EACtB,KAAK,OAAO,QAAU,YACzB,KAAK,OAAO,KAAK,EACjB,KAAK,KAAK,EAEZ,EAEA,IAAI,aAAc,CACjB,OAAO,KAAK,OAAO,WACpB,EAEA,YAAa,CACZ,OAAOX,EAAS,KAAK,GAAI,QAAS,KAAK,SAAU,KAAK,WAAW,CAClE,EAEA,YAAa,CACZ,OAAOA,EAAS,KAAK,GAAI,QAAS,KAAK,SAAU,KAAK,WAAW,CAClE,EAEA,UAAW,CACV,OAAOA,EAAS,KAAK,GAAI,MAAO,KAAK,SAAU,KAAK,WAAW,CAChE,EAEA,MAAO,CACN,KAAK,OAAO,MAAMY,GAAS,CACtBA,IAAU,EACb,KAAK,WAAW,EACNA,IAAU,EACpB,KAAK,SAAS,EACJA,IAAU,GACpBV,EAAM,EAAE,WAAW,CAErB,CAAC,CACF,EAEA,SAAU,CACT,KAAK,SAAW,CAAC,KAAK,SAClB,KAAK,OAAO,QAAU,YACzB,KAAK,OAAO,KAAK,EACjB,KAAK,KAAK,EAEZ,EAEA,OAAQ,CAEH,KAAK,WAAW,IAAM,KACzB,KAAK,OAAO,MAAQ,SACpB,KAAK,OAAO,KAAK,EAEnB,EAEA,QAAS,CACR,KAAK,OAAO,MAAQ,WACpB,KAAK,OAAO,KAAK,EACjB,KAAK,SAAS,EACdA,EAAM,EAAE,WAAW,CACpB,EAEA,QAAS,CACR,KAAK,OAAO,MAAQ,YACpB,KAAK,OAAO,KAAK,EACjBA,EAAM,EAAE,WAAW,CACpB,CACD,EAGK,KAAK,EAAE,KAAK,SAChB,KAAK,EAAE,KAAK,OAAS,CAAC,GAElB,KAAK,EAAE,KAAK,OAAO,WACvB,KAAK,EAAE,KAAK,OAAO,SAAW,KAAK,EAAE,OAAO,MAAQ,KAAK,EAAE,OAAO,SAAW,KAAK,EAAE,OAAO,SAE7F,CAUA,MAAMW,EAAQC,EAAO,CACpBD,EAAO,KAAK,EAAE,KAAM,KAAK,EAAE,MAAM,CAClC,CACD,ECvJe,SAARE,GAAsBC,EAAKC,EAAQC,EAAS,CAAC,EAAG,CACtD,IAAIC,EAAaC,EAAYH,CAAM,EAAII,GAAaC,GACpD,OAAO,QAAQ,IAAIC,EAAO,KAAK,KAAMP,CAAG,EAAE,IAAIQ,GAAO,IAAIL,EAAWK,EAAIP,EAAQC,EAAQ,IAAI,EAAG,KAAK,EAAE,KAAK,IAAM,IAAI,CAAC,CAAC,CACxH,CCTA,IAAqBO,GAArB,KAA+B,CAO3B,YAAYC,EAAOC,EAAS,CAAC,EAAG,CAC5B,OAAO,KAAKD,CAAK,EAAE,QAAQE,GAAO,CAC9B,OAAO,eAAe,KAAMA,EAAK,CAAC,IAAK,IAAMF,EAAME,EAAI,CAAC,CAC5D,CAAC,EACD,KAAK,OAASD,CAClB,CAaH,OAAO,UAAUE,EAAOC,EAAOC,EAAMC,EAAmBL,EAAS,CAAC,EAAG,CACpE,IAAIM,EAAa,CAAC,aAAcC,EAAO,UAAUL,EAAOF,CAAM,EAAE,iBAAiBG,CAAK,CAAC,EACvF,OAAAG,EAAW,EAAIA,EAAW,GAAK,CAAC,EAChCA,EAAW,EAAIA,EAAW,GAAK,CAAC,EAChCD,EAAoBG,GAAMH,CAAiB,GAE1CD,EAAOK,EAASL,CAAI,EAAI,CAAC,IAAK,GAAG,GAAG,QAAQA,GAAQ,CAEpD,IAAIM,EAAiBN,IAAS,IAAM,OAAS,MACzCO,EAAgBP,IAAS,IAAM,QAAU,SACzCQ,EAAcV,EAAME,IAAS,IAAM,QAAU,UAC7CS,EAAcV,EAAMC,IAAS,IAAM,QAAU,UAEjDE,EAAWF,GAAM,YAAc,OAC3BC,EAAkB,eACrBC,EAAWF,GAAM,YAAcC,EAAkB,aAAaK,GAAkBJ,EAAW,aAAaI,GACrG,WAAcL,EAAkB,aAAaK,GAAkBJ,EAAW,aAAaI,GACtF,WAAaL,EAAkBD,GAAM,aAG1C,IAAIU,EAAe,EAEfR,EAAW,aAAaI,IAAmBG,GAE5CP,EAAW,aAAaK,IAAkB,EAC5CG,GAAgBF,EAAc,KAAK,IAAIN,EAAW,aAAaK,EAAc,GAAKC,EACxEN,EAAW,aAAaK,GAAiB,IACnDG,EAAe,GAGhB,IAAIC,EAAgB,EAEhBT,EAAW,aAAaI,IAAmB,GAE5CJ,EAAW,aAAaK,IAAkBE,EAC5CE,EAAgB,KAAK,IAAIT,EAAW,aAAaI,EAAe,EAAIE,EAC1DN,EAAW,aAAaK,GAAiBE,IACnDE,EAAgB,GAGjB,IAAIC,EAAiB,EAErB,GAAIV,EAAW,aAAaI,IAAmBG,GAE5CP,EAAW,aAAaK,IAAkBE,EAAa,CACzD,IAAII,EAAgBJ,EAAcD,EAC9BM,EAAcZ,EAAW,aAAaI,GAAkBE,EAC5DI,GAAkBC,EAAgBC,GAAeD,CAClD,MAAWX,EAAW,aAAaK,GAAiBE,IACnDG,EAAiB,GAGlB,IAAIG,EAAsB,EAC1B,GAAIP,EAAcC,EAEjB,GAAIP,EAAW,aAAaI,IAAmB,GAC5CJ,EAAW,aAAaK,IAAkB,EAAG,CAC/C,IAAIS,EAAmBR,EAAcC,EACrCM,EAAsB,KAAK,IAAIb,EAAW,aAAaI,EAAe,EAAIU,CAC3E,MAAWd,EAAW,aAAaK,GAAiB,IACnDQ,EAAsB,WAInBb,EAAW,aAAaI,IAAmB,GAC5CJ,EAAW,aAAaK,IAAkB,EAAG,CAC/C,IAAIS,EAAmBP,EAAcD,EACrCO,EAAsBb,EAAW,aAAaK,GAAiBS,CAChE,MAAWd,EAAW,aAAaI,GAAkB,IACpDS,EAAsB,GAIpBb,EAAWF,GAAM,cAAgB,YACpCE,EAAWF,GAAM,aAAeU,EAChCR,EAAWF,GAAM,cAAgBW,EACjCT,EAAWF,GAAM,eAAiBY,EAClCV,EAAWF,GAAM,oBAAsBe,IAEvCb,EAAWF,GAAM,aAAe,EAAIW,EACpCT,EAAWF,GAAM,cAAgB,EAAIU,EACrCR,EAAWF,GAAM,eAAiB,EAAIY,EACtCV,EAAWF,GAAM,oBAAsB,EAAIe,GAExCP,EAAcC,IACjBP,EAAWF,GAAM,qBAAuB,GAE1C,CAAC,EACM,IAAI,KAAKE,EAAYN,CAAM,CACnC,CACD,ECnHA,IAAqBqB,GAArB,KAA2B,CAOvB,YAAYC,EAAOC,EAAS,CAAC,EAAG,CAC5B,OAAO,KAAKD,CAAK,EAAE,QAAQE,GAAO,CAC9B,OAAO,eAAe,KAAMA,EAAK,CAAC,IAAK,IAAMF,EAAME,EAAI,CAAC,CAC5D,CAAC,EACD,KAAK,OAASD,CAClB,CAWA,OAAO,UAAUE,EAAOC,EAAOH,EAAS,CAAC,EAAG,CACxCE,EAAQE,EAAO,UAAUF,EAAOF,CAAM,EACtCG,EAAQC,EAAO,UAAUD,EAAOH,CAAM,EACtC,IAAIK,EAAS,CAAC,EAEd,OAAAA,EAAO,EAAKF,EAAM,KAAQA,EAAM,MAAQ,GAAOD,EAAM,KAAQA,EAAM,MAAQ,GAC3EG,EAAO,EAAKF,EAAM,IAAOA,EAAM,OAAS,GAAOD,EAAM,IAAOA,EAAM,OAAS,GAE3EG,EAAO,EAAI,KAAK,KAAK,KAAK,IAAIA,EAAO,EAAG,CAAC,EAAI,KAAK,IAAIA,EAAO,EAAG,CAAC,CAAC,EAE9DC,EAAWD,EAAO,CAAC,GAAKC,EAAWD,EAAO,CAAC,EAC3CA,EAAO,iBAAmB,KAAK,KAAKA,EAAO,EAAIA,EAAO,CAAC,EAChDC,EAAWD,EAAO,CAAC,GAAKC,EAAWD,EAAO,CAAC,EAClDA,EAAO,iBAAmB,KAAK,KAAKA,EAAO,EAAIA,EAAO,CAAC,EAChDC,EAAWD,EAAO,CAAC,GAAKC,EAAWD,EAAO,CAAC,IAClDA,EAAO,iBAAmB,KAAK,KAAKA,EAAO,EAAIA,EAAO,CAAC,GAE3DA,EAAO,kBAAoB,IAAM,GAAKA,EAAO,iBAC7CA,EAAO,aAAeA,EAAO,iBAAmB,GAChDA,EAAO,WAAaA,EAAO,kBAAoB,GACxC,IAAI,KAAKA,EAAQL,CAAM,CAClC,CACJ,EC3CA,IAAqBO,EAArB,KAA4B,CAUxB,YAAYC,EAAOC,EAAQ,CACvB,OAAO,KAAKD,CAAK,EAAE,QAAQE,GAAO,CAC9B,OAAO,eAAe,KAAMA,EAAK,CAC7B,IAAK,IAAMF,EAAME,GACjB,WAAY,CAAC,OAAQ,MAAO,SAAU,QAAS,QAAS,QAAS,EAAE,SAASA,CAAG,CACnF,CAAC,CACL,CAAC,EACD,OAAO,eAAe,KAAM,SAAU,CAClC,IAAK,IAAMD,EACX,WAAY,EAChB,CAAC,CACL,CAOA,IAAI,QAAS,CACT,MAAO,CACH,IAAK,KAAK,IACV,KAAM,KAAK,IACf,CACJ,CAOA,IAAI,MAAO,CACP,MAAO,CACH,MAAO,KAAK,MACZ,OAAQ,KAAK,MACjB,CACJ,CAYA,UAAUE,EAAWF,EAAS,CAAC,EAAG,CAC9B,OAAOG,GAAM,UAAU,KAAMD,EAAWF,CAAM,CAClD,CAYA,cAAcE,EAAWE,EAAMC,EAAoB,KAAML,EAAS,CAAC,EAAG,CAClE,OAAOM,GAAU,UAAU,KAAMJ,EAAWE,EAAMC,EAAmBL,CAAM,CAC/E,CAYA,iBAAiBO,EAASP,EAAS,CAAC,EAAG,CACnC,IAAIF,EAAS,KAAK,YAClBS,EAAUT,EAAO,UAAUS,EAASP,CAAM,EAC1C,IAAIQ,EAAQ,CACR,KAAM,KAAK,KAAOD,EAAQ,KAC1B,IAAK,KAAK,IAAMA,EAAQ,IACxB,MAAQA,EAAQ,KAAOA,EAAQ,OAAU,KAAK,KAAO,KAAK,OAC1D,OAASA,EAAQ,IAAMA,EAAQ,QAAW,KAAK,IAAM,KAAK,QAC1D,SAAU,cACd,EAEIE,EAAW,KAAK,IAAI,KAAK,KAAMF,EAAQ,IAAI,EAC3CG,EAAY,KAAK,IAAI,KAAK,KAAO,KAAK,MAAOH,EAAQ,KAAOA,EAAQ,KAAK,EACzEI,EAAU,KAAK,IAAI,KAAK,IAAKJ,EAAQ,GAAG,EACxCK,EAAa,KAAK,IAAI,KAAK,IAAM,KAAK,OAAQL,EAAQ,IAAMA,EAAQ,MAAM,EAC9E,OAAAC,EAAM,MAAQE,EAAYD,EAAWC,EAAYD,EAAW,EAC5DD,EAAM,OAASI,EAAaD,EAAUC,EAAaD,EAAU,EAE7DH,EAAM,KAAO,KACbA,EAAM,QAAUD,EACT,IAAIT,EAAOU,EAAOR,CAAM,CACnC,CAUA,UAAUO,EAASP,EAAS,CAAC,EAAG,CAC5B,IAAIF,EAAS,KAAK,YAClBS,EAAUT,EAAO,UAAUS,EAASP,CAAM,EAC1C,IAAIQ,EAAQ,CACR,KAAM,KAAK,IAAI,KAAK,KAAMD,EAAQ,IAAI,EACtC,IAAK,KAAK,IAAI,KAAK,IAAKA,EAAQ,GAAG,EACnC,MAAO,KAAK,IAAK,KAAK,KAAO,KAAK,MAASA,EAAQ,KAAOA,EAAQ,KAAM,EACxE,OAAQ,KAAK,IAAK,KAAK,IAAM,KAAK,OAAUA,EAAQ,IAAMA,EAAQ,MAAO,EACzE,SAAU,OACd,EAEA,OAAAC,EAAM,MAAQA,EAAM,MAAQA,EAAM,KAClCA,EAAM,OAASA,EAAM,OAASA,EAAM,IAEpCA,EAAM,KAAO,KACbA,EAAM,QAAUD,EACT,IAAIT,EAAOU,EAAOR,CAAM,CACnC,CAYA,WAAWO,EAASP,EAAS,CAAC,EAAG,CAC7B,IAAIQ,EAAQ,CAAC,KAAM,KAAM,QAAAD,EAAS,eAAgB,WAAY,GAAG,IAAI,EACjEM,EAAWN,CAAO,EAClBC,EAAM,MAAQD,GAERA,aAAmBJ,KACrBI,EAAW,KAAK,UAAUA,CAAO,GAErCC,EAAM,MAAQD,EAAQ,kBAM1BC,EAAM,KAAO,KAAK,KAAO,KAAK,IAAIM,GAAQN,EAAM,KAAK,CAAC,EAAI,KAAK,IAAM,CAAC,KAAK,IAAIM,GAAQN,EAAM,KAAK,CAAC,EACnGA,EAAM,IAAM,KAAK,KAAO,KAAK,IAAIM,GAAQN,EAAM,KAAK,CAAC,EAAI,KAAK,IAAM,KAAK,IAAIM,GAAQN,EAAM,KAAK,CAAC,EACjG,IAAIV,EAAS,KAAK,YAClB,OAAO,IAAIA,EAAOU,EAAOR,CAAM,CACnC,CAUA,QAAQO,EAASP,EAAS,CAAC,EAAG,CAC1B,IAAIF,EAAS,KAAK,YAClBS,EAAUT,EAAO,UAAUS,EAASP,CAAM,EAC1C,IAAIQ,EAAQ,CAAC,KAAM,KAAM,QAAAD,EAAS,eAAgB,QAAS,GAAG,IAAI,EAClE,OAAAC,EAAM,OAASD,EAAQ,MAAQ,KAAK,OAAS,EAC7CC,EAAM,MAAQD,EAAQ,OAAS,KAAK,QAAU,EACvC,IAAIT,EAAOU,EAAOR,CAAM,CACnC,CAWA,cAAcO,EAASQ,EAAY,CAAC,EAAGf,EAAS,CAAC,EAAG,CAChD,IAAIF,EAAS,KAAK,YACdkB,EAAe,KAAK,iBAAiBT,CAAO,EAC5CQ,EAAY,CAAC,EACbP,EAAQ,CAAC,KAAM,KAAM,QAAAD,EAAS,UAAAQ,EAAW,eAAgB,cAAe,GAAG,IAAI,EAC/EE,EAAS,CAAC,EAAE,QAAS,EAAE,QAAQ,EAC/BC,EAAQ,CAAC,EAAE,OAAQ,EAAE,KAAK,EAC1BC,EAAM,CAAC,EAAE,QAAS,EAAE,QAAQ,EAChC,OAAC,IAAK,GAAG,EAAE,QAAQf,GAAQ,CACvB,GAAIJ,EAAOI,KAAU,GAGrB,KAAIgB,EAAa,KAAKH,EAAOb,IAG7B,OADAW,EAAUX,GAAQiB,GAAerB,EAAOI,IAAS,EAAE,EAC5CW,EAAUX,GAAM,QAAS,CAC5B,IAAK,SAEDI,EAAMU,EAAMd,IAAgB,EAAGY,EAAaE,EAAMd,IAAgBgB,GACtE,MACA,IAAK,QAEDZ,EAAMU,EAAMd,IAAgBY,EAAaG,EAAIf,IAAmBgB,EACpE,MACA,IAAK,QAEDZ,EAAMU,EAAMd,IAAgB,CAAEY,EAAaE,EAAMd,IACrD,MACA,IAAK,MAEDI,EAAMU,EAAMd,IAAgBY,EAAaG,EAAIf,IACjD,MACA,QAEII,EAAMU,EAAMd,IAAgBY,EAAa,MAAMZ,EACvD,CAEIW,EAAUX,GAAM,aAChBI,EAAMU,EAAMd,KAAiBkB,GAAwBP,EAAUX,GAAM,WAAYgB,CAAU,GAEnG,CAAC,EACM,IAAItB,EAAOU,EAAOR,CAAM,CACnC,CAqBA,OAAO,UAAUuB,EAAMvB,EAAS,CAAC,EAAG,CAChC,GAAIuB,aAAgBzB,EAChB,OAAOyB,EAEX,IAAIf,EAKAgB,EAAoB,CAAC,OAAQ,WAAY,OAAO,QAAQ,EAAE,SAASxB,EAAO,YAAY,EAAI,OACtFA,EAAO,wBAAwB,OAAO,SAAYA,EAAO,eAAiB,UAAYA,EAAO,eAAiB,GAAO,SAClHyB,EAAUzB,EAAO,YAAY,GAAK,UAAUA,EAAO,aAAa,iBAAiB,EAAIA,EAAO,aAAa,kBACtG,SAEd,GAAIyB,EAAUF,CAAI,GAAKA,IAAS,QAC7BG,GAAK,CAAC,UAAW,UAAW,UAAW,UAAW,QAAS,QAAS,UAAW,SAAS,EAAGC,GAAQA,KAAQJ,CAAI,EAC9Gf,EAAQ,CAAC,MAAM,EAAG,OAAO,EAAG,KAAM,OAAQ,EACtCgB,IAAsB,QAEtBhB,EAAM,KAAOA,EAAM,MAAQe,EAAK,MAChCf,EAAM,IAAMA,EAAM,OAASe,EAAK,OACzBC,IAAsB,UAE7BhB,EAAM,KAAOA,EAAM,MAAQe,EAAK,QAChCf,EAAM,IAAMA,EAAM,OAASe,EAAK,QAChCf,EAAM,aAAee,EAAK,iBAG1Bf,EAAM,KAAOA,EAAM,MAAQe,EAAK,QAChCf,EAAM,IAAMA,EAAM,OAASe,EAAK,iBAE7BA,IAAS,OAChBf,EAAQ,CAAC,MAAO,OAAO,WAAY,OAAQ,OAAO,YAAa,KAAM,QAAS,EAC1EgB,IAAsB,QAEtBhB,EAAM,KAAO,OAAO,YACpBA,EAAM,IAAM,OAAO,cAEnBA,EAAM,KAAO,EACbA,EAAM,IAAM,GAEhBA,EAAM,MAAQA,EAAM,KAAOA,EAAM,MACjCA,EAAM,OAASA,EAAM,IAAMA,EAAM,eAC1Be,aAAgB,OAAO,QAC9Bf,EAAQe,EAAK,sBAAsB,EAAE,OAAO,EAC5Cf,EAAM,KAAO,UACb,OAAOA,EAAM,EACb,OAAOA,EAAM,EAETgB,IAAsB,QAEtBhB,EAAM,MAAQ,OAAO,YACrBA,EAAM,KAAO,OAAO,aACbR,EAAO,eAA+B,WAC7CA,EAAO,aAAeuB,EAAK,sBAExBA,aAAgB,OAAO,SAM9B,GALAf,EAAQe,EAAK,OAAO,EACpBf,EAAM,KAAO,OACb,OAAOA,EAAM,EACb,OAAOA,EAAM,EAETgB,IAAsB,OAEtBhB,EAAM,MAAQ,OAAO,YACrBA,EAAM,KAAO,OAAO,oBACbgB,IAAsB,SAC7B,MAAM,IAAI,MAAM,uCAAuC,MAG3D,OAAM,IAAI,MAAM,sBAAsB,EAG1C,GAAIxB,EAAO,wBAAwB,OAAO,QAAS,CAC/C,IAAI4B,EAAgB,KAAK,UAAU5B,EAAO,aAAc,CACpD,GAAGA,EACH,YAAa,GACb,aAAc,QAClB,CAAC,EACDQ,EAAM,MAAQoB,EAAc,KAC5BpB,EAAM,KAAOoB,EAAc,IAC3BpB,EAAM,OAASoB,EAAc,KAC7BpB,EAAM,QAAUoB,EAAc,IAC9BpB,EAAM,aAAeR,EAAO,YAChC,CAGA,OAFAQ,EAAM,KAAOe,EACbf,EAAM,kBAAoBgB,EACtBxB,EAAO,cAAgB,GAChBQ,EAEJ,IAAI,KAAKA,EAAOR,CAAM,CACjC,CACJ,EAOA,SAASc,GAAQe,EAAK,CAClB,OAAOA,GAAO,KAAK,GAAK,IAC5B,CASA,SAASR,GAAeS,EAAM,CAC1B,IAAIC,EAAe,IAAI,OAAO,kCAAmC,GAAG,EAChEC,EAAe,IAAI,OAAO,iBAAoB,GAAG,EACrD,MAAO,CACH,SAAUF,EAAK,MAAMC,CAAY,GAAK,CAAC,GAAG,GAC1C,WAAYD,EAAK,MAAME,EAAa,QAAQ,KAAM,EAAE,CAAC,CACzD,CACJ,CAUA,SAASV,GAAwBP,EAAWkB,EAAmB,CAC3D,OAAOlB,EAAU,OAAO,CAACmB,EAAOC,IAAaD,GAASC,EAAS,SAAS,GAAG,EACrE,WAAWA,CAAQ,EAAI,IAAMF,EAC7B,WAAWE,CAAQ,GACtB,CAAC,CACR,CCjYe,SAARC,GAAsBC,EAAKC,EAAS,CAAC,EAAG,CAC9C,IAAIC,EAAMC,EAAO,KAAK,KAAMH,CAAG,EAAE,GACjC,OAAOI,EAAO,UAAUF,EAAK,CAAC,MAAO,KAAM,GAAGD,CAAM,CAAC,CACtD,CCHe,SAARI,GAAiBC,EAAKC,EAAMC,EAAO,CAAC,EAAG,CAC7C,OAAOC,EAAO,KAAK,KAAMH,CAAG,EAAE,OAAO,CAACI,EAAGC,IAAO,CAC/C,IAAIC,EACJ,GAAIA,EAAYC,GAAaF,EAAI,EAAK,EACrC,OAAOC,EAAU,KAAK,CAAC,OAAQD,EAAI,KAAAJ,EAAM,KAAAC,CAAI,CAAC,CAEhD,EAAG,IAAI,CACR,CCXe,SAARM,GAAiBC,EAAS,CAAC,EAAG,CACjC,OAAOC,GAAM,CACT,IAAAC,GACA,IAAAC,GACA,KAAAC,GACA,KAAAC,GACA,GAAAC,EACJ,EAAG,EAAG,KAAMN,CAAM,CACtB,CCdK,OAAO,SACR,OAAO,OAAS,CAAC,GAGrB,OAAO,OAAO,EAAIO,GAAO,KAAK,MAAM",
  "names": ["css_exports", "__export", "classes_exports", "cssAsync_default", "cssSync_default", "cssTransaction_default", "utils", "isObject_default", "val", "getType_default", "val", "internals", "obj", "namespaces", "itnls", "_ns", "_itnls", "isArray_default", "val", "isTypeFunction_default", "val", "isClass_default", "val", "isTypeFunction_default", "isNull_default", "val", "isUndefined_default", "val", "isTypeObject_default", "val", "isTypeFunction_default", "isEmpty_default", "val", "isNull_default", "isUndefined_default", "isTypeObject_default", "isFunction_default", "val", "isTypeFunction_default", "isNumber_default", "val", "isNumeric_default", "val", "isNumber_default", "isString_default", "val", "isTypeArray_default", "val", "isString_default", "isUndefined_default", "first_default", "arr", "amount", "count", "itm", "firsts", "last_default", "arr", "amount", "first_default", "pushUnique_default", "arr", "items", "itm", "getPrototypeChain_default", "obj", "until", "isArray_default", "prototypalChain", "getAllPropertyNames_default", "obj", "until", "keysAll", "getPrototypeChain_default", "pushUnique_default", "mergeCallback", "objs", "callback", "deepProps", "isReplace", "withSymbols", "depth", "obj1", "isNumeric_default", "obj2", "i", "isTypeObject_default", "isFunction_default", "getAllPropertyNames_default", "key", "valAtObj1", "valAtObj2", "isArray_default", "isObject_default", "each_default", "obj", "callback", "returnValue", "isTypeObject_default", "k", "i", "isNumeric_default", "merge_default", "objs", "mergeCallback", "k", "obj1", "obj2", "before_default", "subject", "search", "beforeLast", "pos", "beforeLast_default", "subject", "search", "before_default", "fromCamel_default", "str", "delimiter", "toTitle_default", "str", "strict", "txt", "toCamel_default", "str", "fromStart", "toTitle_default", "copy_default", "obj", "filter", "withSymbols", "depth", "isNumeric_default", "isTypeObject_default", "mergeCallback", "key", "obj1", "obj2", "isFunction_default", "isArray_default", "from_default", "val", "castObject", "isArray_default", "isObject_default", "isEmpty_default", "isTypeArray_default", "_find", "obj", "callback", "deep", "keys", "values", "isArray_default", "subKey", "value", "prev", "curr", "isTypeObject_default", "isFunction_default", "key", "from_default", "find_default", "from_default", "key", "val", "obj", "isArray_default", "k", "i", "get_default", "ctxt", "path", "trap", "reciever", "from_default", "_ctxt", "isUndefined_default", "isNull_default", "_key", "isTypeObject_default", "set_default", "obj", "path", "val", "buildTree", "trap", "_set", "target", "key", "isNumeric_default", "i", "isArray_default", "from_default", "isTypeObject_default", "isFunction_default", "branch", "get_default", "branchSuccess", "isObject_default", "val", "getName", "window", "isFirefox", "isSafari", "p", "isChrome", "isEdgeChromium", "isOpera", "isIE", "isEdge", "isBlink", "getPrefix", "styles", "prefix", "api", "src_default", "isObject_default", "_window", "_vendor", "_prefix", "getName", "getPrefix", "isTypeFunction_default", "val", "isTypeObject_default", "val", "isTypeFunction_default", "isNumber_default", "val", "isNumeric_default", "val", "isNumber_default", "Reflow", "window", "asyncDOM", "callback", "i", "withPromise", "resolve", "reject", "read", "write", "prevTransaction", "readReturn", "callWrite", "writeReturn", "repeatTransaction", "isString_default", "val", "isArray_default", "val", "isUndefined_default", "val", "isTypeArray_default", "val", "isString_default", "isUndefined_default", "isNull_default", "val", "isEmpty_default", "val", "isNull_default", "isUndefined_default", "isTypeObject_default", "from_default", "val", "castObject", "isArray_default", "isObject_default", "isEmpty_default", "isTypeArray_default", "ready_default", "callback", "WebQit", "src_default", "cb", "Mutations", "window", "els", "callback", "params", "el", "presence", "isTransient", "addedState", "removedState", "selector", "ready_default", "isString_default", "from_default", "search", "nodeListArray", "node", "matches", "collection", "parentNode", "match", "sourceArray", "_matches", "fire", "list", "state", "subject", "mo", "removed__addedNodes", "added__removedNodes", "addedNodes", "removedNodes", "filter", "observer", "subtree", "MutationObserversCache", "callbacks", "mutations", "mut", "_observer", "polyfills_default", "window", "CSS_escape", "Node_isConnected", "Element_matches", "str", "s", "matches", "query", "input", "context", "all", "WebQit", "src_default", "isString_default", "els", "temp", "from_default", "querySelectorAll", "querySelector", "queryAll", "selector", "matchedItems", "method", "e", "isFunction_default", "val", "isTypeFunction_default", "get_default", "ctxt", "path", "trap", "reciever", "from_default", "_ctxt", "isUndefined_default", "isNull_default", "_key", "isTypeObject_default", "set_default", "obj", "path", "val", "buildTree", "trap", "_set", "target", "key", "isNumeric_default", "i", "isArray_default", "from_default", "isTypeObject_default", "isFunction_default", "branch", "get_default", "branchSuccess", "del_default", "obj", "path", "reduceTree", "trap", "from_default", "success", "lastKey", "_obj", "get_default", "isTypeObject_default", "isFunction_default", "meta", "name", "readWrite", "WebQit", "src_default", "metaInstance", "v", "_metaVars", "directive", "directiveSplit", "d", "set_default", "isNumeric_default", "prop", "get_default", "val", "asDefaults", "props", "isObject_default", "del_default", "_prop", "_path", "flatten", "base", "obj", "arr", "path", "dom_default", "WebQit", "src_default", "polyfills_default", "Reflow", "Mutations", "meta", "query", "queryAll", "ready_default", "getEls", "input", "queryContext", "isObject_default", "queryAll", "getPlayUIGlobal", "objectName", "WebQit", "dom_default", "build", "modules", "depth", "thisContext", "params", "$", "_namespace", "inputElements", "callback", "each_default", "name", "fn", "isClass_default", "set_default", "$fn2", "args", "ret", "_ret", "isArray_default", "nameUnprefixed", "beforeLast_default", "any_default", "arr", "callback", "prevTest", "itm", "i", "following_default", "arr", "reference", "length", "loop", "lastReference", "amount", "from", "after", "isUndefined_default", "isFunction_default", "remove_default", "arr", "itm", "limit", "exclude_default", "arr", "itms", "itm", "remove_default", "intersect_default", "arr", "arr2", "callback", "isArray_default", "val1", "val2", "mid_default", "arr", "all", "mid", "start", "unique_default", "arr", "distinct", "value", "index", "self", "unitBasedProps", "props", "prop", "toCamel_default", "uuSelectorIndex", "getUuid", "deriveSelector", "el", "params", "uuid", "vendorize", "withStd", "window", "getPlayUIGlobal", "prefix", "vendorizedProps", "from_default", "all", "camelCasedProp", "fromCamel_default", "readVar", "name", "context", "readKeyframes", "noCache", "normalize", "cacheKey", "isArray_default", "stylesheetKeyframesCache", "parseKeyframes", "ruleDefinition", "keyframes", "i", "keyframeRule", "keyframe", "offsets", "key", "normalizeToWAAPI", "_keyframe", "a", "b", "allKeyframes", "normalizeStylesheetProps", "callback", "reversed", "stylesheets", "stylesheetCallback", "stylesheet", "k", "animationProps", "offset", "pref", "TransformRule", "transformRules", "each_default", "rule", "value", "_Rule", "toTitle_default", "isArray_default", "params", "str", "CTXT", "t", "p", "transform", "regex", "match", "window", "getPlayUIGlobal", "stom", "transformStr", "m", "rdigit", "n", "round", "r2d", "radians", "deg", "A", "B", "C", "D", "scaleX", "skew", "scaleY", "values", "val", "isNumeric_default", "QuadRule", "ruleObj", "propName", "value", "params", "p", "v", "shorthand", "valsObj", "val", "i", "CSSValue", "val", "unit", "params", "unitTest", "isString_default", "test", "_val", "beforeLast_default", "isNumeric_default", "CSSRule", "name", "value", "params", "prop", "val", "isObject_default", "QuadRule", "TransformRule", "CSSValue", "CNTXT", "unitBasedProps", "isNumeric_default", "CSSOM", "ruleObj", "each_default", "prop", "value", "params", "rules", "CSSRule", "css", "CNTXT", "r", "rule", "val", "cssSync_default", "els", "args", "isString_default", "isObject_default", "writeSync", "readSync", "props", "params", "window", "getPlayUIGlobal", "_el", "getEls", "readGlobal", "readInline", "style", "valsObj", "from_default", "prop", "vendorize", "isArray_default", "_els", "str", "rulesObj", "_rulesObj", "regex", "cacheKey", "stylesheetCache", "copy", "allRules", "normalizeStylesheetProps", "ruleDefinition", "selectorToMatch", "normalizedPseudo", "beforeLast_default", "propsList", "i", "ruleObj", "rules", "merge_default", "nameOrProps", "val", "CSSOM", "writeGlobal", "propText", "el", "each_default", "scratchPadEl", "writeGlobal", "els", "nameOrProps", "val", "params", "window", "getPlayUIGlobal", "_els", "getEls", "isObject_default", "from_default", "sheet", "prev", "current", "scratchPadEl", "propText", "prop", "vendorize", "el", "selector", "deriveSelector", "cssAsync_default", "els", "args", "Reflow", "getPlayUIGlobal", "reflowPhrase", "isString_default", "isObject_default", "resolve", "reject", "cssSync_default", "Transaction", "el", "props", "readCallback", "writeCallback", "from_default", "readerDisposition", "record", "isObject_default", "savepoint", "i", "preserveCurrentState", "isNumeric_default", "getRollbackData", "currentState", "savepoints", "toSavepoint", "latestTransactionRecord", "prop", "cssTransaction_default", "els", "props", "asyncWrites", "_el", "getEls", "cssModule", "cssAsync_default", "cssSync_default", "Transaction", "el", "readInline", "data", "classes_exports", "__export", "CSSOM", "CSSRule", "CSSValue", "QuadRule", "TransformRule", "utils", "readKeyframes", "readVar", "vendorize", "dom_exports", "__export", "appendAsync_default", "appendSync_default", "appendToAsync_default", "appendToSync_default", "attrAsync_default", "attrSync_default", "classAsync_default", "classSync_default", "getTextNodes_default", "htmlAsync_default", "htmlSync_default", "itemize_default", "prependAsync_default", "prependSync_default", "prependToAsync_default", "prependToSync_default", "textAsync_default", "textSync_default", "appendSync_default", "els", "args", "isUndefined_default", "getEls", "el", "appendAsync_default", "els", "args", "getPlayUIGlobal", "resolve", "reject", "appendSync_default", "appendToSync_default", "els", "targets", "_els", "getEls", "_targets", "target", "i", "__els", "el", "appendToAsync_default", "els", "args", "getPlayUIGlobal", "resolve", "reject", "appendToSync_default", "attrSync_default", "els", "requestOrPayload", "valOrStateOrTokens", "tokensState", "_els", "getEls", "isString_default", "isArray_default", "vals", "request", "payload", "isObject_default", "from_default", "list", "c", "_payload", "name", "el", "each_default", "currentVal", "currentValArray", "val", "a", "newValueArray", "tokens", "state", "unique_default", "t", "_t", "intersect_default", "attrAsync_default", "els", "requestOrPayload", "valOrMutation", "subValMutation", "Reflow", "getPlayUIGlobal", "resolve", "attrSync_default", "classSync_default", "els", "args", "isObject_default", "imputClassList", "from_default", "list", "c", "a", "classList", "intersect_default", "attrSync_default", "classAsync_default", "els", "args", "attrAsync_default", "getTextNodes_default", "els", "window", "getPlayUIGlobal", "rejectScriptTextFilter", "node", "textNodes", "getEls", "el", "walker", "htmlSync_default", "els", "content", "_els", "getEls", "el", "isString_default", "isUndefined_default", "htmlAsync_default", "els", "write", "Reflow", "getPlayUIGlobal", "resolve", "reject", "htmlSync_default", "prependSync_default", "els", "args", "isUndefined_default", "getEls", "el", "prependAsync_default", "els", "args", "getPlayUIGlobal", "resolve", "reject", "prependSync_default", "prependToSync_default", "els", "targets", "_els", "getEls", "_targets", "target", "i", "__els", "el", "prependToAsync_default", "els", "args", "getPlayUIGlobal", "resolve", "reject", "prependToSync_default", "list", "els", "items", "params", "window", "getPlayUIGlobal", "Observer", "Reflow", "OOHTML", "itemIndexAttribute", "fireCallback", "callback", "args", "_set", "el", "templateExportsObject", "itemExportId", "key", "itemData", "isUpdate", "itemEl", "childSelector", "exports", "isFunction_default", "isEmpty_default", "isNumeric_default", "existing", "from_default", "_el", "following", "following_default", "closest", "_key", "isTypeObject_default", "setState", "_del", "oldValue", "rspns", "clearState", "remove", "getEls", "previousBindings", "internals", "childSelectorAll", "each_default", "data", "moduleref", "templateEl", "item", "mutations", "mutation", "isArray_default", "normalizationState", "collapsed", "reflow", "contentRect", "boundingRect", "isRerun", "uncollapsed", "shouldContinue", "resolve", "rect", "itemRect", "itemDetails", "currentContainerSize", "currentElSize", "_item", "mid_default", "_itemDetails", "keysIterator", "keysIteratorCurrent", "allowance", "result", "initialCall", "observeResize", "selector", "match", "child", "sharedResizeObserver", "callbacksList", "referenceElement", "boundsElement", "entries", "entry", "callbackGroup", "itemize_default", "list", "textSync_default", "els", "content", "_els", "getEls", "isUndefined_default", "el", "textAsync_default", "els", "write", "Reflow", "getPlayUIGlobal", "resolve", "textSync_default", "data_exports", "__export", "data_default", "form", "list", "data_default", "els", "requestOrPayload", "val", "_els", "getEls", "isString_default", "isArray_default", "playUiStub", "internals", "vals", "key", "payload", "isObject_default", "from_default", "el", "each_default", "isUndefined_default", "form", "els", "entries", "params", "_params", "entry", "templateExportsObject", "isFunction_default", "list", "misc_exports", "__export", "classes_exports", "transaction_default", "transaction_default", "els", "props", "readCallback", "writeCallback", "_el", "Transaction", "classes_exports", "__export", "Transaction", "ui_exports", "__export", "CustomEvents", "off_default", "on_default", "play", "rect", "trigger_default", "CustomEvents", "Multitap", "el", "eventName", "fireCallback", "hammertime", "allSetup", "recognizers", "MultitapEvents", "tapType", "i", "recognizer", "recgzr", "recgzrs", "recgzr2", "recgzrs2", "event", "getFirebase_default", "subject", "firebaseKey", "Base", "isTypeObject_default", "getType_default", "firebase", "playUiStub", "internals", "Firebase_default", "subject", "fireable", "dfn", "_fireable", "fireableFilter", "from_default", "fireableTags", "dfnFilter", "dfnTags", "intersect_default", "Fireable_default", "subject", "dfn", "Listener_default", "Fireable_default", "evt", "Event_default", "target", "e", "promise", "rspns", "proms", "isEvent", "isObject_default", "isUndefined_default", "Listeners", "Firebase_default", "subject", "TYPE", "params", "hammertime", "CustomEvents", "isString_default", "e", "Listener_default", "isClass_default", "isFunction_default", "recognizeGesture", "recognizers", "gestureName", "mainGestureName", "recognizer", "toTitle_default", "i", "dfn", "evt", "Event_default", "listener", "find_default", "gestureIndex", "list", "getListeners_default", "object", "createIfNotExist", "getFirebase_default", "Listeners", "off_default", "els", "filter", "originalHandler", "params", "isFunction_default", "getType_default", "getEls", "_", "el", "isTypeObject_default", "listeners", "getListeners_default", "on_default", "els", "filter", "handler", "params", "isFunction_default", "getType_default", "args", "getEls", "_", "el", "isTypeObject_default", "listeners", "getListeners_default", "existing", "AnimationAPI", "el", "effect", "params", "callback", "isNumber_default", "isFunction_default", "to", "anim", "totalDuration", "resolve", "reject", "cssAnimationNameCache", "Animation", "AnimationAPI", "el", "effect", "params", "cntxt", "getPlayUIGlobal", "readVar", "init", "keyframes", "firstFrame", "lastFrame", "keyframe", "CSSOM", "exclude_default", "prop", "lastFramFill", "isArray_default", "last_default", "isObject_default", "anim", "e", "cssSync_default", "callback", "isFunction_default", "error", "succes", "ready", "animNameNoCache", "WebQit", "isObjectAndOnlyLastKeyframe", "v", "isArrayButEmptyFirstKeyframe", "isEmpty_default", "isString_default", "readKeyframes", "keyframesWithAutoSizes", "css", "each_default", "i", "pushUnique_default", "props", "transaction", "cssTransaction_default", "_rect", "rect", "kf", "Animation2", "AnimationAPI", "el", "callback", "params", "_this", "active", "delay", "duration", "endDelay", "currentDelay", "totalDuration", "totalTiming", "internals", "currentTime", "phase", "succes", "error", "play", "els", "effect", "params", "_Animation", "isFunction_default", "Animation2", "Animation", "getEls", "el", "Proximity", "props", "params", "key", "rect1", "rect2", "axis", "previousProximity", "$proximity", "UIRect", "copy_default", "from_default", "distanceBefore", "distanceAfter", "rect1Length", "rect2Length", "percentageIn", "percentageOut", "percentagePass", "totalDistance", "currentPass", "percentageContained", "lengthDifference", "Angle", "props", "params", "key", "rect1", "rect2", "UIRect", "$angle", "isNumeric_default", "UIRect", "props", "params", "key", "reference", "Angle", "axis", "previousProximity", "Proximity", "operand", "$rect", "leftline", "rightline", "topline", "bottomline", "isNumeric_default", "radians", "alignment", "intersection", "length", "start", "end", "thisLength", "parseDirective", "evalDirectivePredicates", "node", "offsetsResolution", "isObject_default", "any_default", "prop", "contextOffset", "deg", "expr", "regPlacement", "regModifiers", "percentageContext", "total", "modifier", "rect", "els", "params", "_el", "getEls", "UIRect", "trigger_default", "els", "type", "data", "getEls", "_", "el", "listeners", "getListeners_default", "src_default", "params", "build", "css_exports", "dom_exports", "data_exports", "misc_exports", "ui_exports", "src_default"]
}
