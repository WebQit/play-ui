{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isTypeFunction.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isTypeObject.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isNumber.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isNumeric.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/obj/each.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/arr/remove.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/arr/pushUnique.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isString.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isArray.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isObject.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isFunction.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isUndefined.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isEmpty.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isNull.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/arr/from.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/js/isTypeArray.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/str/fromCamel.js","webpack:///../plot-js/src/css/vendorize.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/str/toCamel.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/str/toTitle.js","webpack:///../plot-js/src/css/ruleCallback.js","webpack:///../plot-js/src/css/classes/TransformRule.js","webpack:///../plot-js/src/css/readSync.js","webpack:///../plot-js/src/css/autopx.js","webpack:///../plot-js/src/css/writeSync.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/obj/from.js","webpack:///../plot-js/src/css/readInline.js","webpack:///../plot-js/src/css/readAsync.js","webpack:///../plot-js/src/css/writeAsync.js","webpack:///../plot-js/src/css/readRendering.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/obj/getAllPropertyNames.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/obj/getPrototypeChain.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/obj/mergeCallback.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/obj/copyPlain.js","webpack:///../plot-js/src/css/parseRules.js","webpack:///../plot-js/src/css/readKeyframes.js","webpack:///../plot-js/src/css/stylesheetRuleCallback.js","webpack:///../plot-js/src/css/varRead.js","webpack:///../play-js/src/animation/Ani.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/arr/exclude.js","webpack:///../play-js/src/animation/Timeline.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/arr/first.js","webpack:///../play-js/src/animation/Sequence.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/obj/merge.js","webpack:///C:/Users/ox_ha/Documents/CODE/webqit/util/arr/last.js","webpack:///./src/index.js","webpack:///./src/dfn.js","webpack:///./src/browser-entry.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","val","Array","isArray","Number","isNaN","returnValue","undefined","obj","keys","forEach","k","callback","parseFloat","arr","indexOf","itm","limit","splice","items","push","String","toString","arguments","length","castObject","slice","values","str","split","join","delimiter","camelCasedProp","replace","txt","charAt","toUpperCase","strict","substr","toLowerCase","prop","fromStart","this","prefix","api","window","document","body","style","css","valsList","propsList","props","callCallback","normalProp","withVendorVersion","vendorize","vendorizedProp","TransformRule","transformRules","rule","includes","reduce","trim","CTXT","round","Math","r2d","radians","deg","PI","transformStr","WebKitCSSMatrix","a","b","e","f","rdigit","exec","stom","A","B","C","D","Error","scaleX","sqrt","skew","scaleY","translate","scale","rotate","atan2","atan","map","getComputedStyle","el","psuedo","ruleCallback","rawProp","getPropertyValue","parse","nameOrProps","destructables","inset","margin","padding","destructableProp","meaning","filter","autopx","getAttribute","RegExp","Reflow","onread","resolve","reject","readSync","onwrite","writeSync","propsToRead","readCallback","inlineSavepoint","then","rendering","keysAll","until","prototypalChain","getPrototypeOf","getOwnPropertyNames","mergeCallback","objs","deepProps","isReplace","withSymbols","depth","obj1","shift","obj2","valAtObj1","valAtObj2","getOwnPropertyDescriptor","_split","cacheKey","noCache","stylesheetKeyframesCache","allKeyframes","stylesheets","styleSheets","stylesheetCallback","stylesheet","cssRules","ruleDefinition","reversed","stylesheetRuleCallback","type","CSSRule","KEYFRAMES_RULE","concat","keyframes","keyframeRule","keyframe","parseRules","cssText","keyText","offsets","parseInt","normalize","normalizeToWAAPI","_keyframe","offset","sort","parseKeyframes","animationProps","pref","easing","fill","iterations","Infinity","effect","params","$","readyCallbacks","finishCallbacks","cancelCallbacks","duration","WQ","DOM","init","firstFrame","lastFrame","transform","itms","anim","animate","error","reverse","onfinish","cancelForCss","cancel","oncancel","createCallback","succes","currentTime","to","ready","totalDuration","delay","endDelay","max","min","Promise","play","pause","finish","isObjectAndOnlyLastKeyframe","v","isArrayButEmptyFirstKeyframe","animationName","keyframesWithAutoSizes","height","width","readRendering","getBoundingClientRect","result","animations","add","addCallback","playState","removeCallback","progress","res","rej","alreadyResolved","alreadyRejected","handleFinish","handleCancel","total","catch","entry","except","each","seek","count","firsts","amount","entries","nowPlaying","Timeline","timing","queue","nowPlayingAdd","nowPlayingEffect","createAnimation","animation","oneoff","remove","compute","nowPlayingParams","lag","endLag","lastAni","_params","reverseList","only","ul","li","HTMLUListElement","displacement","orientation","alpha","orientationStartsA","h","orientationStartsB","sequenceA","Sequence","sequenceB","opacity","intersectionObserver","IntersectionObserver","isIntersecting","boundingClientRect","top","target","rootMargin","observe","HTMLLIElement","parentNode","sequenceAdd","dfn","customElements","define","extends"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\r\n/**\r\n * Tells if val is of type \"function\".\r\n * This holds true for both regular functions and classes.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn typeof val === 'function';\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"object\".\r\n * This holds true for anything object, including built-ins.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\r\n};\r\n","\r\n/**\r\n * Tells if val is of type \"number\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val instanceof Number || (typeof val === 'number');\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isNumber from './isNumber.js';\r\n/**\r\n * Tells if val is of type \"string\" or a numeric string.\r\n * This holds true for both numbers and numeric strings.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\n\r\n/**\r\n * Loops thru obj flatly with a callback function.\r\n * Stops when callback returns a non-undefined value.\r\n *\r\n * @param array|object \t\t\tobj \t\t\tThe array or object to iterate.\r\n * @param function \t\t\t\tcallback \t\tThe callback function.\r\n *\r\n * @return mixed|null\t\t\tAny non-null return from callback\r\n */\r\nexport default function(obj, callback) {\r\n\tvar returnValue = undefined;\r\n\tif (_isTypeObject(obj)) {\r\n\t\tObject.keys(obj).forEach((k, i) => {\r\n\t\t\tif (returnValue !== false) {\r\n\t\t\t\treturnValue = callback(_isNumeric(k) ? parseFloat(k) : k, obj[k], i);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn returnValue;\r\n};\r\n","\r\n/**\r\n * Removes instances of reference up to <limit> times.\r\n *\r\n * @param array \tarr\r\n * @param mixed\t \titm\r\n * @param int|bool \tlimit\r\n *\r\n * @return array\r\n */\r\nexport default function(arr, itm, limit = false) {\r\n\tvar i = arr.indexOf(itm);\r\n\twhile (i > -1 && (limit || limit === false)) {\r\n\t\tarr.splice(i, 1);\r\n\t\tif (limit > 0) {\r\n\t\t\tlimit --;\r\n\t\t};\r\n\t\ti = arr.indexOf(itm);\r\n\t};\r\n\treturn arr;\r\n};\r\n","\r\n/**\r\n * Adds an item if not already exist.\r\n *\r\n * @param array \tarr\r\n * @param array\t \t...itms\r\n *\r\n * @return array\r\n */\r\nexport default function(arr, ...items) {\r\n\titems.forEach(itm => {\r\n\t\tif (arr.indexOf(itm) < 0) {\r\n\t\t\tarr.push(itm);\r\n\t\t}\r\n\t});\r\n\treturn arr;\r\n};\r\n","\r\n/**\r\n * Tells if val is of type \"string\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\r\n};\r\n","\r\n/**\r\n * Tells if val is of type \"array\".\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val);\r\n};\r\n","\r\n/**\r\n * Tells if val is pure object.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"function\".\r\n *\r\n * @param object \t\tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\r\n};\r\n","\r\n/**\r\n * Tells if val is undefined or is of type \"undefined\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isNull from './isNull.js';\r\nimport _isUndefined from './isUndefined.js';\r\nimport _isTypeObject from './isTypeObject.js';\r\n\r\n/**\r\n * Tells if val is empty in its own type.\r\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\r\n * objects without keys, empty arrays.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \r\n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\r\n};\r\n","\r\n/**\r\n * Tells if val is undefined or is null.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val === null || val === '';\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isTypeArray from '../js/isTypeArray.js';\r\nimport _isEmpty from '../js/isEmpty.js';\r\nimport _isObject from '../js/isObject.js';\r\n\r\n/**\r\n * Casts an array-like object to an array.\r\n *\r\n * @param mixed \tval\r\n * @param bool\t \tcastObject\r\n *\r\n * @return array\r\n */\r\nexport default function(val, castObject = true) {\r\n\tif (_isArray(val)) {\r\n\t\treturn val;\r\n\t};\r\n\tif (!castObject && _isObject(val)) {\r\n\t\treturn [val];\r\n\t};\r\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\r\n\t\treturn [];\r\n\t};\r\n\tif (_isTypeArray(val)) {\r\n\t\treturn Array.prototype.slice.call(val);\r\n\t};\r\n\tif (_isObject(val)) {\r\n\t\treturn Object.values(val);\r\n\t};\r\n\treturn [val];\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isString from './isString.js';\r\nimport _isUndefined from './isUndefined.js';\r\n\r\n/**\r\n * Tells if val is \"array-like\".\r\n * This holds true for anything that has a length property.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !_isString(val) && !_isUndefined(val.length);\r\n};\r\n","\r\n/**\r\n * Splits a camel-cased string.\r\n *\r\n * @param string \tstr\r\n * @param string \tdelimiter\r\n *\r\n * @return string\r\n */\r\nexport default function(str, delimiter) {\r\n\treturn str === undefined ? '' : str.split(/(?=[A-Z])/).join(delimiter ? delimiter : ' '); // positive lookahead to keep the capital letters\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _fromCamel from '@webqit/util/str/fromCamel.js';\r\nimport _toCamel from '@webqit/util/str/toCamel.js';\r\n\r\n/**\r\n * Returns the vendor-specific css property if supported. NULL if not.\r\n *\r\n * @param string \tprop\r\n *\r\n * @return string|NULL\r\n */\r\nexport default function(prop) {\r\n\tvar camelCasedProp = _toCamel(prop, true);\r\n\tif (this.prefix.api + camelCasedProp in this.window.document.body.style) {\r\n\t\treturn this.prefix.css + _fromCamel(prop, '-');\r\n\t}\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _toTitle from './toTitle.js';\r\n\r\n/**\r\n * Makes a string camel-cased.\r\n *\r\n * @param string \tstr\r\n * @param bool\t \tfromStart\r\n *\r\n * @return string\r\n */\r\nexport default function(str, fromStart) {\r\n\t// Make disting words\r\n\tstr = _toTitle(str.replace(/-/g, ' ')).replace(/ /g, '');\r\n\treturn fromStart ? str : str[0].toLowerCase() + str.substr(1);\r\n};\r\n","\r\n/**\r\n * Converts a string to title case.\r\n *\r\n * @param string \tstr\r\n * @param bool \t\tstrict\r\n *\r\n * @return string\r\n */\r\nexport default function(str, strict) {\r\n\tif (typeof str !== 'string') {\r\n\t\treturn str;\r\n\t}\r\n\treturn str.replace(/\\w\\S*/g,  function(txt) { return txt.charAt(0).toUpperCase() + ((typeof strict !== undefined && strict) ? txt.substr(1).toLowerCase() : txt.substr(1)); })\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _arrFrom from '@webqit/util/arr/from.js';\r\nimport _fromCamel from '@webqit/util/str/fromCamel.js';\r\nimport _isArray from '@webqit/util/js/isArray.js';\r\nimport _each from '@webqit/util/obj/each.js';\r\nimport vendorize from './vendorize.js';\r\n\r\n/**\r\n * Loops thru all keys in props calls callback to obtain their value.\r\n *\r\n * @param string|array\t\tprops\r\n * @param function\t\t\tcallback\r\n * @param bool\t\t\t\twithVendorVersion\r\n *\r\n * @return NULL|bool\r\n */\r\nexport default function(props, callback, withVendorVersion) {\r\n\tvar valsList = {};\r\n\tvar propsList = _arrFrom(props);\r\n\tvar callCallback = (i, prop) => {\r\n\t\t// We use the key as given, but we obtain value with\r\n\t\t// We support camel cases, but return their normalized versions\r\n\t\tvar normalProp = _fromCamel(prop, '-').toLowerCase();\r\n\t\t// With vendor verison?\r\n\t\t// We set the vendor version first if support for this property\r\n\t\tif (withVendorVersion === 'auto') {\r\n\t\t\tvalsList[normalProp] = callback(vendorize.call(this, normalProp) || normalProp, propsList[i]);\r\n\t\t} else {\r\n\t\t\tif (withVendorVersion) {\r\n\t\t\t\tvar vendorizedProp = vendorize.call(this, normalProp);\r\n\t\t\t\tif (vendorizedProp) {\r\n\t\t\t\t\tvalsList[vendorizedProp] = callback(vendorizedProp, propsList[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvalsList[normalProp] = callback(normalProp, propsList[i]);\r\n\t\t}\r\n\t};\r\n\t_each(propsList, (i, prop) => {\r\n\t\tcallCallback(i, prop);\r\n\t});\r\n\treturn _isArray(props) || withVendorVersion || props === 'size' || props === 'offsets' \r\n\t\t? valsList \r\n\t\t: valsList[props];\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _each from '@webqit/util/obj/each.js';\r\nimport _isArray from '@webqit/util/js/isArray.js';\r\nimport _isNumeric from '@webqit/util/js/isNumeric.js';\r\n\r\n/**\r\n * ------------------------------\r\n * The little transform utility class\r\n * and stringifyer classes.\r\n * ------------------------------\r\n */\r\nconst TransformRule = class {\r\n\t\r\n\t/**\r\n\t * Creates a new TransformRule instance\r\n\t * and each rule's appropriate class.\r\n\t *\r\n\t * @param object\t\t transformRules\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(transformRules) {\r\n\t\t_each(transformRules, (rule, value) => {\r\n\t\t\tif (['rotate', 'scale', 'skew', 'translate'].includes(rule)) {\r\n\t\t\t\tthis[rule] = _isArray(value)\r\n\t\t\t\t\t? new TransformRule[rule](...value)\r\n\t\t\t\t\t: new TransformRule[rule](value);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Stringifies the transformRules in a CSS-compatible format.\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\treturn ['rotate', 'scale', 'skew', 'translate'].reduce(\r\n\t\t\t(str, rule) => str + (this[rule] && this[rule].length ? ' ' + this[rule] : ''), ''\r\n\t\t).trim();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Unmatrix: parse the values of the matrix\r\n\t *\r\n\t * Algorithm from:\r\n\t *\r\n\t * https://github.com/matthewmueller/unmatrix/blob/master/index.js\r\n\t * @see http://hg.mozilla.org/mozilla-central/file/7cb3e9795d04/layout/style/nsStyleAnimation.cpp\r\n\t *\r\n\t * @param string \t str\r\n\t *\r\n\t * @return {Object}\r\n\t */\r\n\tstatic parse(CTXT, str) {\r\n\t\t// String to matrix\r\n\t\tvar stom = function(transformStr) {\r\n\t\t\tvar m = [];\r\n\t\t\tif (CTXT.window.WebKitCSSMatrix) {\r\n\t\t\t\tm = new CTXT.window.WebKitCSSMatrix(transformStr);\r\n\t\t\t\treturn [m.a, m.b, m.c, m.d, m.e, m.f];\r\n\t\t\t}\r\n\t\t\tvar rdigit = /[\\d\\.\\-]+/g;\r\n\t\t\tvar n;\r\n\t\t\twhile(n = rdigit.exec(transformStr)) {\r\n\t\t\t\tm.push(+n);\r\n\t\t\t}\r\n\t\t\treturn m;\r\n\t\t};\r\n\t\t// Round to the nearest hundredth\r\n\t\tvar round = function(n) {\r\n\t\t\treturn Math.round(n * 100) / 100;\r\n\t\t};\r\n\t\t// Radians to degrees\r\n\t\tvar r2d = function(radians) {\r\n\t\t\tvar deg = radians * 180 / Math.PI;\r\n\t\t\treturn round(deg);\r\n\t\t};\r\n\t\t// ---------------------------------\r\n\t\tvar m = stom(str);\r\n\t\tvar A = m[0];\r\n\t\tvar B = m[1];\r\n\t\tvar C = m[2];\r\n\t\tvar D = m[3];\r\n\t\tif (A * D == B * C) throw new Error('Dramatic.parseTransform: matrix is singular');\r\n\t\t// step (3)\r\n\t\tvar scaleX = Math.sqrt(A * A + B * B);\r\n\t\tA /= scaleX;\r\n\t\tB /= scaleX;\r\n\t\t// step (4)\r\n\t\tvar skew = A * C + B * D;\r\n\t\tC -= A * skew;\r\n\t\tD -= B * skew;\r\n\t\t// step (5)\r\n\t\tvar scaleY = Math.sqrt(C * C + D * D);\r\n\t\tC /= scaleY;\r\n\t\tD /= scaleY;\r\n\t\tskew /= scaleY;\r\n\t\t// step (6)\r\n\t\tif ( A * D < B * C ) {\r\n\t\t\tA = -A;\r\n\t\t\tB = -B;\r\n\t\t\tskew = -skew;\r\n\t\t\tscaleX = -scaleX;\r\n\t\t}\r\n\t\treturn new TransformRule({\r\n\t\t\ttranslate: [/*x*/m[4], /*y*/m[5],],\r\n\t\t\tscale: [/*x*/round(scaleX), /*y*/round(scaleY),],\r\n\t\t\trotate: r2d(Math.atan2(B, A)),\r\n\t\t\tskew: r2d(Math.atan(skew)),\r\n\t\t});\r\n\t};\r\n};\r\n\r\n/**\r\n * -------------\r\n * The \"rotate\" value class\r\n * -------------\r\n */\r\nTransformRule.rotate = class extends Array {\r\n\t\r\n\t/**\r\n\t * Returns \"rotate\" values as a CSS function\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\tvar values = this.map(val => _isNumeric(val) ? val + 'deg' : val);\r\n\t\treturn 'rotate(' + values.join(', ') + ')';\r\n\t}\r\n};\r\n\r\n/**\r\n * -------------\r\n * The \"scale\" array class\r\n * -------------\r\n */\r\nTransformRule.scale = class extends Array {\r\n\t\r\n\t/**\r\n\t * Returns \"scale\" values as a CSS function\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\treturn 'scale(' + this.join(', ') + ')';\r\n\t}\r\n};\r\n\r\n/**\r\n * -------------\r\n * The \"skew\" array class\r\n * -------------\r\n */\r\nTransformRule.skew = class extends Array {\r\n\t\r\n\t/**\r\n\t * Returns \"skew\" values as a CSS function\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\tvar values = this.map(val => _isNumeric(val) ? val + 'deg' : val);\r\n\t\treturn 'skew(' + values.join(', ') + ')';\r\n\t}\r\n};\r\n\r\n/**\r\n * -------------\r\n * The \"translate\" array class\r\n * -------------\r\n */\r\nTransformRule.translate = class extends Array {\r\n\t\r\n\t/**\r\n\t * Returns \"translate\" values as a CSS function\r\n\t *\r\n\t * @return string\r\n\t */\r\n\ttoString() {\r\n\t\tvar values = this.map(val => _isNumeric(val) ? val + 'px' : val);\r\n\t\treturn 'translate(' + values.join(', ') + ')';\r\n\t}\r\n};\r\n\r\n/**\r\n * @exports\r\n */\r\nexport default TransformRule;","\r\n/**\r\n * @imports\r\n */\r\nimport ruleCallback from './ruleCallback.js';\r\nimport TransformRule from './classes/TransformRule.js';\r\nimport vendorize from './vendorize.js';\r\n\r\n/**\r\n * Returns computed CSS properties.\r\n *\r\n * @param HTMLElement\t\tel\r\n * @param string|array\t\tprops\r\n * @param string\t\t\tpsuedo\r\n *\r\n * @return object|string\r\n */\r\nexport default function(el, props, psuedo = null) {\r\n\tvar style = this.window.getComputedStyle(el, psuedo), rect;\r\n\treturn ruleCallback.call(this, props, (prop, rawProp) => {\r\n\t\tvar val = style.getPropertyValue(vendorize.call(this, prop) || prop);\r\n\t\tif ((prop === 'width' || prop === 'height') && val === '') {\r\n\t\t\tval = '0px';\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// We return an object for the \"transform\" property\r\n\t\t// -----------------------------\r\n\t\tif (prop === 'transform') {\r\n\t\t\tval = TransformRule.parse(this, val);\r\n\t\t}\r\n\t\treturn val;\r\n\t}, false/*withVendorVersion*/);\r\n};\r\n","\r\n/**\r\n * CSS properties that must have a default pixel unit.\r\n *\r\n * @var array\r\n */\r\nexport default ['width', 'height', 'top', 'left', 'right', 'bottom',\r\n\t'padding', 'padding-top', 'padding-left', 'padding-right', 'padding-bottom',\r\n\t'margin', 'margin-top', 'margin-left', 'margin-right', 'margin-bottom',\r\n\t'border-width', 'border-top-width', 'border-left-width', 'border-right-width', 'border-bottom-width',\r\n\t'outline-width', 'outline-top-width', 'outline-left-width', 'outline-right-width', 'outline-bottom-width',\r\n];\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isString from '@webqit/util/js/isString.js';\r\nimport _isArray from '@webqit/util/js/isArray.js';\r\nimport _isObject from '@webqit/util/js/isObject.js';\r\nimport _isUndefined from '@webqit/util/js/isUndefined.js';\r\nimport _isNumeric from '@webqit/util/js/isNumeric.js';\r\nimport _objFrom from '@webqit/util/obj/from.js';\r\nimport _each from '@webqit/util/obj/each.js';\r\nimport TransformRule from './classes/TransformRule.js';\r\nimport ruleCallback from './ruleCallback.js';\r\nimport autopx from './autopx.js';\r\n\r\n/**\r\n * Sets new CSS properties.\r\n *\r\n * @param HTMLElement\t\tel\r\n * @param string|object\t\tnameOrProps\r\n * @param string|number\t\tval\r\n *\r\n * @return HTMLElement\r\n */\r\nexport default function(el, nameOrProps, val = null) {\r\n\tnameOrProps = _isString(nameOrProps)\r\n\t\t? _objFrom(nameOrProps, val)\r\n\t\t: nameOrProps;\r\n\tvar destructables = {\r\n\t\tinset: ['top', 'right', 'bottom', 'left'],\r\n\t\tmargin: ['top', 'right', 'bottom', 'left'],\r\n\t\tpadding: ['top', 'right', 'bottom', 'left'],\r\n\t};\r\n\truleCallback.call(this, Object.keys(nameOrProps), (prop, rawProp) => {\r\n\t\tvar val = nameOrProps[rawProp];\r\n\t\t// -----------------------------\r\n\t\t// We can destucture things like \"inset\"(\"left\", \"top\", \"right\", \"bottom\"), etc\r\n\t\t// -----------------------------\r\n\t\t_each(destructables, (destructableProp, meaning) => {\r\n\t\t\tif (prop === destructableProp) {\r\n\t\t\t\tif (_isObject(val)) {\r\n\t\t\t\t\tval = meaning.map(key => val[key]).filter(val => !_isUndefined(val));\r\n\t\t\t\t}\r\n\t\t\t\tif (_isArray(val)) {\r\n\t\t\t\t\tval = val.join(' ');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t// -----------------------------\r\n\t\t// We accept an object for the \"transform\" property\r\n\t\t// -----------------------------\r\n\t\tif (prop === 'transform' && _isObject(val) && !(val instanceof TransformRule)) {\r\n\t\t\tval = (new TransformRule(val)).toString();\r\n\t\t}\r\n\t\tel.style[prop] = autopx.includes(prop) && _isNumeric(val)\r\n\t\t\t? val + 'px'\r\n\t\t\t: val;\r\n\t}, 'auto'/*withVendorVersion*/);\r\n\treturn el;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isString from '../js/isString.js';\r\n\r\n/**\r\n * Return an object for the given pair(s) of input.\r\n *\r\n * @param string|array \t\t\tkey\r\n * @param mixed|array\t\t\tval \r\n *\r\n * @return object\r\n */\r\nexport default function(key, val = null) {\r\n\tvar obj = {};\r\n\tif (arguments.length === 2) {\r\n\t\tif (_isArray(key) && _isArray(val)) {\r\n\t\t\tkey.forEach((k, i) => obj[k] = val[i]);\r\n\t\t} else {\r\n\t\t\tobj[key] = val;\r\n\t\t}\r\n\t}\r\n\treturn obj;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport ruleCallback from './ruleCallback.js';\r\n\r\n/**\r\n * Returns inline-only CSS properties.\r\n *\r\n * @param HTMLElement\t\tel\r\n * @param string|object\t\tprop\r\n * @param bool|string\t\twithVendorVersions\r\n *\r\n * @return mixed\r\n */\r\nexport default function(el, props, withVendorVersion = 'auto') {\r\n\tvar style = el.getAttribute('style');\r\n\tif (props === 'all') {\r\n\t\tprops = style.split(';').map(str => str.split(':')[0]);\r\n\t}\r\n\treturn ruleCallback.call(this, props, prop => {\r\n\t\tvar regex = new RegExp(';[ ]*?' + prop + ':([^;]+);?', 'g');\r\n\t\treturn (regex.exec(';' + style) || ['', ''])[1].trim();\r\n\t}, withVendorVersion);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isFunction from '@webqit/util/js/isFunction.js';\r\nimport readSync from './readSync.js';\r\n\r\n/**\r\n * The async type of readSync().\r\n *\r\n * @see readSync()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(el, props, psuedo = null) {\r\n\treturn this.Reflow.onread((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tresolve(_isFunction(props) ? props(el) : readSync.call(this, el, props, psuedo));\r\n\t\t} catch(e) {\r\n\t\t\treject(e);\r\n\t\t}\r\n\t}, true/*withPromise*/);\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _isFunction from '@webqit/util/js/isFunction.js';\r\nimport writeSync from './writeSync.js';\r\n\r\n/**\r\n * The async type of writeSync().\r\n *\r\n * @see cssWrite()\r\n *\r\n * @return Promise\r\n */\r\nexport default function(el, nameOrProps, val = null) {\r\n\treturn this.Reflow.onwrite((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tresolve(_isFunction(nameOrProps) ? nameOrProps(el) : writeSync.call(this, el, nameOrProps, val));\r\n\t\t} catch(e) {\r\n\t\t\treject(e);\r\n\t\t}\r\n\t}, true/*withPromise*/);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isObject from '@webqit/util/js/isObject.js';\r\nimport cssReadInline from './readInline.js';\r\nimport cssReadAsync from './readAsync.js';\r\nimport cssWriteAsync from './writeAsync.js';\r\n\r\n/**\r\n * Applies some CSS within a transaction, gets computed values for use before rolling back.\r\n * If a callback is provided, it synces the entire operation with Reflow's normal read/write cycles.\r\n *\r\n * @param HTMLElement\t\tel \r\n * @param string|object\t\tnameOrProps\r\n * @param string|number\t\tval\r\n * @param function\t\t\treadCallback\r\n *\r\n * @return Promise\r\n */\r\nexport default function(el, nameOrProps, val = null, readCallback = null) {\r\n\tvar propsToRead = _isObject(nameOrProps) ? Object.keys(nameOrProps) : nameOrProps;\r\n\treadCallback = _isObject(nameOrProps) ? val : readCallback;\r\n\t// -------------\r\n\tvar inlineSavepoint = cssReadInline.call(this, el, propsToRead);\r\n\treturn cssWriteAsync.call(this, el, nameOrProps, val).then(() => {\r\n\t\treturn cssReadAsync.call(this, el, readCallback || propsToRead).then(rendering => {\r\n\t\t\t// We return the rendering in a promise\r\n\t\t\treturn cssWriteAsync.call(this, el, inlineSavepoint).then(() => {\r\n\t\t\t\treturn rendering;\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _pushUnique from '../arr/pushUnique.js';\r\nimport _getPrototypeChain from './getPrototypeChain.js';\r\n\r\n/**\r\n * Eagerly retrieves object members all down the prototype chain.\r\n *\r\n * @param object\t \tobj\r\n * @param object\t \tuntil\r\n *\r\n * @return array\r\n */\r\nexport default function(obj, until) {\r\n\tvar keysAll = [];\r\n\t_getPrototypeChain(obj, until).forEach(obj => {\r\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\r\n\t});\r\n\treturn keysAll;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\n\r\n/**\r\n * Returns the prototype chain.\r\n *\r\n * @param object \t\tobj\r\n * @param object\t \tuntil\r\n *\r\n * @return bool\r\n */\r\nexport default function(obj, until) {\r\n\tuntil = until || Object.prototype;\r\n\tuntil = until && !_isArray(until) ? [until] : until;\r\n\t// We get the chain of inheritance\r\n\tvar prototypalChain = [];\r\n\tvar obj = obj;\r\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\r\n\t\tprototypalChain.push(obj);\r\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\r\n\t}\r\n\treturn prototypalChain;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _isObject from '../js/isObject.js';\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\nimport _getAllPropertyNames from './getAllPropertyNames.js';\r\n\r\n/**\r\n  * Merges values from subsequent arrays/objects first array/object;\r\n  * optionally recursive\r\n  *\r\n  * @param array ...objs\r\n  *\r\n  * @return void\r\n  */\r\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = false) {\r\n\tvar depth = 0;\r\n\tvar obj1 = objs.shift();\r\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\r\n\t\tdepth = obj1;\r\n\t\tobj1 = objs.shift();\r\n\t}\r\n\tif (!objs.length) {\r\n\t\tthrow new Error('_merge() requires two or more array/objects.');\r\n\t}\r\n\tobjs.forEach((obj2, i) => {\r\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.getOwnPropertyNames(obj2)).forEach(key => {\r\n\t\t\tif (!callback(key, obj1, obj2, i)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar valAtObj1 = obj1[key];\r\n\t\t\tvar valAtObj2 = obj2[key];\r\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \r\n\t\t\t&& (depth === true || depth > 0)) {\r\n\t\t\t\t// RECURSE...\r\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\r\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\r\n\t\t\t} else {\r\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\r\n\t\t\t\t\tif (isReplace) {\r\n\t\t\t\t\t\tobj1[key] = valAtObj2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobj1.push(valAtObj2);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// In case we're setting a read-only property\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (withSymbols) {\r\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\treturn obj1;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _mergeCallback from './mergeCallback.js';\r\n\r\n/**\r\n * Copies only properties of an object.\r\n *\r\n * @param object\t \tobj\r\n * @param array\t\t \tonly\r\n * @param array\t\t \texcept\r\n *\r\n * @return object\r\n */\r\nexport default function(obj, filter = []) {\r\n\treturn _mergeCallback([{}, obj], (key, obj1, obj2) => {\r\n\t\tif (!_isFunction(obj2[key])) {\r\n\t\t\treturn _isFunction(filter) ? filter(key) \r\n\t\t\t\t: (_isArray(filter) && filter.length ? filter.indexOf(key) > -1 : true);\r\n\t\t}\r\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\r\n};\r\n","\r\n/**\r\n * Helper method: parses a CSS string into an associative array.\r\n *\r\n * @param string\t \tcss\r\n *\r\n * @return object\r\n */\r\nexport default function(css) {\r\n\tvar _split = {};\r\n\tcss.split(';').filter(r => r).forEach(rule => {\r\n\t\trule = rule.split(':');\r\n\t\t_split[rule[0].trim()] = rule[1].trim();\r\n\t});\r\n\treturn _split;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _copyPlain from '@webqit/util/obj/copyPlain.js';\r\nimport _isArray from '@webqit/util/js/isArray.js';\r\nimport stylesheetRuleCallback from './stylesheetRuleCallback.js';\r\nimport parseRules from './parseRules.js';\r\n\r\n/**\r\n * FInds the keyframes of the given animation name(s) across all stylesheets.\r\n *\r\n * @param string|array\t\tname\r\n * @param bool\t\t\t\tnoCache\r\n * @param bool\t\t\t\tnormalize\r\n *\r\n * @return NULL|bool\r\n */\r\nexport default function(name, noCache, normalize = true) {\r\n\t// Ask cache first...\r\n\tvar cacheKey = _isArray(name) ? name.join('|') : name;\r\n\tif (!noCache && stylesheetKeyframesCache[cacheKey]) {\r\n\t\treturn stylesheetKeyframesCache[cacheKey];\r\n\t}\r\n\t// Parse keyframes rule\r\n\tvar parseKeyframes = function(ruleDefinition) {\r\n\t\tvar keyframes = [];\r\n\t\tfor (var i = 0; i < ruleDefinition.cssRules.length; i ++) {\r\n\t\t\tvar keyframeRule = ruleDefinition.cssRules[i];\r\n\t\t\tvar keyframe = parseRules(keyframeRule.cssText.replace(keyframeRule.keyText, '').replace('{', '').replace('}', '').trim());\r\n\t\t\tvar offsets = (keyframeRule.keyText || ' ').split(',').map(key => key === 'from' ? 0 : (key === 'to' ? 1 : (parseInt(key) / 100)));\r\n\t\t\tif (normalize) {\r\n\t\t\t\tnormalizeToWAAPI(keyframe, ['animation-', 'transition-']);\r\n\t\t\t\twhile(offsets.length) {\r\n\t\t\t\t\tvar _keyframe = _copyPlain(keyframe);\r\n\t\t\t\t\t_keyframe.offset = offsets.shift();\r\n\t\t\t\t\tkeyframes.push(_keyframe);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tkeyframe.offset = offsets.length > 1 ? offsets : offsets[0];\r\n\t\t\t\tkeyframes.push(keyframe);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn keyframes.sort((a, b) => a.offset === b.offset ? 0 : a.offset > b.offset ? 1 : -1);\r\n\t};\r\n\t// Find keyframes\r\n\tvar allKeyframes = [];\r\n\tstylesheetRuleCallback(ruleDefinition => {\r\n\t\tif ((ruleDefinition.type === this.window.CSSRule.KEYFRAMES_RULE || ruleDefinition.type === this.window.CSSRule[this.prefix.api.toUpperCase() + '_KEYFRAMES_RULE'])\r\n\t\t&& (_isArray(name) ? name : [name]).indexOf(ruleDefinition.name) > -1) {\r\n\t\t\tallKeyframes = allKeyframes.concat(allKeyframes, parseKeyframes(ruleDefinition));\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}, true/*reversed*/);\r\n\t// Save\r\n\tstylesheetKeyframesCache[cacheKey] = allKeyframes;\r\n\treturn allKeyframes;\r\n};\r\n\r\n/**\r\n * Normalizes CSS animation properties to WAAPI compatible properties\r\n *\r\n * @param object\t\t\tanimationProps\r\n * @param string|arrau\t\tprefix\r\n * @param string|arrau\t\toffset\r\n *\r\n * @return null\r\n */\r\nconst normalizeToWAAPI = function(animationProps, offset, prefix = '') {\r\n\tif (_isArray(prefix)) {\r\n\t\tprefix.forEach(pref => normalizeToWAAPI(animationProps, pref));\r\n\t\treturn;\r\n\t}\r\n\tif (animationProps[prefix + 'timing-function']) {\r\n\t\tanimationProps.easing = animationProps[prefix + 'timing-function'];\r\n\t\tdelete animationProps[prefix + 'timing-function'];\r\n\t}\r\n\tif (animationProps[prefix + 'fill-mode']) {\r\n\t\tanimationProps.fill = animationProps[prefix + 'fill-mode'];\r\n\t\tdelete animationProps[prefix + 'fill-mode'];\r\n\t}\r\n\tif (animationProps[prefix + 'iteration-count']) {\r\n\t\tanimationProps.iterations = animationProps[prefix + 'iteration-count'];\r\n\t\tdelete animationProps[prefix + 'iteration-count'];\r\n\t\tif (animationProps.iterations === 'infinite') {\r\n\t\t\tanimationProps.iterations = Infinity;\r\n\t\t}\r\n\t}\r\n};\r\n\t\r\n/**\r\n * @var object\r\n */\r\nconst stylesheetKeyframesCache = {};\r\n","\r\n/**\r\n * Loops thru all rules in all stylesheets (in reverse order possible).\r\n *\r\n * @param function\t\t\tcallback\r\n * @param bool\t\t\t\treversed\r\n *\r\n * @return NULL|bool\r\n */\r\nexport default function(callback, reversed) {\r\n\tvar stylesheets = document.styleSheets;\r\n\tvar stylesheetCallback = function(stylesheet) {\r\n\t\ttry {\r\n\t\t\tfor (var k = 0; k < stylesheet.cssRules.length; k ++) {\r\n\t\t\t\tvar ruleDefinition = stylesheet.cssRules[k];\r\n\t\t\t\tif (callback(ruleDefinition) === true) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {}\r\n\t}\r\n\tif (reversed) {\r\n\t\tfor (var i = stylesheets.length - 1; i >= 0; i --) {\r\n\t\t\tif (stylesheetCallback(stylesheets[i]) === true) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tfor (var i = 0; i < stylesheets.length; i ++) {\r\n\t\t\tif (stylesheetCallback(stylesheets[i]) === true) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _fromCamel from '@webqit/util/str/fromCamel.js';\r\n\r\n/**\r\n * Returns preset easing functions from CSS variables.\r\n *\r\n * @param string \tname\r\n *\r\n * @return string|NULL\r\n */\r\nexport default function(name) {\r\n\tvar name = !name.indexOf('-') ? _fromCamel(name, '-') : name;\r\n\treturn this.window.getComputedStyle(this.window.document.body).getPropertyValue('--' + name);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _each from '@webqit/util/obj/each.js';\r\nimport _exclude from '@webqit/util/arr/exclude.js';\r\nimport _pushUnique from '@webqit/util/arr/pushUnique.js';\r\nimport _isString from '@webqit/util/js/isString.js';\r\nimport _isArray from '@webqit/util/js/isArray.js';\r\nimport _isObject from '@webqit/util/js/isObject.js';\r\nimport _isNumber from '@webqit/util/js/isNumber.js';\r\nimport _isNumeric from '@webqit/util/js/isNumeric.js';\r\nimport _isFunction from '@webqit/util/js/isFunction.js';\r\nimport _isEmpty from '@webqit/util/js/isEmpty.js';\r\nimport _isUndefined from '@webqit/util/js/isUndefined.js';\r\n// ------------------------------------\r\nimport readSync from '@webqit/plot-js/src/css/readSync.js';\r\nimport writeSync from '@webqit/plot-js/src/css/writeSync.js';\r\nimport readRendering from '@webqit/plot-js/src/css/readRendering.js';\r\nimport readSyncKeyframes from '@webqit/plot-js/src/css/readKeyframes.js';\r\nimport cssVarRead from '@webqit/plot-js/src/css/varRead.js';\r\nimport cssAutopx from '@webqit/plot-js/src/css/autopx.js';\r\nimport TransformRule from '@webqit/plot-js/src/css/classes/TransformRule.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Element utility class\r\n * ---------------------------\r\n */\r\n\t\t\t\r\nexport default class Ani {\r\n\t\r\n\t/**\r\n\t * Creates an amiation from\r\n\t * any of keyframes, CSS keyframe name, or CSS object.\r\n\t *\r\n\t * @param Element\t\t\t\tel\r\n\t * @param array|object|string\teffect\r\n\t * @param object\t\t\t\tparams\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(el, effect, params = {}) {\r\n\t\t// Private properties\r\n\t\tthis.el = el;\r\n\t\tthis.$ = {\r\n\t\t\treadyCallbacks: [],\r\n\t\t\tfinishCallbacks: [],\r\n\t\t\tcancelCallbacks: [],\r\n\t\t\tparams: params,\r\n\t\t};\r\n\t\t// -----------------------------\r\n\t\t// Normalize params...\r\n\t\t// -----------------------------\r\n\t\tparams.fill = params.fill || 'both';\r\n\t\tif (!('duration' in params)) {\r\n\t\t\tparams.duration = 400;\r\n\t\t}\r\n\t\t// Convert certain easing strings to beizier curves\r\n\t\tif (params.easing && ['ease-in', 'ease-out', 'ease-in-out'].indexOf(params.easing) === -1 && params.easing.indexOf('(') === -1) {\r\n\t\t\t// Native easings, custom cubic-beziers, or Dramatic's cubic-beziers\r\n\t\t\tparams.easing = cssVarRead.call(WQ.DOM, params.easing) || params.easing;\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// Normalize keyframes...\r\n\t\t// -----------------------------\r\n\t\tvar destructables = {\r\n\t\t\tinset: ['top', 'right', 'bottom', 'left'],\r\n\t\t\tmargin: ['top', 'right', 'bottom', 'left'],\r\n\t\t\tpadding: ['top', 'right', 'bottom', 'left'],\r\n\t\t};\r\n\t\tconst init = keyframes => {\r\n\t\t\tkeyframes = keyframes.slice();\r\n\t\t\t// Mine out end-state properties\r\n\t\t\tvar firstFrame = {};\r\n\t\t\tvar lastFrame = {};\r\n\t\t\t_each(keyframes, (i, keyframe) => {\r\n\t\t\t\t// -----------------------------\r\n\t\t\t\t// We can destucture things like \"inset\"(\"left\", \"top\", \"right\", \"bottom\"), etc\r\n\t\t\t\t// -----------------------------\r\n\t\t\t\t_each(destructables, (destructableProp, meaning) => {\r\n\t\t\t\t\tif (keyframe[destructableProp]) {\r\n\t\t\t\t\t\tif (_isObject(keyframe[destructableProp])) {\r\n\t\t\t\t\t\t\tkeyframe[destructableProp] = meaning.map(key => keyframe[destructableProp][key]).filter(val => !_isUndefined(val));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_isArray(keyframe[destructableProp])) {\r\n\t\t\t\t\t\t\tkeyframe[destructableProp] = keyframe[destructableProp].join(' ');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// -----------------------------\r\n\t\t\t\t// We accept an object for the \"transform\" property\r\n\t\t\t\t// -----------------------------\r\n\t\t\t\tif (keyframe.transform && _isObject(keyframe.transform) && !(keyframe.transform instanceof TransformRule)) {\r\n\t\t\t\t\tkeyframe.transform = (new TransformRule(keyframe.transform)).toString();\r\n\t\t\t\t}\r\n\t\t\t\t// Marshal out its properties\r\n\t\t\t\t_exclude(Object.keys(keyframe), 'offset', 'easing').forEach(prop => {\r\n\t\t\t\t\t// Auto-px\r\n\t\t\t\t\tif (cssAutopx.includes(prop) && _isNumeric(keyframe[prop])) {\r\n\t\t\t\t\t\tkeyframe[prop] += 'px';\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Save last seen value of this property\r\n\t\t\t\t\t// across all keyframes...\r\n\t\t\t\t\tfirstFrame[prop] = typeof firstFrame[prop] === 'undefined' ? keyframe[prop] : firstFrame[prop];\r\n\t\t\t\t\tlastFrame[prop] = keyframe[prop];\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t// -----------------------------\r\n\t\t\t// The animation...\r\n\t\t\t// -----------------------------\r\n\t\t\ttry {\r\n\t\t\t\tvar anim = this.el.animate(keyframes, params);\r\n\t\t\t} catch(e) {\r\n\t\t\t\tthis.$.error = e;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Reverse\r\n\t\t\tif (params.reverse) {\r\n\t\t\t\tanim.reverse();\r\n\t\t\t}\r\n\t\t\t// A little polifyll\r\n\t\t\tif (!anim.effect) {\r\n\t\t\t\tanim.effect = {};\r\n\t\t\t}\r\n\t\t\tif (!anim.effect.duration) {\r\n\t\t\t\tanim.effect.duration = params.duration;\r\n\t\t\t}\r\n\t\t\t// -----------------------------\r\n\t\t\t// \"onfinish\" and \"oncancel\" listener\r\n\t\t\t// -----------------------------\r\n\t\t\tanim.onfinish = () => {\r\n\t\t\t\t// As getter, as it were\r\n\t\t\t\tif (params.cancelForCss) {\r\n\t\t\t\t\tanim.cancel();\r\n\t\t\t\t\tif (params.fill === 'forwards' || params.fill === 'both') {\r\n\t\t\t\t\t\twriteSync.call(WQ.DOM, this.el, lastFrame);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$.finishCallbacks.forEach(callback => {\r\n\t\t\t\t\tcallback(this.el);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t// oncancel listener\r\n\t\t\tanim.oncancel = () => {\r\n\t\t\t\t// As getter, as it were\r\n\t\t\t\tthis.$.cancelCallbacks.forEach(callback => {\r\n\t\t\t\t\tcallback(this.el);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t// -------------------\r\n\t\t\tthis.$.anim = anim;\r\n\t\t\tthis.$.firstFrame = firstFrame;\r\n\t\t\tthis.$.lastFrame = lastFrame;\r\n\t\t\tthis.$.params = params;\r\n\t\t\tif (this.$.readyCallbacks.length) {\r\n\t\t\t\tthis.$.readyCallbacks.forEach(callback => callback(anim, params, firstFrame, lastFrame));\r\n\t\t\t}\r\n\t\t\t// -------------------\r\n\t\t};\r\n\t\tif (_isFunction(effect)) {\r\n\t\t\teffect(el, init);\r\n\t\t} else {\r\n\t\t\tAni.createCallback(el, effect, init, error => {\r\n\t\t\t\t// -------------------\r\n\t\t\t\tthis.$.error = error;\r\n\t\t\t\t// -------------------\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Returns the animation.\r\n\t *\r\n\t * @return Animation\r\n\t */\r\n\tget anim() {\r\n\t\treturn this.$.anim;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Animation-ready callback.\r\n\t *\r\n\t * @param function\t\tsucces\r\n\t * @param function\t\terror\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tready(succes, error) {\r\n\t\tif (this.$.error) {\r\n\t\t\tif (error) {\r\n\t\t\t\terror(this.$.error);\r\n\t\t\t}\r\n\t\t} else if (this.$.anim) {\r\n\t\t\tsucces(this.$.anim, this.$.params, this.$.firstFrame, this.$.lastFrame);\r\n\t\t} else {\r\n\t\t\tthis.$.readyCallbacks.push(succes);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a function to the \"onfinish\" event.\r\n\t *\r\n\t * @param function callback\r\n\t *\r\n\t * @return this\r\n\t *\r\n\t */\r\n\tonfinish(callback) {\r\n\t\tif (!_isFunction(callback)) {\r\n\t\t\tthrow new Error(\"Onfinish() accepts only a function.\");\r\n\t\t}\r\n\t\tthis.$.finishCallbacks.push(callback);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a function to the \"oncancel\" event.\r\n\t *\r\n\t * @param function callback\r\n\t *\r\n\t * @return this\r\n\t *\r\n\t */\r\n\toncancel(callback) {\r\n\t\tif (!_isFunction(callback)) {\r\n\t\t\tthrow new Error(\"Oncancel() accepts only a function.\");\r\n\t\t}\r\n\t\tthis.$.cancelCallbacks.push(callback);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns the animation's progress.\r\n\t *\r\n\t * @return number\r\n\t */\r\n\tprogress() {\r\n\t\tif (this.$.anim) {\r\n\t\t\treturn this.$.anim.currentTime / this.$.anim.effect.duration;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Seeks the animation to a time.\r\n\t *\r\n\t * @param number to\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tseek(to) {\r\n\t\tif (!_isNumber(to)) {\r\n\t\t\tthrow new Error(\"Seek() accepts only a numeric value.\");\r\n\t\t}\r\n\t\tthis.ready((anim, params) => {\r\n\t\t\tvar totalDuration = params.duration + (params.delay || 0) + (params.endDelay || 0);\r\n\t\t\tanim.currentTime = Math.max(0, Math.min(to * totalDuration, totalDuration));\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Reverses the animation.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\treverse() {\r\n\t\tthis.ready(anim => anim.reverse());\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Plays the animation.\r\n\t * Returns an \"onfinish\" promise.\r\n\t *\r\n\t * @return Promise\r\n\t */\r\n\tplay() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.ready(anim => {\r\n\t\t\t\tanim.play();\r\n\t\t\t\tthis.onfinish(() => resolve(this));\r\n\t\t\t\tthis.oncancel(() => reject(this));\r\n\t\t\t}, reject);\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Pauses the animation.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tpause() {\r\n\t\tthis.ready(anim => anim.pause());\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Finishes the animation.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tfinish() {\r\n\t\tthis.ready(anim => anim.finish());\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Cancels the animation.\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tcancel() {\r\n\t\tthis.ready(anim => anim.cancel());\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Resolves the given effect into valid keyframes.\r\n\t *\r\n\t * Effect can be CSS animation name,\r\n\t * or an object of CSS properties that represent the end keyframe.\r\n\t *\r\n\t * @param Element\t\t\t\tel\r\n\t * @param array|object|string\teffect\r\n\t * @param function\t\t\t\tready\r\n\t * @param function\t\t\t\terror\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tstatic createCallback(el, effect, ready, error) {\r\n\t\t// -----------------------------\r\n\t\t// Resolve firstFrame from current state?\r\n\t\t// -----------------------------\r\n\t\tvar isObjectAndOnlyLastKeyframe = _isObject(effect) && !Object.values(effect).filter(v => _isArray(v)).length;\r\n\t\tvar isArrayButEmptyFirstKeyframe = _isArray(effect) && effect.length > 1 && _isEmpty(effect[0]);\r\n\t\tif (isObjectAndOnlyLastKeyframe || isArrayButEmptyFirstKeyframe) {\r\n\t\t\t// Get first keyframe from current state\r\n\t\t\tWQ.DOM.Reflow.onread(() => {\r\n\t\t\t\tif (isArrayButEmptyFirstKeyframe) {\r\n\t\t\t\t\teffect.shift();\r\n\t\t\t\t\tAni.createCallback(el, [readSync.call(WQ.DOM, el, Object.keys(effect[0])), ...effect], ready, error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tAni.createCallback(el, [readSync.call(WQ.DOM, el, Object.keys(effect)), effect], ready, error);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// Create keyframes from CSS animation name...\r\n\t\t// -----------------------------\r\n\t\tif (_isString(effect)) {\r\n\t\t\t// Retrieve keyframes of the given animation name from css\r\n\t\t\tvar animationName = effect;\r\n\t\t\teffect = readSyncKeyframes.call(WQ.DOM, animationName);\r\n\t\t\tif (!effect.length && error) {\r\n\t\t\t\terror('Animation name \"' + animationName + '\" not found in any stylesheet!');\r\n\t\t\t}\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// Resolve auto pixels...\r\n\t\t// -----------------------------\r\n\t\tif (_isArray(effect)) {\r\n\t\t\tvar keyframesWithAutoSizes = [];\r\n\t\t\t_each(effect, (i, keyframe) => {\r\n\t\t\t\t// We can animate to auto width and height\r\n\t\t\t\tif (keyframe.height === 'auto') {\r\n\t\t\t\t\t_pushUnique(keyframesWithAutoSizes, i);\r\n\t\t\t\t}\r\n\t\t\t\tif (keyframe.width === 'auto') {\r\n\t\t\t\t\t_pushUnique(keyframesWithAutoSizes, i);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (keyframesWithAutoSizes.length) {\r\n\t\t\t\t// apply() will be called when ready\r\n\t\t\t\t// We return readRendering(), which in itself returns the return of apply()\r\n\t\t\t\treadRendering.call(WQ.DOM, el, {width:'auto', height:'auto'}, el => el.getBoundingClientRect()).then(result => {\r\n\t\t\t\t\tkeyframesWithAutoSizes.forEach(i => {\r\n\t\t\t\t\t\tif (effect[i].width === 'auto') {\r\n\t\t\t\t\t\t\teffect[i].width = result.width + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (effect[i].height === 'auto') {\r\n\t\t\t\t\t\t\teffect[i].height = result.height + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tready(effect);\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// -----------------------------\r\n\t\t// Return result...\r\n\t\t// -----------------------------\r\n\t\t// We return the return of success()\r\n\t\tready(effect);\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _remove from './remove.js';\r\n\r\n/**\r\n * Removes all instances of each item.\r\n *\r\n * @param array \tarr\r\n * @param array\t \titms\r\n *\r\n * @return array\r\n */\r\nexport default function(arr, ...itms) {\r\n\titms.forEach(itm => _remove(arr, itm));\r\n\treturn arr;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '@webqit/util/js/isArray.js';\r\nimport _isFunction from '@webqit/util/js/isFunction.js';\r\nimport _arrFrom from '@webqit/util/arr/from.js';\r\nimport _remove from '@webqit/util/arr/remove.js';\r\nimport Ani from './Ani.js';\r\n\r\n/**\r\n * -----------------------------\r\n * The timeline class\r\n * for working with multiple animations.\r\n * -----------------------------\r\n */\r\n \r\nexport default class {\r\n\t\r\n\t/**\r\n\t * Creates an amiation from keyframes.\r\n\t *\r\n\t * @param array\t\t\t\t\tanimations\r\n\t * @param object\t\t\t\tparams\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tconstructor(animations = [], params = {}) {\r\n\t\t// Private properties\r\n\t\tthis.$ = {\r\n\t\t\tanimations: [],\r\n\t\t\tfinishCallbacks: [],\r\n\t\t\tcancelCallbacks: [],\r\n\t\t\tparams: params,\r\n\t\t};\r\n\t\tanimations.forEach(anim => {\r\n\t\t\tthis.add(anim);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an animation instance.\r\n\t *\r\n\t * @param Ani\t\t\t anim\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tadd(anim) {\r\n\t\tif (!(anim instanceof Ani)) {\r\n\t\t\tthrow new Error('Argument#1 must be an Ani instance!');\r\n\t\t}\r\n\t\tthis.$.animations.push(anim);\r\n\t\t\r\n\t\tif (this.$.addCallback) {\r\n\t\t\tthis.$.addCallback(anim);\r\n\t\t}\r\n\t\tswitch(this.$.playState) {\r\n\t\t\tcase 'paused':\r\n\t\t\t\tanim.pause();\r\n\t\t\tbreak;\r\n\t\t\tcase 'cancelled':\r\n\t\t\t\tanim.cancel();\r\n\t\t\tbreak;\r\n\t\t\tcase 'finished':\r\n\t\t\t\tanim.finish();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tif (this.$.reversed) {\r\n\t\t\tanim.reverse();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes an animation instance.\r\n\t *\r\n\t * @param Ani\t\t\t anim\r\n\t *\r\n\t * @return this\r\n\t */\r\n\tremove(anim) {\r\n\t\tif (!(anim instanceof Ani)) {\r\n\t\t\tthrow new Error('Argument#1 must be an Ani instance!');\r\n\t\t}\r\n\t\t_remove(this.$.animations, anim);\r\n\t\tif (this.$.removeCallback) {\r\n\t\t\tthis.$.removeCallback(anim);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a function to the \"onfinish\" event.\r\n\t *\r\n\t * @param function callback\r\n\t *\r\n\t * @return this\r\n\t *\r\n\t */\r\n\tonfinish(callback) {\r\n\t\tif (!_isFunction(callback)) {\r\n\t\t\tthrow new Error(\"Onfinish() accepts only a function.\");\r\n\t\t}\r\n\t\tthis.$.finishCallbacks.push(callback);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds a function to the \"oncancel\" event.\r\n\t *\r\n\t * @param function callback\r\n\t *\r\n\t * @return this\r\n\t *\r\n\t */\r\n\toncancel(callback) {\r\n\t\tif (!_isFunction(callback)) {\r\n\t\t\tthrow new Error(\"Oncancel() accepts only a function.\");\r\n\t\t}\r\n\t\tthis.$.cancelCallbacks.push(callback);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns the average of all animation's progress.\r\n\t *\r\n\t * @return number\r\n\t */\r\n\tprogress() {\r\n\t\treturn this.$.animations.reduce((a, b) => a.progress() + b.progress(), 0) / this.$.animations.length;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Plays all animations.\r\n\t * Returns an \"onfinish\" promise.\r\n\t *\r\n\t * @return Promise\r\n\t */\r\n\tplay() {\r\n\t\tthis.$.playState = 'playing';\r\n\t\treturn new Promise((res, rej) => {\r\n\t\t\t// ---------------------------------\r\n\t\t\tvar alreadyResolved, alreadyRejected;\r\n\t\t\tvar handleFinish = () => {\r\n\t\t\t\tif (!alreadyResolved) {\r\n\t\t\t\t\talreadyResolved = true;\r\n\t\t\t\t\tthis.$.finishCallbacks.forEach(callback => callback());\r\n\t\t\t\t\tres();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar handleCancel = () => {\r\n\t\t\t\tif (!alreadyRejected) {\r\n\t\t\t\t\talreadyRejected = true;\r\n\t\t\t\t\tthis.$.cancelCallbacks.forEach(callback => callback());\r\n\t\t\t\t\trej();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// ---------------------------------\r\n\t\t\tvar total = this.$.animations.length;\r\n\t\t\tthis.$.animations.forEach(anim => {\r\n\t\t\t\tanim.play().then(() => {\r\n\t\t\t\t\ttotal --;\r\n\t\t\t\t\tif (!total > 0) {\r\n\t\t\t\t\t\thandleFinish();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(handleCancel);\r\n\t\t\t});\r\n\t\t\tthis.$.addCallback = entry => {\r\n\t\t\t\tif (this.$.playState === 'playing') {\r\n\t\t\t\t\ttotal ++;\r\n\t\t\t\t\tentry.play().then(() => {\r\n\t\t\t\t\t\ttotal --;\r\n\t\t\t\t\t\tif (!total > 0) {\r\n\t\t\t\t\t\t\thandleFinish();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(handleCancel);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tthis.$.removeCallback = entry => {\r\n\t\t\t\ttotal --;\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Seeks all animations to a time.\r\n\t *\r\n\t * @param int \t\tto\r\n\t * @param array\t\texcept\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tseek(to, except = []) {\r\n\t\t// The validity of the \"to\" input is handled by each anim...\r\n        this.each(anim => anim.seek(to), except);\r\n\t}\r\n\r\n\t/**\r\n\t * Reverses all animations.\r\n\t *\r\n\t * @param array\t\texcept\r\n\t *\r\n\t * @return void\r\n\t */\r\n\treverse(except = []) {\r\n\t\tthis.$.reversed = this.$.reversed ? false : true;\r\n        this.each(anim => anim.reverse(), except);\r\n\t}\r\n\t/**\r\n\t * Pauses all animations.\r\n\t *\r\n\t * @param array\t\texcept\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tpause(except = []) {\r\n\t\tthis.$.playState = 'paused';\r\n        this.each(anim => anim.pause(), except);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Finishes all animations.\r\n\t *\r\n\t * @param array\t\texcept\r\n\t *\r\n\t * @return void\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tfinish(except = []) {\r\n\t\tthis.$.playState = 'finished';\r\n        this.each(anim => anim.finish(), except);\r\n\t}\r\n\t    \t\r\n\t/**\r\n\t * Cancels all effects.\r\n\t \r\n\t * @param array\t\texcept\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tcancel(except = []) {\r\n\t\tthis.$.playState = 'cancelled';\r\n        this.each(anim => anim.cancel(), except);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears all animations.\r\n\t *\r\n\t * @param array\t\texcept\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tclear(except = []) {\r\n\t\tthis.$.animations = this.$.animations.filter(anim => {\r\n\t\t\tif (!except || !_arrFrom(except, false/*castObject*/).includes(anim.el)) {\r\n                return false;\r\n            }\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Loops thru entries, selectively.\r\n\t \r\n\t * @param array\t\texcept\r\n\t *\r\n\t * @return void\r\n\t */\r\n\teach(callback, except = []) {\r\n        this.$.animations.forEach(anim => {\r\n            if (!except || !_arrFrom(except, false/*castObject*/).includes(anim.el)) {\r\n                callback(anim);\r\n            }\r\n        });\r\n    }\r\n};","\r\n/**\r\n * Returns THE FIRST ENTRY OR A NUMBER OF ENTRIES counting forward from the begining.\r\n *\r\n * @param array \tarr\r\n * @param int\t \tamount\r\n *\r\n * @return mixed|array\r\n */\r\nexport default function(arr, amount = 1) {\r\n\tvar count = 0;\r\n\tarr.forEach(itm => {\r\n\t\tcount ++;\r\n\t});\r\n\tvar firsts = arr.slice(arr.length - count, amount);\r\n\treturn arguments.length > 1 ? firsts : firsts[0];\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport Ani from './Ani.js';\r\nimport Timeline from './Timeline.js';\r\nimport _arrFrom from '@webqit/util/arr/from.js';\r\nimport _arrLast from '@webqit/util/arr/last.js';\r\nimport _merge from '@webqit/util/obj/merge.js';\r\nimport _isNumber from '@webqit/util/js/isNumber.js';\r\nimport _isEmpty from '@webqit/util/js/isEmpty.js';\r\n\r\n/**\r\n * ---------------------------\r\n * A base class for Observer implementations.\r\n * ---------------------------\r\n */\r\n\r\nexport default class {\r\n\t\r\n\t/**\r\n\t * Accepts elements (targets) and options for,\r\n\t * and creates the, Observer instance.\r\n\t *\r\n\t * @param array     \tentries\r\n\t * @param object \t\toptions\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(entries = [], params = {}) {\r\n\t\tthis.$ = {};\r\n        this.$.entries = [];\r\n        this.$.params = params;\r\n        this.nowPlaying = new Timeline;\r\n        // -------------------\r\n        entries.forEach(el => {\r\n            this.add(el, params.timing);\r\n        });\r\n        this.queue = [];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Adda a new entry to the timeline.\r\n\t * Optionally accepts a timing for the specific entry.\r\n\t *\r\n\t * @param HTMLElement \t    el\r\n\t * @param pbject        \teffect\r\n\t * @param pbject \t        params\r\n\t * @param function        \tonfinish\r\n\t * @param function        \toncancel\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tadd(el, effect = {}, params = {}, onfinish = null, oncancel = null) {\r\n        if (!this.$.entries.filter(entry => entry.el === el).length) {\r\n            var entry = {el, effect, params, onfinish, oncancel};\r\n            this.$.entries.push(entry);\r\n            this.nowPlayingAdd(entry);\r\n        }\r\n    }\t\r\n\t\r\n\t/**\r\n\t * Removes an entry from the timeline.\r\n\t *\r\n\t * @param HTMLElement \t    el\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tremove(el) {\r\n        this.$.entries = this.$.entries.filter(entry => entry.el !== el);\r\n    }\r\n\r\n\t/**\r\n\t * Adda a qualified entry to the nowPlaying.\r\n\t *\r\n\t * @param object \t     entry\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tnowPlayingAdd(entry) {\r\n        if (!this.nowPlayingEffect) {\r\n            return;\r\n        }\r\n        // ---------------------------------\r\n        var createAnimation = (nowPlaying, entry, effect, params) => {\r\n            var animation = new Ani(entry.el, effect, params);\r\n            nowPlaying.add(animation);\r\n            if (params.oneoff) {\r\n                animation.onfinish(() => {\r\n                    nowPlaying.remove(animation);\r\n                    this.remove(entry.el);\r\n                });\r\n            }\r\n            if (entry.onfinish) {\r\n                animation.onfinish(entry.onfinish);\r\n                \r\n            }\r\n            if (entry.oncancel) {\r\n                animation.oncancel(entry.oncancel);\r\n            }\r\n        };\r\n        // ---------------------------------\r\n        var compute = (nowPlaying, queue) => {\r\n            var entry = queue[0];\r\n            var effect = !_isEmpty(entry.effect) ? entry.effect : this.nowPlayingEffect;\r\n            var params = _merge({}, this.nowPlayingParams, entry.params);\r\n            params.delay = (params.delay || 0);\r\n            if (_isNumber(params.lag) || _isNumber(params.endLag)) {\r\n                var lastAni = _arrLast(nowPlaying.$.animations);\r\n                if (lastAni) {\r\n                    lastAni.ready((anim, _params) => {\r\n                        if (_isNumber(params.lag)) {\r\n                            params.delay += _params.delay + params.lag;\r\n                        } else {\r\n                            params.delay += _params.delay + parseFloat(_params.endDelay) + _params.duration + params.endLag;\r\n                        }\r\n                        params.delay -= _isNumber(anim.currentTime) ? anim.currentTime : 0;\r\n                        createAnimation(nowPlaying, entry, effect, params);\r\n                        // ----------------\r\n                        queue.shift();\r\n                        if (queue.length) {\r\n                            compute(nowPlaying, queue);\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n            }\r\n            createAnimation(nowPlaying, entry, effect, params);\r\n            // ----------------\r\n            queue.shift();\r\n            if (queue.length) {\r\n                compute(nowPlaying, queue);\r\n            }\r\n        };\r\n        this.queue.push(entry);\r\n        if (this.queue.length === 1) {\r\n            compute(this.nowPlaying, this.queue);\r\n        }\r\n\t}\r\n\t\r\n\t/**\r\n\t * Plays an effect.\r\n\t *\r\n\t * @param object|array  effect\r\n\t * @param object\t\tparams\r\n\t *\r\n\t * @return Promise\r\n\t */\r\n\tplay(effect = {}, params = {}) {\r\n        // Ongoing animation?\r\n        // Clear only on subsequent call to this method\r\n        if (this.nowPlayingEffect) {\r\n            this.nowPlaying = new Timeline;\r\n            this.queue = [];\r\n       }\r\n        this.nowPlayingEffect = effect;\r\n        this.nowPlayingParams = params;\r\n        // Create new playlist\r\n        var entries = params.reverseList ? this.$.entries.slice().reverse() : this.$.entries;\r\n        entries.forEach(entry => {\r\n            if ((!params.except || !_arrFrom(params.except, false/*castObject*/).includes(entry.el))\r\n            && (!params.only || _arrFrom(params.only, false/*castObject*/).includes(entry.el))) {\r\n                this.nowPlayingAdd(entry);\r\n            }\r\n        });\r\n        return this.nowPlaying.play();\r\n    }\r\n\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _mergeCallback from './mergeCallback.js';\r\n\r\n/**\r\n  * Merges values from subsequent arrays/objects first array/object;\r\n  * optionally recursive\r\n  *\r\n  * @param array ...objs\r\n  *\r\n  * @return void\r\n  */\r\nexport default function(...objs) {\r\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\r\n\t\treturn true;\r\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _first from './first.js';\r\n\r\n/**\r\n * Returns THE LAST ENTRY OR A NUMBER OF ENTRIES counting forward to the end.\r\n *\r\n * @param array \tarr\r\n * @param int\t \tamount\r\n *\r\n * @return mixed|array\r\n */\r\nexport default function(arr, amount = 1) {\r\n\treturn arguments.length > 1\r\n\t\t? _first(arr.slice().reverse(), amount).reverse()\r\n\t\t: _first(arr.slice().reverse());\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport dfn from './dfn.js';\r\n\r\n/**\r\n * @definitions\r\n */\r\nexport default function(window) {\r\n\r\n\tconst { ul, li } = dfn(window);\r\n\t\r\n\t/**\r\n\t * The [ul] elements\r\n\t */\r\n\twindow.customElements.define('play-seq-ul', ul, {extends: 'ul'});\r\n    \r\n    \t\r\n\t/**\r\n\t * The [li] elements\r\n\t */\r\n\twindow.customElements.define('play-seq-li', li, {extends: 'li'});\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport Sequence from '@webqit/play-js/src/animation/Sequence.js';\r\n\r\n\r\n/**\r\n * ---------------------------\r\n * Class definitions\r\n * ---------------------------\r\n */\r\nexport default function(window) {\r\n\r\n    /**\r\n     * @list\r\n    */\r\n    const ul = class extends window.HTMLUListElement {\r\n        \r\n        /**\r\n         * Establish a common Timeline.\r\n         *\r\n         * @return void\r\n         */\r\n        connectedCallback() {\r\n            var displacement = this.getAttribute('play-seq-displacement') || 100;\r\n            var orientation = this.getAttribute('play-seq-orientation') || 'v';\r\n            var duration = this.getAttribute('play-seq-duration') || 200;\r\n            var lag = this.getAttribute('play-seq-lag') || 100;\r\n            var alpha = this.getAttribute('play-seq-alpha') || 0.5;\r\n            var orientationStartsA = {\r\n                v: ['0', displacement],\r\n                h: ['-' + displacement, '0'],\r\n            };\r\n            var orientationStartsB = {\r\n                v: ['0', '-' + displacement],\r\n                h: [displacement, '0'],\r\n            };\r\n            var sequenceA = new Sequence;\r\n            var sequenceB = new Sequence;\r\n            var params = {lag, oneoff: true, duration};\r\n            // ----------------\r\n            sequenceA.play([{\r\n                opacity: alpha,\r\n                transform: {\r\n                    translate: orientationStartsA[orientation],\r\n                }\r\n            }, {\r\n                opacity: 1,\r\n                transform: {\r\n                    translate: ['0', '0'],\r\n                }\r\n            }], params);\r\n            // -----------------\r\n            sequenceB.play([{\r\n                opacity: alpha,\r\n                transform: {\r\n                    translate: orientationStartsB[orientation],\r\n                }\r\n            }, {\r\n                opacity: 1,\r\n                transform: {\r\n                    translate: ['0', '0'],\r\n                }\r\n            }], params);\r\n            // --------------\r\n            this.intersectionObserver = new window.IntersectionObserver(entries => {\r\n                entries.forEach(entry => {\r\n                    if (entry.isIntersecting) {\r\n                        if (entry.boundingClientRect.top < 0) {\r\n                            // Top-to-bottom motion\r\n                            sequenceB.add(entry.target);\r\n                        } else {\r\n                            // Bottom-to-top motion\r\n                            sequenceA.add(entry.target);\r\n                        }\r\n                    }\r\n                });\r\n            }, {rootMargin: '50px'});\r\n        }\r\n\r\n        /**\r\n         * Adds an element to the sequence.\r\n         *\r\n         * @param HTMLElement el\r\n         *\r\n         * @return void\r\n         */\r\n        sequenceAdd(el) {\r\n            this.intersectionObserver.observe(el);\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @list-item\r\n    */\r\n    const li = class extends window.HTMLLIElement {\r\n\t\t\r\n\t\t/**\r\n\t\t * This triggers self-replacement\r\n\t\t * when so defined.\r\n\t\t *\r\n\t\t * @return void\r\n\t\t */\r\n\t\tconnectedCallback() {\r\n\t\t\tif (this.parentNode.sequenceAdd) {\r\n\t\t\t\tthis.parentNode.sequenceAdd(this);\r\n            }\r\n\t\t}\r\n\r\n    };\r\n    \r\n    return {\r\n        ul,\r\n        li,\r\n    }\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport init from './index.js';\r\n\r\n/**\r\n * @init\r\n */\r\ninit(window);"],"sourceRoot":""}