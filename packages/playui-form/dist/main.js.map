{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@webqit/util/js/isObject.js","webpack:///./node_modules/@webqit/util/js/getType.js","webpack:///./node_modules/@webqit/util/js/internals.js","webpack:///./node_modules/@webqit/util/js/isArray.js","webpack:///./node_modules/@webqit/util/js/isBoolean.js","webpack:///./node_modules/@webqit/util/js/isTypeFunction.js","webpack:///./node_modules/@webqit/util/js/isNull.js","webpack:///./node_modules/@webqit/util/js/isUndefined.js","webpack:///./node_modules/@webqit/util/js/isTypeObject.js","webpack:///./node_modules/@webqit/util/js/isEmpty.js","webpack:///./node_modules/@webqit/util/js/isFunction.js","webpack:///./node_modules/@webqit/util/js/isNumber.js","webpack:///./node_modules/@webqit/util/js/isNumeric.js","webpack:///./node_modules/@webqit/util/js/isString.js","webpack:///./node_modules/@webqit/util/arr/first.js","webpack:///./node_modules/@webqit/util/arr/last.js","webpack:///./node_modules/@webqit/util/arr/pushUnique.js","webpack:///./node_modules/@webqit/util/obj/getAllPropertyNames.js","webpack:///./node_modules/@webqit/util/obj/getPrototypeChain.js","webpack:///./node_modules/@webqit/util/obj/mergeCallback.js","webpack:///./node_modules/@webqit/util/obj/each.js","webpack:///./node_modules/@webqit/util/js/mixin.js","webpack:///./node_modules/@webqit/util/obj/merge.js","webpack:///./node_modules/@webqit/util/arr/indexOfSet.js","webpack:///./node_modules/@webqit/util/arr/after.js","webpack:///./node_modules/@webqit/util/arr/following.js","webpack:///./node_modules/@webqit/util/arr/from.js","webpack:///./node_modules/@webqit/util/js/isTypeArray.js","webpack:///./node_modules/@webqit/util/arr/difference.js","webpack:///./node_modules/@webqit/util/arr/equals.js","webpack:///./node_modules/@webqit/util/arr/flatten.js","webpack:///./node_modules/@webqit/util/arr/intersect.js","webpack:///./node_modules/@webqit/util/arr/startsWith.js","webpack:///./node_modules/@webqit/util/arr/unique.js","webpack:///./node_modules/@webqit/observer/src/core/utils.js","webpack:///./node_modules/@webqit/observer/src/core/Firebase.js","webpack:///./node_modules/@webqit/observer/src/core/Fireable.js","webpack:///./node_modules/@webqit/observer/src/core/Interceptor.js","webpack:///./node_modules/@webqit/observer/src/core/Action.js","webpack:///./node_modules/@webqit/observer/src/core/Interceptors.js","webpack:///./node_modules/@webqit/observer/src/actors/unproxy.js","webpack:///./node_modules/@webqit/observer/src/actions/_exec.js","webpack:///./node_modules/@webqit/observer/src/actions/apply.js","webpack:///./node_modules/@webqit/observer/src/actions/construct.js","webpack:///./node_modules/@webqit/util/str/toTitle.js","webpack:///./node_modules/@webqit/observer/src/core/Event.js","webpack:///./node_modules/@webqit/observer/src/core/Observer.js","webpack:///./node_modules/@webqit/util/arr/any.js","webpack:///./node_modules/@webqit/observer/src/core/Mutation.js","webpack:///./node_modules/@webqit/observer/src/core/Observers.js","webpack:///./node_modules/@webqit/observer/src/actions/get.js","webpack:///./node_modules/@webqit/observer/src/reactions/observe.js","webpack:///./node_modules/@webqit/observer/src/connectors/link.js","webpack:///./node_modules/@webqit/observer/src/connectors/build.js","webpack:///./node_modules/@webqit/observer/src/reactions/unobserve.js","webpack:///./node_modules/@webqit/observer/src/connectors/unlink.js","webpack:///./node_modules/@webqit/observer/src/actions/has.js","webpack:///./node_modules/@webqit/observer/src/actions/_setOrDefine.js","webpack:///./node_modules/@webqit/observer/src/actions/defineProperty.js","webpack:///./node_modules/@webqit/observer/src/actions/deleteProperty.js","webpack:///./node_modules/@webqit/observer/src/actions/getOwnPropertyDescriptor.js","webpack:///./node_modules/@webqit/observer/src/actions/getPrototypeOf.js","webpack:///./node_modules/@webqit/observer/src/actions/isExtensible.js","webpack:///./node_modules/@webqit/observer/src/actions/ownKeys.js","webpack:///./node_modules/@webqit/observer/src/actions/preventExtensions.js","webpack:///./node_modules/@webqit/observer/src/actions/set.js","webpack:///./node_modules/@webqit/observer/src/actions/setPrototypeOf.js","webpack:///./node_modules/@webqit/observer/src/index.js","webpack:///./node_modules/@webqit/observer/src/actors/proxy.js","webpack:///./node_modules/@webqit/util/js/isClass.js","webpack:///./src/utils/util.js","webpack:///./src/schema-mixins.js","webpack:///./src/playui-mixins.js","webpack:///./src/playui-element-mixins.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Array","isArray","val","internals","obj","namespaces","globalThis","WebQitInternalsRegistry","Map","_ns","_itnls","itnls","set","shift","arguments","length","undefined","keys","toString","Number","isNaN","String","count","arr","forEach","itm","firsts","slice","amount","reverse","items","indexOf","push","keysAll","until","prototypalChain","getPrototypeOf","getOwnPropertyNames","mergeCallback","objs","callback","deepProps","isReplace","withSymbols","depth","obj1","Error","obj2","valAtObj1","valAtObj2","getOwnPropertyDescriptor","e","returnValue","k","parseFloat","indexOfSet","a","b","fromInex","last","reduce","cursors","index","cursorA","cursorB","_cursorB","_cursors","concat","subsetIndex","castObject","values","arr2","filter","val1","val2","equals","dotSafe","join","prev","startsWith","self","paths2D","paths","pathsIs2D","multiple","path","map","DotSafePath","resolve","every","v","includes","yes","pathsIsDynamic","pathArray","seg","target","this","fireables","currentlyFiring","fireable","_fireable","dfn","match","fireableFilter","fireableTags","params","tags","dfnFilter","dfnTags","originalHandler","handler","type","createIfNotExists","namespace","__namespace","ImplementationClass","WebQitObserverNamespaceRegistry","has","Fireable","disconnected","event","next","recieved","seal","super","add","action","defaultHandler","_args","interceptor","fire","args","pop","_getFirebase","_namespace","interceptors","_val","Reflect","payload","getFirebase","_exec","thisArgument","argumentsList","newTarget","str","replace","txt","charAt","toUpperCase","strict","substr","toLowerCase","cancellable","_","propagationStopped","defaultPrevented","promisesInstance","promises","promise","Promise","all","rspns","proms","isEvent","stopPropagation","preventDefault","waitUntil","filters2D","filtersIsOriginally2D","filtersIsDynamic","changes","delta","prevTest","diff","oldValue","evt","matches","observerPathArray","observerPathArray_Resolved","_seg","subtree","suptree","changesObject","respondWith","originalSubject","buffers","observer","receiver","_keys","defaultGet","_value","touch","related","existing","observers","isUserObject","build","unique","remove","observe","eventObject","_changes","src","field","linkTag","_event","eventTypeReturn","_paths2D","rootLevelKeysToObserve","subLevelKeysToObserve","subBuild","_isFunction","Function","window","removeMatches","unobserve","keysOrPayload","handleSet","detail","descriptor","define","isUpdate","defaultSet","_success","restore","success","unlink","events","successfulEvents","successCount","_setOrDefine","defaultDel","proxy","Proxy","apply","construct","propertyKey","attributes","deleteProperty","proxyAutoBinding","test","isExtensible","ownKeys","preventExtensions","setPrototypeOf","_isTextMediaType","contentMediaType","_Schema","__Schema","jsonSchema","instance","validate","valid","_ObjectOrArray","__ObjectOrArray","validity","_validateMin","_validateMax","error","violation","_Object","__Object","instanceHint","propertyNameSchema","propertyNames","additionalProperties","isRequired","propertyName","propertySchema","properties","_patternPropertiesMatch","required","instanceProperties","requiringProp","dependentRequired","masterHint","master","patternProperties","pattern","RegExp","_validateRequired","_validateDependentRequired","maxProperties","minProperties","_Array","__Array","itemIndex","itemSchema","prefixItems","_validateUnique","_validateContains","min","max","desc","maxItems","minItems","uniqueItems","contains","passes","item","__validateContains","minContains","maxContains","_String","__String","_Num","__Num","_Number","__Number","_Integer","__Integer","isInteger","_Boolean","__Boolean","_Null","__Null","_Root","__Root","nodeRemovalListeners","node","listeners","method","url","options","pair","schema","ownerWidget","attrs","state","title","replaceAll","const","default","readOnly","readonly","alert","message","json","_ParentRoot","__ParentRoot","childSchema","_Collection","__Collection","childEntries","mutations","execNodeRemoval","onNodeRemoval","console","warn","getPropertySchema","display","deriveChildEntry","promptPropertyName","getPropertyNameSchema","_propertyName","extend","data","autoExtend","childEntry","_data","details","_alert","_Multiple","__Multiple","splice","getItemSchema","confirm","msg","done","parseInt","remoteDelete","deleteUrl","remoteAction","then","res","ok","async","entry","_Multiple2","__Multiple2","testSchema","enum","entries","widgetLineContentLengthLimit","lineContentLengthLimit","some","Math","minLength","maxLength","_Enum","__Enum","enumEntries","schemaName","constructor","getSchemaName","runSchemaEnum","enumValues","enumNames","label","enumerate","runSchemaEnumFetch","remoteFetch","enumFetching","headers","accept","reject","statusText","_entries","id","selected","enumData","clearByTag","placeholder","enumTag","deriveEnumEntry","runSelect","_Enum2","__Enum2","_File","__File","filesList","_isFileSchema","_jsonSchema","format","contentEncoding","schemaType","$schema","fileData","filesData","fallbackFilesList","_enumTag","populate","_entry","file","deriveFileEntry","files","uploads","_Input","__Input","examples","_Editor","__Editor","_Text","__Text","maxlength","minlength","col","exclusiveMaximum","maximum","exclusiveMinimum","minimum","multipleOf","step","_State","__State","checked","_ItemScope","__ItemScope","setItemIndex","indexProperty","HTMLElement","MutationObserver","removedNodes","childList","remoteActionError","fetch","catch","$","html","description","attr","class","focus","ret","renderBasic","connectedCallback","adder","adderAction","removeEventListener","addEventListener","template","hasAttribute","customElements","getAttribute","localName","cloneNode","content","append","primaryKey","_MultipleRoot","__MultipleRoot","input","_EnumRoot","__EnumRoot","enumEntry","HTMLSelectElement","document","createElement","_enumEntry","setAttribute","dropArea","from","_handlerDrag","dragging","dataTransfer","DataTransfer","removeAttribute","eventName","render","testFile","_file","defaultInput","preview","previewFile","_FilePreview","__FilePreview","deleter","deleterAction","response","blob","File","split","size","revokeURL","el","URL","revokeObjectURL","img","onload","createObjectURL","media","onloadstart","play","muted","classList","SubscriptElement","WebQit","OOHTML","FormWidget","HTMLFormElement","extends","CollectionWidget","HTMLFieldSetElement","MultipleWidget","Multiple2Widget","EnumWidget","HTMLDivElement","Enum2Widget","FileWidget","EditorWidget","TextWidget","NumberWidget","StateWidget","CollectionItemScopeWidget","MultipleItemScopeWidget","Multiple2ItemScopeWidget","EnumItemScopeWidget","Enum2ItemScopeWidget","FileItemScopeWidget","EditorItemScopeWidget","TextItemScopeWidget","NumberItemScopeWidget","StateItemScopeWidget","FilePreview"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\n/**\n * Tells if val is pure object.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\n};\n","\n/**\n * Returns the val's type.\n *\n * @param string \tval\n *\n * @return string\n */\nexport default function(val) {\n\treturn typeof val;\n};\n","\n/**\n * Creates and/or returns an \"internals\" object for the given object.\n * \n * @param Any obj\n * @param String namespace\n * \n * @return Object\n */\nexport default function internals(obj, ...namespaces) {\n    if (!globalThis.WebQitInternalsRegistry) {\n        globalThis.WebQitInternalsRegistry = new Map;\n    }\n    var itnls = globalThis.WebQitInternalsRegistry.get(obj);\n    if (!itnls) {\n        itnls = new Map;\n        if (namespaces[0] === false) {\n            // FALSE means: Return orphan Map if not exists\n            return itnls;\n        }\n        globalThis.WebQitInternalsRegistry.set(obj, itnls);\n    }\n    var _ns, _itnls;\n    while ((_ns = namespaces.shift())) {\n        if ((_itnls = itnls) && !(itnls = itnls.get(_ns))) {\n            itnls = new Map;\n            if (namespaces[0] === false) {\n                // FALSE means: Return orphan Map if not exists\n                return itnls;\n            }\n            _itnls.set(_ns, itnls);\n        }\n    }\n    return itnls;\n}","\n/**\n * Tells if val is of type \"array\".\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val);\n};\n","\n/**\n * Tells if val is undefined or is of type \"boolean\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === true || val === false;\n};\n","\n/**\n * Tells if val is of type \"function\".\n * This holds true for both regular functions and classes.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn typeof val === 'function';\n};\n","\n/**\n * Tells if val is undefined or is null.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === null || val === '';\n};\n","\n/**\n * Tells if val is undefined or is of type \"undefined\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\n};\n","\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"object\".\n * This holds true for anything object, including built-ins.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\n};\n","\n/**\n * @imports\n */\nimport _isNull from './isNull.js';\nimport _isUndefined from './isUndefined.js';\nimport _isTypeObject from './isTypeObject.js';\n\n/**\n * Tells if val is empty in its own type.\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\n * objects without keys, empty arrays.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\n};\n","\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"function\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\n};\n","\n/**\n * Tells if val is of type \"number\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof Number || (typeof val === 'number');\n};\n","\n/**\n * @imports\n */\nimport _isNumber from './isNumber.js';\n/**\n * Tells if val is of type \"string\" or a numeric string.\n * This holds true for both numbers and numeric strings.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\n};\n","\n/**\n * Tells if val is of type \"string\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\n};\n","\n/**\n * Returns THE FIRST ENTRY OR A NUMBER OF ENTRIES counting forward from the begining.\n *\n * @param array \tarr\n * @param int\t \tamount\n *\n * @return mixed|array\n */\nexport default function(arr, amount = 1) {\n\tvar count = 0;\n\tarr.forEach(itm => {\n\t\tcount ++;\n\t});\n\tvar firsts = arr.slice(arr.length - count, amount);\n\treturn arguments.length > 1 ? firsts : firsts[0];\n};\n","\n/**\n * @imports\n */\nimport _first from './first.js';\n\n/**\n * Returns THE LAST ENTRY OR A NUMBER OF ENTRIES counting forward to the end.\n *\n * @param array \tarr\n * @param int\t \tamount\n *\n * @return mixed|array\n */\nexport default function(arr, amount = 1) {\n\treturn arguments.length > 1\n\t\t? _first(arr.slice().reverse(), amount).reverse()\n\t\t: _first(arr.slice().reverse());\n};\n","\n/**\n * Adds an item if not already exist.\n *\n * @param array \tarr\n * @param array\t \t...itms\n *\n * @return array\n */\nexport default function(arr, ...items) {\n\titems.forEach(itm => {\n\t\tif (arr.indexOf(itm) < 0) {\n\t\t\tarr.push(itm);\n\t\t}\n\t});\n\treturn arr;\n};\n","\n/**\n * @imports\n */\nimport _pushUnique from '../arr/pushUnique.js';\nimport _getPrototypeChain from './getPrototypeChain.js';\n\n/**\n * Eagerly retrieves object members all down the prototype chain.\n *\n * @param object\t \tobj\n * @param object\t \tuntil\n *\n * @return array\n */\nexport default function(obj, until) {\n\tvar keysAll = [];\n\t_getPrototypeChain(obj, until).forEach(obj => {\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\n\t});\n\treturn keysAll;\n};\n","\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the prototype chain.\n *\n * @param object \t\tobj\n * @param object\t \tuntil\n *\n * @return bool\n */\nexport default function(obj, until) {\n\tuntil = until || Object.prototype;\n\tuntil = until && !_isArray(until) ? [until] : until;\n\t// We get the chain of inheritance\n\tvar prototypalChain = [];\n\tvar obj = obj;\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\n\t\tprototypalChain.push(obj);\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\n\t}\n\treturn prototypalChain;\n};\n","\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isObject from '../js/isObject.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _getAllPropertyNames from './getAllPropertyNames.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = false) {\n\tvar depth = 0;\n\tvar obj1 = objs.shift();\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\n\t\tdepth = obj1;\n\t\tobj1 = objs.shift();\n\t}\n\tif (!objs.length) {\n\t\tthrow new Error('_merge() requires two or more array/objects.');\n\t}\n\tobjs.forEach((obj2, i) => {\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\n\t\t\treturn;\n\t\t}\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.getOwnPropertyNames(obj2)).forEach(key => {\n\t\t\tif (!callback(key, obj1, obj2, i)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar valAtObj1 = obj1[key];\n\t\t\tvar valAtObj2 = obj2[key];\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \n\t\t\t&& (depth === true || depth > 0)) {\n\t\t\t\t// RECURSE...\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\n\t\t\t} else {\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\n\t\t\t\t\tif (isReplace) {\n\t\t\t\t\t\tobj1[key] = valAtObj2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj1.push(valAtObj2);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// In case we're setting a read-only property\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (withSymbols) {\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\treturn obj1;\n};\n","\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\n\n/**\n * Loops thru obj flatly with a callback function.\n * Stops when callback returns a non-undefined value.\n *\n * @param array|object \t\t\tobj \t\t\tThe array or object to iterate.\n * @param function \t\t\t\tcallback \t\tThe callback function.\n *\n * @return mixed|null\t\t\tAny non-null return from callback\n */\nexport default function(obj, callback) {\n\tvar returnValue = undefined;\n\tif (_isTypeObject(obj)) {\n\t\tObject.keys(obj).forEach((k, i) => {\n\t\t\tif (returnValue !== false) {\n\t\t\t\treturnValue = callback(_isNumeric(k) ? parseFloat(k) : k, obj[k], i);\n\t\t\t}\n\t\t});\n\t}\n\treturn returnValue;\n};\n","\n/**\n * @imports\n */\nimport _isArray from './isArray.js';\nimport _isFunction from './isFunction.js';\nimport _arrLast from '../arr/last.js';\nimport _mergeCallback from '../obj/mergeCallback.js';\nimport _each from '../obj/each.js';\n\n/**\n * A multi-inheritance implementstion.\n *\n * @param array\t \t...classes\n *\n * @return object\n */\nconst Implementations = new Map;\nexport default function mixin(...classes) {\n\t\n\tvar Traps = {};\n\tvar RetrnDirective = 'last';\n\tif (_isArray(arguments[0])) {\n\t\tclasses = arguments[0];\n\t\tTraps = arguments[1];\n\t\tif (arguments[2]) {\n\t\t\tRetrnDirective = arguments[2];\n\t\t}\n\t}\n\t// -----------------------\n\tvar Base = _arrLast(classes);\n\tvar supersMap = {};\n\t// -----------------------\n\t// Create the Mixin\n\t// ...with a special constructor.\n\t// -----------------------\n\tvar Mixin = class {\n\t\tconstructor(...args) {\n\t\t\tclasses.forEach((_class, i) => {\n\t\t\t\tReflect.construct(_class, args, this.constructor);\n\t\t\t});\n\t\t}\n\t};\n\t// -----------------------\n\t// Implement a special handler of the \"instanceof\" operator.\n\t// -----------------------\n\tclasses.forEach((_class, i) => {\n\t\tif (!Implementations.has(_class)) {\n\t\t\tImplementations.set(_class, []);\n\t\t\ttry {\n\t\t\t\tvar originalInstanceChecker = _class[Symbol.hasInstance];\n\t\t\t\tObject.defineProperty(_class, Symbol.hasInstance, {value: function(instance) {\n\t\t\t\t\tif (originalInstanceChecker.call(this, instance)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (Implementations.has(this)) {\n\t\t\t\t\t\treturn Implementations.get(this).reduce((yes, _mixin) => yes || (instance instanceof _mixin), false);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}});\n\t\t\t} catch (e) {\n\t\t\t\tthrow new Error('Cannot mixin the class at index ' + i + '. Class may already have been configured for instance checks somewhere.');\n\t\t\t}\n\t\t}\n\t\tImplementations.get(_class).push(Mixin);\n\t});\n\t// ---------------------\n\t// Mixin both static and instance properties and methods\n\t// ---------------------\n\tclasses.forEach(_class => {\n\t\t// Copy const members\n\t\t_mergeCallback([Mixin, _class], (key, obj1, obj2) => ![\n\t\t\t'name', 'prototype', 'prototypes', 'length', 'caller', 'callee', 'arguments', 'constructor', 'apply', \"bind\", 'call', 'toString',/**/\n\t\t].includes(key), true/*deepProps*/);\n\t\t_mergeCallback([Mixin.prototype, _class.prototype], (key, obj1, obj2) => {\n\t\t\tif (!['prototype', 'prototypes'].includes(key)) {\n\t\t\t\tif (_isFunction(obj2[key])) {\n\t\t\t\t\tif (_isArray(supersMap[key])) {\n\t\t\t\t\t\tsupersMap[key].push(obj2[key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsupersMap[key] = [obj2[key]];\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}, true/*deepProps*/);\n\t});\n\t// Extend (proxy) methods\n\t_each(supersMap, (name, supers) => {\n\t\tif (name === 'constructor') {\n\t\t\treturn;\n\t\t}\n\t\t// NOTE: this must not be defined as an arrow function\n\t\t// for the benefit of the \"this\".\n\t\tMixin.prototype[name] = function(...args) {\n\t\t\tif (Object.hasOwnProperty(Traps, name) && _isFunction(Traps[name])) {\n\t\t\t\t// Wrap a call to the trap...\n\t\t\t\t// So mixin supers are passed to traps\n\t\t\t\treturn Traps[name].call(this, supers, ...args);\n\t\t\t} else {\n\t\t\t\t// Call each super and return\n\t\t\t\t// the last one's return value\n\t\t\t\tvar supersReturnValues = [];\n\t\t\t\tsupers.forEach(supr => {\n\t\t\t\t\tsupersReturnValues.push(supr.call(this, ...args));\n\t\t\t\t})\n\t\t\t\treturn _arrLast(supersReturnValues);\n\t\t\t}\n\t\t};\n\t});\n\treturn Mixin;\n};","\n/**\n * @imports\n */\nimport _mergeCallback from './mergeCallback.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function(...objs) {\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\n\t\treturn true;\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\n};\n","\n/**\n * Returns the index of subset array \"b\" in array \"a\".\n * \n * @param {Array} a \n * @param {Array} b \n * @param {Int} fromInex \n * @param {Bool} last\n * \n * @returns Int\n */\nexport default function indexOfSet(a, b, fromInex = null, last = false) {\n    if (b.length > a.length) return -1;\n\treturn (typeof fromInex === 'number' ? (last ? a.slice(0, (fromInex + 1) + (fromInex < 0 ? a.length : 0)) : a.slice(fromInex)) : a).reduce((cursors, value, i) => {\n        var [ index, cursorA, cursorB ] = cursors;\n        if (!last && index > -1) {\n            return [index, cursorA, cursorB];\n        }\n        var _cursorB = cursorB + 1;\n        var _cursors = value === b[_cursorB] ? (_cursorB === 0 ? [i, 0] : [cursorA, _cursorB]) : [-1, -1];\n        if (_cursors[1] === b.length - 1) {\n            // Reset B cursor\n            _cursors[1] = -1;\n            if (_cursors[0] > -1) {\n                return [_cursors[0]].concat(_cursors);\n            }\n        }\n        return [index].concat(_cursors);\n    }, [-1, -1, -1])[0] + (last || typeof fromInex !== 'number' ? 0 : (fromInex > -1 ? fromInex : a.length - fromInex));\n}","\n/**\n * @imports\n */\nimport _after from '../str/after.js';\nimport _indexOfSet from './indexOfSet.js';\n\n/**\n * Returns members of array \"a\" after the array \"b\" subset.\n *\n * @param {Array} a \n * @param {Array} b \n * @param {Int} fromInex \n * @param {Bool} last \n * \n * @returns Bool\n */\nexport default function after(a, b, fromInex = null, last = false) {\n\tvar subsetIndex = _indexOfSet(a, b, fromInex, last);\n\treturn subsetIndex === -1 ? [] : a.slice(subsetIndex + b.length);\n}","\n/**\n * @imports\n */\nimport _isUndefined from '../js/isUndefined.js';\nimport _isFunction from '../js/isFunction.js';\n\n/**\n * 1. Returns the ENTRY following (either the FIRST or the LAST instance of) the reference.\n * 2. Returns A NUMBER OF ENTRIES counting forwards from (either the FIRST or the LAST instance of) the given reference.\n *\n * @param array \t\tarr\n * @param mixed\t \t\treference\n * @param int|bool \t\tlength\n * @param bool|function\t loop\n * @param bool\t \t\tlastReference\n *\n * @return mixed|array\n */\nexport default function(arr, reference, length = false, loop = false, lastReference = false) {\n\tif (arr.indexOf(reference) === -1) {\n\t\treturn length ? [] : undefined;\n\t}\n\tvar amount = length === true ? arr.length - 1 : (length === false ? 1 : length);\n\tvar from = lastReference ? arr.lastIndexOf(reference) + 1 : arr.indexOf(reference) + 1;\n\tvar after = !_isUndefined(reference) ? arr.slice(from, from + amount) : [];\n\tif (loop && after.length < amount && after.length < arr.length) {\n\t\tif (!_isFunction(loop) || loop(amount - after.length)) {\n\t\t\tafter = after.concat(arr.slice(0, amount - after.length));\n\t\t}\n\t};\n\treturn length ? after : after[0];\n};\n","\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isTypeArray from '../js/isTypeArray.js';\nimport _isEmpty from '../js/isEmpty.js';\nimport _isObject from '../js/isObject.js';\n\n/**\n * Casts an array-like object to an array.\n *\n * @param mixed \tval\n * @param bool\t \tcastObject\n *\n * @return array\n */\nexport default function(val, castObject = true) {\n\tif (_isArray(val)) {\n\t\treturn val;\n\t};\n\tif (!castObject && _isObject(val)) {\n\t\treturn [val];\n\t};\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\n\t\treturn [];\n\t};\n\tif (_isTypeArray(val)) {\n\t\treturn Array.prototype.slice.call(val);\n\t};\n\tif (_isObject(val)) {\n\t\treturn Object.values(val);\n\t};\n\treturn [val];\n};\n","\n/**\n * @imports\n */\nimport _isString from './isString.js';\nimport _isUndefined from './isUndefined.js';\n\n/**\n * Tells if val is \"array-like\".\n * This holds true for anything that has a length property.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !_isString(val) && !_isUndefined(val.length);\n};\n","\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the difference of two arrays;\n * optionally using a custom matching function.\n *\n * @param array \tarr\n * @param array\t \tarr2\n * @param function \tcallback\n *\n * @return array\n */\nexport default function(arr, arr2, callback = null) {\n\treturn !_isArray(arr2) ? [] : arr.filter(val1 => callback \n\t\t? arr2.filter(val2 => callback(val1, val2)).length \n\t\t: arr2.indexOf(val1) === -1\n\t);\n};\n","\n/**\n * Tells if two arrays are shallow equals.\n * \n * @param {Array} a \n * @param {Array} b \n * @param {Bool} dotSafe\n * \n * @returns Bool\n */\nexport default function equals(a, b, dotSafe = null) {\n\treturn dotSafe || (dotSafe !== false && a.dotSafe && b.dotSafe) \n\t\t? a.join('.') === b.join('.') \n\t\t: a.length === b.length && a.reduce((prev, value, i) => prev && value === b[i], true);\n}","\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isObject from '../js/isObject.js';\nimport _isNumeric from '../js/isNumeric.js';\n\n/**\n * Flattens a nested array to the given depth.\n *\n * @param array \tarr\n * @param int \t \tdepth\n * @param bool \t \twithObjects\n *\n * @return array\n */\nconst _flatten = function(arr, depth = 1, withObjects = true) {\n\tif (!_isNumeric(depth) || depth <= 0) {\n\t\treturn arr;\n\t};\n\tif (!_isArray(arr) && _isObject(arr) && withObjects) {\n\t\tarr = Object.values(arr);\n\t};\n\tif (!_isArray(arr)) {\n\t\treturn arr;\n\t};\n\treturn arr.reduce((acc, val) => _isArray(val) || (_isObject(val) && withObjects) \n\t\t? acc.concat(_flatten(!_isArray(val) ? Object.values(val) : val, depth - 1, withObjects)) \n\t\t: acc.concat(val), []);\n};\n\n/**\n * @exports\n */\nexport default _flatten;","\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the intersection of two arrays;\n * optionally using a custom matching function.\n *\n * @param array \tarr\n * @param array\t \tarr2\n * @param function \tcallback\n *\n * @return array\n */\nexport default function(arr, arr2, callback = null) {\n\treturn !_isArray(arr2) ? [] : arr.filter(val1 => callback \n\t\t? arr2.filter(val2 => callback(val1, val2)).length \n\t\t: arr2.indexOf(val1) !== -1\n\t);\n};\n","\n/**\n * Tells if the array \"a\" starts with array \"b\".\n *\n * @param {Array} a \n * @param {Array} b \n * @param {Bool} dotSafe \n * \n * @returns Bool\n */\nexport default function startsWith(a, b, dotSafe = null) {\n\treturn dotSafe || (dotSafe !== false && a.dotSafe && b.dotSafe) \n\t\t? (a.join('.') + '.').startsWith(b.join('.') + '.') \n\t\t: b.reduce((prev, value, i) => prev && value === a[i], true);\n}","\n/**\n * Returns a list of unique items.\n *\n * @param array\t \t\t\t\tarr\n *\t *\n * @return array\n */\nexport default function(arr) {\n\tconst distinct = (value, index, self) => {\n\t\treturn self.indexOf(value) === index;\n\t};\n\treturn arr.filter(distinct);\n};\n","\n/**\n * @imports\n */\nimport { _isArray } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom, _all } from '@webqit/util/arr/index.js';\n\n\n/**\n *  Returns paths in 2-dimensional form.\n * \n * - key                    => [ [key] ]\n * - [key]                  => [ [key] ]\n * - [key, key2]            => [ [key, key2] ]\n * - [ [key] ]              => [ [key] ]\n * - [ [key1, key2] ]       => [ [key1, key2] ]\n * \n * @param Array|String paths\n * \n * @return Array\n */\nexport function paths2D(paths) {\n\treturn (pathsIs2D(paths) ? paths : (_arrFrom(paths).length ? [paths] : []))\n\t\t.reduce((multiple, path) => multiple.concat([_arrFrom(path)]), [])\n\t\t.map(path => DotSafePath.resolve(path));\n}\nexport class DotSafePath extends Array {\n\tstatic resolve(path) {\n\t\t// Note the concat() below...\n\t\t// the spread operator: new DotSafePath(...path) doesn't work when path is [0].\n\t\treturn path.every(v => !(v + '').includes('.')) ? (new DotSafePath).concat(path) : path;\n\t}\n\tget dotSafe() { return true }\n}\n\n/**\n * OTHER HELPERS\n */\n\nexport function pathsIs2D(paths) {\n\treturn _arrFrom(paths).reduce((yes, path) => yes || _isArray(path), false);\n}\nexport function pathsIsDynamic(pathArray) {\n\t// Note that trying to simply match empty slots, as in: pathArray.filter(seg => !seg && seg !== 0).length\n\t// doesn't work when the empty slots are really empty slote, as in: [ 'key', <1 empty item> ]\n\treturn pathArray.filter(seg => seg || seg === 0).length !== pathArray.length;\n}\nexport function paths2DIsDynamic(paths) {\n\treturn paths.filter(pathArray => pathsIsDynamic(_arrFrom(pathArray))).length > 0;\n}\n\n","\n/**\n * @imports\n */\nimport { _isTypeObject, _isFunction, _getType, _internals } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom, _intersect, _equals as _arrEquals } from '@webqit/util/arr/index.js';\nimport { paths2D } from './utils.js'\n\n/**\n * ---------------------------\n * The Firebase class\n * ---------------------------\n */\n\nexport default class Firebase {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param object\ttarget\n\t * \n\t * @return void\n\t */\n\tconstructor(target) {\n\t\tthis.target = target;\n\t\tthis.fireables = [];\n\t\tthis.currentlyFiring = [];\n\t}\n\t\n\t/**\n\t * Adds an Fireable instance\n\t * with optional tags.\n\t *\n\t * @param Fireable\t\t\tfireable\n\t *\n\t * @return Fireable\n\t */\n\tadd(fireable) {\n\t\tthis.fireables.push(fireable);\n\t\treturn fireable;\n\t}\n\t\n\t/**\n\t * Removes fireables by instance.\n\t *\n\t * @param Fireable\t\t\tfireable\n\t *\n\t * @return void\n\t */\n\tremove(fireable) {\n\t\tthis.fireables = this.fireables.filter(_fireable => _fireable !== fireable);\n\t}\n\t\n\t/**\n\t * Removes fireables by definition.\n\t *\n\t * @param object\t\t\tdfn\n\t *\n\t * @return void\n\t */\n\tremoveMatches(dfn) {\n\t\tthis.match(dfn).forEach(fireable => {\n\t\t\tthis.fireables = this.fireables.filter(_fireable => _fireable !== fireable);\n\t\t});\n\t}\n\t\n\t/**\n\t * Finds fireables by definition.\n\t *\n\t * @param object\t\t\tdfn\n\t *\n\t * @return array\n\t */\n\tmatch(dfn) {\n\t\treturn this.fireables.filter(fireable => {\n\t\t\tvar fireableFilter = paths2D(fireable.filter);\n\t\t\tvar fireableTags = _arrFrom((fireable.params || {}).tags);\n\t\t\t// -----------------------\n\t\t\tvar dfnFilter = paths2D(dfn.filter);\n\t\t\tvar dfnTags = _arrFrom((dfn.params || {}).tags);\n\t\t\t// -----------------------\n\t\t\treturn (!dfn.originalHandler || fireable.handler === dfn.originalHandler)\n\t\t\t\t&& (!dfnFilter.length || _arrEquals(dfnFilter, fireableFilter))\n\t\t\t\t&& (!dfnTags.length || (dfnTags.length === fireableTags.length && _intersect(fireableTags, dfnTags).length === dfnTags.length));\n\t\t});\n\t}\n\t\t\n\t/**\n\t * Returns a observer-specific object embedded on an element.\n\t *\n\t * @param string\t\ttype\n\t * @param array|object\ttarget\n\t * @param bool      \tcreateIfNotExists\n\t * @param string      \tnamespace\n\t *\n\t * @return Firebase\n\t */\n\tstatic _getFirebase(type, target, createIfNotExists = true, namespace = this.__namespace) {\n\t\tif (!_isTypeObject(target)) {\n\t\t\tthrow new Error('Subject must be of type object; \"' + _getType(target) + '\" given!');\n\t\t}\n\t\tvar ImplementationClass = this;\n\t\tif (namespace && globalThis.WebQitObserverNamespaceRegistry.has(type + '-' + namespace)) {\n\t\t\tImplementationClass = globalThis.WebQitObserverNamespaceRegistry.get(type + '-' + namespace);\n\t\t\ttype += '-' + namespace\n\t\t}\n\t\tif (!_internals(target, 'firebases').has(type) && createIfNotExists) {\n\t\t\t_internals(target, 'firebases').set(type, new ImplementationClass(target));\n\t\t}\n\t\treturn _internals(target, 'firebases').get(type);\n\t}\n\n\t/**\n\t * Extend a Fireable Class with a namespace.\n\t *\n\t * @param string\t\tnamespace\n\t * @param class      \tImplementationClass\n\t *\n\t * @return void|class\n\t */\n\tstatic _namespace(type, namespace, ImplementationClass = null) {\n\t\ttype += '-' + namespace;\n\t\tif (arguments.length === 2) {\n\t\t\treturn globalThis.WebQitObserverNamespaceRegistry.get(type);\n\t\t}\n\t\tif (!(ImplementationClass.prototype instanceof this)) {\n\t\t\tthrow new Error(`The implementation of the namespace ${this.name}.${namespace} must be a subclass of ${this.name}.`);\n\t\t}\n\t\tglobalThis.WebQitObserverNamespaceRegistry.set(type, ImplementationClass);\n\t\tImplementationClass.__namespace = namespace;\n\t}\n}\n\nif (!globalThis.WebQitObserverNamespaceRegistry) {\n\tglobalThis.WebQitObserverNamespaceRegistry = new Map();\n}\n","\n/**\n * ---------------------------\n * The Fireable class\n * ---------------------------\n */\n\nexport default class Fireable {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param object|array\t\ttarget\n\t * @param object\t\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tthis.target = target;\n\t\tthis.handler = dfn.handler;\n\t\tthis.filter = dfn.filter;\n\t\tthis.params = dfn.params;\n\n\t}\n\n\t/**\n\t * Sets a \"disconnected\" flag on the Fireable.\n\t *\n\t * @return void\n\t */\n\tdisconnect() {\n\t\tthis.disconnected = true;\n\t}\n}","\n/**\n * @imports\n */\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { _intersect } from '@webqit/util/arr/index.js';\nimport Fireable from './Fireable.js';\n\n/**\n * ---------------------------\n * The Trap class\n * ---------------------------\n */\n\nexport default class Interceptor extends Fireable {\n\t\n\t/**\n\t * Calls the observer's handler function\n\t * on matching with the event's fields.\n\t *\n\t * @param Event\t\t\t \t\t\tevent\n\t * @param function\t\t\t\t\tnext\n\t * @param mixed\t\t\t\t\t \trecieved\n\t *\n\t * @return void\n\t */\n\tfire(event, next, recieved) {\n\t\tif (this.disconnected || (this.filter && !_intersect(_arrFrom(this.filter), [event.type]).length)) {\n\t\t\treturn next(...Array.prototype.slice.call(arguments, 2));\n\t\t}\n\t\treturn this.handler(event, recieved, next);\n\t}\n}","\n/**\n * @imports\n */\nimport { _each } from '@webqit/util/obj/index.js';\n\n/**\n * ---------------------------\n * The QueryEvent class\n * ---------------------------\n */\n\nexport default class Action {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\ttarget\n\t * @param object\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tthis.target = target;\n\t\tif (!dfn.type) {\n\t\t\tthrow new Error('Action type must be given in definition!');\n\t\t}\n\t\t_each(dfn, (key, value) => {\n\t\t\tObject.defineProperty(this, key, {value, enumerable:true});\n\t\t});\n\t\tObject.seal(this);\n\t}\n}","\n/**\n * @imports\n */\nimport Firebase from './Firebase.js';\nimport Interceptor from './Interceptor.js';\nimport Action from './Action.js';\n\n/**\n * ---------------------------\n * The Reactive class\n * ---------------------------\n */\n\nexport default class Interceptors extends Firebase {\n\t\n\t/**\n\t * @inheritdoc\n\t */\n\tadd(dfn) {\n\t\treturn super.add(new Interceptor(this.target, dfn));\n\t}\n\n\t/**\n\t * Fires all interceptors with the given action.\n\t *\n\t * @param Action\t\t\taction\n\t * @param function\t\t\tdefaultHandler\n\t *\n\t * @return mixed\n\t */\n\tfire(action, defaultHandler = null) {\n\t\tif (!(action instanceof Action)) {\n\t\t\taction = new Action(this.target, action);\n\t\t}\n\t\tif (this.currentlyFiring.filter(a => a.type === action.type && a.name === action.name).length) {\n\t\t\treturn defaultHandler ? defaultHandler() : undefined;\n\t\t}\n\t\tthis.currentlyFiring.push(action);\n\t\tconst next = (index, ..._args) => {\n\t\t\tvar interceptor = this.fireables[index];\n\t\t\tif (interceptor) {\n\t\t\t\treturn interceptor.fire(action, (...args) => {\n\t\t\t\t\treturn next(index + 1, ...args);\n\t\t\t\t}/*next*/, ..._args);\n\t\t\t}\n\t\t\treturn defaultHandler ? defaultHandler(..._args) : _args[0];\n\t\t};\n\t\tvar value = next(0);\n\t\tthis.currentlyFiring.pop();\n\t\treturn value;\n\t}\n\n\tstatic getFirebase(target, createIfNotExists = true, namespace = null) {\n\t\treturn super._getFirebase('interceptor', ...arguments);\n\t}\n\n\tstatic namespace(namespace, ImplementationClass = null) {\n\t\treturn super._namespace('interceptor', ...arguments);\n\t}\n}","\n/**\n * @imports\n */\nimport { _internals } from '@webqit/util/js/index.js';\n\n/**\n * Returns the original object earlier proxied by proxy().\n *\n * @param Proxy|Any\t\ttarget\n *\n * @return Any\n */\nexport default function(target) {\n    // Proxy targets are mapped to their own instances internally\n    return _internals(target, false).get(target) || target;\n}\n","\n/**\n * @imports\n */\nimport { _isTypeObject } from '@webqit/util/js/index.js';\nimport Interceptors from '../core/Interceptors.js';\nimport _unproxy from '../actors/unproxy.js';\n\n/**\n * Runs a Reflect operation of the specified type.\n *\n * @param string\t\ttype\n * @param array|object\ttarget\n * @param object\t\tpayload\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(type, target, payload = {}, params = {}) {\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\ttarget = _unproxy(target);\n\t// ---------------------------------\n\t// Execute any \"keys\" traps, otherwise \"test\" the default way\n\tvar interceptors, defaultHandler = function(_val) {\n\t\treturn arguments.length ? _val : Reflect[type](target, ...Object.values(payload));\n\t};\n\tif (interceptors = Interceptors.getFirebase(target, false, params.namespace)) {\n\t\treturn interceptors.fire({ type, ...payload }, defaultHandler);\n\t}\n\treturn defaultHandler();\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs an \"apply\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tthisArgument\n * @param array\t\t\targumentsList\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, thisArgument, argumentsList, params = {}) {\n\treturn _exec('apply', target, { thisArgument, argumentsList }, params);\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"construct\" operation on a target.\n *\n * @param array|object\ttarget\n * @param array\t\t\targumentsList\n * @param object\t\tnewTarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, argumentsList, newTarget = null, params = {}) {\n\treturn _exec('construct', target, arguments.length > 2 ? { argumentsList, newTarget } : { argumentsList }, params);\n}\n","\n/**\n * Converts a string to title case.\n *\n * @param string \tstr\n * @param bool \t\tstrict\n *\n * @return string\n */\nexport default function(str, strict) {\n\tif (typeof str !== 'string') {\n\t\treturn str;\n\t}\n\treturn str.replace(/\\w\\S*/g,  function(txt) { return txt.charAt(0).toUpperCase() + ((typeof strict !== undefined && strict) ? txt.substr(1).toLowerCase() : txt.substr(1)); })\n};\n","\n/**\n * @imports\n */\nimport { _isUndefined, _isObject } from '@webqit/util/js/index.js';\nimport { _each } from '@webqit/util/obj/index.js';\n\n/**\n * ---------------------------\n * The Event class\n * ---------------------------\n */\n\nexport default class Event {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\t\ttarget\n\t * @param bool\t\t\t\tcancellable\n\t *\n\t * @return void\n\t */\n\tconstructor(target, cancellable = false) {\n\t\tthis._ = {};\n\t\tthis._.target = target;\n\t\tthis._.cancellable = cancellable;\n\t\tthis._.propagationStopped = false;\n\t\tthis._.defaultPrevented = false;\n\t\tthis._.promisesInstance = null;\n\t\tthis._.promises = [];\n\t}\n\n\t/**\n\t * Gets the \"target\" object.\n\t *\n\t * @return array|object\n\t */\n\tget target() {\n\t\treturn this._.target;\n\t}\n\n\t/**\n\t * Gets the \"cancellable\" flag.\n\t *\n\t * @return bool\n\t */\n\tget cancellable() {\n\t\treturn this._.cancellable;\n\t}\n\n\t/**\n\t * -----------------------\n\t * RESPONSE HANDLERS\n\t * -----------------------\n\t */\n\n\t/**\n\t * Stops the evnt from reaching other listeners.\n\t *\n\t * @return bool\n\t */\n\tstopPropagation() {\n\t\tthis._.propagationStopped = true;\n\t}\n\t\t\n\t/**\n\t * (Readonly) tells if stopPropagation() has been called.\n\t *\n\t * @return bool\n\t */\n\tget propagationStopped() {\n\t\treturn this._.propagationStopped;\n\t}\n\t\t\n\t/**\n\t * Sets a disposition that asks event initiator not to\n\t * proceed with default action.\n\t *\n\t * @return void\n\t */\n\tpreventDefault() {\n\t\tthis._.defaultPrevented = true;\n\t}\n\t\t\n\t/**\n\t * (Readonly) tells if preventDefault() has been called.\n\t *\n\t * @return bool\n\t */\n\tget defaultPrevented() {\n\t\treturn this._.defaultPrevented;\n\t}\n\t\t\n\t/**\n\t * Sets a Promise disposition.\n\t *\n\t * @param Promise\tpromise\n\t *\n\t * @return void\n\t */\n\twaitUntil(promise) {\n\t\tif (promise instanceof Promise) {\n\t\t\tthis._.promises.push(promise);\n\t\t\tthis._.promisesInstance = null;\n\t\t}\n\t}\n\t\t\n\t/**\n\t * (Readonly) returns all promises.\n\t *\n\t * @return Promise|null\n\t */\n\tget promises() {\n\t\tif (!this._.promisesInstance && this._.promises.length) {\n\t\t\tthis._.promisesInstance = Promise.all(this._.promises);\n\t\t}\n\t\treturn this._.promisesInstance;\n\t}\n\t\t\n\t/**\n\t * Evaluates the given disposition value and\n\t * calls an appropriate disposition method.\n\t *\n\t * @params mixed \trspns\n\t *\n\t * @return void\n\t */\n\trespondWith(rspns) {\n\t\tvar proms;\n\t\tvar isEvent = _isObject(rspns) && !_isUndefined(rspns.propagationStopped) && !_isUndefined(rspns.defaultPrevented)\n\t\tif ((rspns === false) || (isEvent && rspns.propagationStopped)) {\n\t\t\tthis.stopPropagation();\n\t\t} else if ((rspns === false) || (isEvent && rspns.defaultPrevented)) {\n\t\t\tthis.preventDefault();\n\t\t} else if ((rspns instanceof Promise && (proms = rspns))\n\t\t|| (isEvent && (proms = rspns.promises))) {\n\t\t\tthis.waitUntil(proms);\n\t\t}\n\t}\n}","\n/**\n * @imports\n */\nimport {\n\t_after as _arrAfter, _startsWith as _arrStartsWith,\n\t_any, _equals as _arrEquals,\n} from '@webqit/util/arr/index.js';\nimport { _isNumeric, _isFunction, _isObject } from '@webqit/util/js/index.js';\nimport { paths2D, pathsIs2D, pathsIsDynamic, paths2DIsDynamic } from './utils.js'\nimport Fireable from './Fireable.js';\nimport Event from './Event.js';\n\n/**\n * ---------------------------\n * The Observer class\n * ---------------------------\n */\n\nexport default class Observer extends Fireable {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\t\ttarget\n\t * @param object\t\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tsuper(target, dfn);\n\t\t// The rest of this code is designed for a 2-dimensional array.\n\t\tthis.filters2D = paths2D(this.filter);\n\t\tthis.filtersIsOriginally2D = pathsIs2D(this.filter);\n\t\tthis.filtersIsDynamic = paths2DIsDynamic(this.filters2D);\n\t\tif (this.filtersIsDynamic && this.filters2D.length > 1) {\n\t\t\tthrow new Error('Only one \"Dynamic Filter\" must be observed at a time! \"' + this.filters2D.map(pathArray => '[' + pathArray.join(', ') + ']').join(', ') + '\" have been bound together.');\n\t\t}\n\t}\n\t\n\t/**\n\t * Calls the observer's handler function\n\t * on matching with the event's filter.\n\t *\n\t * @param array\t\t\t \tchanges\n\t *\n\t * @return void\n\t */\n\tfire(changes) {\n\t\tif (this.disconnected || (this.params.type && !_any(changes, delta => this.params.type === delta.type))) {\n\t\t\treturn;\n\t\t}\n\t\tconst diff = delta => !['set', 'def'].includes(delta.type) || (\n\t\t\t!this.params.diff || (_isFunction(this.params.diff) ? this.params.diff(delta.value, delta.oldValue) : delta.value !== delta.oldValue)\n\t\t);\n\t\tvar evt = new Event(this.target);\n\t\tif (this.filters2D.length) {\n\t\t\tvar matches = changes.filter(delta => {\n\t\t\t\t// one observerPathArray can turn out to be two if dynamic\n\t\t\t\t// OR evt.originatingFields is multiple and this.params.subtree\n\t\t\t\treturn this.filters2D.filter((observerPathArray, i) => {\n\t\t\t\t\tvar observerPathArray_Resolved = observerPathArray.slice();\n\t\t\t\t\tif (this.filtersIsDynamic) {\n\t\t\t\t\t\t// Note that if we had tried to loop thru observerPathArray_Resolved,\n\t\t\t\t\t\t// we wouldn't be able tp access slots that are truly empty, as in: [ 'key', <1 empty item> ]\n\t\t\t\t\t\tdelta.path.forEach((_seg, i) => {\n\t\t\t\t\t\t\tobserverPathArray_Resolved[i] = observerPathArray_Resolved[i] || observerPathArray_Resolved[i] === 0 \n\t\t\t\t\t\t\t\t? observerPathArray_Resolved[i]\n\t\t\t\t\t\t\t\t: _seg;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn (!this.filtersIsDynamic || !pathsIsDynamic(observerPathArray_Resolved)) && diff(delta) && ((!this.params.subtree && _arrEquals(observerPathArray_Resolved, delta.path))\n\t\t\t\t\t\t|| (this.params.suptree && _arrStartsWith(observerPathArray_Resolved, delta.path) && (!_isNumeric(this.params.suptree) || _arrAfter(observerPathArray_Resolved, delta.path).length <= this.params.suptree))\n\t\t\t\t\t\t|| (this.params.subtree && delta.path.length >= observerPathArray_Resolved.length && _arrStartsWith(delta.path, observerPathArray_Resolved) && (!_isNumeric(this.params.subtree) || _arrAfter(delta.path, observerPathArray_Resolved).length <= this.params.subtree))\n\t\t\t\t\t);\n\t\t\t\t}).length;\n\t\t\t});\n\t\t\tif (matches.length) {\n\t\t\t\tif (this.filtersIsOriginally2D || this.params.subtree) {\n\t\t\t\t\tvar changesObject = matches;\n\t\t\t\t\tif (_isObject(this.filter)) {\n\t\t\t\t\t\tchangesObject = {...this.filter};\n\t\t\t\t\t\tmatches.forEach((e, i) => {\n\t\t\t\t\t\t\tchangesObject[e.name] = e;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tevt.respondWith(this.handler(changesObject, evt));\n\t\t\t\t} else {\n\t\t\t\t\tmatches.forEach((e, i) => {\n\t\t\t\t\t\tevt.respondWith(this.handler(e, evt));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ((this.params.subtree || changes.filter(delta => _arrEquals(delta.path, [delta.name])).length === changes.length) && changes.filter(delta => diff(delta)).length) {\n\t\t\tevt.respondWith(this.handler(changes, evt));\n\t\t}\n\t\treturn evt;\n\t}\n}\n","\n/**\n * Tells if ANY items pass the test.\n *\n * @param array \tarr\n * @param function \tcallback\n *\n * @return bool\n */\nexport default function(arr, callback) {\n\treturn arr.reduce((prevTest, itm, i) => prevTest || callback(itm, i), false);\n};\n","\n/**\n * @imports\n */\nimport { _each } from '@webqit/util/obj/index.js';\nimport { DotSafePath } from './utils.js';\n\n/**\n * ---------------------------\n * The QueryEvent class\n * ---------------------------\n */\n\nexport default class Mutation {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\ttarget\n\t * @param object\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tthis.target = target;\n\t\tif (!dfn.originalSubject) {\n\t\t\tthis.originalSubject = target;\n\t\t}\n\t\tif (!('type' in dfn)) {\n\t\t\tthrow new Error('Mutation type must be given in definition!');\n\t\t}\n\t\tif (!('name' in dfn)) {\n\t\t\tthrow new Error('Property name must be given in definition!');\n\t\t}\n\t\t_each(dfn, (key, value) => {\n\t\t\tif (key === 'path') {\n\t\t\t\tvalue = DotSafePath.resolve(value);\n\t\t\t}\n\t\t\tObject.defineProperty(this, key, {value, enumerable:true});\n\t\t});\n\t\tif (!this.path) {\n\t\t\tObject.defineProperty(this, 'path', {value: DotSafePath.resolve([dfn.name]), enumerable:true});\n\t\t}\n\t\tObject.seal(this);\n\t}\n}","\n/**\n * @imports\n */\nimport { _from as _arrFrom, _remove, _last } from '@webqit/util/arr/index.js';\nimport Firebase from './Firebase.js';\nimport Observer from './Observer.js';\nimport Mutation from './Mutation.js';\nimport Event from './Event.js';\n\n/**\n * ---------------------------\n * The Reactive class\n * ---------------------------\n */\n\nexport default class Observers extends Firebase {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param object\ttarget\n\t * \n\t * @return void\n\t */\n\tconstructor(target) {\n\t\tsuper(target);\n\t\tthis.buffers = [];\n\t}\n\t\n\t/**\n\t * @inheritdoc\n\t */\n\tadd(dfn) {\n\t\treturn super.add(new Observer(this.target, dfn));\n\t}\n\t\n\t/**\n\t * Fires all observers with the given evt (change).\n\t *\n\t * @param array|Mutation\t\tchanges\n\t * @param bool\t\t\t\tcancellable\n\t *\n\t * @return Event\n\t */\n\tfire(changes, cancellable) {\n\t\tvar evt = new Event(this.target, cancellable);\n\t\t// We accept multiple changes\n\t\tchanges = _arrFrom(changes, false).map(delta => !(delta instanceof Mutation) ? new Mutation(this.target, delta) : delta);\n\t\tif (this.buffers.length) {\n\t\t\t_last(this.buffers)(changes);\n\t\t\treturn evt;\n\t\t}\n\t\tif (this.currentlyFiring.filter(d => changes.filter(delta => d.type === delta.type && d.name === delta.name).length).length) {\n\t\t\t//return false;\n\t\t}\n\t\t//this.currentlyFiring.push(...changes);\n\t\tthis.fireables.forEach(observer => {\n\t\t\tif (evt.propagationStopped && cancellable) {\n\t\t\t\treturn evt;\n\t\t\t}\n\t\t\tevt.respondWith(observer.fire(changes));\n\t\t});\n\t\t//changes.forEach(delta => _remove(this.currentlyFiring, delta));\n\t\treturn evt;\n\t}\n\n\tstatic getFirebase(target, createIfNotExists = true, namespace = null) {\n\t\treturn super._getFirebase('observer', ...arguments);\n\t}\n\n\tstatic namespace(namespace, ImplementationClass = null) {\n\t\treturn super._namespace('observer', ...arguments);\n\t}\n}","\n/**\n * @imports\n */\nimport {\n\t_isArray, _isNumeric, _isClass,\n\t_isFunction, _isTypeObject, _internals\n} from '@webqit/util/js/index.js';\nimport { _from as _objFrom } from '@webqit/util/obj/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport Interceptors from '../core/Interceptors.js';\nimport _unproxy from '../actors/unproxy.js';\n\n/**\n * Runs a \"get\" operation on a target.\n * Fires any such query observers that may be bound to target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeys\n * @param object\t\treceiver\n * @param object\t\tparams\n *\n * @return mixed\n */\nexport default function(target, keys, receiver = null, params = {}) {\n\ttarget = receiver || target;\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\ttarget = _unproxy(target);\n\t// ---------------------------------\n\tvar _keys = _arrFrom(keys);\n\tvar values = _keys.map(key => {\n\t\t// Execute any \"get\" traps, otherwise \"get\" the default way\n\t\tvar interceptors, defaultGet = function(_value) {\n\t\t\tif (arguments.length) {\n\t\t\t\treturn _value;\n\t\t\t}\n\t\t\tif (_internals(target, 'accessorizedProps').has(key) && _internals(target, 'accessorizedProps').get(key).touch(true)) {\n\t\t\t\treturn _internals(target, 'accessorizedProps').get(key).get();\n\t\t\t}\n\t\t\treturn receiver \n\t\t\t\t? Reflect.get(target, key, receiver) \n\t\t\t\t: Reflect.get(target, key);\n\t\t};\n\t\tif (interceptors = Interceptors.getFirebase(target, true, params.namespace)) {\n\t\t\treturn interceptors.fire({type:'get', name: key, related: _keys, receiver}, defaultGet);\n\t\t}\n\t\treturn defaultGet();\n\t});\n\t// ---------------------------------\n\treturn _isArray(keys) ? values : values[0];\n}\n","\n/**\n * @imports\n */\nimport { _isFunction, _isTypeObject, _getType } from '@webqit/util/js/index.js';\nimport build, { isUserObject } from '../connectors/build.js';\nimport _unproxy from '../actors/unproxy.js';\nimport Observers from '../core/Observers.js';\n\n/**\n * Adds an observer to an target's firebase.\n *\n * @param array|object\t\t\t\ttarget\n * @param string|array|function\t\tfilter\n * @param function\t\t\t\t\thandler\n * @param object\t\t\t\t\tparams\n *\n * @return Observer\n */\nexport default function(target, filter, handler = null, params = {}) {\n\ttarget = _unproxy(target);\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Observable subjects must be of type object; \"' + _getType(target) + '\" given!');\n\t}\n\tif (_isFunction(filter)) {\n\t\tparams = arguments.length > 2 ? handler : {};\n\t\thandler = filter;\n\t\tfilter = null;\n\t}\n\tif (!_isFunction(handler)) {\n\t\tthrow new Error('Handler must be a function; \"' + _getType(handler) + '\" given!');\n\t}\n\tvar existing, observers = Observers.getFirebase(target, true, params.namespace);\n\tvar dfn = {filter, handler, params,};\n\tif (dfn.filter || dfn.params.subtree === '*' || (dfn.params.subtree && isUserObject(target))) {\n\t\tbuild(target, dfn.filter, dfn.params.subtree, params.namespace);\n\t}\n\tif (dfn.params.unique && (existing = observers.match({filter, params})).length) {\n\t\tif (dfn.params.unique !== 'replace') {\n\t\t\treturn existing[0];\n\t\t}\n\t\tobservers.remove(existing[0]);\n\t}\n\treturn observers.add(dfn);\n}\n","\n/**\n * @imports\n */\nimport { _each, _merge } from '@webqit/util/obj/index.js';\nimport { _isObject } from '@webqit/util/js/index.js';\nimport Mutation from '../core/Mutation.js';\nimport Observers from '../core/Observers.js';\nimport observe from '../reactions/observe.js';\n\n/**\n * Bubble helper\n *\n * @param array|object\ttarget\n * @param string\t\tfield\n * @param array|object\tvalue\n * @param object\t\tevent\n * @param object\t\tparams\n *\n * @return void\n */\nexport default function(target, field, value, event = null, params = {}) {\n\tif (target === value) {\n\t\treturn;\n\t}\n\tvar observers;\n\tobserve(value, (changes, eventObject) => {\n\t\tif (observers = Observers.getFirebase(target, false, params.namespace)) {\n\t\t\tvar _changes = changes.map(delta => {\n\t\t\t\t// ------------\n\t\t\t\t// Recursive events must not propagate\n\t\t\t\t// ------------\n\t\t\t\tvar d = delta;\n\t\t\t\tdo {\n\t\t\t\t\tif (d.target === target) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} while(d = d.src);\n\t\t\t\t// ------------\n\t\t\t\t// Create propagation\n\t\t\t\t// ------------\n\t\t\t\tvar dfn = {}; _each(delta, (key, value) => {\n\t\t\t\t\tif (key !== 'target' && key !== 'name' && key !== 'path' && key !== 'src') {\n\t\t\t\t\t\tdfn[key] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdfn.name = field;\n\t\t\t\tdfn.path = [field].concat(delta.path);\n\t\t\t\tdfn.originalSubject = delta.originalSubject;\n\t\t\t\tdfn.src = delta;\n\t\t\t\treturn new Mutation(target, dfn);\n\t\t\t}).filter(c => c);\n\t\t\tif (_changes.length) {\n\t\t\t\treturn observers.fire(_changes, eventObject.cancellable);\n\t\t\t}\n\t\t}\n\t}, {subtree: true, ...params, unique: true, tags: [linkTag, field, target]});\n\tif (_isObject(event) && (observers = Observers.getFirebase(target, false, params.namespace))) {\n\t\t// The event object\n\t\tvar _event = _merge({\n\t\t\tname: field,\n\t\t\ttype: 'set',\n\t\t\tvalue,\n\t\t\trelated: [field],\n\t\t}, event);\n\t\tlet eventObject = observers.fire(_event, params.cancellable);\n\t\tif (params.eventTypeReturn) {\n\t\t\treturn eventObject;\n\t\t}\n\t}\n}\n\n/**\n * @var object\n */\nexport const linkTag = {};","\n/**\n * @imports\n */\nimport { _isTypeObject } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { _before, _after } from '@webqit/util/str/index.js';\nimport { paths2D } from '../core/utils.js';\nimport Observers from '../core/Observers.js';\nimport _get from '../actions/get.js';\nimport link from './link.js';\n\n/**\n * Recursively \"connects\" an object's members to the object\n * for observer actions.\n *\n * @param array|object\ttarget\n * @param string|array\tpaths\n * @param bool\t\t\tsubtree\n * @param String\t\tnamespace\n *\n * @return void\n */\nexport default function build(target, paths = null, subtree = false, namespace = null) {\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\tvar observers = Observers.getFirebase(target, true, namespace);\n\tif (!observers || observers.build) {\n\t\treturn;\n\t}\n\tobservers.build = subtree;\n\t// ---------------------------------\n\t// For paths2D, refer to the comments at class Observer.\n\tvar _paths2D = paths2D(paths);\n\t// If any path starts with a dot, (a wild card path), all keys at this level is implied\n\tvar rootLevelKeysToObserve = !_paths2D.length || _paths2D.filter(path => /*Starts with an empty segment*/!path[0] && path[0] !== 0).length\n\t\t? Object.keys(target)\n\t\t: _paths2D.map(path => path[0]);\n\tvar subLevelKeysToObserve = _paths2D.length ? _paths2D.map(path => path.slice(1)).filter(p => p.length) : null;\n\tobservers.subBuild = subLevelKeysToObserve && subLevelKeysToObserve.length ? subLevelKeysToObserve : null;\n\trootLevelKeysToObserve.forEach(key => {\n\t\tvar value = _get(target, key, null, { namespace });\n\t\ttry {\n\t\t\tif (_isTypeObject(value)) {\n\t\t\t\tlink(target, key, value, null, params);\n\t\t\t\tif ((observers.subBuild && isUserObject(value)) \n\t\t\t\t|| (_isFunction(subtree) ? subtree(value) : (subtree && isUserObject(value)))) {\n\t\t\t\t\tbuild(value, observers.subBuild, subtree, namespace);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch(e) {/* instanceof-ing certain primitives may throw */}\n\t});\n}\n\n/**\n * Tells if an object if a User Object.\n * \n * @param Object value\n * \n * @return Bool\n */\nexport const isUserObject = value => ((value instanceof Object) || (value instanceof Array) || (value instanceof Function))\n\t&& (typeof window === 'undefined' || value !== window);\n","\n/**\n * @imports\n */\nimport { _isFunction, _isTypeObject, _getType } from '@webqit/util/js/index.js';\nimport _unproxy from '../actors/unproxy.js';\nimport Observers from '../core/Observers.js';\n\n/**\n * Removes observers from an target's firebase.\n *\n * @param array|object\t\t\t\ttarget\n * @param string|array|function\t\tfilter\n * @param function\t\t\t\t\toriginalHandler\n * @param object\t\t\t\t\tparams\n *\n * @return void\n */\nexport default function(target, filter, originalHandler = null, params = {}) {\n\ttarget = _unproxy(target);\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Observable subjects must be of type object; \"' + _getType(target) + '\" given!');\n\t}\n\tif (_isFunction(filter)) {\n\t\tparams = arguments.length > 2 ? originalHandler : {};\n\t\toriginalHandler = filter;\n\t\tfilter = null;\n\t}\n\tif (originalHandler && !_isFunction(originalHandler)) {\n\t\tthrow new Error('Handler must be a function; \"' + _getType(originalHandler) + '\" given!');\n\t}\n\tvar observers;\n\tif (observers = Observers.getFirebase(target, false, params.namespace)) {\n\t\treturn observers.removeMatches({filter, originalHandler, params});\n\t}\n}\n","\n/**\n * @imports\n */\nimport { _merge } from '@webqit/util/obj/index.js';\nimport { _isObject } from '@webqit/util/js/index.js';\nimport Observers from '../core/Observers.js';\nimport unobserve from '../reactions/unobserve.js';\nimport { linkTag } from './link.js';\n\n/**\n * Unbubble helper\n *\n * @param array|object\ttarget\n * @param string\t\tfield\n * @param array|object\tobject\n * @param object\t\tevent\n * @param object\t\tparams\n *\n * @return void\n */\nexport default function(target, field, value, event = null, params = {}) {\n\tunobserve(value, null, null, {...params, tags:[linkTag, field, target]});\n\tvar observers;\n\tif (_isObject(event) && (observers = Observers.getFirebase(target, false, params.namespace))) {\n\t\t// The event object\n\t\tvar _event = _merge({\n\t\t\tname: field,\n\t\t\ttype: 'del',\n\t\t\toldValue: value,\n\t\t\trelated: [field],\n\t\t}, event);\n\t\tobservers.fire(_event, params.cancellable);\n\t}\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"has\" operation on a target.\n *\n * @param array|object\ttarget\n * @param string\t\tname\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, name, params = {}) {\n\treturn _exec('has', target, { name }, params);\n}\n","\n/**\n * @imports\n */\nimport {\n\t_isObject, _isTypeObject, _internals,\n\t_isNumber, _isArray, _isString\n} from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport build, { isUserObject } from '../connectors/build.js';\nimport Interceptors from '../core/Interceptors.js';\nimport Observers from '../core/Observers.js';\nimport Event from '../core/Event.js';\nimport unlink from '../connectors/unlink.js';\nimport link from '../connectors/link.js';\nimport _unproxy from '../actors/unproxy.js';\nimport _has from './has.js';\nimport _get from './get.js';\n\n/**\n * Executes a \"_setProp\" type of operation on a target.\n * Fires any observers for the specific type that may be bound to target.\n *\n * @param bool\t\t\tdefine\n * @param array|object\ttarget\n * @param object\t\tpayload\n * @param Object\t\tparams\n *\n * @return Event\n */\nexport default function(define, target, payload, params = {}) {\n\ttarget = payload.receiver || target;\n\tvar keysOrPayload = payload.keysOrPayload;\n\tvar value = payload.value;\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\tif (_isObject(keysOrPayload)) {\n\t\tparams = value || {};\n\t\tvalue = null;\n\t}\n\t// ----------\n\ttarget = _unproxy(target);\n\tvar interceptors = Interceptors.getFirebase(target, false, params.namespace),\n\t\tobservers = Observers.getFirebase(target, false, params.namespace);\n\t// ----------\n\tconst handleSet = (key, value, related, detail) => {\n\t\tvar type = 'set', descriptor;\n\t\tif (define) {\n\t\t\ttype = 'defineProperty';\n\t\t\tdescriptor = value || {};\n\t\t\tvalue = descriptor.value;\n\t\t}\n\t\t// ---------------------------------\n\t\t// The event object\n\t\tvar isUpdate = false, oldValue;\n\t\tif (_has(target, key, params)) {\n\t\t\tisUpdate = true;\n\t\t\toldValue = _get(target, key, payload.receiver, params);\n\t\t}\n\t\tvar e = {\n\t\t\tname: key,\n\t\t\ttype,\n\t\t\tvalue,\n\t\t\treceiver: payload.receiver,\n\t\t\trelated,\n\t\t\tdetail,\n\t\t\tisUpdate,\n\t\t\toldValue,\n\t\t};\n\t\t// ---------------------------------\n\t\t// The set operation\n\t\tvar defaultSet = function(_success) {\n\t\t\tif (arguments.length) {\n\t\t\t\tif (descriptor) {\n\t\t\t\t\tdescriptor = _success;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = _success;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (descriptor) {\n\t\t\t\tif (_internals(target, 'accessorizedProps', false).has(key)\n\t\t\t\t&& !_internals(target, 'accessorizedProps').get(key).restore()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tObject.defineProperty(target, key, descriptor);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (_internals(target, 'accessorizedProps', false).has(key)) {\n\t\t\t\treturn _internals(target, 'accessorizedProps').get(key).set(value);\n\t\t\t}\n\t\t\ttarget[key] = value;\n\t\t\treturn true;\n\t\t};\n\t\tif (interceptors) {\n\t\t\tvar eventObject = descriptor \n\t\t\t\t? {type: 'defineProperty', name: key, descriptor, receiver: payload.receiver, related, detail, isUpdate, oldValue} \n\t\t\t\t: {type: 'set', name: key, value, receiver: payload.receiver, related, detail, isUpdate, oldValue};\n\t\t\te.success = interceptors.fire(eventObject, defaultSet);\n\t\t} else {\n\t\t\te.success = defaultSet();\n\t\t}\n\t\t// ---------------------------------\n\t\tif (e.success && e.value !== e.oldValue) {\n\t\t\t// Unobserve outgoing value for bubbling\n\t\t\tif (_isTypeObject(e.oldValue)) {\n\t\t\t\tunlink(target, key, e.oldValue, null, params);\n\t\t\t}\n\t\t\t// Observe incoming value for bubbling\n\t\t\tif (_isTypeObject(e.value)) {\n\t\t\t\tlink(target, key, e.value, null, params);\n\t\t\t\tif (observers && (observers.subBuild || (observers.build && isUserObject(e.value)))) {\n\t\t\t\t\tbuild(e.value, observers.subBuild, observers.build, params.namespace);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn e;\n\t};\n\t// ---------------------------------\n\tvar keys, events = [];\n\tif (_isArray(keysOrPayload) || ((_isString(keysOrPayload) || _isNumber(keysOrPayload)) && (keys = _arrFrom(keysOrPayload)))) {\n\t\tevents = keys.map(key => handleSet(key, value, keys, params.detail));\n\t} else if (_isObject(keysOrPayload) && (keys = Object.keys(keysOrPayload))) {\n\t\tevents = keys.map(key => handleSet(key, keysOrPayload[key], keys, params.detail));\n\t}\n\tvar successfulEvents = events.filter(e => e.success !== false);\n\t// ---------------------------------\n\tvar evt;\n\tif (observers) {\n\t\tevt = observers.fire(successfulEvents, params.cancellable);\n\t\tevt.successCount = successfulEvents.length;\n\t} else if (params.eventTypeReturn) {\n\t\tevt = new Event(target);\n\t}\n\treturn params.eventTypeReturn ? evt : successfulEvents.length > 0;\n}\n","\n/**\n * @imports\n */\nimport _setOrDefine from './_setOrDefine.js';\n\n/**\n * Executes a \"defineProperty\" operation on a target.\n * Fires any observers that may be bound to target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeysOrPayload\n * @param mixed\t\t\tvalue\n * @param object\t\tparams\n *\n * @return bool\n */\nexport default function(target, keysOrPayload, value = null, params = {}) {\n\treturn _setOrDefine(true/*define*/, target, { keysOrPayload, value }, params);\n}\n","\n/**\n * @imports\n */\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { _isTypeObject, _internals } from '@webqit/util/js/index.js';\nimport Interceptors from '../core/Interceptors.js';\nimport Observers from '../core/Observers.js';\nimport Event from '../core/Event.js';\nimport unlink from '../connectors/unlink.js';\nimport _unproxy from '../actors/unproxy.js';\nimport _has from './has.js';\nimport _get from './get.js';\n\n/**\n * Executes a \"deleteProperty\" operation on a target.\n * Fires any observers that may be bound to target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeys\n * @param object\t\tparams\n *\n * @return Event\n */\nexport default function(target, keys, params = {}) {\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\ttarget = _unproxy(target);\n\tvar _keys = _arrFrom(keys);\n\tvar events = _keys.map(key => {\n\t\t// ---------------------------------\n\t\t// The event object\n\t\tvar oldValue;\n\t\tif (_has(target, key, params)) {\n\t\t\toldValue = _get(target, key, null, params);\n\t\t}\n\t\tvar e = {\n\t\t\tname: key,\n\t\t\ttype: 'deleteProperty',\n\t\t\trelated: _keys,\n\t\t\tdetail: params.detail,\n\t\t\toldValue,\n\t\t};\n\t\t// ---------------------------------\n\t\t// Execute any \"del\" traps, otherwise \"del\" the default way\n\t\tvar interceptors, defaultDel = function(_success) {\n\t\t\tif (arguments.length) {\n\t\t\t\treturn _success;\n\t\t\t}\n\t\t\tif (_internals(target, 'accessorizedProps', false).has(key)\n\t\t\t&& !_internals(target, 'accessorizedProps').get(key).restore()) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdelete target[key];\n\t\t\treturn true;\n\t\t};\n\t\tif (interceptors = Interceptors.getFirebase(target, false, params.namespace)) {\n\t\t\te.success = interceptors.fire({type: 'deleteProperty', name:key, oldValue, related: _keys}, defaultDel);\n\t\t} else {\n\t\t\te.success = defaultDel();\n\t\t}\n\t\t// ---------------------------------\n\t\t// Unobserve outgoing value for bubbling\n\t\tif (e.success && _isTypeObject(e.oldValue)) {\n\t\t\tunlink(target, key, e.oldValue, null, params);\n\t\t}\n\t\treturn e;\n\t});\n\tvar successfulEvents = events.filter(e => e.success !== false);\n\t// ---------------------------------\n\tvar observers, evt;\n\tif (observers = Observers.getFirebase(target, false, params.namespace)) {\n\t\tevt = observers.fire(successfulEvents, params.cancellable);\n\t\tevt.successCount = successfulEvents.length;\n\t} else if (params.eventTypeReturn) {\n\t\tevt = new Event(target);\n\t}\n\treturn params.eventTypeReturn ? evt : successfulEvents.length > 0;\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"getOwnPropertyDescriptor\" operation on a target.\n *\n * @param array|object\ttarget\n * @param string|number name\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, name, params = {}) {\n\treturn _exec('getOwnPropertyDescriptor', target, { name }, params);\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"getPrototypeOf\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, params = {}) {\n\treturn _exec('getPrototypeOf', target, {}, params);\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"isExtensible\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, params = {}) {\n\treturn _exec('isExtensible', target, {}, params);\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"ownKeys\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, params = {}) {\n\treturn _exec('ownKeys', target, {}, params);\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"preventExtensions\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, params = {}) {\n\treturn _exec('preventExtensions', target, {}, params);\n}\n","\n/**\n * @imports\n */\nimport _setOrDefine from './_setOrDefine.js';\n\n/**\n * Executes a \"set\" operation on a target.\n * Fires any observers that may be bound to target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeysOrPayload\n * @param mixed\t\t\tvalue\n * @param object\t\treceiver\n * @param object\t\tparams\n *\n * @return bool\n */\nexport default function(target, keysOrPayload, value = null, receiver = null, params = {}) {\n\treturn _setOrDefine(false/*define*/, target, arguments.length > 3 ? { keysOrPayload, value, receiver } : { keysOrPayload, value }, params);\n}\n","\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"setPrototypeOf\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tprototype\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, prototype, params = {}) {\n\treturn _exec('setPrototypeOf', target, { prototype }, params);\n}\n","\n/**\n * @imports\n */\n// Actions\nimport apply from './actions/apply.js';\nimport construct from './actions/construct.js';\nimport defineProperty from './actions/defineProperty.js';\nimport deleteProperty from './actions/deleteProperty.js';\nimport get from './actions/get.js';\nimport getOwnPropertyDescriptor from './actions/getOwnPropertyDescriptor.js';\nimport getPrototypeOf from './actions/getPrototypeOf.js';\nimport has from './actions/has.js';\nimport isExtensible from './actions/isExtensible.js';\nimport ownKeys from './actions/ownKeys.js';\nimport preventExtensions from './actions/preventExtensions.js';\nimport set from './actions/set.js';\nimport setPrototypeOf from './actions/setPrototypeOf.js';\n// Actors\nimport accessorize from './actors/accessorize.js';\nimport unaccessorize from './actors/unaccessorize.js';\nimport proxy from './actors/proxy.js';\nimport unproxy from './actors/unproxy.js';\n// Reactions\nimport observe from './reactions/observe.js';\nimport unobserve from './reactions/unobserve.js';\nimport intercept from './reactions/intercept.js';\nimport unintercept from './reactions/unintercept.js';\nimport closure from './reactions/closure.js';\n// Connectors\nimport build from './connectors/build.js';\nimport link from './connectors/link.js';\nimport unlink from './connectors/unlink.js';\n// Core\nimport Observers from './core/Observers.js';\nimport Interceptors from './core/Interceptors.js';\n\n/**\n * @exports\n */\nexport default {\n\t// Actions\n\tapply,\n\tconstruct,\n\tdefineProperty,\n\tdeleteProperty,\n\tget,\n\tgetOwnPropertyDescriptor,\n\tgetPrototypeOf,\n\thas,\n\tisExtensible,\n\townKeys,\n\tpreventExtensions,\n\tset,\n\tsetPrototypeOf,\n\t// Actors\n\taccessorize,\n\tunaccessorize,\n\tproxy,\n\tunproxy,\n\t// Reactions\n\tobserve,\n\tunobserve,\n\tintercept,\n\tunintercept,\n\tclosure,\n\t// Connectors\n\tbuild,\n\tlink,\n\tunlink,\n\t// Core\n\tObservers,\n\tInterceptors,\n}","\n/**\n * @imports\n */\nimport {\n    _isClass, _isFunction, _isTypeObject,\n    _getType, _internals,\n} from '@webqit/util/js/index.js';\nimport apply from '../actions/apply.js';\nimport construct from '../actions/construct.js';\nimport defineProperty from '../actions/defineProperty.js';\nimport deleteProperty from '../actions/deleteProperty.js';\nimport get from '../actions/get.js';\nimport getOwnPropertyDescriptor from '../actions/getOwnPropertyDescriptor.js';\nimport getPrototypeOf from '../actions/getPrototypeOf.js';\nimport has from '../actions/has.js';\nimport isExtensible from '../actions/isExtensible.js';\nimport ownKeys from '../actions/ownKeys.js';\nimport preventExtensions from '../actions/preventExtensions.js';\nimport set from '../actions/set.js';\nimport setPrototypeOf from '../actions/setPrototypeOf.js';\n\n/**\n * Returns an object as a proxy and binds all instance methods\n * to the proxy instead of the object itself.\n *\n * @param Object|Array\t\ttarget\n * @param Object\t\t    params\n *\n * @return Proxy\n */\nexport default function(target, params = {}) {\n\tif (!_isTypeObject(target)) {\n\t\tthrow new Error('Object must be of type target; \"' + _getType(target) + '\" given!');\n    }\n    var proxy = new Proxy(target, {\n        apply:  (target, thisArgument, argumentsList) => apply(target, thisArgument, argumentsList, params),\n        construct:  (target, argumentsList, newTarget = null) => construct(target, argumentsList, newTarget, params),\n        defineProperty:  (target, propertyKey, attributes) => defineProperty(target, propertyKey, attributes, params),\n        deleteProperty: (target, propertyKey) => deleteProperty(target, propertyKey, params),\n        get: (target, propertyKey, receiver = null) => {\n            var val = get(target, propertyKey, receiver, params);\n            if (params.proxyAutoBinding !== false && _isFunction(val) && !_isClass(val)) {\n                return val.bind(proxy);\n            }\n            return val;\n        },\n        getOwnPropertyDescriptor: (target, propertyKey) => getOwnPropertyDescriptor(target, propertyKey, params),\n        getPrototypeOf: target => getPrototypeOf(target, params),\n        has: (target, propertyKey) => has(target, propertyKey, params),\n        isExtensible: target => isExtensible(target, params),\n        ownKeys: target => ownKeys(target, params),\n        preventExtensions: target => preventExtensions(target, params),\n        set: (target, propertyKey, value, receiver = null) => set(target, propertyKey, value, receiver, params),\n        setPrototypeOf: (target, prototype) => setPrototypeOf(target, prototype, params),\n    });\n    _internals(proxy).set(proxy, target);\n\treturn proxy;\n}\n","\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"class\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) && /^class\\s?/.test(Function.prototype.toString.call(val));\n};\n","\nexport const _isTextMediaType = contentMediaType => contentMediaType && (\n    contentMediaType.startsWith('text/')\n    || contentMediaType === 'application/rtf'\n    || contentMediaType === 'application/xml'\n    || contentMediaType === 'application/xhtml+xml'\n    || contentMediaType === 'application/json'\n);\n\nexport const _isFileUpload = schema => {\n    return schema.format === 'data-url' \n    || schema.contentEncoding === 'base64';\n};","\n/**\n * @imports\n */\nimport { _difference, _intersect, _unique } from '@webqit/util/arr/index.js';\nimport { _isBoolean, _isNull, _isNumeric, _isString } from '@webqit/util/js/index.js';\n\n/**\n * @Schema Base Controller\n * @todo: anyOf, oneOf, allOf\n */\nexport const _Schema = __Schema => class extends (__Schema || class {}) {\n    \n    constructor(jsonSchema) {\n        super(jsonSchema);\n        // depreciated, readOnly, writeOnly, default, \n        // title, description, enum, const, examples, etc\n        Object.keys(jsonSchema).forEach(name => {\n            Object.defineProperty(this, name, { value: jsonSchema[name] });\n        });\n    }\n\n    validate(instance) {\n        return super.validate ? super.validate(instance) : { valid: true };\n    }\n\n}\n\n/**\n * @ObjectOrArray Base Controller\n */\nexport const _ObjectOrArray = __ObjectOrArray => class extends _Schema(__ObjectOrArray) {\n\n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        if (!(validity = this._validateMin(instance)).valid) {\n            return { valid: false, error: validity.error || `Minimum number of entries short of: ${validity.violation}.` };\n        }\n        if (!(validity = this._validateMax(instance)).valid) {\n            return { valid: false, error: validity.error || `Maximum number of entries exceeded by: ${validity.violation}.` };\n        }\n        return validity;\n    }\n\n}\n\n/**\n * @Object Controller\n */\nexport const _Object = __Object => class extends _ObjectOrArray(__Object) {\n\n    getPropertyNameSchema(instanceHint = null) {\n        var propertyNameSchema = this.propertyNames || { type: 'string' };\n        if (this.additionalProperties === false) {\n            propertyNameSchema.error = `Additional properties not allowed.`;\n        }\n        if (instanceHint) {\n            // With instanceHint as hint, consider assisting the caller with\n            // 1. Dynamically-generated names as options - names that aren't yet in the instance\n        }\n        propertyNameSchema.isRequired = true;\n        return propertyNameSchema;\n    }\n\n    getPropertySchema(propertyName, instanceHint = null) {\n        var propertySchema;\n        if ((!this.properties || !(propertySchema = this.properties[propertyName]))\n        && !(propertySchema = this._patternPropertiesMatch(propertyName))\n        && !(propertySchema = this.additionalProperties) && propertySchema !== false) {\n            propertySchema = { };\n        }\n        if (propertySchema) {\n            // Also use \"this.required\" to hint this property schema about requiredness\n            if ((this.required || []).includes(propertyName)) {\n                propertySchema.isRequired = true;\n            }\n            if (instanceHint) {\n                const instanceProperties = Object.keys(instanceHint);\n                // With instance as hint, consider assisting the caller with dynamically-generated hints\n                // 1. Use \"this.dependentRequired\" to hint this property schema about dependent-requiredness\n                var requiringProp;\n                if (!propertySchema.isRequired && (requiringProp = _intersect(this.dependentRequired || [], instanceProperties).reduce((masterHint, master) => masterHint || this.dependentRequired[master].includes(propertyName) ? master : null, null))) {\n                    propertySchema.isRequired = requiringProp;\n                }\n                // 2. Info about whether this proposed entry will validate against \"this.min/this.maxProperties\"\n                var validity;\n                if (!instanceProperties.includes(propertyName) && !(validity = this._validateMax(instanceHint)).valid || validity.violation === 0/* currently exact maximum reached */) {\n                    propertySchema.error = `This additional entry will violate the maximum number of entries allowed.`;\n                }\n                // 3. dynamic \"type\": the list of types in \"this.allOf\", \"this.anyOf\", \"this.oneOf\", not in \"this.not\"\n            }\n            return { ...propertySchema, name:propertyName };\n        }\n    }\n\n    _patternPropertiesMatch(propertyName) {\n        return Object.keys(this.patternProperties || {}).reduce((prev, pattern) => {\n            if (prev) return prev;\n            if ((new RegExp(pattern)).test(propertyName)) {\n                return this.patternProperties[pattern];\n            }\n        }, null);\n    }\n\n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        if (!(validity = this._validateRequired(instance)).valid) {\n            return { valid: false, error: validity.error || `Required entries still empty: ${validity.violation.join(', ')}.` };\n        }\n        if (!(validity = this._validateDependentRequired(instance)).valid) {\n            return { valid: false, error: validity.error || `Entries associated with \"${validity.master}\" still empty: ${validity.violation.join(', ')}.` };\n        }\n        return validity;\n    }\n\n    _validateMax(instance) {\n        if (!this.maxProperties) return { valid: true };\n        const instanceProperties = Object.keys(instance);\n        const violation = instanceProperties.length - this.maxProperties;\n        return { valid: violation <= 0, violation };\n    }\n\n    _validateMin(instance) {\n        if (!this.minProperties) return { valid: true };\n        const instanceProperties = Object.keys(instance);\n        const violation = this.minProperties - instanceProperties.length;\n        return { valid: violation <= 0, violation };\n    }\n\n    _validateRequired(instance) {\n        if (!this.required) return { valid: true };\n        const instanceProperties = Object.keys(instance);\n        const violation = _difference(this.required, instanceProperties);\n        return { valid: violation.length === 0, violation };\n    }\n\n    _validateDependentRequired(instance) {\n        if (!this.dependentRequired) return { valid: true };\n        const instanceProperties = Object.keys(instance);\n        const [ master, violation ] = Object.keys(this.dependentRequired).reduce((prev, key) => {\n            if (prev) return prev;\n            if (instanceProperties.includes(key)) {\n                const violation = _difference(this.dependentRequired[key], instanceProperties);\n                if (violation.length) return [ key, violation ];\n            }\n        }, null) || [];\n        return { valid: !master, master, violation };\n    }\n}\n\n/**\n * @Array Controller\n */\n export const _Array = __Array => class extends _ObjectOrArray(__Array) {\n\n    getItemSchema(itemIndex, instanceHint = null) {\n        var itemSchema;\n        if ((!this.prefixItems || !(itemSchema = this.prefixItems[itemIndex]))\n        && !(itemSchema = this.items) && itemSchema !== false) {\n            itemSchema = { };\n        }\n        if (itemSchema) {\n            if (instanceHint) {\n                // With instance as hint, consider assisting the caller with dynamically-generated hints\n                // 1. Info about whether this proposed entry will validate against \"this.min/this.maxProperties\"\n                var validity;\n                if (!(itemIndex in instanceHint) && !(validity = this._validateMax(instanceHint)).valid || validity.violation === 0/* currently exact maximum reached */) {\n                    itemSchema.error = `This additional entry will violate the maximum number of entries allowed.`;\n                }\n                // 2. \"this.contains\"\n            }\n            return { ...itemSchema, name:itemIndex };\n        }\n    }\n\n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        if (!(validity = this._validateUnique(instance)).valid) {\n            return { valid: false, error: validity.error || `Entries must be unique` };\n        }\n        if (!(validity = this._validateContains(instance)).valid) {\n            return { valid: false, error: validity.error || `Entries must contain ${validity.min > 0 ? `at least ${validity.min} ` + (validity.max > 1 ? 'and ' : '') : ''} ${validity.max > 1 ? `at most ${validity.max} ` : ''}of ${validity.desc}.` };\n        }\n        return validity;\n    }\n\n    _validateMax(instance) {\n        if (!this.maxItems) return { valid: true };\n        const violation = instance.length - this.maxItems;\n        return { valid: violation <= 0, violation };\n    }\n\n    _validateMin(instance) {\n        if (!this.minItems) return { valid: true };\n        const violation = this.minItems - instance.length;\n        return { valid: violation <= 0, violation };\n    }\n\n    _validateUnique(instance) {\n        if (!this.uniqueItems) return { valid: true };\n        return { valid: _unique(instance).length === instance.length };\n    }\n\n    _validateContains(instance) {\n        if (!this.contains) return { valid: true };\n        const passes = instance.filter(item => this.__validateContains(this.contains, item));\n        if (passes.length < (this.minContains || 1)) {\n            return { valid: false, min: this.minContains || 1, max: this.maxContains, desc };\n        }\n        if (this.maxContains && passes.length > this.maxContains) {\n            return { valid: false, min: this.minContains || 1, max: this.maxContains, desc };\n        }\n        return { valid: true };\n    }\n}\n\n/**\n * @String Controller\n */\nexport const _String = __String => class extends _Schema(__String) {\n\n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        return { valid: _isString(instance) };\n    }\n\n}\n\n/**\n * @Num Controller\n */\nexport const _Num = __Num => class extends _Schema(__Num) {\n\n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        return validity;\n    }\n\n}\n\n/**\n * @Number Controller\n */\nexport const _Number = __Number => class extends _Num(__Number) {\n    \n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        return { valid: _isNumeric(instance) };\n    }\n\n}\n\n/**\n * @Integer Controller\n */\nexport const _Integer = __Integer => class extends _Num(__Integer) {\n\n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        return { valid: Number.isInteger(instance) };\n    }\n\n}\n\n/**\n * @Boolean Controller\n */\nexport const _Boolean = __Boolean => class extends _Schema(__Boolean) {\n\n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        return { valid: _isBoolean(instance) };\n    }\n\n}\n\n/**\n * @Null Controller\n */\nexport const _Null = __Null => class extends _Schema(__Null) {\n\n    validate(instance) {\n        var validity = super.validate(instance);\n        if (!validity.valid) return validity;\n        return { valid: _isNull(instance) };\n    }\n\n}","\n/**\n * @imports\n */\nimport Observer from '@webqit/observer';\nimport { _toTitle } from '@webqit/util/str/index.js';\nimport { _from as _arrFrom, _intersect } from '@webqit/util/arr/index.js';\nimport { _getType, _isBoolean, _isEmpty, _isTypeObject, _isArray, _isFunction, _isUndefined, _isNumeric, _isObject } from '@webqit/util/js/index.js';\nimport { _isTextMediaType, _isFileUpload } from './utils/util.js';\nimport * as Schemas from './schema-mixins.js';\n\n/**\n * @Root Base Controller\n */\nexport const _Root = __Root => class extends (__Root || class {}) {\n\n    constructor() {\n        super();\n        this.nodeRemovalListeners = new Map;\n    }\n\n    execNodeRemoval(node) {\n        if (_isFunction(node.remove)) {\n            node.remove();\n        }\n    }\n\n    onNodeRemoval(node, callback) {\n        var listeners = this.nodeRemovalListeners.get(node);\n        if (!listeners) {\n            listeners = [];\n            this.nodeRemovalListeners.set(node, listeners);\n        }\n        listeners.push(callback);\n    }\n\n    async remoteAction(method, url, options = {}) {\n        return {};\n    }\n\n    static getSchemaName(type) {\n        type = _arrFrom(type || 'string');\n        return [\n            ['object', '_Object'],\n            ['array', '_Array'],\n            ['string', '_String'],\n            ['number', '_Number'],\n            ['integer', '_Integer'],\n            ['boolean', '_Boolean'],\n            ['null', '_Null']\n        ].reduce((name, pair) => name || (type.includes(pair[0]) ? pair[1] : null), null);\n    }\n\n    define(schema, ownerWidget = null) {\n        Observer.set(this, 'schema', Observer.proxy(schema));\n        Observer.set(this, 'ownerWidget', ownerWidget);\n        Observer.set(this, 'attrs', Observer.proxy({\n            name: this.ownerWidget && this.ownerWidget.attrs.name ? `${this.ownerWidget.attrs.name}[${this.schema.name}]` : this.schema.name\n        }));\n        if (!this.state) {\n            Observer.set(this, 'state', Observer.proxy({}));\n        }\n        if (!this.schema.title) {\n            this.schema.title = _toTitle(((this.schema.name || '') + '').replaceAll('_', ' '));\n        }\n        if (this.schema.isRequired) {\n            this.attrs.required = true;\n        }\n        if (!_isUndefined(this.schema.const) || !_isUndefined(this.schema.default)) {\n            this.attrs.value = !_isUndefined(this.schema.const) ? this.schema.const : this.schema.default;\n        }\n        if (this.schema.readOnly || !_isUndefined(this.schema.const)) {\n            this.attrs.readonly = true;\n        }\n    }\n\n    alert(alert = null) {\n        if (arguments.length) {\n            this.state.alert = { message: alert.message, type: alert.type };\n        }\n        return { ...(this.state.alert || {}) };\n    }\n\n    json() {}\n\n    set value(value) {\n        this.json(value);\n    }\n\n    get value() {\n        return this.json();\n    }\n\n};\n\n/**\n * @ParentRoot Base Controller\n */\nexport const _ParentRoot = __ParentRoot => class extends _Root(__ParentRoot) {\n\n    deriveChildEntry(childSchema, i) {}\n\n};\n\n/**\n * @Collection Controller\n */\nexport const _Collection = __Collection => class extends _ParentRoot(__Collection) {\n\n    constructor() {\n        super();\n        Observer.set(this, 'childEntries', Observer.proxy({}));\n        Observer.observe(this.childEntries, mutations => {\n            mutations.forEach(m => {\n                if (m.type === 'set') {\n                    if (m.isUpdate && m.oldValue) {\n                        this.execNodeRemoval(m.oldValue);\n                    }\n                    if (m.value) {\n                        if (_isFunction(this.onNodeRemoval)) {\n                            this.onNodeRemoval(m.value, () => {\n                                if (this.childEntries[m.name] === m.value) {\n                                    delete this.childEntries[m.name];\n                                }\n                            });\n                        }\n                    } else {\n                        console.warn(`No widget type defined for entry \"${m.name}\" of schema type \"${_arrFrom(this.schema.properties[m.name].type || 'string').join(', ')}\".`);\n                    }\n                }\n                if (m.type === 'deleteProperty') {\n                    this.execNodeRemoval(m.oldValue);\n                }\n            });\n        });\n        // Better regex would allow you to not select the ${} characters. Try: /(?!\\${)([^{}]*)(?=})/g\n        function renderString(str,obj) {\n            return str.replace(/\\{.+?\\}/g, match => {return index(obj,match)})\n        }\n    }\n        \n    static testSchema(jsonSchema) {\n        return _arrFrom(jsonSchema.type).includes('object');\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(new (Schemas._Object())(jsonSchema), ownerWidget);\n        Object.keys(this.childEntries).forEach(propertyName => {\n            delete this.childEntries[propertyName];\n        });\n        Object.keys(this.schema.properties || {}).forEach(propertyName => {\n            const propertySchema = this.schema.getPropertySchema(propertyName);\n            if (propertySchema.display !== false) {\n                this.childEntries[propertyName] = this.deriveChildEntry(propertySchema, propertyName);\n            }\n        });        \n    }\n\n    extend(propertyName, callback = null) {\n        if (_isFunction(propertyName)) {\n            const promptPropertyName = () => {\n                const propertyNameSchema = this.schema.getPropertyNameSchema(this.json());\n                propertyName(propertyNameSchema, _propertyName => {\n                    if (propertyNameSchema.validate(_propertyName)) {\n                        extend(_propertyName, callback);\n                    } else {\n                        promptPropertyName();\n                    }\n                });\n            }\n            promptPropertyName();\n        } else if (propertyName) {\n            const instanceHint = this.json();\n            this.childEntries[propertyName] = this.deriveChildEntry(this.schema.getPropertySchema(propertyName, instanceHint), propertyName);;\n            if (callback) {\n                callback(this.childEntries[propertyName]);\n            }\n        }\n    }\n\n    json(data = {}, autoExtend = false) {\n        if (arguments.length) {\n            if (!_isObject(data)) throw new Error(`Data must be a valid JSON object.`);\n            Object.keys(data).forEach(name => {\n                if (this.childEntries[name]) {\n                    this.childEntries[name].json(data[name]);\n                } else if (autoExtend) {\n                    this.extend(name, childEntry => {\n                        childEntry.json(data[name]);\n                    });\n                }\n            });\n            return;\n        }\n        // ------------------\n        const _data = {};\n        Object.keys(this.childEntries).forEach(name => {\n            _data[name] = this.childEntries[name].json();\n        });\n        return _data;\n    }\n\n    alert(alert = {}, autoExtend = false) {\n        if (arguments.length) {\n            super.alert(alert);\n            if (alert.details && !_isObject(alert.details)) throw new Error(`Alert details must be a valid JSON object.`);\n            Object.keys(alert.details || {}).forEach(name => {\n                if (this.childEntries[name]) {\n                    this.childEntries[name].alert(alert.details[name]);\n                } else if (autoExtend) {\n                    this.extend(name, childEntry => {\n                        childEntry.alert(alert.details[name]);\n                    });\n                }\n            });\n            return;\n        }\n        // ------------------\n        const _alert = super.alert(); _alert.details = {};\n        Object.keys(this.childEntries).forEach(name => {\n            _alert.details[name] = this.childEntries[name].alert();\n        });\n        return _alert;\n    }\n    \n};\n    \n/**\n * @Multiple Controller\n */\nexport const _Multiple = __Multiple => class extends _ParentRoot(__Multiple) {\n\n    constructor() {\n        super();\n        Observer.set(this, 'childEntries', Observer.proxy([]));\n        Observer.observe(this.childEntries, mutations => {\n            mutations.forEach(m => {\n                if (m.name === 'length') return;\n                if (m.type === 'set') {\n                    if (m.isUpdate && m.oldValue && this.childEntries.indexOf(m.oldValue) === -1) {\n                        this.execNodeRemoval(m.oldValue);\n                    }\n                    if (m.value) {\n                        if (_isFunction(this.onNodeRemoval)) {\n                            this.onNodeRemoval(m.value, () => {\n                                const i = this.childEntries.indexOf(m.value);\n                                if (i > -1) {\n                                    this.childEntries.splice(i, 1);\n                                }\n                            });\n                        }\n                    } else {\n                        console.warn(`No widget type defined for entry \"${m.name}\" of schema type \"${_arrFrom(m.value.type || 'string').join(', ')}\".`);\n                    }\n                }\n                if (m.type === 'deleteProperty') {\n                    if (this.childEntries.indexOf(m.oldValue) === -1) {\n                        this.execNodeRemoval(m.oldValue);\n                    }\n                }\n            });\n        });\n    }\n     \n    static testSchema(jsonSchema) {\n        return _arrFrom(jsonSchema.type).includes('array');\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(new (Schemas._Array())(jsonSchema), ownerWidget);\n        this.childEntries.splice(0);\n        if (!_isEmpty(this.schema.prefixItems)) {\n            this.schema.prefixItems.forEach((itemSchema, itemIndex) => {\n                this.childEntries.push(this.deriveChildEntry(itemSchema, itemIndex));\n            });\n        }\n        if (this.schema.autoExtend === true) {\n            this.extend();\n        }\n    }\n\n    extend(callback = null) {\n        const instanceHint = this.json();\n        const itemIndex = instanceHint.length;\n        const childEntry = this.deriveChildEntry(this.schema.getItemSchema(itemIndex, instanceHint), itemIndex);\n        this.childEntries.push(childEntry);\n        if (callback) {\n            callback(childEntry);\n        }\n    }\n\n    execNodeRemoval(node, confirm = null) {\n        if (!confirm) {\n            confirm = (msg, done) => done();\n        }\n        const i = this.childEntries.indexOf(node);\n        if (i === -1) {\n            return;\n        }\n        const name = !node.schema ? 'item' : (_isNumeric(node.schema.title) ? `item ${parseInt(node.schema.title) + 1}` : node.schema.title);\n        if (this.schema.remoteDelete) {\n            var value = node.value;\n            if (value && !_isTypeObject(value)) {\n                var deleteUrl = this.schema.remoteDelete.url.replace(/\\{value\\}/g, value);\n                confirm(`Remove ${name} (and delete from your account)?`, () => {\n                    return this.remoteAction(this.schema.remoteDelete.method || 'delete', deleteUrl).then(res => {\n                        if (res.ok) {\n                            super.execNodeRemoval(node);\n                        }\n                        return res;\n                    });\n                });\n                return;\n            }\n        }\n        confirm(`Remove ${name}?`, async () => {\n            super.execNodeRemoval(node);\n        });\n    }\n\n    json(data = []) {\n        if (arguments.length) {\n            if (!_isArray(data)) throw new Error(`Data must be a valid JSON array.`);\n            data.forEach((value, itemIndex) => {\n                if (this.childEntries[itemIndex]) {\n                    this.childEntries[itemIndex].json(value);\n                } else {\n                    this.extend(childEntry => {\n                        childEntry.json(value);\n                    });\n                }\n            });\n            return;\n        }\n        // ------------------\n        return this.childEntries.filter(entry => entry).map(entry => entry.json());\n    }\n\n    alert(alert = {}, autoExtend = false) {\n        if (arguments.length) {\n            super.alert(alert);\n            if (alert.details && !_isArray(alert.details) && !Object.keys(alert.details).every(k => _isNumeric(k))) throw new Error(`Alert items must be a valid JSON array.`);\n            Object.keys(alert.details).forEach(itemIndex => {\n                const _alert = alert.details[itemIndex];\n                if (this.childEntries[itemIndex]) {\n                    this.childEntries[itemIndex].alert(_alert);\n                } else {\n                    this.extend(childEntry => {\n                        childEntry.alert(_alert);\n                    });\n                }\n            });\n            return;\n        }\n        const _alert = super.alert();\n        _alert.details = this.childEntries.filter(entry => entry).map(entry => entry.alert());\n        return _alert;\n    }\n\n};\n\n/**\n * @Multiple Controller\n */\nexport const _Multiple2 = __Multiple2 => class extends _Multiple(__Multiple2) {\n            \n    static testSchema(jsonSchema) {\n        if (!super.testSchema(jsonSchema)) return;\n        // Any enum is going to be array items each\n        if (jsonSchema.enum) return;\n        var entries = [],\n            widgetLineContentLengthLimit = this.lineContentLengthLimit || 50;\n        if (jsonSchema.prefixItems) {\n            // super.testSchema() plus only \"const\" or \"single-item enum\", plus, nothing object-like, nor a string that execeeds widget line limit\n            if (jsonSchema.prefixItems.some(item => (!('const' in item) && (item.enum || []).length !== 1) || _intersect(_arrFrom(item.type), ['array', 'object']).length || Math.max(item.minLength, item.maxLength, 0) > widgetLineContentLengthLimit)) return;\n            entries = jsonSchema.prefixItems.map(item => ('const' in item) ? item.const : item.enum[0]);\n        }\n        if (jsonSchema.items) {\n            // super.testSchema() plus nothing object-like, nor a string that execeeds widget line limit\n            if (_intersect(_arrFrom(jsonSchema.items.type), ['array', 'object']).length || Math.max(jsonSchema.items.minLength, jsonSchema.items.maxLength, 0) > widgetLineContentLengthLimit) return;\n            entries = entries.concat(jsonSchema.items.enum || /* may not always be enum */[]);\n        }\n        return !(entries.some(item => _isTypeObject(item) || (item + '').length > widgetLineContentLengthLimit));\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(...arguments);\n        if (this.schema.autoExtend !== false) {\n            this.extend();\n        }\n    }\n    \n}\n\n/**\n * @Enum Controller\n */\nexport const _Enum = __Enum => class extends _Root(__Enum) {\n\n    constructor() {\n        super();\n        Observer.set(this, 'enumEntries', Observer.proxy([]));\n        Observer.observe(this.enumEntries, mutations => {\n            mutations.forEach(m => {\n                if (m.name === 'length') return;\n                if (m.type === 'set') {\n                    if (m.isUpdate && m.oldValue && this.enumEntries.indexOf(m.oldValue) === -1) {\n                        this.execNodeRemoval(m.oldValue);\n                    }\n                    if (_isFunction(this.onNodeRemoval)) {\n                        this.onNodeRemoval(m.value, () => {\n                            const i = this.enumEntries.indexOf(m.value);\n                            if (i > -1) {\n                                this.enumEntries.splice(i, 1);\n                            }\n                        });\n                    }\n                }\n                if (m.type === 'deleteProperty') {\n                    if (this.enumEntries.indexOf(m.oldValue) === -1) {\n                        this.execNodeRemoval(m.oldValue);\n                    }\n                }\n            });\n        });\n    }\n\n    static testSchema(jsonSchema) {\n        return _isArray(jsonSchema.enum) || (\n            // Or where an array with the following conditions that completely eliminates the idea of a schema-based items list:\n            _arrFrom(jsonSchema.type).includes('array') && (\n                // 1. where no jsonSchema.prefixItems (which would have been a schema) or where jsonSchema.prefixItems bundles its \"const\"s\n                (_isEmpty(jsonSchema.prefixItems) || jsonSchema.prefixItems.every(item => ('const' in item) || (item.enum || []).length === 1))\n                // 2. where no .items (meaning: \"won't grow\") or where .items bundles its \"enums\" which are themselves expected to be final as specified by .uniqueItems\n                && (jsonSchema.items === false || (_isArray((jsonSchema.items || {}).enum) && jsonSchema.uniqueItems))\n            )\n        );\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        // Enums can be any type\n        const schemaName = this.constructor.getSchemaName(jsonSchema.type);\n        this.enumEntries.splice(0);\n        super.define(new (Schemas[schemaName]())(jsonSchema), ownerWidget);\n        // -------------\n        // Fetch items...\n        // -------------\n        const runSchemaEnum = (enumValues, enumNames) => {\n            const entries = enumValues.map((value, i) => ({ value, label: (enumNames || {})[i] }));\n            this.enumerate(entries, 1);\n        };\n        const runSchemaEnumFetch = remoteFetch => {\n            this.enumFetching = this.remoteAction(remoteFetch.method || 'get', remoteFetch.url, {\n                headers: { accept: 'application/json' }\n            }).then(res => res.ok ? res.json() : Promise.reject({ message: res.statusText })).then(res => {\n                var _entries = !_isArray(res.data) ? [] : res.data.map(entry => (_isObject(entry) ? {\n                    value: 'value' in entry ? entry.value : entry.id,\n                    label: 'label' in entry ? entry.label : entry.title,\n                } : {\n                    value: entry,\n                }));\n                this.enumerate(_entries, remoteFetch.url);\n            });\n        };\n        // -------------\n        // Mine items...\n        // -------------\n        if (this.schema.remoteFetch) {\n            runSchemaEnumFetch(this.schema.remoteFetch);\n            Observer.observe(this.schema, 'remoteFetch', () => {\n                runSchemaEnumFetch(this.schema.remoteFetch);\n            }, { subtree: true });\n        } else if (this.schema.enum) {\n            runSchemaEnum(this.schema.enum, this.schema.enumNames);\n            Observer.observe(this.schema, [['enum'], ['enumNames']], () => {\n                runSchemaEnum(this.schema.enum, this.schema.enumNames);\n            });\n        } else if (_arrFrom(this.schema.type || 'string').includes('array')) {\n            const entries = [];\n            // Array case 1:\n            if (this.schema.prefixItems) {\n                entries = this.schema.prefixItems.map(item => (\n                    ('const' in item) ? { value: item.const, label: item.title } : { value: item.enum[0], label: item.title || (item.enumNames || [])[0] }\n                ));\n            }\n            // Array case 2:\n            if (this.schema.items) {\n                this.schema.items.enum.forEach((item, i) => {\n                    entries.push({ value: item, label: (this.schema.items.enumNames || [])[i] });\n                });\n            }\n            // Expecting type array means \"multiple\"\n            this.attrs.multiple = true;\n            this.attrs.name += '[]';\n            entries.forEach(item => {\n                item.selected = true;\n            });\n            this.enumerate(entries, 2);\n        }\n    }\n\n    deriveEnumEntry(enumData, index) {}\n\n    enumerate(entries, clearByTag = null) {\n        if (_arrFrom(this.schema.type).includes('null')) {\n            entries = [{ value: null, label: this.attrs.placeholder }].concat(entries);\n        }\n        if (clearByTag) {\n            if (clearByTag === true) {\n                this.enumEntries.splice(0);\n            } else {\n                this.enumEntries.filter(entry => _intersect(_arrFrom(entry.enumTag), _arrFrom(clearByTag)).length).forEach(entry => {\n                    const index = this.enumEntries.indexOf(entry);\n                    if (index > -1) {\n                        this.enumEntries.splice(index, 1);\n                    }\n                });\n            }\n        }\n        this.enumEntries.push(...entries.map((entry, i) => {\n            entry = this.deriveEnumEntry(entry, i);\n            if (clearByTag) {\n                entry.enumTag = clearByTag;\n            }\n            return entry;\n        }));\n    }\n\n    json(data = []) {\n        if (arguments.length) {\n            if (!_isArray(data)) {\n                if (this.attrs.multiple)\n                    throw new Error(`Data must be a valid JSON array.`);\n                data = [ data ];\n            }\n            const runSelect = () => {\n                this.enumEntries.forEach(entry => {\n                    entry.selected = false;\n                    data.forEach(value => {\n                        if (entry.value === value + '') {\n                            entry.selected = true;\n                        }\n                    });\n                });\n            };\n            if (this.enumFetching) {\n                this.enumFetching.then(runSelect);\n            } else {\n                runSelect();\n            }\n            return;\n        }\n        const selected = this.enumEntries.filter(entry => entry.selected).map(entry => entry.value);\n        return this.attrs.multiple ? selected : selected[0];\n    }\n\n};\n\n/**\n * @Enum2 Controller\n */\nexport const _Enum2 = __Enum2 => class extends _Enum(__Enum2) {\n    \n    static testSchema(jsonSchema) {\n        if (!super.testSchema(jsonSchema)) return;\n        var entries = [],\n            widgetLineContentLengthLimit = this.lineContentLengthLimit || 50;\n        if (jsonSchema.enum) {\n            // super.testSchema() plus nothing object-like, nor a string that execeeds widget line limit\n            if (_intersect(_arrFrom(jsonSchema.type), ['array', 'object']).length || Math.max(jsonSchema.minLength, jsonSchema.maxLength, 0) > widgetLineContentLengthLimit) return;\n            entries = jsonSchema.enum;\n        } else if (!jsonSchema.remoteFetch) {\n            if (jsonSchema.prefixItems) {\n                // Only \"const\" or \"single-item enum\" - as ensured by super.testSchema(), plus, none should be object-like, nor a string that execeeds widget line limit\n                if (jsonSchema.prefixItems.some(item => _intersect(_arrFrom(item.type), ['array', 'object']).length || Math.max(item.minLength, item.maxLength, 0) > widgetLineContentLengthLimit)) return;\n                entries = jsonSchema.prefixItems.map(item => ('const' in item) ? item.const : item.enum[0]);\n            }\n            if (jsonSchema.items) {\n                // super.testSchema() plus nothing object-like, nor a string that execeeds widget line limit\n                if (_intersect(_arrFrom(jsonSchema.items.type), ['array', 'object']).length || Math.max(jsonSchema.items.minLength, jsonSchema.items.maxLength, 0) > widgetLineContentLengthLimit) return;\n                entries = entries.concat(jsonSchema.items.enum);\n            }\n        }\n        return !(entries.some(item => _isTypeObject(item) || (item + '').length > widgetLineContentLengthLimit));\n    }\n\n}\n\n/**\n * @File Controller\n */\nexport const _File = __File => class extends _Root(__File) {\n\n    constructor() {\n        super();\n        Observer.set(this, 'filesList', Observer.proxy([]));\n        Observer.set(this, 'fallbackFilesList', Observer.proxy([]));\n        Observer.observe(this.filesList, mutations => {\n            mutations.forEach(m => {\n                if (m.name === 'length') return;\n                if (m.type === 'set') {\n                    if (m.isUpdate && m.oldValue && this.filesList.indexOf(m.oldValue) === -1) {\n                        this.execNodeRemoval(m.oldValue);\n                    }\n                    if (_isFunction(this.onNodeRemoval)) {\n                        this.onNodeRemoval(m.value, () => {\n                            const i = this.filesList.indexOf(m.value);\n                            if (i > -1) {\n                                this.filesList.splice(i, 1);\n                            }\n                        });\n                    }\n                }\n                if (m.type === 'deleteProperty') {\n                    if (this.filesList.indexOf(m.oldValue) === -1) {\n                        this.execNodeRemoval(m.oldValue);\n                    }\n                }\n            });\n        });\n    }\n\n    static testSchema(jsonSchema) {\n        const _isFileSchema = _jsonSchema => {\n            const schemaType = _arrFrom(_jsonSchema.type || 'string');\n            return (schemaType.includes('string') && (_isFileUpload(_jsonSchema) || (_jsonSchema.contentMediaType && !_isTextMediaType(_jsonSchema.contentMediaType))));\n        };\n        return _isFileSchema(jsonSchema) || (\n            _arrFrom(jsonSchema.type).includes('array') && jsonSchema.uniqueItems && _isEmpty(jsonSchema.prefixItems) && _isFileSchema(jsonSchema.items || {})\n        );\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        const schemaType = _arrFrom(jsonSchema.type);\n        const $schema = schemaType.includes('array') ? Schemas._Array() : Schemas._String();\n        super.define(new $schema(jsonSchema), ownerWidget);\n        this.filesList.splice(0);\n        this.attrs.type = 'file';\n        if (schemaType.includes('array')) {\n            this.attrs.name += '[]';\n            this.attrs.multiple = true;\n        }\n        if (this.schema.contentMediaType || (this.schema.items && this.schema.items.contentMediaType)) {\n            this.attrs.accept = this.schema.contentMediaType || this.schema.items.contentMediaType;\n        }\n    }\n\n    deriveFileEntry(fileData, key) {}\n\n    populate(filesData, clearByTag = null) {\n        if (clearByTag) {\n            if (clearByTag === true) {\n                this.filesList.splice(0);\n            } else {\n                this.filesList.filter(entry => _intersect(_arrFrom(entry.enumTag), _arrFrom(clearByTag)).length).forEach(entry => {\n                    const index = this.filesList.indexOf(entry);\n                    if (index > -1) {\n                        // Don't remove just yet (; people are listening) until we figure out if this\n                        // should only be a transition to this.fallbackFilesList\n                        if (index > -1 && _intersect(_arrFrom(entry.enumTag), [ 1, 2 ]).length === 2) {\n                            this.fallbackFilesList.push(this.filesList[index]);\n                        }\n                        this.filesList.splice(index, 1); // Remove only now\n                    }\n                });\n            }\n        }\n        if ((!filesData || !filesData.length) && (!this.filesList.length || !this.filesList[0]) && this.fallbackFilesList.length) {\n            const _enumTag = this.fallbackFilesList[0].enumTag;\n            this.populate(this.fallbackFilesList.splice(0).map(_entry => ({ file: _entry.file })), _enumTag);\n        }\n        this.filesList.push(...filesData.map((fileData, i) => {\n            var entry = this.deriveFileEntry(fileData, i, clearByTag);\n            if (clearByTag !== null) {\n                entry.enumTag = clearByTag;\n            }\n            return entry;\n        }));\n    }\n\n    execNodeRemoval(node, confirm = null) {\n        if (!confirm) {\n            confirm = (msg, done) => done();\n        }\n        const name = 'file';\n        if (this.schema.remoteDelete && this.fallbackFilesList.indexOf(node) === -1) {\n\n            var value = node.file;\n            if (value && !_isTypeObject(value)) {\n                var deleteUrl = this.schema.remoteDelete.url.replace(/\\{value\\}/g, value);\n                confirm(`Remove ${name} (and delete from your account)?`, () => {\n                    return this.remoteAction(this.schema.remoteDelete.method || 'delete', deleteUrl).then(res => {\n                        if (res.ok) {\n                            super.execNodeRemoval(node);\n                        }\n                        return res;\n                    });\n                });\n                return;\n            }\n        }\n        confirm(`Remove ${name}?`, async () => {\n            super.execNodeRemoval(node);\n        });\n    }\n\n    json(files = []) {\n        if (arguments.length) {\n            if (!_isArray(files)) {\n                if (this.attrs.multiple)\n                    throw new Error(`Data must be a valid JSON array.`);\n                files = [ files ];\n            }\n            this.populate(files.filter(file => file).map(file => ({ file })), [ 1, 2 ]);\n            return;\n        }\n        const uploads = this.filesList.filter(entry => _isObject(entry.file)).map(entry => entry.file);\n        return this.attrs.multiple ? uploads : uploads[0];\n    }\n\n};\n\n/**\n * @InputRoot Base Controller\n */\nexport const _Input = __Input => class extends _Root(__Input) {\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(...arguments);\n        if (!_isUndefined(this.schema.default) || this.schema.examples) {\n            this.attrs.placeholder = `E.g.: ${!_isUndefined(this.schema.default) ? this.schema.default : this.schema.examples[0]}`;\n        }\n        if ('const' in this.schema || (this.schema.enum || []).length === 1) {\n            this.attrs.value = 'const' in this.schema ? this.schema.const : this.schema.enum[0];\n        }\n    }\n\n    json(data = {}) {\n        if (arguments.length) return;\n        return this.attrs.multiple ? [] : null;\n    }\n\n};\n\n/**\n * @Editor Controller\n */\nexport const _Editor = __Editor => class extends _Input(__Editor) {\n        \n    static testSchema(jsonSchema) {\n        const schemaType = _arrFrom(jsonSchema.type || 'string');\n        return schemaType.includes('string') && ((jsonSchema.contentMediaType && _isTextMediaType(jsonSchema.contentMediaType)) || (\n            Math.max(jsonSchema.maxLength || 0, jsonSchema.minLength || 0) >= 1024\n        ));\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(new (Schemas._String())(jsonSchema), ownerWidget);\n    }\n\n};\n\n/**\n * @Input Controller\n */\nexport const _Text = __Text => class extends _Input(__Text) {\n        \n    static testSchema(jsonSchema) {\n        return _arrFrom(jsonSchema.type || 'string').includes('string');\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(new (Schemas._String())(jsonSchema), ownerWidget);\n        this.attrs.type = 'text';\n        if (this.schema.format === 'date') {\n            this.attrs.type = 'date';\n        } else if (this.schema.format === 'time') {\n            this.attrs.type = 'time';\n        } else if (this.schema.format === 'date-time') {\n            this.attrs.type = 'datetime-local';\n        } else if (this.schema.format === 'duration') {\n            this.attrs.type = ''; // ?\n        } else if (['uri', 'uri-reference', 'iri', 'iri-reference', 'uuid'].includes(this.schema.format)) {\n            this.attrs.pattern = ''; // regex\n        } else if (['hostname', 'idn-hostname'].includes(this.schema.format)) {\n            this.attrs.pattern = ''; // regex\n        } else if (['email', 'idn-email'].includes(this.schema.format)) {\n            this.attrs.type = 'email';\n        } else if (['ipv4', 'ipv6'].includes(this.schema.format)) {\n            this.attrs.pattern = ''; // regex\n        } else if (this.schema.format === 'password') {\n            this.attrs.type = 'password';\n        } else if (this.schema.format === 'color') {\n            this.attrs.type = 'color';\n        } else if (this.schema.format === 'phone') {\n            this.attrs.pattern = '^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$';\n        } else if (this.schema.format === 'postal-code') {\n            this.attrs.pattern = '^[0-9]{5}(?:-[0-9]{4})?$';\n        }\n        // -----\n        if (this.schema.maxLength) {\n            this.attrs.maxlength = this.schema.maxLength;\n        }\n        if (this.schema.minLength) {\n            this.attrs.minlength = this.schema.minLength;\n        }\n        if (this.schema.pattern) {\n            this.attrs.pattern = this.schema.pattern;\n        }\n        if (!this.schema.col) {\n            const col = this.schema.maxLength || 150;\n            this.schema.col = Math.max(1, parseInt(col / (300 / 12)));\n        }\n        // -----\n    }\n    \n};\n\n/**\n * @Number Controller\n */\nexport const _Number = __Number => class extends _Input(__Number) {\n        \n    static testSchema(jsonSchema) {\n        const schemaType = _arrFrom(jsonSchema.type);\n        return schemaType.includes('integer') || schemaType.includes('number');\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(new (Schemas._Number())(jsonSchema), ownerWidget);\n        this.attrs.type = 'number';\n        if (this.schema.exclusiveMaximum) {\n            this.attrs.max = this.schema.exclusiveMaximum - 0.0001;\n        } else if (this.schema.maximum) {\n            // date, month, week, time, datetime-local, number, and range\n            this.attrs.max = this.schema.maximum;\n        }\n        if (this.schema.exclusiveMinimum) {\n            this.attrs.min = this.schema.exclusiveMinimum + 0.0001;\n        } else if (this.schema.minimum) {\n            // date, month, week, time, datetime-local, number, and range\n            this.attrs.min = this.schema.minimum;\n        }\n        if (this.schema.multipleOf) {\n            // number, date/time input types, and range\n            this.attrs.step = this.schema.multipleOf;\n        }\n        if (!this.schema.col) {\n            const col = this.schema.maxLength /* char width in sql */ || 50;\n            this.schema.col = Math.max(1, parseInt(col / (300 / 12)));\n        }\n        // ------\n    }\n    \n};\n\n/**\n * @State Controller\n */\nexport const _State = __State => class extends _Root(__State) {\n        \n    static testSchema(jsonSchema) {\n        return _arrFrom(jsonSchema.type).includes('boolean');\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(new (Schemas._Boolean())(jsonSchema), ownerWidget);\n        this.attrs.type = 'checkbox';\n        if (this.schema.const === true || this.schema.default === true) {\n            this.attrs.checked = true;\n        }\n    }\n\n    json(data = {}) {\n        if (arguments.length) return;\n        return this.attrs.multiple ? [] : null;\n    }\n    \n};\n\n/**\n * @Root Base Controller\n */\nexport const _ItemScope = __ItemScope => class extends (__ItemScope || class {}) {\n\n    define(schema, ownerWidget = null) {\n        super.define(...arguments);\n        const setItemIndex = () => {\n            if ((this.attrs.index || this.attrs.index === 0) && this.childEntries && this.schema.indexProperty && this.childEntries[this.schema.indexProperty]) {\n                this.childEntries[this.schema.indexProperty].json(this.attrs.index);\n            }\n        };\n        setItemIndex();\n        Observer.observe(this.attrs, 'index', setItemIndex);\n    }\n    \n}","\n/**\n * @imports\n */\nimport Observer from '@webqit/observer';\nimport { _from as _arrFrom, _intersect } from '@webqit/util/arr/index.js';\nimport { _isString, _isNumeric, _isTypeObject } from '@webqit/util/js/index.js';\nimport { _toTitle } from '@webqit/util/str/index.js';\nimport * as Roots from './playui-mixins.js';\n\n/**\n * ---------------------------\n * Root Elements\n * ---------------------------\n */\n\n/**\n * @Root Element\n * @extends __Root\n */\nexport const _Root = __Root => class extends (__Root || HTMLElement) {\n\n    constructor() {\n        super();\n        const mutationObserver = new MutationObserver(entries => {\n            entries.forEach(entry => {\n                entry.removedNodes.forEach(node => {\n                    if (this.nodeRemovalListeners && this.nodeRemovalListeners.has(node)) {\n                        this.nodeRemovalListeners.get(node).forEach(callback => callback());\n                    }\n                });\n            });\n        });\n        mutationObserver.observe(this, { subtree: true, childList: true });\n    }\n\n    async remoteAction(method, url, options = {}) {\n        this.state.remoteAction = method;\n        this.state.remoteActionError = '';\n        return fetch(url, { headers: { accept: 'application/json' }, ...options, method }).then(res => {\n            this.state.remoteAction = false;\n            return res;\n        }).catch(e => {\n            this.state.remoteAction = false;\n            this.alert(e);\n        });\n    }\n\n    static get subscriptMethods() {\n        return [ 'renderBasic', 'render' ];\n    }\n\n    renderBasic() {\n        //if (typeof $ === 'undefined') return;\n        if (this.schema.title && this.namespace.title) {\n            $(this.namespace.title).html(this.schema.title);\n        }\n        if (this.schema.description && this.namespace.description) {\n            $(this.namespace.description).html(this.schema.description);\n        }\n        if (this.schema.isRequired) {\n            $(this).attr('data-required', true);\n        }\n        if (this.schema.col && this.schema.col !== 12) {\n            $(this).class({\n                ['col-' + this.schema.col]: true,\n                'col-12': false,\n            });\n        } else {\n            $(this).class('col-12', true);\n        }\n        if (this.schema.display === 'hidden') {\n            $(this).class('overflow-hidden wt-0 ht-0 pd-0 mg-0', true);\n        }\n        $(this).attr('data-remote-action', this.state.remoteAction || false);\n        $(this).attr('data-remote-action-error', this.state.remoteActionError || false);\n        var message = this.state.alert ? this.state.alert.message : '';\n        var type = this.state.alert ? this.state.alert.type : '';\n        if (this.namespace.alert) {\n            $(this.namespace.alert).html(message || '');\n            $(this.namespace.alert).attr('data-type', type || false);\n            if (message) {\n                this.namespace.alert.focus();\n            }\n        }\n    }\n\n    render() {}\n\n    alert() {\n        const ret = super.alert(...arguments);\n        this.renderBasic();\n        return ret;\n    }\n\n};\n\n/**\n * @ParentRoot Element\n * @extends _Root() -> __ParentRoot\n */\nexport const _ParentRoot = __ParentRoot => class extends _Root(__ParentRoot) {\n\n    connectedCallback() {\n        super.connectedCallback();\n        if (this.namespace.adder) {\n            this.adderAction = this.adderAction || (() => this.extend());\n            this.namespace.adder.removeEventListener('click', this.adderAction);\n            this.namespace.adder.addEventListener('click', this.adderAction);\n        }\n    }\n\n    deriveChildEntry(childSchema, i) {\n        if (!this.template) return;\n        var childEntry = Reflect.ownKeys(this.template.exports).map(key => this.template.exports[key][0]).reduce((match, item) => {\n            if (match) return match;\n            const constructor = item.hasAttribute('is') \n                ? customElements.get(item.getAttribute('is'))\n                : customElements.get(item.localName);\n            return constructor && constructor.testSchema(childSchema) ? item : null;\n        }, null);\n        if (childEntry) {\n            childEntry = childEntry.cloneNode(true);\n            if (this.namespace.content) {\n                this.namespace.content.append(childEntry);\n            } else {\n                this.append(childEntry);\n            }\n            // ------------\n            try {\n                childEntry.define(childSchema, this);\n                (childEntry.attrs || {}).index = i;\n            } catch(e) {\n                console.warn(`Error calling element.define();`, e, this);\n            }\n        }\n        return childEntry;\n    }\n\n};\n\n/**\n * @Collection Element\n * @extends _ParentRoot() -> Roots._Collection() -> __Collection\n */\nexport const _Collection = __Collection => class extends _ParentRoot(Roots._Collection(__Collection || HTMLElement)) {\n\n    get value() {\n        if (this.schema.primaryKey && this.childEntries[this.schema.primaryKey]) {\n            return this.childEntries[this.schema.primaryKey].json();\n        }\n    }\n    \n};\n\n/**\n * @MultipleRoot Element\n * @extends _ParentRoot() -> __MultipleRoot\n */\nexport const _MultipleRoot = __MultipleRoot => class extends _ParentRoot(__MultipleRoot) {\n};\n\n/**\n * @Multiple Element\n * @extends _MultipleRoot() -> Roots._Multiple() -> __Multiple\n */\nexport const _Multiple = __Multiple => class extends _MultipleRoot(Roots._Multiple(__Multiple || HTMLElement)) {\n};\n\n/**\n * @Multiple2 Element\n * @extends _MultipleRoot() -> Roots._Multiple2() -> __Multiple2\n */\nexport const _Multiple2 = __Multiple2 => class extends _MultipleRoot(Roots._Multiple2(__Multiple2 || HTMLElement)) {\n\n    constructor() {\n        super();\n        this.addEventListener('keypress', e => {\n            if (e.key === 'Enter') {\n                this.extend(childEntry => childEntry.namespace.input ? childEntry.namespace.input.focus() : null);\n                e.preventDefault();\n            }\n        });\n    }\n\n    extend(callback = null) {\n        if (this.childEntries.length && !this.childEntries[this.childEntries.length - 1].namespace.input.value) {\n            return;\n        }\n        return super.extend(callback);\n    }\n\n    render() {\n        if (this.namespace.input && this.attrs.name) {\n            $(this.namespace.input).attr(this.attrs);\n        }\n    }\n\n};\n\n/**\n * @EnumRoot Element\n * @extends _Root() -> __EnumRoot\n */\nexport const _EnumRoot = __EnumRoot => class extends _Root(__EnumRoot) {\n\n    deriveEnumEntry(entry, i) {\n        var enumEntry;\n        if (!this.template && this.namespace.input instanceof HTMLSelectElement) {\n            enumEntry = document.createElement('option');\n        } else {\n            var _enumEntry = Reflect.ownKeys(this.template.exports).map(key => this.template.exports[key][0]).reduce((match, item) => {\n                if (match) return match;\n                const constructor = item.hasAttribute('is') \n                    ? customElements.get(item.getAttribute('is'))\n                    : customElements.get(item.localName);\n                return constructor && constructor.testSchema(this.schema, entry) ? item : null;\n            }, null);\n            if (_enumEntry) {\n                enumEntry = _enumEntry.cloneNode(true);\n            }\n        }\n        if (enumEntry) {\n            if (this.namespace.input instanceof HTMLSelectElement) {\n                this.namespace.input.options.add(enumEntry);\n                enumEntry.setAttribute('label', entry.label || _toTitle(entry.value));\n                enumEntry.value = entry.value;\n                enumEntry.selected = entry.selected;\n            } else {\n                this.namespace.input.append(enumEntry);\n                enumEntry.setAttribute('data-index', itemIndex);\n            }\n        }\n        return enumEntry;\n    }\n\n    render() {\n        if (this.namespace.input && this.attrs.name) {\n            $(this.namespace.input).attr(this.attrs);\n        }\n    }\n\n};\n\n/**\n * @Enum Element\n * @extends _EnumRoot() -> Roots._Enum() -> __Enum\n */\nexport const _Enum = __Enum => class extends _EnumRoot(Roots._Enum(__Enum || HTMLElement)) {\n}\n\n/**\n * @Enum2 Element\n * @extends _EnumRoot() -> Roots._Enum2() -> __Enum2\n */\nexport const _Enum2 = __Enum2 => class extends _EnumRoot(Roots._Enum2(__Enum2 || HTMLElement)) {\n}\n\n/**\n * @File Element\n * @extends _Root() -> Roots._File() -> __FileRoot\n */\nexport const _File = __File => class extends _Root(Roots._File(__File || HTMLElement)) {\n\n    constructor() {\n        super();\n        // ------------------\n        // On-direct choosing\n        // ------------------\n        this.addEventListener('change', e => {\n            if (this.namespace.dropArea) {\n                this.populate(Array.from(e.target.files).map(file => ({ file })), 1);\n            }\n        });\n        this._handlerDrag = e => {\n            if (e.type === 'dragover' || e.type === 'dragenter') {\n                if (this.state) {\n                    this.state.dragging = true;\n                }\n            } else if (e.type === 'dragleave' || e.type === 'dragend' || e.type === 'drop') {\n                e.preventDefault();\n                if (this.state) {\n                    this.state.dragging = false;\n                }\n                if (e.type === 'drop') {\n                    this.populate(Array.from(e.dataTransfer.files).map(file => ({ file })));\n                }\n            }\n        };\n        Observer.observe(this.filesList, mutations => {\n            if (mutations[0].name === 'length' || !this.namespace.input) return;\n            const dataTransfer = new DataTransfer;\n            this.filesList.map(entry => entry.file).filter(file => !_isString(file)).forEach(file => {\n                dataTransfer.items.add(file);\n            });\n            // Assign the files to the input element\n            this.namespace.input.files = dataTransfer.files;\n            // Still keep the \"required\" attribute?\n            if (this.schema.isRequired) {\n                if (!this.namespace.input.files.length && this.filesList.length && this.filesList[0]/* IMPORTANT: item 0 may be \"undefined\" */) {\n                    // Then there must be files added by link\n                    this.namespace.input.removeAttribute('required');\n                } else {\n                    // Restore\n                    this.namespace.input.setAttribute('required', true);\n                }\n            }\n        });\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        if (this.namespace.dropArea) {\n            // On drag-and-drop\n            [ 'drag', 'dragstart', 'dragend', 'dragover', 'dragenter', 'dragleave', 'drop' ].forEach(eventName => {\n                this.namespace.dropArea.removeEventListener(eventName, this._handlerDrag);\n                this.namespace.dropArea.addEventListener(eventName, this._handlerDrag);\n            });\n        }\n    }\n\n    define(jsonSchema, ownerWidget = null) {\n        super.define(...arguments);\n        this.render();\n    }\n\n    deriveFileEntry(fileData, i, clearByTag = null) {\n        if (!this.template) return;\n        var childEntry = Reflect.ownKeys(this.template.exports).map(key => this.template.exports[key][0]).reduce((match, item) => {\n            if (match) return match;\n            const constructor = item.hasAttribute('is') \n                ? customElements.get(item.getAttribute('is'))\n                : customElements.get(item.localName);\n            return constructor && constructor.testFile(fileData) ? item : null;\n        }, null);\n        if (childEntry) {\n            childEntry = childEntry.cloneNode(true);\n            childEntry.file = fileData._file || fileData.file;\n            if (_isString(fileData.file)) {\n                const defaultInput = document.createElement('input');\n                defaultInput.setAttribute('name', this.attrs.name);\n                defaultInput.setAttribute('value', fileData.file);\n                defaultInput.setAttribute('type', 'hidden');\n                childEntry.append(defaultInput);\n                childEntry.setAttribute('data-src', fileData.file);\n                if (_intersect(_arrFrom(clearByTag), [ 1, 2 ]).length === 2 && !this.schema.remoteDelete) {\n                    childEntry.setAttribute('data-isdefault', 'true');\n                }\n            }\n            if (this.namespace.preview) {\n                this.namespace.preview.append(childEntry);\n            } else {\n                this.append(childEntry);\n            }\n            // ------------\n            try {\n                childEntry.previewFile(fileData.file, this);\n            } catch(e) {\n                console.warn(`Error calling element.previewFile();`, e, this);\n            }\n        }\n        return childEntry;\n    }\n\n    render() {\n        if (this.namespace.input && (this.attrs.type || this.attrs.name)) {\n            $(this.namespace.input).attr(this.attrs);\n        }\n    }\n\n};\n\n/**\n * @FilePreview Element\n * @extends __FilePreview\n */\nexport const _FilePreview = __FilePreview => class extends (__FilePreview || HTMLElement) {\n\n    connectedCallback() {\n        if (super.connectedCallback) {\n            super.connectedCallback();\n        }\n        if (this.namespace.deleter) {\n            this.deleterAction = this.deleterAction || (() => {\n                if (this.ownerWidget) {\n                    this.ownerWidget.execNodeRemoval(this, (msg, done) => {\n                        if (confirm(msg)) {\n                            $(this).attr('data-deleting', true);\n                            done().then(res => {\n                                $(this).attr('data-deleting', false);\n                                // This dry populate() should trigger restoration\n                                // of fallbackFiles. (See this.ownerWidget.populate())\n                                this.ownerWidget.populate([], [ 1, 2 ]);\n                            });\n                        }\n                    });\n                }\n            });\n            this.namespace.deleter.removeEventListener('click', this.deleterAction);\n            this.namespace.deleter.addEventListener('click', this.deleterAction);\n        }\n    }\n\n    static testFile(fileData) {\n        return true;\n    }\n\n    async previewFile(file, ownerWidget) {\n        this.ownerWidget = ownerWidget;\n        if (_isString(file)) {\n            const response = await fetch(file);\n            const data = response.ok ? await response.blob() : '';\n            file = new File([data], file.split('/').pop(), {\n                type: response.headers.get('content-type') || 'application/octet-stream',\n            });\n        }\n        // Show thumnails\n        var desc = `${file.name}: ${file.size / 1024}KB`;\n        var revokeURL = el => window.URL.revokeObjectURL(el.src);\n        if (/^image\\//.test(file.type)) {\n            var img = document.createElement('img');\n            img.onload = e => { revokeURL(img); };\n            img.src = window.URL.createObjectURL(file);\n            this.append(img);\n            return;\n        }\n        if (/^video\\//.test(file.type)) {\n            var media = document.createElement('video');\n            media.onloadstart/*canplay*/ = e => { revokeURL(media); media.play(); };\n            media.src = window.URL.createObjectURL(file);\n            media.muted = true;\n            this.append(media);\n            return;\n        }\n        const el = document.createElement('i');\n        el.classList.add('bi');\n        var type = 'file';\n        if (/^audio\\//.test(file.type)) {\n            type = 'music';\n        } else if (/msword|ms-word|wordprocessing/.test(file.type)) {\n            type = 'word';\n        } else if (/powerpoint|presentation/.test(file.type)) {\n            type = 'powerpoint';\n        } else if (/excel|spreadsheet/.test(file.type)) {\n            type = 'excel';\n        } else if (/^text\\//.test(file.type)) {\n            type = 'text';\n        } else if (/\\/pdf/.test(file.type)) {\n            type = 'pdf';\n        } else if (/\\/zip/.test(file.type)) {\n            type = 'zip';\n        }\n        el.classList.add('bi-file-' + type);\n        this.append(el);\n        return;\n    }\n\n}\n\n/**\n * @Input Element\n * @extends _Root() -> __Input\n */\nexport const _Input = __Input => class extends _Root(__Input) {\n\n    json(data = null) {\n        if (arguments.length) {\n            this.namespace.input.value = data;\n            return;\n        }\n        return this.namespace.input.value;\n    }\n\n    render() {\n        if (this.namespace.input && (this.attrs.type || this.attrs.name)) {\n            $(this.namespace.input).attr(this.attrs);\n        }\n    }\n\n};\n\n/**\n * @Editor Element\n * @extends _Input() -> Roots._Editor() -> __Editor\n */\nexport const _Editor = __Editor => class extends _Input(Roots._Editor(__Editor || HTMLElement)) {\n};\n\n/**\n * @Text Element\n * @extends _Input() -> Roots._Text() -> __Text\n */\nexport const _Text = __Text => class extends _Input(Roots._Text(__Text || HTMLElement)) {\n};\n\n/**\n * @Number Element\n * @extends _Input() -> Roots._Number() -> __Number\n */\nexport const _Number = __Number => class extends _Input(Roots._Number(__Number || HTMLElement)) {\n};\n\n/**\n * @State Element\n * @extends _Input() -> Roots._State() -> __State\n */\nexport const _State = __State => class extends _Input(Roots._State(__State || HTMLElement)) {\n\n    json(data = null) {\n        if (arguments.length) {\n            this.namespace.input.checked = data === true || data + '' === this.namespace.input.value;\n            return;\n        }\n        return this.namespace.input.checked ? this.namespace.input.value : null;\n    }\n\n};\n\n/**\n * @ItemScope Element\n * @extends __ItemScope\n */\nexport const _ItemScope = __ItemScope => class extends Roots._ItemScope(__ItemScope || HTMLElement) {\n\n    connectedCallback() {\n        if (super.connectedCallback) {\n            super.connectedCallback();\n        }\n        if (this.namespace.deleter) {\n            this.deleterAction = this.deleterAction || (() => {\n                if (this.ownerWidget) {\n                    this.ownerWidget.execNodeRemoval(this, (msg, done) => {\n                        if (confirm(msg)) {\n                            $(this).attr('data-deleting', true);\n                            done().then(res => {\n                                $(this).attr('data-deleting', false);\n                            });\n                        }\n                    });\n                }\n            });\n            this.namespace.deleter.removeEventListener('click', this.deleterAction);\n            this.namespace.deleter.addEventListener('click', this.deleterAction);\n        }\n    }\n\n};\n","\n/**\n * @imports\n */\nimport * as WidgetElements from './playui-element-mixins.js';\n\n/**\n * ---------------------------\n * @playui widgets\n * ---------------------------\n */\nconst { SubscriptElement } = WebQit.OOHTML;\n\nconst FormWidget = class extends SubscriptElement(WidgetElements._Collection(HTMLFormElement)) {};\ncustomElements.define('playui-form-widget', FormWidget, { extends: 'form' });\n\nconst CollectionWidget = class extends WidgetElements._Collection(SubscriptElement(HTMLFieldSetElement)) {};\nconst MultipleWidget = class extends WidgetElements._Multiple(SubscriptElement(HTMLFieldSetElement)) {};\nconst Multiple2Widget = class extends WidgetElements._Multiple2(SubscriptElement(HTMLFieldSetElement)) {};\nconst EnumWidget = class extends WidgetElements._Enum(SubscriptElement(HTMLDivElement)) {};\nconst Enum2Widget = class extends WidgetElements._Enum2(SubscriptElement(HTMLDivElement)) {};\nconst FileWidget = class extends WidgetElements._File(SubscriptElement(HTMLDivElement)) {};\nconst EditorWidget = class extends WidgetElements._Editor(SubscriptElement(HTMLDivElement)) {};\nconst TextWidget = class extends WidgetElements._Text(SubscriptElement(HTMLDivElement)) {};\nconst NumberWidget = class extends WidgetElements._Number(SubscriptElement(HTMLDivElement)) {};\nconst StateWidget = class extends WidgetElements._State(SubscriptElement(HTMLDivElement)) {};\ncustomElements.define('playui-collection-widget', CollectionWidget, { extends: 'fieldset' });\ncustomElements.define('playui-multiple-widget', MultipleWidget, { extends: 'fieldset' });\ncustomElements.define('playui-multiple2-widget', Multiple2Widget, { extends: 'fieldset' });\ncustomElements.define('playui-enum-widget', EnumWidget, { extends: 'div' });\ncustomElements.define('playui-enum2-widget', Enum2Widget, { extends: 'div' });\ncustomElements.define('playui-file-widget', FileWidget, { extends: 'div' });\ncustomElements.define('playui-editor-widget', EditorWidget, { extends: 'div' });\ncustomElements.define('playui-text-widget', TextWidget, { extends: 'div' });\ncustomElements.define('playui-number-widget', NumberWidget, { extends: 'div' });\ncustomElements.define('playui-state-widget', StateWidget, { extends: 'div' });\n\nconst CollectionItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Collection(SubscriptElement(HTMLFieldSetElement))) {};\nconst MultipleItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Multiple(SubscriptElement(HTMLFieldSetElement))) {};\nconst Multiple2ItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Multiple2(SubscriptElement(HTMLFieldSetElement))) {};\nconst EnumItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Enum(SubscriptElement(HTMLDivElement))) {};\nconst Enum2ItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Enum2(SubscriptElement(HTMLDivElement))) {};\nconst FileItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._File(SubscriptElement(HTMLDivElement))) {};\nconst EditorItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Editor(SubscriptElement(HTMLDivElement))) {};\nconst TextItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Text(SubscriptElement(HTMLDivElement))) {};\nconst NumberItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Number(SubscriptElement(HTMLDivElement))) {};\nconst StateItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._State(SubscriptElement(HTMLDivElement))) {};\ncustomElements.define('playui-collection-itemscope-widget', CollectionItemScopeWidget, { extends: 'fieldset' });\ncustomElements.define('playui-multiple-itemscope-widget', MultipleItemScopeWidget, { extends: 'fieldset' });\ncustomElements.define('playui-multiple2-itemscope-widget', Multiple2ItemScopeWidget, { extends: 'fieldset' });\ncustomElements.define('playui-enum-itemscope-widget', EnumItemScopeWidget, { extends: 'div' });\ncustomElements.define('playui-enum2-itemscope-widget', Enum2ItemScopeWidget, { extends: 'div' });\ncustomElements.define('playui-file-itemscope-widget', FileItemScopeWidget, { extends: 'div' });\ncustomElements.define('playui-editor-itemscope-widget', EditorItemScopeWidget, { extends: 'div' });\ncustomElements.define('playui-text-itemscope-widget', TextItemScopeWidget, { extends: 'div' });\ncustomElements.define('playui-number-itemscope-widget', NumberItemScopeWidget, { extends: 'div' });\ncustomElements.define('playui-state-itemscope-widget', StateItemScopeWidget, { extends: 'div' });\n\nconst FilePreview = class extends WidgetElements._FilePreview(HTMLDivElement) {};\ncustomElements.define('playui-file-preview', FilePreview, { extends: 'div' });\n"],"sourceRoot":""}