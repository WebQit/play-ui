{
  "version": 3,
  "sources": ["../node_modules/@webqit/util/js/isObject.js", "../node_modules/@webqit/util/js/getType.js", "../node_modules/@webqit/util/js/internals.js", "../node_modules/@webqit/util/js/isArray.js", "../node_modules/@webqit/util/js/isBoolean.js", "../node_modules/@webqit/util/js/isTypeFunction.js", "../node_modules/@webqit/util/js/isClass.js", "../node_modules/@webqit/util/js/isNull.js", "../node_modules/@webqit/util/js/isUndefined.js", "../node_modules/@webqit/util/js/isTypeObject.js", "../node_modules/@webqit/util/js/isEmpty.js", "../node_modules/@webqit/util/js/isFunction.js", "../node_modules/@webqit/util/js/isNumber.js", "../node_modules/@webqit/util/js/isNumeric.js", "../node_modules/@webqit/util/js/isString.js", "../node_modules/@webqit/util/js/isTypeArray.js", "../node_modules/@webqit/util/arr/first.js", "../node_modules/@webqit/util/arr/last.js", "../node_modules/@webqit/util/arr/pushUnique.js", "../node_modules/@webqit/util/obj/getPrototypeChain.js", "../node_modules/@webqit/util/obj/getAllPropertyNames.js", "../node_modules/@webqit/util/obj/mergeCallback.js", "../node_modules/@webqit/util/obj/each.js", "../node_modules/@webqit/util/obj/merge.js", "../node_modules/@webqit/util/arr/indexOfSet.js", "../node_modules/@webqit/util/arr/after.js", "../node_modules/@webqit/util/arr/any.js", "../node_modules/@webqit/util/arr/from.js", "../node_modules/@webqit/util/arr/difference.js", "../node_modules/@webqit/util/arr/equals.js", "../node_modules/@webqit/util/arr/intersect.js", "../node_modules/@webqit/util/arr/startsWith.js", "../node_modules/@webqit/util/arr/unique.js", "../node_modules/@webqit/observer/src/core/utils.js", "../node_modules/@webqit/observer/src/core/Firebase.js", "../node_modules/@webqit/observer/src/core/Fireable.js", "../node_modules/@webqit/observer/src/core/Interceptor.js", "../node_modules/@webqit/util/obj/copy.js", "../node_modules/@webqit/observer/src/core/Action.js", "../node_modules/@webqit/observer/src/core/Interceptors.js", "../node_modules/@webqit/observer/src/actors/unproxy.js", "../node_modules/@webqit/observer/src/actions/_exec.js", "../node_modules/@webqit/observer/src/actions/apply.js", "../node_modules/@webqit/observer/src/actions/construct.js", "../node_modules/@webqit/util/str/toTitle.js", "../node_modules/@webqit/observer/src/core/Event.js", "../node_modules/@webqit/observer/src/core/Observer.js", "../node_modules/@webqit/observer/src/core/Mutation.js", "../node_modules/@webqit/observer/src/core/Observers.js", "../node_modules/@webqit/observer/src/actions/get.js", "../node_modules/@webqit/observer/src/reactions/observe.js", "../node_modules/@webqit/observer/src/connectors/link.js", "../node_modules/@webqit/observer/src/connectors/build.js", "../node_modules/@webqit/observer/src/reactions/unobserve.js", "../node_modules/@webqit/observer/src/connectors/unlink.js", "../node_modules/@webqit/observer/src/actions/has.js", "../node_modules/@webqit/observer/src/actions/_setOrDefine.js", "../node_modules/@webqit/observer/src/actions/defineProperty.js", "../node_modules/@webqit/observer/src/actions/deleteProperty.js", "../node_modules/@webqit/observer/src/actions/getOwnPropertyDescriptor.js", "../node_modules/@webqit/observer/src/actions/getPrototypeOf.js", "../node_modules/@webqit/observer/src/actions/isExtensible.js", "../node_modules/@webqit/observer/src/actions/ownKeys.js", "../node_modules/@webqit/observer/src/actions/preventExtensions.js", "../node_modules/@webqit/observer/src/actions/set.js", "../node_modules/@webqit/observer/src/actions/setPrototypeOf.js", "../node_modules/@webqit/observer/src/actors/accessorize.js", "../node_modules/@webqit/observer/src/actors/unaccessorize.js", "../node_modules/@webqit/observer/src/actors/proxy.js", "../node_modules/@webqit/observer/src/reactions/intercept.js", "../node_modules/@webqit/observer/src/reactions/unintercept.js", "../node_modules/@webqit/observer/src/reactions/closure.js", "../node_modules/@webqit/observer/src/index.js", "../src/utils/util.js", "../src/schema-mixins.js", "../src/playui-mixins.js", "../src/playui-element-mixins.js", "../src/index.js"],
  "sourcesContent": ["\n/**\n * Tells if val is pure object.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\n};\n", "\n/**\n * Returns the val's type.\n *\n * @param string \tval\n *\n * @return string\n */\nexport default function(val) {\n\treturn typeof val;\n};\n", "\n/**\n * Creates and/or returns an \"internals\" object for the given object.\n * \n * @param Any obj\n * @param String namespace\n * \n * @return Object\n */\nexport default function internals(obj, ...namespaces) {\n    if (!globalThis.WebQitInternalsRegistry) {\n        globalThis.WebQitInternalsRegistry = new Map;\n    }\n    var itnls = globalThis.WebQitInternalsRegistry.get(obj);\n    if (!itnls) {\n        itnls = new Map;\n        if (namespaces[0] === false) {\n            // FALSE means: Return orphan Map if not exists\n            return itnls;\n        }\n        globalThis.WebQitInternalsRegistry.set(obj, itnls);\n    }\n    var _ns, _itnls;\n    while ((_ns = namespaces.shift())) {\n        if ((_itnls = itnls) && !(itnls = itnls.get(_ns))) {\n            itnls = new Map;\n            if (namespaces[0] === false) {\n                // FALSE means: Return orphan Map if not exists\n                return itnls;\n            }\n            _itnls.set(_ns, itnls);\n        }\n    }\n    return itnls;\n}", "\n/**\n * Tells if val is of type \"array\".\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val);\n};\n", "\n/**\n * Tells if val is undefined or is of type \"boolean\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === true || val === false;\n};\n", "\n/**\n * Tells if val is of type \"function\".\n * This holds true for both regular functions and classes.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn typeof val === 'function';\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"class\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) && /^class\\s?/.test(Function.prototype.toString.call(val));\n};\n", "\n/**\n * Tells if val is undefined or is null.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val === null || val === '';\n};\n", "\n/**\n * Tells if val is undefined or is of type \"undefined\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"object\".\n * This holds true for anything object, including built-ins.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn Array.isArray(val) || (typeof val === 'object' && val) || _isTypeFunction(val);\n};\n", "\n/**\n * @imports\n */\nimport _isNull from './isNull.js';\nimport _isUndefined from './isUndefined.js';\nimport _isTypeObject from './isTypeObject.js';\n\n/**\n * Tells if val is empty in its own type.\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\n * objects without keys, empty arrays.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\n};\n", "\n/**\n * @imports\n */\nimport _isTypeFunction from './isTypeFunction.js';\n\n/**\n * Tells if val is of type \"function\".\n *\n * @param object \t\tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\n};\n", "\n/**\n * Tells if val is of type \"number\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof Number || (typeof val === 'number');\n};\n", "\n/**\n * @imports\n */\nimport _isNumber from './isNumber.js';\n/**\n * Tells if val is of type \"string\" or a numeric string.\n * This holds true for both numbers and numeric strings.\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn _isNumber(val) || (val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1));\n};\n", "\n/**\n * Tells if val is of type \"string\".\n *\n * @param string \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn val instanceof String || (typeof val === 'string' && val !== null);\n};\n", "\n/**\n * @imports\n */\nimport _isString from './isString.js';\nimport _isUndefined from './isUndefined.js';\n\n/**\n * Tells if val is \"array-like\".\n * This holds true for anything that has a length property.\n *\n * @param object\t \tval\n *\n * @return bool\n */\nexport default function(val) {\n\treturn !_isString(val) && !_isUndefined(val.length);\n};\n", "\n/**\n * Returns THE FIRST ENTRY OR A NUMBER OF ENTRIES counting forward from the begining.\n *\n * @param array \tarr\n * @param int\t \tamount\n *\n * @return mixed|array\n */\nexport default function(arr, amount = 1) {\n\tvar count = 0;\n\tarr.forEach(itm => {\n\t\tcount ++;\n\t});\n\tvar firsts = arr.slice(arr.length - count, amount);\n\treturn arguments.length > 1 ? firsts : firsts[0];\n};\n", "\n/**\n * @imports\n */\nimport _first from './first.js';\n\n/**\n * Returns THE LAST ENTRY OR A NUMBER OF ENTRIES counting forward to the end.\n *\n * @param array \tarr\n * @param int\t \tamount\n *\n * @return mixed|array\n */\nexport default function(arr, amount = 1) {\n\treturn arguments.length > 1\n\t\t? _first(arr.slice().reverse(), amount).reverse()\n\t\t: _first(arr.slice().reverse());\n};\n", "\n/**\n * Adds an item if not already exist.\n *\n * @param array \tarr\n * @param array\t \t...itms\n *\n * @return array\n */\nexport default function(arr, ...items) {\n\titems.forEach(itm => {\n\t\tif (arr.indexOf(itm) < 0) {\n\t\t\tarr.push(itm);\n\t\t}\n\t});\n\treturn arr;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the prototype chain.\n *\n * @param object \t\tobj\n * @param object\t \tuntil\n *\n * @return bool\n */\nexport default function(obj, until) {\n\tuntil = until || Object.prototype;\n\tuntil = until && !_isArray(until) ? [until] : until;\n\t// We get the chain of inheritance\n\tvar prototypalChain = [];\n\tvar obj = obj;\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\n\t\tprototypalChain.push(obj);\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\n\t}\n\treturn prototypalChain;\n};\n", "\n/**\n * @imports\n */\nimport _pushUnique from '../arr/pushUnique.js';\nimport _getPrototypeChain from './getPrototypeChain.js';\n\n/**\n * Eagerly retrieves object members all down the prototype chain.\n *\n * @param object\t \tobj\n * @param object\t \tuntil\n *\n * @return array\n */\nexport default function(obj, until) {\n\tvar keysAll = [];\n\t_getPrototypeChain(obj, until).forEach(obj => {\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\n\t});\n\treturn keysAll;\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isObject from '../js/isObject.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _getAllPropertyNames from './getAllPropertyNames.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = false) {\n\tvar depth = 0;\n\tvar obj1 = objs.shift();\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\n\t\tdepth = obj1;\n\t\tobj1 = objs.shift();\n\t}\n\tif (!objs.length) {\n\t\tthrow new Error('_merge() requires two or more array/objects.');\n\t}\n\tobjs.forEach((obj2, i) => {\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\n\t\t\treturn;\n\t\t}\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.getOwnPropertyNames(obj2)).forEach(key => {\n\t\t\tif (!callback(key, obj1, obj2, i)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar valAtObj1 = obj1[key];\n\t\t\tvar valAtObj2 = obj2[key];\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \n\t\t\t&& (depth === true || depth > 0)) {\n\t\t\t\t// RECURSE...\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\n\t\t\t} else {\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\n\t\t\t\t\tif (isReplace) {\n\t\t\t\t\t\tobj1[key] = valAtObj2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj1.push(valAtObj2);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// In case we're setting a read-only property\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (withSymbols) {\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\treturn obj1;\n};\n", "\n/**\n * @imports\n */\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _isNumeric from '../js/isNumeric.js';\n\n/**\n * Loops thru obj flatly with a callback function.\n * Stops when callback returns a non-undefined value.\n *\n * @param array|object \t\t\tobj \t\t\tThe array or object to iterate.\n * @param function \t\t\t\tcallback \t\tThe callback function.\n *\n * @return mixed|null\t\t\tAny non-null return from callback\n */\nexport default function(obj, callback) {\n\tvar returnValue = undefined;\n\tif (_isTypeObject(obj)) {\n\t\tObject.keys(obj).forEach((k, i) => {\n\t\t\tif (returnValue !== false) {\n\t\t\t\treturnValue = callback(_isNumeric(k) ? parseFloat(k) : k, obj[k], i);\n\t\t\t}\n\t\t});\n\t}\n\treturn returnValue;\n};\n", "\n/**\n * @imports\n */\nimport _mergeCallback from './mergeCallback.js';\n\n/**\n  * Merges values from subsequent arrays/objects first array/object;\n  * optionally recursive\n  *\n  * @param array ...objs\n  *\n  * @return void\n  */\nexport default function(...objs) {\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\n\t\treturn true;\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\n};\n", "\n/**\n * Returns the index of subset array \"b\" in array \"a\".\n * \n * @param {Array} a \n * @param {Array} b \n * @param {Int} fromInex \n * @param {Bool} last\n * \n * @returns Int\n */\nexport default function indexOfSet(a, b, fromInex = null, last = false) {\n    if (b.length > a.length) return -1;\n\treturn (typeof fromInex === 'number' ? (last ? a.slice(0, (fromInex + 1) + (fromInex < 0 ? a.length : 0)) : a.slice(fromInex)) : a).reduce((cursors, value, i) => {\n        var [ index, cursorA, cursorB ] = cursors;\n        if (!last && index > -1) {\n            return [index, cursorA, cursorB];\n        }\n        var _cursorB = cursorB + 1;\n        var _cursors = value === b[_cursorB] ? (_cursorB === 0 ? [i, 0] : [cursorA, _cursorB]) : [-1, -1];\n        if (_cursors[1] === b.length - 1) {\n            // Reset B cursor\n            _cursors[1] = -1;\n            if (_cursors[0] > -1) {\n                return [_cursors[0]].concat(_cursors);\n            }\n        }\n        return [index].concat(_cursors);\n    }, [-1, -1, -1])[0] + (last || typeof fromInex !== 'number' ? 0 : (fromInex > -1 ? fromInex : a.length - fromInex));\n}", "\n/**\n * @imports\n */\nimport _after from '../str/after.js';\nimport _indexOfSet from './indexOfSet.js';\n\n/**\n * Returns members of array \"a\" after the array \"b\" subset.\n *\n * @param {Array} a \n * @param {Array} b \n * @param {Int} fromInex \n * @param {Bool} last \n * \n * @returns Bool\n */\nexport default function after(a, b, fromInex = null, last = false) {\n\tvar subsetIndex = _indexOfSet(a, b, fromInex, last);\n\treturn subsetIndex === -1 ? [] : a.slice(subsetIndex + b.length);\n}", "\n/**\n * Tells if ANY items pass the test.\n *\n * @param array \tarr\n * @param function \tcallback\n *\n * @return bool\n */\nexport default function(arr, callback) {\n\treturn arr.reduce((prevTest, itm, i) => prevTest || callback(itm, i), false);\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isTypeArray from '../js/isTypeArray.js';\nimport _isEmpty from '../js/isEmpty.js';\nimport _isObject from '../js/isObject.js';\n\n/**\n * Casts an array-like object to an array.\n *\n * @param mixed \tval\n * @param bool\t \tcastObject\n *\n * @return array\n */\nexport default function(val, castObject = true) {\n\tif (_isArray(val)) {\n\t\treturn val;\n\t};\n\tif (!castObject && _isObject(val)) {\n\t\treturn [val];\n\t};\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\n\t\treturn [];\n\t};\n\tif (_isTypeArray(val)) {\n\t\treturn Array.prototype.slice.call(val);\n\t};\n\tif (_isObject(val)) {\n\t\treturn Object.values(val);\n\t};\n\treturn [val];\n};\n", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the difference of two arrays;\n * optionally using a custom matching function.\n *\n * @param array \tarr\n * @param array\t \tarr2\n * @param function \tcallback\n *\n * @return array\n */\nexport default function(arr, arr2, callback = null) {\n\treturn !_isArray(arr2) ? [] : arr.filter(val1 => callback \n\t\t? arr2.filter(val2 => callback(val1, val2)).length \n\t\t: arr2.indexOf(val1) === -1\n\t);\n};\n", "\n/**\n * Tells if two arrays are shallow equals.\n * \n * @param {Array} a \n * @param {Array} b \n * @param {Bool} dotSafe\n * \n * @returns Bool\n */\nexport default function equals(a, b, dotSafe = null) {\n\treturn dotSafe || (dotSafe !== false && a.dotSafe && b.dotSafe) \n\t\t? a.join('.') === b.join('.') \n\t\t: a.length === b.length && a.reduce((prev, value, i) => prev && value === b[i], true);\n}", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\n\n/**\n * Returns the intersection of two arrays;\n * optionally using a custom matching function.\n *\n * @param array \tarr\n * @param array\t \tarr2\n * @param function \tcallback\n *\n * @return array\n */\nexport default function(arr, arr2, callback = null) {\n\treturn !_isArray(arr2) ? [] : arr.filter(val1 => callback \n\t\t? arr2.filter(val2 => callback(val1, val2)).length \n\t\t: arr2.indexOf(val1) !== -1\n\t);\n};\n", "\n/**\n * Tells if the array \"a\" starts with array \"b\".\n *\n * @param {Array} a \n * @param {Array} b \n * @param {Bool} dotSafe \n * \n * @returns Bool\n */\nexport default function startsWith(a, b, dotSafe = null) {\n\treturn dotSafe || (dotSafe !== false && a.dotSafe && b.dotSafe) \n\t\t? (a.join('.') + '.').startsWith(b.join('.') + '.') \n\t\t: b.reduce((prev, value, i) => prev && value === a[i], true);\n}", "\n/**\n * Returns a list of unique items.\n *\n * @param array\t \t\t\t\tarr\n *\t *\n * @return array\n */\nexport default function(arr) {\n\tconst distinct = (value, index, self) => {\n\t\treturn self.indexOf(value) === index;\n\t};\n\treturn arr.filter(distinct);\n};\n", "\n/**\n * @imports\n */\nimport { _isArray } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom, _all } from '@webqit/util/arr/index.js';\n\n\n/**\n *  Returns paths in 2-dimensional form.\n * \n * - key                    => [ [key] ]\n * - [key]                  => [ [key] ]\n * - [key, key2]            => [ [key, key2] ]\n * - [ [key] ]              => [ [key] ]\n * - [ [key1, key2] ]       => [ [key1, key2] ]\n * \n * @param Array|String paths\n * \n * @return Array\n */\nexport function paths2D(paths) {\n\treturn (pathsIs2D(paths) ? paths : (_arrFrom(paths).length ? [paths] : []))\n\t\t.reduce((multiple, path) => multiple.concat([_arrFrom(path)]), [])\n\t\t.map(path => DotSafePath.resolve(path));\n}\nexport class DotSafePath extends Array {\n\tstatic resolve(path) {\n\t\t// Note the concat() below...\n\t\t// the spread operator: new DotSafePath(...path) doesn't work when path is [0].\n\t\treturn path.every(v => !(v + '').includes('.')) ? (new DotSafePath).concat(path) : path;\n\t}\n\tget dotSafe() { return true }\n}\n\n/**\n * OTHER HELPERS\n */\n\nexport function pathsIs2D(paths) {\n\treturn _arrFrom(paths).reduce((yes, path) => yes || _isArray(path), false);\n}\nexport function pathsIsDynamic(pathArray) {\n\t// Note that trying to simply match empty slots, as in: pathArray.filter(seg => !seg && seg !== 0).length\n\t// doesn't work when the empty slots are really empty slote, as in: [ 'key', <1 empty item> ]\n\treturn pathArray.filter(seg => seg || seg === 0).length !== pathArray.length;\n}\nexport function paths2DIsDynamic(paths) {\n\treturn paths.filter(pathArray => pathsIsDynamic(_arrFrom(pathArray))).length > 0;\n}\n\n", "\n/**\n * @imports\n */\nimport { _isTypeObject, _isFunction, _getType, _internals } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom, _intersect, _equals as _arrEquals } from '@webqit/util/arr/index.js';\nimport { paths2D } from './utils.js'\n\n/**\n * ---------------------------\n * The Firebase class\n * ---------------------------\n */\n\nexport default class Firebase {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param object\ttarget\n\t * \n\t * @return void\n\t */\n\tconstructor(target) {\n\t\tthis.target = target;\n\t\tthis.fireables = [];\n\t\tthis.currentlyFiring = [];\n\t}\n\t\n\t/**\n\t * Adds an Fireable instance\n\t * with optional tags.\n\t *\n\t * @param Fireable\t\t\tfireable\n\t *\n\t * @return Fireable\n\t */\n\tadd(fireable) {\n\t\tthis.fireables.push(fireable);\n\t\treturn fireable;\n\t}\n\t\n\t/**\n\t * Removes fireables by instance.\n\t *\n\t * @param Fireable\t\t\tfireable\n\t *\n\t * @return void\n\t */\n\tremove(fireable) {\n\t\tthis.fireables = this.fireables.filter(_fireable => _fireable !== fireable);\n\t}\n\t\n\t/**\n\t * Removes fireables by definition.\n\t *\n\t * @param object\t\t\tdfn\n\t *\n\t * @return void\n\t */\n\tremoveMatches(dfn) {\n\t\tthis.match(dfn).forEach(fireable => {\n\t\t\tthis.fireables = this.fireables.filter(_fireable => _fireable !== fireable);\n\t\t});\n\t}\n\t\n\t/**\n\t * Finds fireables by definition.\n\t *\n\t * @param object\t\t\tdfn\n\t *\n\t * @return array\n\t */\n\tmatch(dfn) {\n\t\treturn this.fireables.filter(fireable => {\n\t\t\tvar fireableFilter = paths2D(fireable.filter);\n\t\t\tvar fireableTags = _arrFrom((fireable.params || {}).tags);\n\t\t\t// -----------------------\n\t\t\tvar dfnFilter = paths2D(dfn.filter);\n\t\t\tvar dfnTags = _arrFrom((dfn.params || {}).tags);\n\t\t\t// -----------------------\n\t\t\treturn (!dfn.originalHandler || fireable.handler === dfn.originalHandler)\n\t\t\t\t&& (!dfnFilter.length || _arrEquals(dfnFilter, fireableFilter))\n\t\t\t\t&& (!dfnTags.length || (dfnTags.length === fireableTags.length && _intersect(fireableTags, dfnTags).length === dfnTags.length));\n\t\t});\n\t}\n\t\t\n\t/**\n\t * Returns a observer-specific object embedded on an element.\n\t *\n\t * @param string\t\ttype\n\t * @param array|object\ttarget\n\t * @param bool      \tcreateIfNotExists\n\t * @param string      \tnamespace\n\t *\n\t * @return Firebase\n\t */\n\tstatic _getFirebase(type, target, createIfNotExists = true, namespace = this.__namespace) {\n\t\tif (!_isTypeObject(target)) {\n\t\t\tthrow new Error('Subject must be of type object; \"' + _getType(target) + '\" given!');\n\t\t}\n\t\tvar ImplementationClass = this;\n\t\tif (namespace && globalThis.WebQitObserverNamespaceRegistry.has(type + '-' + namespace)) {\n\t\t\tImplementationClass = globalThis.WebQitObserverNamespaceRegistry.get(type + '-' + namespace);\n\t\t\ttype += '-' + namespace\n\t\t}\n\t\tif (!_internals(target, 'firebases').has(type) && createIfNotExists) {\n\t\t\t_internals(target, 'firebases').set(type, new ImplementationClass(target));\n\t\t}\n\t\treturn _internals(target, 'firebases').get(type);\n\t}\n\n\t/**\n\t * Extend a Fireable Class with a namespace.\n\t *\n\t * @param string\t\tnamespace\n\t * @param class      \tImplementationClass\n\t *\n\t * @return void|class\n\t */\n\tstatic _namespace(type, namespace, ImplementationClass = null) {\n\t\ttype += '-' + namespace;\n\t\tif (arguments.length === 2) {\n\t\t\treturn globalThis.WebQitObserverNamespaceRegistry.get(type);\n\t\t}\n\t\tif (!(ImplementationClass.prototype instanceof this)) {\n\t\t\tthrow new Error(`The implementation of the namespace ${this.name}.${namespace} must be a subclass of ${this.name}.`);\n\t\t}\n\t\tglobalThis.WebQitObserverNamespaceRegistry.set(type, ImplementationClass);\n\t\tImplementationClass.__namespace = namespace;\n\t}\n}\n\nif (!globalThis.WebQitObserverNamespaceRegistry) {\n\tglobalThis.WebQitObserverNamespaceRegistry = new Map();\n}\n", "\n/**\n * ---------------------------\n * The Fireable class\n * ---------------------------\n */\n\nexport default class Fireable {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param object|array\t\ttarget\n\t * @param object\t\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tthis.target = target;\n\t\tthis.handler = dfn.handler;\n\t\tthis.filter = dfn.filter;\n\t\tthis.params = dfn.params;\n\n\t}\n\n\t/**\n\t * Sets a \"disconnected\" flag on the Fireable.\n\t *\n\t * @return void\n\t */\n\tdisconnect() {\n\t\tthis.disconnected = true;\n\t}\n}", "\n/**\n * @imports\n */\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { _intersect } from '@webqit/util/arr/index.js';\nimport Fireable from './Fireable.js';\n\n/**\n * ---------------------------\n * The Trap class\n * ---------------------------\n */\n\nexport default class Interceptor extends Fireable {\n\t\n\t/**\n\t * Calls the observer's handler function\n\t * on matching with the event's fields.\n\t *\n\t * @param Event\t\t\t \t\t\tevent\n\t * @param function\t\t\t\t\tnext\n\t * @param mixed\t\t\t\t\t \trecieved\n\t *\n\t * @return void\n\t */\n\tfire(event, next, recieved) {\n\t\tif (this.disconnected || (this.filter && !_intersect(_arrFrom(this.filter), [event.type]).length)) {\n\t\t\treturn next(...Array.prototype.slice.call(arguments, 2));\n\t\t}\n\t\treturn this.handler(event, recieved, next);\n\t}\n}", "\n/**\n * @imports\n */\nimport _isArray from '../js/isArray.js';\nimport _isFunction from '../js/isFunction.js';\nimport _isNumeric from '../js/isNumeric.js';\nimport _isTypeObject from '../js/isTypeObject.js';\nimport _mergeCallback from './mergeCallback.js';\n\n/**\n * Copies an object.\n *\n * @param object\t \tobj\n * @param array\t\t \tfilter\n *\n * @return object\n */\nexport default function(obj, filter = [], withSymbols = true) {\n\tvar depth = 0;\n\tif (_isNumeric(arguments[0]) && _isTypeObject(arguments[1])) {\n\t\tdepth = arguments[0];\n\t\tobj = arguments[1];\n\t\tfilter = arguments[2] || [];\n\t}\n\treturn _mergeCallback([depth, {}, obj], (key, obj1, obj2) => {\n\t\treturn _isFunction(filter) ? filter(key) \n\t\t\t: (_isArray(filter) && filter.length ? filter.indexOf(key) > -1 : true);\n\t}, false/*deepProps*/, false/*isReplace*/, withSymbols);\n};\n", "\n/**\n * @imports\n */\nimport { _each } from '@webqit/util/obj/index.js';\n\n/**\n * ---------------------------\n * The QueryEvent class\n * ---------------------------\n */\n\nexport default class Action {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\ttarget\n\t * @param object\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tthis.target = target;\n\t\tif (!dfn.type) {\n\t\t\tthrow new Error('Action type must be given in definition!');\n\t\t}\n\t\t_each(dfn, (key, value) => {\n\t\t\tObject.defineProperty(this, key, {value, enumerable:true});\n\t\t});\n\t\tObject.seal(this);\n\t}\n}", "\n/**\n * @imports\n */\nimport Firebase from './Firebase.js';\nimport Interceptor from './Interceptor.js';\nimport Action from './Action.js';\n\n/**\n * ---------------------------\n * The Reactive class\n * ---------------------------\n */\n\nexport default class Interceptors extends Firebase {\n\t\n\t/**\n\t * @inheritdoc\n\t */\n\tadd(dfn) {\n\t\treturn super.add(new Interceptor(this.target, dfn));\n\t}\n\n\t/**\n\t * Fires all interceptors with the given action.\n\t *\n\t * @param Action\t\t\taction\n\t * @param function\t\t\tdefaultHandler\n\t *\n\t * @return mixed\n\t */\n\tfire(action, defaultHandler = null) {\n\t\tif (!(action instanceof Action)) {\n\t\t\taction = new Action(this.target, action);\n\t\t}\n\t\tif (this.currentlyFiring.filter(a => a.type === action.type && a.name === action.name).length) {\n\t\t\treturn defaultHandler ? defaultHandler() : undefined;\n\t\t}\n\t\tthis.currentlyFiring.push(action);\n\t\tconst next = (index, ..._args) => {\n\t\t\tvar interceptor = this.fireables[index];\n\t\t\tif (interceptor) {\n\t\t\t\treturn interceptor.fire(action, (...args) => {\n\t\t\t\t\treturn next(index + 1, ...args);\n\t\t\t\t}/*next*/, ..._args);\n\t\t\t}\n\t\t\treturn defaultHandler ? defaultHandler(..._args) : _args[0];\n\t\t};\n\t\tvar value = next(0);\n\t\tthis.currentlyFiring.pop();\n\t\treturn value;\n\t}\n\n\tstatic getFirebase(target, createIfNotExists = true, namespace = null) {\n\t\treturn super._getFirebase('interceptor', ...arguments);\n\t}\n\n\tstatic namespace(namespace, ImplementationClass = null) {\n\t\treturn super._namespace('interceptor', ...arguments);\n\t}\n}", "\n/**\n * @imports\n */\nimport { _internals } from '@webqit/util/js/index.js';\n\n/**\n * Returns the original object earlier proxied by proxy().\n *\n * @param Proxy|Any\t\ttarget\n *\n * @return Any\n */\nexport default function(target) {\n    // Proxy targets are mapped to their own instances internally\n    return _internals(target, false).get(target) || target;\n}\n", "\n/**\n * @imports\n */\nimport { _isTypeObject } from '@webqit/util/js/index.js';\nimport Interceptors from '../core/Interceptors.js';\nimport _unproxy from '../actors/unproxy.js';\n\n/**\n * Runs a Reflect operation of the specified type.\n *\n * @param string\t\ttype\n * @param array|object\ttarget\n * @param object\t\tpayload\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(type, target, payload = {}, params = {}) {\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\ttarget = _unproxy(target);\n\t// ---------------------------------\n\t// Execute any \"keys\" traps, otherwise \"test\" the default way\n\tvar interceptors, defaultHandler = function(_val) {\n\t\treturn arguments.length ? _val : Reflect[type](target, ...Object.values(payload));\n\t};\n\tif (interceptors = Interceptors.getFirebase(target, false, params.namespace)) {\n\t\treturn interceptors.fire({ type, ...payload }, defaultHandler);\n\t}\n\treturn defaultHandler();\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs an \"apply\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tthisArgument\n * @param array\t\t\targumentsList\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, thisArgument, argumentsList, params = {}) {\n\treturn _exec('apply', target, { thisArgument, argumentsList }, params);\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"construct\" operation on a target.\n *\n * @param array|object\ttarget\n * @param array\t\t\targumentsList\n * @param object\t\tnewTarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, argumentsList, newTarget = null, params = {}) {\n\treturn _exec('construct', target, arguments.length > 2 ? { argumentsList, newTarget } : { argumentsList }, params);\n}\n", "\n/**\n * Converts a string to title case.\n *\n * @param string \tstr\n * @param bool \t\tstrict\n *\n * @return string\n */\nexport default function(str, strict) {\n\tif (typeof str !== 'string') {\n\t\treturn str;\n\t}\n\treturn str.replace(/\\w\\S*/g,  function(txt) { return txt.charAt(0).toUpperCase() + ((typeof strict !== undefined && strict) ? txt.substr(1).toLowerCase() : txt.substr(1)); })\n};\n", "\n/**\n * @imports\n */\nimport { _isUndefined, _isObject } from '@webqit/util/js/index.js';\nimport { _each } from '@webqit/util/obj/index.js';\n\n/**\n * ---------------------------\n * The Event class\n * ---------------------------\n */\n\nexport default class Event {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\t\ttarget\n\t * @param bool\t\t\t\tcancellable\n\t *\n\t * @return void\n\t */\n\tconstructor(target, cancellable = false) {\n\t\tthis._ = {};\n\t\tthis._.target = target;\n\t\tthis._.cancellable = cancellable;\n\t\tthis._.propagationStopped = false;\n\t\tthis._.defaultPrevented = false;\n\t\tthis._.promisesInstance = null;\n\t\tthis._.promises = [];\n\t}\n\n\t/**\n\t * Gets the \"target\" object.\n\t *\n\t * @return array|object\n\t */\n\tget target() {\n\t\treturn this._.target;\n\t}\n\n\t/**\n\t * Gets the \"cancellable\" flag.\n\t *\n\t * @return bool\n\t */\n\tget cancellable() {\n\t\treturn this._.cancellable;\n\t}\n\n\t/**\n\t * -----------------------\n\t * RESPONSE HANDLERS\n\t * -----------------------\n\t */\n\n\t/**\n\t * Stops the evnt from reaching other listeners.\n\t *\n\t * @return bool\n\t */\n\tstopPropagation() {\n\t\tthis._.propagationStopped = true;\n\t}\n\t\t\n\t/**\n\t * (Readonly) tells if stopPropagation() has been called.\n\t *\n\t * @return bool\n\t */\n\tget propagationStopped() {\n\t\treturn this._.propagationStopped;\n\t}\n\t\t\n\t/**\n\t * Sets a disposition that asks event initiator not to\n\t * proceed with default action.\n\t *\n\t * @return void\n\t */\n\tpreventDefault() {\n\t\tthis._.defaultPrevented = true;\n\t}\n\t\t\n\t/**\n\t * (Readonly) tells if preventDefault() has been called.\n\t *\n\t * @return bool\n\t */\n\tget defaultPrevented() {\n\t\treturn this._.defaultPrevented;\n\t}\n\t\t\n\t/**\n\t * Sets a Promise disposition.\n\t *\n\t * @param Promise\tpromise\n\t *\n\t * @return void\n\t */\n\twaitUntil(promise) {\n\t\tif (promise instanceof Promise) {\n\t\t\tthis._.promises.push(promise);\n\t\t\tthis._.promisesInstance = null;\n\t\t}\n\t}\n\t\t\n\t/**\n\t * (Readonly) returns all promises.\n\t *\n\t * @return Promise|null\n\t */\n\tget promises() {\n\t\tif (!this._.promisesInstance && this._.promises.length) {\n\t\t\tthis._.promisesInstance = Promise.all(this._.promises);\n\t\t}\n\t\treturn this._.promisesInstance;\n\t}\n\t\t\n\t/**\n\t * Evaluates the given disposition value and\n\t * calls an appropriate disposition method.\n\t *\n\t * @params mixed \trspns\n\t *\n\t * @return void\n\t */\n\trespondWith(rspns) {\n\t\tvar proms;\n\t\tvar isEvent = _isObject(rspns) && !_isUndefined(rspns.propagationStopped) && !_isUndefined(rspns.defaultPrevented)\n\t\tif ((rspns === false) || (isEvent && rspns.propagationStopped)) {\n\t\t\tthis.stopPropagation();\n\t\t} else if ((rspns === false) || (isEvent && rspns.defaultPrevented)) {\n\t\t\tthis.preventDefault();\n\t\t} else if ((rspns instanceof Promise && (proms = rspns))\n\t\t|| (isEvent && (proms = rspns.promises))) {\n\t\t\tthis.waitUntil(proms);\n\t\t}\n\t}\n}", "\n/**\n * @imports\n */\nimport {\n\t_after as _arrAfter, _startsWith as _arrStartsWith,\n\t_any, _equals as _arrEquals,\n} from '@webqit/util/arr/index.js';\nimport { _isNumeric, _isFunction, _isObject } from '@webqit/util/js/index.js';\nimport { paths2D, pathsIs2D, pathsIsDynamic, paths2DIsDynamic } from './utils.js'\nimport Fireable from './Fireable.js';\nimport Event from './Event.js';\n\n/**\n * ---------------------------\n * The Observer class\n * ---------------------------\n */\n\nexport default class Observer extends Fireable {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\t\ttarget\n\t * @param object\t\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tsuper(target, dfn);\n\t\t// The rest of this code is designed for a 2-dimensional array.\n\t\tthis.filters2D = paths2D(this.filter);\n\t\tthis.filtersIsOriginally2D = pathsIs2D(this.filter);\n\t\tthis.filtersIsDynamic = paths2DIsDynamic(this.filters2D);\n\t\tif (this.filtersIsDynamic && this.filters2D.length > 1) {\n\t\t\tthrow new Error('Only one \"Dynamic Filter\" must be observed at a time! \"' + this.filters2D.map(pathArray => '[' + pathArray.join(', ') + ']').join(', ') + '\" have been bound together.');\n\t\t}\n\t}\n\t\n\t/**\n\t * Calls the observer's handler function\n\t * on matching with the event's filter.\n\t *\n\t * @param array\t\t\t \tchanges\n\t *\n\t * @return void\n\t */\n\tfire(changes) {\n\t\tif (this.disconnected || (this.params.type && !_any(changes, delta => this.params.type === delta.type))) {\n\t\t\treturn;\n\t\t}\n\t\tconst diff = delta => !['set', 'def'].includes(delta.type) || (\n\t\t\t!this.params.diff || (_isFunction(this.params.diff) ? this.params.diff(delta.value, delta.oldValue) : delta.value !== delta.oldValue)\n\t\t);\n\t\tvar evt = new Event(this.target);\n\t\tif (this.filters2D.length) {\n\t\t\tvar matches = changes.filter(delta => {\n\t\t\t\t// one observerPathArray can turn out to be two if dynamic\n\t\t\t\t// OR evt.originatingFields is multiple and this.params.subtree\n\t\t\t\treturn this.filters2D.filter((observerPathArray, i) => {\n\t\t\t\t\tvar observerPathArray_Resolved = observerPathArray.slice();\n\t\t\t\t\tif (this.filtersIsDynamic) {\n\t\t\t\t\t\t// Note that if we had tried to loop thru observerPathArray_Resolved,\n\t\t\t\t\t\t// we wouldn't be able tp access slots that are truly empty, as in: [ 'key', <1 empty item> ]\n\t\t\t\t\t\tdelta.path.forEach((_seg, i) => {\n\t\t\t\t\t\t\tobserverPathArray_Resolved[i] = observerPathArray_Resolved[i] || observerPathArray_Resolved[i] === 0 \n\t\t\t\t\t\t\t\t? observerPathArray_Resolved[i]\n\t\t\t\t\t\t\t\t: _seg;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn (!this.filtersIsDynamic || !pathsIsDynamic(observerPathArray_Resolved)) && diff(delta) && ((!this.params.subtree && _arrEquals(observerPathArray_Resolved, delta.path))\n\t\t\t\t\t\t|| (this.params.suptree && _arrStartsWith(observerPathArray_Resolved, delta.path) && (!_isNumeric(this.params.suptree) || _arrAfter(observerPathArray_Resolved, delta.path).length <= this.params.suptree))\n\t\t\t\t\t\t|| (this.params.subtree && delta.path.length >= observerPathArray_Resolved.length && _arrStartsWith(delta.path, observerPathArray_Resolved) && (!_isNumeric(this.params.subtree) || _arrAfter(delta.path, observerPathArray_Resolved).length <= this.params.subtree))\n\t\t\t\t\t);\n\t\t\t\t}).length;\n\t\t\t});\n\t\t\tif (matches.length) {\n\t\t\t\tif (this.filtersIsOriginally2D || this.params.subtree) {\n\t\t\t\t\tvar changesObject = matches;\n\t\t\t\t\tif (_isObject(this.filter)) {\n\t\t\t\t\t\tchangesObject = {...this.filter};\n\t\t\t\t\t\tmatches.forEach((e, i) => {\n\t\t\t\t\t\t\tchangesObject[e.name] = e;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tevt.respondWith(this.handler(changesObject, evt));\n\t\t\t\t} else {\n\t\t\t\t\tmatches.forEach((e, i) => {\n\t\t\t\t\t\tevt.respondWith(this.handler(e, evt));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ((this.params.subtree || changes.filter(delta => _arrEquals(delta.path, [delta.name])).length === changes.length) && changes.filter(delta => diff(delta)).length) {\n\t\t\tevt.respondWith(this.handler(changes, evt));\n\t\t}\n\t\treturn evt;\n\t}\n}\n", "\n/**\n * @imports\n */\nimport { _each } from '@webqit/util/obj/index.js';\nimport { DotSafePath } from './utils.js';\n\n/**\n * ---------------------------\n * The QueryEvent class\n * ---------------------------\n */\n\nexport default class Mutation {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param array|object\ttarget\n\t * @param object\t\tdfn\n\t *\n\t * @return void\n\t */\n\tconstructor(target, dfn) {\n\t\tthis.target = target;\n\t\tif (!dfn.originalSubject) {\n\t\t\tthis.originalSubject = target;\n\t\t}\n\t\tif (!('type' in dfn)) {\n\t\t\tthrow new Error('Mutation type must be given in definition!');\n\t\t}\n\t\tif (!('name' in dfn)) {\n\t\t\tthrow new Error('Property name must be given in definition!');\n\t\t}\n\t\t_each(dfn, (key, value) => {\n\t\t\tif (key === 'path') {\n\t\t\t\tvalue = DotSafePath.resolve(value);\n\t\t\t}\n\t\t\tObject.defineProperty(this, key, {value, enumerable:true});\n\t\t});\n\t\tif (!this.path) {\n\t\t\tObject.defineProperty(this, 'path', {value: DotSafePath.resolve([dfn.name]), enumerable:true});\n\t\t}\n\t\tObject.seal(this);\n\t}\n}", "\n/**\n * @imports\n */\nimport { _from as _arrFrom, _remove, _last } from '@webqit/util/arr/index.js';\nimport Firebase from './Firebase.js';\nimport Observer from './Observer.js';\nimport Mutation from './Mutation.js';\nimport Event from './Event.js';\n\n/**\n * ---------------------------\n * The Reactive class\n * ---------------------------\n */\n\nexport default class Observers extends Firebase {\n\t\n\t/**\n\t * Initializes the instance.\n\t *\n\t * @param object\ttarget\n\t * \n\t * @return void\n\t */\n\tconstructor(target) {\n\t\tsuper(target);\n\t\tthis.buffers = [];\n\t}\n\t\n\t/**\n\t * @inheritdoc\n\t */\n\tadd(dfn) {\n\t\treturn super.add(new Observer(this.target, dfn));\n\t}\n\t\n\t/**\n\t * Fires all observers with the given evt (change).\n\t *\n\t * @param array|Mutation\t\tchanges\n\t * @param bool\t\t\t\tcancellable\n\t *\n\t * @return Event\n\t */\n\tfire(changes, cancellable) {\n\t\tvar evt = new Event(this.target, cancellable);\n\t\t// We accept multiple changes\n\t\tchanges = _arrFrom(changes, false).map(delta => !(delta instanceof Mutation) ? new Mutation(this.target, delta) : delta);\n\t\tif (this.buffers.length) {\n\t\t\t_last(this.buffers)(changes);\n\t\t\treturn evt;\n\t\t}\n\t\tif (this.currentlyFiring.filter(d => changes.filter(delta => d.type === delta.type && d.name === delta.name).length).length) {\n\t\t\t//return false;\n\t\t}\n\t\t//this.currentlyFiring.push(...changes);\n\t\tthis.fireables.forEach(observer => {\n\t\t\tif (evt.propagationStopped && cancellable) {\n\t\t\t\treturn evt;\n\t\t\t}\n\t\t\tevt.respondWith(observer.fire(changes));\n\t\t});\n\t\t//changes.forEach(delta => _remove(this.currentlyFiring, delta));\n\t\treturn evt;\n\t}\n\n\tstatic getFirebase(target, createIfNotExists = true, namespace = null) {\n\t\treturn super._getFirebase('observer', ...arguments);\n\t}\n\n\tstatic namespace(namespace, ImplementationClass = null) {\n\t\treturn super._namespace('observer', ...arguments);\n\t}\n}", "\n/**\n * @imports\n */\nimport {\n\t_isArray, _isNumeric, _isClass,\n\t_isFunction, _isTypeObject, _internals\n} from '@webqit/util/js/index.js';\nimport { _from as _objFrom } from '@webqit/util/obj/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport Interceptors from '../core/Interceptors.js';\nimport _unproxy from '../actors/unproxy.js';\n\n/**\n * Runs a \"get\" operation on a target.\n * Fires any such query observers that may be bound to target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeys\n * @param object\t\treceiver\n * @param object\t\tparams\n *\n * @return mixed\n */\nexport default function(target, keys, receiver = null, params = {}) {\n\ttarget = receiver || target;\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\ttarget = _unproxy(target);\n\t// ---------------------------------\n\tvar _keys = _arrFrom(keys);\n\tvar values = _keys.map(key => {\n\t\t// Execute any \"get\" traps, otherwise \"get\" the default way\n\t\tvar interceptors, defaultGet = function(_value) {\n\t\t\tif (arguments.length) {\n\t\t\t\treturn _value;\n\t\t\t}\n\t\t\tif (_internals(target, 'accessorizedProps').has(key) && _internals(target, 'accessorizedProps').get(key).touch(true)) {\n\t\t\t\treturn _internals(target, 'accessorizedProps').get(key).get();\n\t\t\t}\n\t\t\treturn receiver \n\t\t\t\t? Reflect.get(target, key, receiver) \n\t\t\t\t: Reflect.get(target, key);\n\t\t};\n\t\tif (interceptors = Interceptors.getFirebase(target, true, params.namespace)) {\n\t\t\treturn interceptors.fire({type:'get', name: key, related: _keys, receiver}, defaultGet);\n\t\t}\n\t\treturn defaultGet();\n\t});\n\t// ---------------------------------\n\treturn _isArray(keys) ? values : values[0];\n}\n", "\n/**\n * @imports\n */\nimport { _isFunction, _isTypeObject, _getType } from '@webqit/util/js/index.js';\nimport build, { isUserObject } from '../connectors/build.js';\nimport _unproxy from '../actors/unproxy.js';\nimport Observers from '../core/Observers.js';\n\n/**\n * Adds an observer to an target's firebase.\n *\n * @param array|object\t\t\t\ttarget\n * @param string|array|function\t\tfilter\n * @param function\t\t\t\t\thandler\n * @param object\t\t\t\t\tparams\n *\n * @return Observer\n */\nexport default function(target, filter, handler = null, params = {}) {\n\ttarget = _unproxy(target);\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Observable subjects must be of type object; \"' + _getType(target) + '\" given!');\n\t}\n\tif (_isFunction(filter)) {\n\t\tparams = arguments.length > 2 ? handler : {};\n\t\thandler = filter;\n\t\tfilter = null;\n\t}\n\tif (!_isFunction(handler)) {\n\t\tthrow new Error('Handler must be a function; \"' + _getType(handler) + '\" given!');\n\t}\n\tvar existing, observers = Observers.getFirebase(target, true, params.namespace);\n\tvar dfn = {filter, handler, params,};\n\tif (dfn.filter || dfn.params.subtree === '*' || (dfn.params.subtree && isUserObject(target))) {\n\t\tbuild(target, dfn.filter, dfn.params.subtree, params.namespace);\n\t}\n\tif (dfn.params.unique && (existing = observers.match({filter, params})).length) {\n\t\tif (dfn.params.unique !== 'replace') {\n\t\t\treturn existing[0];\n\t\t}\n\t\tobservers.remove(existing[0]);\n\t}\n\treturn observers.add(dfn);\n}\n", "\n/**\n * @imports\n */\nimport { _each, _merge } from '@webqit/util/obj/index.js';\nimport { _isObject } from '@webqit/util/js/index.js';\nimport Mutation from '../core/Mutation.js';\nimport Observers from '../core/Observers.js';\nimport observe from '../reactions/observe.js';\n\n/**\n * Bubble helper\n *\n * @param array|object\ttarget\n * @param string\t\tfield\n * @param array|object\tvalue\n * @param object\t\tevent\n * @param object\t\tparams\n *\n * @return void\n */\nexport default function(target, field, value, event = null, params = {}) {\n\tif (target === value) {\n\t\treturn;\n\t}\n\tvar observers;\n\tobserve(value, (changes, eventObject) => {\n\t\tif (observers = Observers.getFirebase(target, false, params.namespace)) {\n\t\t\tvar _changes = changes.map(delta => {\n\t\t\t\t// ------------\n\t\t\t\t// Recursive events must not propagate\n\t\t\t\t// ------------\n\t\t\t\tvar d = delta;\n\t\t\t\tdo {\n\t\t\t\t\tif (d.target === target) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} while(d = d.src);\n\t\t\t\t// ------------\n\t\t\t\t// Create propagation\n\t\t\t\t// ------------\n\t\t\t\tvar dfn = {}; _each(delta, (key, value) => {\n\t\t\t\t\tif (key !== 'target' && key !== 'name' && key !== 'path' && key !== 'src') {\n\t\t\t\t\t\tdfn[key] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdfn.name = field;\n\t\t\t\tdfn.path = [field].concat(delta.path);\n\t\t\t\tdfn.originalSubject = delta.originalSubject;\n\t\t\t\tdfn.src = delta;\n\t\t\t\treturn new Mutation(target, dfn);\n\t\t\t}).filter(c => c);\n\t\t\tif (_changes.length) {\n\t\t\t\treturn observers.fire(_changes, eventObject.cancellable);\n\t\t\t}\n\t\t}\n\t}, {subtree: true, ...params, unique: true, tags: [linkTag, field, target]});\n\tif (_isObject(event) && (observers = Observers.getFirebase(target, false, params.namespace))) {\n\t\t// The event object\n\t\tvar _event = _merge({\n\t\t\tname: field,\n\t\t\ttype: 'set',\n\t\t\tvalue,\n\t\t\trelated: [field],\n\t\t}, event);\n\t\tlet eventObject = observers.fire(_event, params.cancellable);\n\t\tif (params.eventTypeReturn) {\n\t\t\treturn eventObject;\n\t\t}\n\t}\n}\n\n/**\n * @var object\n */\nexport const linkTag = {};", "\n/**\n * @imports\n */\nimport { _isTypeObject } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { _before, _after } from '@webqit/util/str/index.js';\nimport { paths2D } from '../core/utils.js';\nimport Observers from '../core/Observers.js';\nimport _get from '../actions/get.js';\nimport link from './link.js';\n\n/**\n * Recursively \"connects\" an object's members to the object\n * for observer actions.\n *\n * @param array|object\ttarget\n * @param string|array\tpaths\n * @param bool\t\t\tsubtree\n * @param String\t\tnamespace\n *\n * @return void\n */\nexport default function build(target, paths = null, subtree = false, namespace = null) {\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\tvar observers = Observers.getFirebase(target, true, namespace);\n\tif (!observers || observers.build) {\n\t\treturn;\n\t}\n\tobservers.build = subtree;\n\t// ---------------------------------\n\t// For paths2D, refer to the comments at class Observer.\n\tvar _paths2D = paths2D(paths);\n\t// If any path starts with a dot, (a wild card path), all keys at this level is implied\n\tvar rootLevelKeysToObserve = !_paths2D.length || _paths2D.filter(path => /*Starts with an empty segment*/!path[0] && path[0] !== 0).length\n\t\t? Object.keys(target)\n\t\t: _paths2D.map(path => path[0]);\n\tvar subLevelKeysToObserve = _paths2D.length ? _paths2D.map(path => path.slice(1)).filter(p => p.length) : null;\n\tobservers.subBuild = subLevelKeysToObserve && subLevelKeysToObserve.length ? subLevelKeysToObserve : null;\n\trootLevelKeysToObserve.forEach(key => {\n\t\tvar value = _get(target, key, null, { namespace });\n\t\ttry {\n\t\t\tif (_isTypeObject(value)) {\n\t\t\t\tlink(target, key, value, null, params);\n\t\t\t\tif ((observers.subBuild && isUserObject(value)) \n\t\t\t\t|| (_isFunction(subtree) ? subtree(value) : (subtree && isUserObject(value)))) {\n\t\t\t\t\tbuild(value, observers.subBuild, subtree, namespace);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch(e) {/* instanceof-ing certain primitives may throw */}\n\t});\n}\n\n/**\n * Tells if an object if a User Object.\n * \n * @param Object value\n * \n * @return Bool\n */\nexport const isUserObject = value => ((value instanceof Object) || (value instanceof Array) || (value instanceof Function))\n\t&& (typeof window === 'undefined' || value !== window);\n", "\n/**\n * @imports\n */\nimport { _isFunction, _isTypeObject, _getType } from '@webqit/util/js/index.js';\nimport _unproxy from '../actors/unproxy.js';\nimport Observers from '../core/Observers.js';\n\n/**\n * Removes observers from an target's firebase.\n *\n * @param array|object\t\t\t\ttarget\n * @param string|array|function\t\tfilter\n * @param function\t\t\t\t\toriginalHandler\n * @param object\t\t\t\t\tparams\n *\n * @return void\n */\nexport default function(target, filter, originalHandler = null, params = {}) {\n\ttarget = _unproxy(target);\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Observable subjects must be of type object; \"' + _getType(target) + '\" given!');\n\t}\n\tif (_isFunction(filter)) {\n\t\tparams = arguments.length > 2 ? originalHandler : {};\n\t\toriginalHandler = filter;\n\t\tfilter = null;\n\t}\n\tif (originalHandler && !_isFunction(originalHandler)) {\n\t\tthrow new Error('Handler must be a function; \"' + _getType(originalHandler) + '\" given!');\n\t}\n\tvar observers;\n\tif (observers = Observers.getFirebase(target, false, params.namespace)) {\n\t\treturn observers.removeMatches({filter, originalHandler, params});\n\t}\n}\n", "\n/**\n * @imports\n */\nimport { _merge } from '@webqit/util/obj/index.js';\nimport { _isObject } from '@webqit/util/js/index.js';\nimport Observers from '../core/Observers.js';\nimport unobserve from '../reactions/unobserve.js';\nimport { linkTag } from './link.js';\n\n/**\n * Unbubble helper\n *\n * @param array|object\ttarget\n * @param string\t\tfield\n * @param array|object\tobject\n * @param object\t\tevent\n * @param object\t\tparams\n *\n * @return void\n */\nexport default function(target, field, value, event = null, params = {}) {\n\tunobserve(value, null, null, {...params, tags:[linkTag, field, target]});\n\tvar observers;\n\tif (_isObject(event) && (observers = Observers.getFirebase(target, false, params.namespace))) {\n\t\t// The event object\n\t\tvar _event = _merge({\n\t\t\tname: field,\n\t\t\ttype: 'del',\n\t\t\toldValue: value,\n\t\t\trelated: [field],\n\t\t}, event);\n\t\tobservers.fire(_event, params.cancellable);\n\t}\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"has\" operation on a target.\n *\n * @param array|object\ttarget\n * @param string\t\tname\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, name, params = {}) {\n\treturn _exec('has', target, { name }, params);\n}\n", "\n/**\n * @imports\n */\nimport {\n\t_isObject, _isTypeObject, _internals,\n\t_isNumber, _isArray, _isString\n} from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport build, { isUserObject } from '../connectors/build.js';\nimport Interceptors from '../core/Interceptors.js';\nimport Observers from '../core/Observers.js';\nimport Event from '../core/Event.js';\nimport unlink from '../connectors/unlink.js';\nimport link from '../connectors/link.js';\nimport _unproxy from '../actors/unproxy.js';\nimport _has from './has.js';\nimport _get from './get.js';\n\n/**\n * Executes a \"_setProp\" type of operation on a target.\n * Fires any observers for the specific type that may be bound to target.\n *\n * @param bool\t\t\tdefine\n * @param array|object\ttarget\n * @param object\t\tpayload\n * @param Object\t\tparams\n *\n * @return Event\n */\nexport default function(define, target, payload, params = {}) {\n\ttarget = payload.receiver || target;\n\tvar keysOrPayload = payload.keysOrPayload;\n\tvar value = payload.value;\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\tif (_isObject(keysOrPayload)) {\n\t\tparams = value || {};\n\t\tvalue = null;\n\t}\n\t// ----------\n\ttarget = _unproxy(target);\n\tvar interceptors = Interceptors.getFirebase(target, false, params.namespace),\n\t\tobservers = Observers.getFirebase(target, false, params.namespace);\n\t// ----------\n\tconst handleSet = (key, value, related, detail) => {\n\t\tvar type = 'set', descriptor;\n\t\tif (define) {\n\t\t\ttype = 'defineProperty';\n\t\t\tdescriptor = value || {};\n\t\t\tvalue = descriptor.value;\n\t\t}\n\t\t// ---------------------------------\n\t\t// The event object\n\t\tvar isUpdate = false, oldValue;\n\t\tif (_has(target, key, params)) {\n\t\t\tisUpdate = true;\n\t\t\toldValue = _get(target, key, payload.receiver, params);\n\t\t}\n\t\tvar e = {\n\t\t\tname: key,\n\t\t\ttype,\n\t\t\tvalue,\n\t\t\treceiver: payload.receiver,\n\t\t\trelated,\n\t\t\tdetail,\n\t\t\tisUpdate,\n\t\t\toldValue,\n\t\t};\n\t\t// ---------------------------------\n\t\t// The set operation\n\t\tvar defaultSet = function(_success) {\n\t\t\tif (arguments.length) {\n\t\t\t\tif (descriptor) {\n\t\t\t\t\tdescriptor = _success;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = _success;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (descriptor) {\n\t\t\t\tif (_internals(target, 'accessorizedProps', false).has(key)\n\t\t\t\t&& !_internals(target, 'accessorizedProps').get(key).restore()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tObject.defineProperty(target, key, descriptor);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (_internals(target, 'accessorizedProps', false).has(key)) {\n\t\t\t\treturn _internals(target, 'accessorizedProps').get(key).set(value);\n\t\t\t}\n\t\t\ttarget[key] = value;\n\t\t\treturn true;\n\t\t};\n\t\tif (interceptors) {\n\t\t\tvar eventObject = descriptor \n\t\t\t\t? {type: 'defineProperty', name: key, descriptor, receiver: payload.receiver, related, detail, isUpdate, oldValue} \n\t\t\t\t: {type: 'set', name: key, value, receiver: payload.receiver, related, detail, isUpdate, oldValue};\n\t\t\te.success = interceptors.fire(eventObject, defaultSet);\n\t\t} else {\n\t\t\te.success = defaultSet();\n\t\t}\n\t\t// ---------------------------------\n\t\tif (e.success && e.value !== e.oldValue) {\n\t\t\t// Unobserve outgoing value for bubbling\n\t\t\tif (_isTypeObject(e.oldValue)) {\n\t\t\t\tunlink(target, key, e.oldValue, null, params);\n\t\t\t}\n\t\t\t// Observe incoming value for bubbling\n\t\t\tif (_isTypeObject(e.value)) {\n\t\t\t\tlink(target, key, e.value, null, params);\n\t\t\t\tif (observers && (observers.subBuild || (observers.build && isUserObject(e.value)))) {\n\t\t\t\t\tbuild(e.value, observers.subBuild, observers.build, params.namespace);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn e;\n\t};\n\t// ---------------------------------\n\tvar keys, events = [];\n\tif (_isArray(keysOrPayload) || ((_isString(keysOrPayload) || _isNumber(keysOrPayload)) && (keys = _arrFrom(keysOrPayload)))) {\n\t\tevents = keys.map(key => handleSet(key, value, keys, params.detail));\n\t} else if (_isObject(keysOrPayload) && (keys = Object.keys(keysOrPayload))) {\n\t\tevents = keys.map(key => handleSet(key, keysOrPayload[key], keys, params.detail));\n\t}\n\tvar successfulEvents = events.filter(e => e.success !== false);\n\t// ---------------------------------\n\tvar evt;\n\tif (observers) {\n\t\tevt = observers.fire(successfulEvents, params.cancellable);\n\t\tevt.successCount = successfulEvents.length;\n\t} else if (params.eventTypeReturn) {\n\t\tevt = new Event(target);\n\t}\n\treturn params.eventTypeReturn ? evt : successfulEvents.length > 0;\n}\n", "\n/**\n * @imports\n */\nimport _setOrDefine from './_setOrDefine.js';\n\n/**\n * Executes a \"defineProperty\" operation on a target.\n * Fires any observers that may be bound to target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeysOrPayload\n * @param mixed\t\t\tvalue\n * @param object\t\tparams\n *\n * @return bool\n */\nexport default function(target, keysOrPayload, value = null, params = {}) {\n\treturn _setOrDefine(true/*define*/, target, { keysOrPayload, value }, params);\n}\n", "\n/**\n * @imports\n */\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport { _isTypeObject, _internals } from '@webqit/util/js/index.js';\nimport Interceptors from '../core/Interceptors.js';\nimport Observers from '../core/Observers.js';\nimport Event from '../core/Event.js';\nimport unlink from '../connectors/unlink.js';\nimport _unproxy from '../actors/unproxy.js';\nimport _has from './has.js';\nimport _get from './get.js';\n\n/**\n * Executes a \"deleteProperty\" operation on a target.\n * Fires any observers that may be bound to target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeys\n * @param object\t\tparams\n *\n * @return Event\n */\nexport default function(target, keys, params = {}) {\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Target must be of type object!');\n\t}\n\ttarget = _unproxy(target);\n\tvar _keys = _arrFrom(keys);\n\tvar events = _keys.map(key => {\n\t\t// ---------------------------------\n\t\t// The event object\n\t\tvar oldValue;\n\t\tif (_has(target, key, params)) {\n\t\t\toldValue = _get(target, key, null, params);\n\t\t}\n\t\tvar e = {\n\t\t\tname: key,\n\t\t\ttype: 'deleteProperty',\n\t\t\trelated: _keys,\n\t\t\tdetail: params.detail,\n\t\t\toldValue,\n\t\t};\n\t\t// ---------------------------------\n\t\t// Execute any \"del\" traps, otherwise \"del\" the default way\n\t\tvar interceptors, defaultDel = function(_success) {\n\t\t\tif (arguments.length) {\n\t\t\t\treturn _success;\n\t\t\t}\n\t\t\tif (_internals(target, 'accessorizedProps', false).has(key)\n\t\t\t&& !_internals(target, 'accessorizedProps').get(key).restore()) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdelete target[key];\n\t\t\treturn true;\n\t\t};\n\t\tif (interceptors = Interceptors.getFirebase(target, false, params.namespace)) {\n\t\t\te.success = interceptors.fire({type: 'deleteProperty', name:key, oldValue, related: _keys}, defaultDel);\n\t\t} else {\n\t\t\te.success = defaultDel();\n\t\t}\n\t\t// ---------------------------------\n\t\t// Unobserve outgoing value for bubbling\n\t\tif (e.success && _isTypeObject(e.oldValue)) {\n\t\t\tunlink(target, key, e.oldValue, null, params);\n\t\t}\n\t\treturn e;\n\t});\n\tvar successfulEvents = events.filter(e => e.success !== false);\n\t// ---------------------------------\n\tvar observers, evt;\n\tif (observers = Observers.getFirebase(target, false, params.namespace)) {\n\t\tevt = observers.fire(successfulEvents, params.cancellable);\n\t\tevt.successCount = successfulEvents.length;\n\t} else if (params.eventTypeReturn) {\n\t\tevt = new Event(target);\n\t}\n\treturn params.eventTypeReturn ? evt : successfulEvents.length > 0;\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"getOwnPropertyDescriptor\" operation on a target.\n *\n * @param array|object\ttarget\n * @param string|number name\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, name, params = {}) {\n\treturn _exec('getOwnPropertyDescriptor', target, { name }, params);\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"getPrototypeOf\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, params = {}) {\n\treturn _exec('getPrototypeOf', target, {}, params);\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"isExtensible\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, params = {}) {\n\treturn _exec('isExtensible', target, {}, params);\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"ownKeys\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, params = {}) {\n\treturn _exec('ownKeys', target, {}, params);\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"preventExtensions\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, params = {}) {\n\treturn _exec('preventExtensions', target, {}, params);\n}\n", "\n/**\n * @imports\n */\nimport _setOrDefine from './_setOrDefine.js';\n\n/**\n * Executes a \"set\" operation on a target.\n * Fires any observers that may be bound to target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeysOrPayload\n * @param mixed\t\t\tvalue\n * @param object\t\treceiver\n * @param object\t\tparams\n *\n * @return bool\n */\nexport default function(target, keysOrPayload, value = null, receiver = null, params = {}) {\n\treturn _setOrDefine(false/*define*/, target, arguments.length > 3 ? { keysOrPayload, value, receiver } : { keysOrPayload, value }, params);\n}\n", "\n/**\n * @imports\n */\nimport _exec from './_exec.js';\n\n/**\n * Runs a \"setPrototypeOf\" operation on a target.\n *\n * @param array|object\ttarget\n * @param object\t\tprototype\n * @param object\t\tparams\n *\n * @return array\n */\nexport default function(target, prototype, params = {}) {\n\treturn _exec('setPrototypeOf', target, { prototype }, params);\n}\n", "\n/**\n * @imports\n */\nimport { _isArray, _internals } from '@webqit/util/js/index.js';\nimport { _isObject } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\nimport _get from '../actions/get.js';\nimport _set from '../actions/set.js';\n\n/**\n * Initializes \"Reflxive getter/setter\" traps on the target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeys\n * @param object\t\tparams\n *\n * @return bool|array\n */\nexport default function(target, keys = [], params = {}) {\n\tparams = _isObject(keys) ? keys : params;\n\tvar successFlags = (arguments.length === 1 ? Object.keys(target) : _arrFrom(keys)).map(key => {\n\t\tif (_internals(target, 'accessorizedProps').has(key) && _internals(target, 'accessorizedProps').get(key).touch(true)) {\n\t\t\treturn false;\n\t\t}\n\t\t// ----------\n\t\tconst getDescriptorDeep = () => {\n\t\t\tvar descriptor, proto = target;\n\t\t\twhile (!descriptor && (proto = Object.getPrototypeOf(proto))) {\n\t\t\t\tdescriptor = Object.getOwnPropertyDescriptor(proto, key);\n\t\t\t}\n\t\t\treturn descriptor;\n\t\t};\n\t\t// ----------\n\t\tvar originalOwnDescriptor = Object.getOwnPropertyDescriptor(target, key),\n\t\t\taltOriginalOwnDescriptor,\n\t\t\tactiveIsAltOriginalOwnDescriptor;\n\t\tif (!originalOwnDescriptor) {\n\t\t\t// Not an own property\n\t\t\t// and maybe not even defined at all in the prototype chain\n\t\t\taltOriginalOwnDescriptor = {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: key in target ? false/* existing but inherited*/ : true,\n\t\t\t\tconfigurable: params.configurable !== false,\n\t\t\t};\n\t\t}\n\t\t// ----------\n\t\tvar reactiveOwnDescriptor = { ...(originalOwnDescriptor || altOriginalOwnDescriptor) };\n\t\tif ('value' in reactiveOwnDescriptor) {\n\t\t\tdelete reactiveOwnDescriptor.value;\n\t\t}\n\t\tif ('writable' in reactiveOwnDescriptor) {\n\t\t\tdelete reactiveOwnDescriptor.writable;\n\t\t}\n\t\t// ----------\n\t\treactiveOwnDescriptor.get = () => {\n\t\t\tif (controlObject.ongoingGets.length) {\n\t\t\t\t// .touch(true)\n\t\t\t\treturn controlObject.get();\n\t\t\t}\n\t\t\t// _get() will return here\n\t\t\t// but to call controlObject.get();\n\t\t\tcontrolObject.ongoingGets.push(1);\n\t\t\tvar value = _get(target, key, null, params);\n\t\t\tcontrolObject.ongoingGets.pop();\n\t\t\treturn value;\n\t\t};\n\t\tvar setting;\n\t\treactiveOwnDescriptor.set = newValue => {\n\t\t\tif (controlObject.ongoingSets.length) {\n\t\t\t\treturn controlObject.set(newValue);\n\t\t\t}\n\t\t\t// _set() will return here\n\t\t\t// but to call controlObject.set();\n\t\t\tcontrolObject.ongoingSets.push(1);\n\t\t\tvar operation = _set(target, key, newValue, null, params);\n\t\t\tcontrolObject.ongoingSets.pop();\n\t\t\treturn operation;\n\t\t};\n\t\t// ----------\n\t\tvar controlObject = {\n\t\t\tongoingGets: [],\n\t\t\tongoingSets: [],\n\t\t\tget: function() {\n\t\t\t\t// ---------------------\n\t\t\t\tvar descriptor = originalOwnDescriptor;\n\t\t\t\tif (!descriptor) {\n\t\t\t\t\tif (activeIsAltOriginalOwnDescriptor) {\n\t\t\t\t\t\t// Already switched to altOriginalOwnDescriptor\n\t\t\t\t\t\tdescriptor = altOriginalOwnDescriptor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// getDescriptorDeep() or altOriginalOwnDescriptor\n\t\t\t\t\t\tdescriptor = getDescriptorDeep() || altOriginalOwnDescriptor;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// ---------------------\n\t\t\t\treturn descriptor.get ? descriptor.get.call(target) : descriptor.value;\n\t\t\t},\n\t\t\tset: function(value) {\n\t\t\t\t// ---------------------\n\t\t\t\tvar descriptor = originalOwnDescriptor;\n\t\t\t\tif (!descriptor) {\n\t\t\t\t\tif (activeIsAltOriginalOwnDescriptor) {\n\t\t\t\t\t\t// Already switched to altOriginalOwnDescriptor\n\t\t\t\t\t\tdescriptor = altOriginalOwnDescriptor;\n\t\t\t\t\t} else if (descriptor = getDescriptorDeep()) {\n\t\t\t\t\t\tif (('value' in descriptor)) {\n\t\t\t\t\t\t\t// Deep is data property.\n\t\t\t\t\t\t\t// We should rather switch to altOriginalOwnDescriptor\n\t\t\t\t\t\t\tdescriptor = altOriginalOwnDescriptor;\n\t\t\t\t\t\t\tactiveIsAltOriginalOwnDescriptor = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Not yet switched to altOriginalOwnDescriptor\n\t\t\t\t\t\t// and no getDescriptorDeep()\n\t\t\t\t\t\tdescriptor = altOriginalOwnDescriptor;\n\t\t\t\t\t\tactiveIsAltOriginalOwnDescriptor = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// ---------------------\n\t\t\t\tif (descriptor.set || descriptor.get) {\n\t\t\t\t\tif (!descriptor.set) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t// Can sometimes return undefined\n\t\t\t\t\treturn descriptor.set.call(target, value);\n\t\t\t\t}\n\t\t\t\tdescriptor.value = value;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\trestore: function() {\n\t\t\t\ttry {\n\t\t\t\t\tif (this.intact()) {\n\t\t\t\t\t\tif (originalOwnDescriptor || activeIsAltOriginalOwnDescriptor /* switched */) {\n\t\t\t\t\t\t\tObject.defineProperty(target, key, originalOwnDescriptor || altOriginalOwnDescriptor /* switch target */);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdelete target[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_internals(target, 'accessorizedProps').delete(key);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t} catch(e) {}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tintact: function() {\n\t\t\t\treturn (Object.getOwnPropertyDescriptor(target, key) || {}).get === reactiveOwnDescriptor.get;\n\t\t\t},\n\t\t\ttouch: function(attemptRestore = false) {\n\t\t\t\t// If intact, or not intact but not restorable, return true - \"valid\"\n\t\t\t\treturn this.intact() || (attemptRestore ? !this.restore() : false);\n\t\t\t},\n\t\t}\n\t\t// ----------\n\t\ttry {\n\t\t\tObject.defineProperty(target, key, reactiveOwnDescriptor);\n\t\t\t_internals(target, 'accessorizedProps').set(key, controlObject);\n\t\t\treturn true;\n\t\t} catch(e) {}\n\t\treturn false;\n\t});\n\treturn _isArray(keys) ? successFlags : successFlags[0];\n}\n", "\n/**\n * @imports\n */\nimport { _isArray, _isObject, _internals } from '@webqit/util/js/index.js';\nimport { _from as _arrFrom } from '@webqit/util/arr/index.js';\n\n/**\n * Removes previously initialized \"Reflxive getter/setter\" traps from the target.\n *\n * @param array|object\ttarget\n * @param string|array\tkeys\n * @param object\t\tparams\n *\n * @return bool|array\n */\nexport default function(target, keys = [], params = {}) {\n\tparams = _isObject(keys) ? keys : params;\n\tvar successFlags = (arguments.length === 1 ? Object.keys(target) : _arrFrom(keys)).map(key => {\n\t\tif (_internals(target, 'accessorizedProps', false).has(key)) {\n\t\t\treturn _internals(target, 'accessorizedProps').get(key).restore();\n\t\t}\n\t\treturn true;\n\t});\n\treturn _isArray(keys) ? successFlags : successFlags[0];\n}\n", "\n/**\n * @imports\n */\nimport {\n    _isClass, _isFunction, _isTypeObject,\n    _getType, _internals,\n} from '@webqit/util/js/index.js';\nimport apply from '../actions/apply.js';\nimport construct from '../actions/construct.js';\nimport defineProperty from '../actions/defineProperty.js';\nimport deleteProperty from '../actions/deleteProperty.js';\nimport get from '../actions/get.js';\nimport getOwnPropertyDescriptor from '../actions/getOwnPropertyDescriptor.js';\nimport getPrototypeOf from '../actions/getPrototypeOf.js';\nimport has from '../actions/has.js';\nimport isExtensible from '../actions/isExtensible.js';\nimport ownKeys from '../actions/ownKeys.js';\nimport preventExtensions from '../actions/preventExtensions.js';\nimport set from '../actions/set.js';\nimport setPrototypeOf from '../actions/setPrototypeOf.js';\n\n/**\n * Returns an object as a proxy and binds all instance methods\n * to the proxy instead of the object itself.\n *\n * @param Object|Array\t\ttarget\n * @param Object\t\t    params\n *\n * @return Proxy\n */\nexport default function(target, params = {}) {\n\tif (!_isTypeObject(target)) {\n\t\tthrow new Error('Object must be of type target; \"' + _getType(target) + '\" given!');\n    }\n    var proxy = new Proxy(target, {\n        apply:  (target, thisArgument, argumentsList) => apply(target, thisArgument, argumentsList, params),\n        construct:  (target, argumentsList, newTarget = null) => construct(target, argumentsList, newTarget, params),\n        defineProperty:  (target, propertyKey, attributes) => defineProperty(target, propertyKey, attributes, params),\n        deleteProperty: (target, propertyKey) => deleteProperty(target, propertyKey, params),\n        get: (target, propertyKey, receiver = null) => {\n            var val = get(target, propertyKey, receiver, params);\n            if (params.proxyAutoBinding !== false && _isFunction(val) && !_isClass(val)) {\n                return val.bind(proxy);\n            }\n            return val;\n        },\n        getOwnPropertyDescriptor: (target, propertyKey) => getOwnPropertyDescriptor(target, propertyKey, params),\n        getPrototypeOf: target => getPrototypeOf(target, params),\n        has: (target, propertyKey) => has(target, propertyKey, params),\n        isExtensible: target => isExtensible(target, params),\n        ownKeys: target => ownKeys(target, params),\n        preventExtensions: target => preventExtensions(target, params),\n        set: (target, propertyKey, value, receiver = null) => set(target, propertyKey, value, receiver, params),\n        setPrototypeOf: (target, prototype) => setPrototypeOf(target, prototype, params),\n    });\n    _internals(proxy).set(proxy, target);\n\treturn proxy;\n}\n", "\n/**\n * @imports\n */\nimport { _isFunction, _isTypeObject, _isObject, _getType } from '@webqit/util/js/index.js';\nimport _unproxy from '../actors/unproxy.js';\nimport Interceptors from '../core/Interceptors.js';\n\n/**\n * Adds a trap to an target's firebase.\n *\n * @param array|object\t\t\t\ttarget\n * @param object\t\t\t\t\ttrap\n * @param object\t\t\t\t\tparams\n *\n * @return Interceptor\n */\nexport default function(target, trap, params = {}) {\n\ttarget = _unproxy(target);\n\tif (!_isTypeObject(target)) {\n\t\tthrow new Error('Object must be of type target; \"' + _getType(handler) + '\" given!');\n\t}\n\tvar returnObj = {}, isOriginallyObj = true;\n\tif (!_isObject(trap)) {\n\t\t// Backwards compatibility\n\t\tif (_isFunction(trap)) {\n\t\t\ttrap = { '': trap };\n\t\t} else if (_isFunction(params)) {\n\t\t\ttrap = { [trap]: params };\n\t\t\tparams = arguments.length > 3 ? arguments[3] : {};\n\t\t}\n\t\tisOriginallyObj = false;\n\t}\n\tvar interceptors = Interceptors.getFirebase(target, true, params.namespace);\n\tObject.keys(trap).forEach(filter => {\n\t\tif (!_isFunction(trap[filter])) {\n\t\t\tthrow new Error('Callback' + (filter === null ? '' : ' for ' + filter) + ' must be a function; \"' + _getType(trap[filter]) + '\" given!');\n\t\t}\n\t\tvar dfn = { filter, handler: trap[filter], params }, existing;\n\t\tif (dfn.params.unique && (existing = interceptors.match(dfn)).length) {\n\t\t\tif (dfn.params.unique !== 'replace') {\n\t\t\t\treturn existing[0];\n\t\t\t}\n\t\t\tinterceptors.remove(existing[0]);\n\t\t}\n\t\tif (isOriginallyObj) {\n\t\t\treturnObj[filter] = interceptors.add(dfn);\n\t\t} else {\n\t\t\treturnObj = interceptors.add(dfn);\n\t\t}\n\t});\n\treturn returnObj;\n}\n", "\n/**\n * @imports\n */\nimport { _isFunction, _isTypeObject, _getType } from '@webqit/util/js/index.js';\nimport _unproxy from '../actors/unproxy.js';\nimport Interceptors from '../core/Interceptors.js';\n\n/**\n * Removes traps from an target's firebase.\n *\n * @param array|object\t\t\t\ttarget\n * @param object\t\t\t\t\ttrap\n * @param object\t\t\t\t\tparams\n *\n * @return void\n */\nexport default function(target, trap = null, params = {}) {\n\ttarget = _unproxy(target);\n\tif (!target || !_isTypeObject(target)) {\n\t\tthrow new Error('Object must be of type target; \"' + _getType(target) + '\" given!');\n\t}\n\tvar interceptors = Interceptors.getFirebase(target, false, params.namespace);\n\tif (!_isObject(trap)) {\n\t\t// Backwards compatibility\n\t\tif (_isFunction(trap)) {\n\t\t\ttrap = { [null]: trap };\n\t\t} else if (_isFunction(params)) {\n\t\t\ttrap = { [trap]: params };\n\t\t\tparams = arguments.length > 3 ? arguments[3] : {};\n\t\t}\n\t\tisOriginallyObj = false;\n\t}\n\tif (interceptors = Interceptors.getFirebase(target, false, params.namespace)) {\n\t\tObject.keys(trap).forEach(filter => {\n\t\t\tif (!_isFunction(trap[filter])) {\n\t\t\t\tthrow new Error('Callback' + (filter === null ? '' : ' for ' + filter) + ' must be a function; \"' + _getType(trap[filter]) + '\" given!');\n\t\t\t}\n\t\t\tvar dfn = { filter, originalHandler: trap[filter], params };\n\t\t\treturn interceptors.removeMatches(dfn);\n\t\t});\n\t}\n}\n", "\n/**\n * @imports\n */\nimport { _copy } from '@webqit/util/obj/index.js';\nimport { _unique } from '@webqit/util/arr/index.js';\nimport { _isArray, _isTypeObject } from '@webqit/util/js/index.js';\nimport _unproxy from '../actors/unproxy.js';\nimport Observers from '../core/Observers.js';\nimport unlink from '../connectors/unlink.js';\nimport link from '../connectors/link.js';\n\n/**\n * Executes a callback function on a target in \"closure\" mode.\n * Fires any observers that may be bound to target on recorded changes.\n *\n * @param function\t\tcallback\n * @param array\t\t\t...subjects\n *\n * @return array|Event\n */\nexport default function(callback, ...subjects) {\n\tvar context = subjects.map(target => {\n\t\ttarget = _unproxy(target);\n\t\tif (!_isTypeObject(target)) {\n\t\t\tthrow new Error('Target must be of type object!');\n\t\t}\n\t\treturn {\n\t\t\ttarget,\n\t\t\tsubjectCopy: _isArray(target) ? target.slice(0) : _copy(target),\n\t\t};\n\t});\n\t// ---------------------------------\n\tvar result = callback(...subjects);\n\t// ---------------------------------\n\tconst fireDiffs = () => {\n\t\tcontext.map(cntxt => {\n\t\t\tvar initialKeys = Object.keys(cntxt.subjectCopy);\n\t\t\tvar currentKeys = Object.keys(cntxt.target);\n\t\t\tvar related = [];\n\t\t\tvar changes = _unique(initialKeys.concat(currentKeys)).map(key => {\n\t\t\t\tif (cntxt.subjectCopy[key] !== cntxt.target[key]) {\n\t\t\t\t\trelated.push(key);\n\t\t\t\t\t// ---------------------------------\n\t\t\t\t\t// The event object\n\t\t\t\t\tvar e = {\n\t\t\t\t\t\tname:key,\n\t\t\t\t\t\trelated,\n\t\t\t\t\t\tbuffered: true,\n\t\t\t\t\t};\n\t\t\t\t\tif (currentKeys.includes(key)) {\n\t\t\t\t\t\te.type = 'set';\n\t\t\t\t\t\te.value = cntxt.target[key];\n\t\t\t\t\t\tif (initialKeys.includes(key)) {\n\t\t\t\t\t\t\te.isUpdate = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.type = 'del';\n\t\t\t\t\t}\n\t\t\t\t\tif (initialKeys.includes(key)) {\n\t\t\t\t\t\te.oldValue = cntxt.subjectCopy[key];\n\t\t\t\t\t}\n\t\t\t\t\t// ---------------------------------\n\t\t\t\t\t// Unobserve outgoing value for bubbling\n\t\t\t\t\tif (_isTypeObject(cntxt.subjectCopy[key])) {\n\t\t\t\t\t\tunlink(cntxt.target, key, cntxt.subjectCopy[key]);\n\t\t\t\t\t}\n\t\t\t\t\t// Observe incoming value for bubbling\n\t\t\t\t\tif (_isTypeObject(cntxt.target[key])) {\n\t\t\t\t\t\tlink(cntxt.target, key, cntxt.target[key]);\n\t\t\t\t\t}\n\t\t\t\t\treturn e;\n\t\t\t\t}\n\t\t\t}).filter(c => c);\n\t\t\t// ---------------------------------\n\t\t\tvar observers;\n\t\t\tif (changes.length && (observers = Observers.getFirebase(cntxt.target, false))) {\n\t\t\t\treturn observers.fire(changes);\n\t\t\t}\n\t\t});\n\t};\n\tif (result instanceof Promise) {\n\t\tresult.then(fireDiffs);\n\t} else {\n\t\tfireDiffs();\n\t}\n\treturn result;\n}\n", "\n/**\n * @imports\n */\n// Actions\nimport apply from './actions/apply.js';\nimport construct from './actions/construct.js';\nimport defineProperty from './actions/defineProperty.js';\nimport deleteProperty from './actions/deleteProperty.js';\nimport get from './actions/get.js';\nimport getOwnPropertyDescriptor from './actions/getOwnPropertyDescriptor.js';\nimport getPrototypeOf from './actions/getPrototypeOf.js';\nimport has from './actions/has.js';\nimport isExtensible from './actions/isExtensible.js';\nimport ownKeys from './actions/ownKeys.js';\nimport preventExtensions from './actions/preventExtensions.js';\nimport set from './actions/set.js';\nimport setPrototypeOf from './actions/setPrototypeOf.js';\n// Actors\nimport accessorize from './actors/accessorize.js';\nimport unaccessorize from './actors/unaccessorize.js';\nimport proxy from './actors/proxy.js';\nimport unproxy from './actors/unproxy.js';\n// Reactions\nimport observe from './reactions/observe.js';\nimport unobserve from './reactions/unobserve.js';\nimport intercept from './reactions/intercept.js';\nimport unintercept from './reactions/unintercept.js';\nimport closure from './reactions/closure.js';\n// Connectors\nimport build from './connectors/build.js';\nimport link from './connectors/link.js';\nimport unlink from './connectors/unlink.js';\n// Core\nimport Observers from './core/Observers.js';\nimport Interceptors from './core/Interceptors.js';\n\n/**\n * @exports\n */\nexport default {\n\t// Actions\n\tapply,\n\tconstruct,\n\tdefineProperty,\n\tdeleteProperty,\n\tget,\n\tgetOwnPropertyDescriptor,\n\tgetPrototypeOf,\n\thas,\n\tisExtensible,\n\townKeys,\n\tpreventExtensions,\n\tset,\n\tsetPrototypeOf,\n\t// Actors\n\taccessorize,\n\tunaccessorize,\n\tproxy,\n\tunproxy,\n\t// Reactions\n\tobserve,\n\tunobserve,\n\tintercept,\n\tunintercept,\n\tclosure,\n\t// Connectors\n\tbuild,\n\tlink,\n\tunlink,\n\t// Core\n\tObservers,\n\tInterceptors,\n}", "\r\nexport const _isTextMediaType = contentMediaType => contentMediaType && (\r\n    contentMediaType.startsWith('text/')\r\n    || contentMediaType === 'application/rtf'\r\n    || contentMediaType === 'application/xml'\r\n    || contentMediaType === 'application/xhtml+xml'\r\n    || contentMediaType === 'application/json'\r\n);\r\n\r\nexport const _isFileUpload = schema => {\r\n    return schema.format === 'data-url' \r\n    || schema.contentEncoding === 'base64';\r\n};", "\r\n/**\r\n * @imports\r\n */\r\nimport { _difference, _intersect, _unique } from '@webqit/util/arr/index.js';\r\nimport { _isBoolean, _isNull, _isNumeric, _isString } from '@webqit/util/js/index.js';\r\n\r\n/**\r\n * @Schema Base Controller\r\n * @todo: anyOf, oneOf, allOf\r\n */\r\nexport const _Schema = __Schema => class extends (__Schema || class {}) {\r\n    \r\n    constructor(jsonSchema) {\r\n        super(jsonSchema);\r\n        // depreciated, readOnly, writeOnly, default, \r\n        // title, description, enum, const, examples, etc\r\n        Object.keys(jsonSchema).forEach(name => {\r\n            Object.defineProperty(this, name, { value: jsonSchema[name] });\r\n        });\r\n    }\r\n\r\n    validate(instance) {\r\n        return super.validate ? super.validate(instance) : { valid: true };\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @ObjectOrArray Base Controller\r\n */\r\nexport const _ObjectOrArray = __ObjectOrArray => class extends _Schema(__ObjectOrArray) {\r\n\r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        if (!(validity = this._validateMin(instance)).valid) {\r\n            return { valid: false, error: validity.error || `Minimum number of entries short of: ${validity.violation}.` };\r\n        }\r\n        if (!(validity = this._validateMax(instance)).valid) {\r\n            return { valid: false, error: validity.error || `Maximum number of entries exceeded by: ${validity.violation}.` };\r\n        }\r\n        return validity;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @Object Controller\r\n */\r\nexport const _Object = __Object => class extends _ObjectOrArray(__Object) {\r\n\r\n    getPropertyNameSchema(instanceHint = null) {\r\n        var propertyNameSchema = this.propertyNames || { type: 'string' };\r\n        if (this.additionalProperties === false) {\r\n            propertyNameSchema.error = `Additional properties not allowed.`;\r\n        }\r\n        if (instanceHint) {\r\n            // With instanceHint as hint, consider assisting the caller with\r\n            // 1. Dynamically-generated names as options - names that aren't yet in the instance\r\n        }\r\n        propertyNameSchema.isRequired = true;\r\n        return propertyNameSchema;\r\n    }\r\n\r\n    getPropertySchema(propertyName, instanceHint = null) {\r\n        var propertySchema;\r\n        if ((!this.properties || !(propertySchema = this.properties[propertyName]))\r\n        && !(propertySchema = this._patternPropertiesMatch(propertyName))\r\n        && !(propertySchema = this.additionalProperties) && propertySchema !== false) {\r\n            propertySchema = { };\r\n        }\r\n        if (propertySchema) {\r\n            // Also use \"this.required\" to hint this property schema about requiredness\r\n            if ((this.required || []).includes(propertyName)) {\r\n                propertySchema.isRequired = true;\r\n            }\r\n            if (instanceHint) {\r\n                const instanceProperties = Object.keys(instanceHint);\r\n                // With instance as hint, consider assisting the caller with dynamically-generated hints\r\n                // 1. Use \"this.dependentRequired\" to hint this property schema about dependent-requiredness\r\n                var requiringProp;\r\n                if (!propertySchema.isRequired && (requiringProp = _intersect(this.dependentRequired || [], instanceProperties).reduce((masterHint, master) => masterHint || this.dependentRequired[master].includes(propertyName) ? master : null, null))) {\r\n                    propertySchema.isRequired = requiringProp;\r\n                }\r\n                // 2. Info about whether this proposed entry will validate against \"this.min/this.maxProperties\"\r\n                var validity;\r\n                if (!instanceProperties.includes(propertyName) && !(validity = this._validateMax(instanceHint)).valid || validity.violation === 0/* currently exact maximum reached */) {\r\n                    propertySchema.error = `This additional entry will violate the maximum number of entries allowed.`;\r\n                }\r\n                // 3. dynamic \"type\": the list of types in \"this.allOf\", \"this.anyOf\", \"this.oneOf\", not in \"this.not\"\r\n            }\r\n            return { ...propertySchema, name:propertyName };\r\n        }\r\n    }\r\n\r\n    _patternPropertiesMatch(propertyName) {\r\n        return Object.keys(this.patternProperties || {}).reduce((prev, pattern) => {\r\n            if (prev) return prev;\r\n            if ((new RegExp(pattern)).test(propertyName)) {\r\n                return this.patternProperties[pattern];\r\n            }\r\n        }, null);\r\n    }\r\n\r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        if (!(validity = this._validateRequired(instance)).valid) {\r\n            return { valid: false, error: validity.error || `Required entries still empty: ${validity.violation.join(', ')}.` };\r\n        }\r\n        if (!(validity = this._validateDependentRequired(instance)).valid) {\r\n            return { valid: false, error: validity.error || `Entries associated with \"${validity.master}\" still empty: ${validity.violation.join(', ')}.` };\r\n        }\r\n        return validity;\r\n    }\r\n\r\n    _validateMax(instance) {\r\n        if (!this.maxProperties) return { valid: true };\r\n        const instanceProperties = Object.keys(instance);\r\n        const violation = instanceProperties.length - this.maxProperties;\r\n        return { valid: violation <= 0, violation };\r\n    }\r\n\r\n    _validateMin(instance) {\r\n        if (!this.minProperties) return { valid: true };\r\n        const instanceProperties = Object.keys(instance);\r\n        const violation = this.minProperties - instanceProperties.length;\r\n        return { valid: violation <= 0, violation };\r\n    }\r\n\r\n    _validateRequired(instance) {\r\n        if (!this.required) return { valid: true };\r\n        const instanceProperties = Object.keys(instance);\r\n        const violation = _difference(this.required, instanceProperties);\r\n        return { valid: violation.length === 0, violation };\r\n    }\r\n\r\n    _validateDependentRequired(instance) {\r\n        if (!this.dependentRequired) return { valid: true };\r\n        const instanceProperties = Object.keys(instance);\r\n        const [ master, violation ] = Object.keys(this.dependentRequired).reduce((prev, key) => {\r\n            if (prev) return prev;\r\n            if (instanceProperties.includes(key)) {\r\n                const violation = _difference(this.dependentRequired[key], instanceProperties);\r\n                if (violation.length) return [ key, violation ];\r\n            }\r\n        }, null) || [];\r\n        return { valid: !master, master, violation };\r\n    }\r\n}\r\n\r\n/**\r\n * @Array Controller\r\n */\r\n export const _Array = __Array => class extends _ObjectOrArray(__Array) {\r\n\r\n    getItemSchema(itemIndex, instanceHint = null) {\r\n        var itemSchema;\r\n        if ((!this.prefixItems || !(itemSchema = this.prefixItems[itemIndex]))\r\n        && !(itemSchema = this.items) && itemSchema !== false) {\r\n            itemSchema = { };\r\n        }\r\n        if (itemSchema) {\r\n            if (instanceHint) {\r\n                // With instance as hint, consider assisting the caller with dynamically-generated hints\r\n                // 1. Info about whether this proposed entry will validate against \"this.min/this.maxProperties\"\r\n                var validity;\r\n                if (!(itemIndex in instanceHint) && !(validity = this._validateMax(instanceHint)).valid || validity.violation === 0/* currently exact maximum reached */) {\r\n                    itemSchema.error = `This additional entry will violate the maximum number of entries allowed.`;\r\n                }\r\n                // 2. \"this.contains\"\r\n            }\r\n            return { ...itemSchema, name:itemIndex };\r\n        }\r\n    }\r\n\r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        if (!(validity = this._validateUnique(instance)).valid) {\r\n            return { valid: false, error: validity.error || `Entries must be unique` };\r\n        }\r\n        if (!(validity = this._validateContains(instance)).valid) {\r\n            return { valid: false, error: validity.error || `Entries must contain ${validity.min > 0 ? `at least ${validity.min} ` + (validity.max > 1 ? 'and ' : '') : ''} ${validity.max > 1 ? `at most ${validity.max} ` : ''}of ${validity.desc}.` };\r\n        }\r\n        return validity;\r\n    }\r\n\r\n    _validateMax(instance) {\r\n        if (!this.maxItems) return { valid: true };\r\n        const violation = instance.length - this.maxItems;\r\n        return { valid: violation <= 0, violation };\r\n    }\r\n\r\n    _validateMin(instance) {\r\n        if (!this.minItems) return { valid: true };\r\n        const violation = this.minItems - instance.length;\r\n        return { valid: violation <= 0, violation };\r\n    }\r\n\r\n    _validateUnique(instance) {\r\n        if (!this.uniqueItems) return { valid: true };\r\n        return { valid: _unique(instance).length === instance.length };\r\n    }\r\n\r\n    _validateContains(instance) {\r\n        if (!this.contains) return { valid: true };\r\n        const passes = instance.filter(item => this.__validateContains(this.contains, item));\r\n        if (passes.length < (this.minContains || 1)) {\r\n            return { valid: false, min: this.minContains || 1, max: this.maxContains, desc };\r\n        }\r\n        if (this.maxContains && passes.length > this.maxContains) {\r\n            return { valid: false, min: this.minContains || 1, max: this.maxContains, desc };\r\n        }\r\n        return { valid: true };\r\n    }\r\n}\r\n\r\n/**\r\n * @String Controller\r\n */\r\nexport const _String = __String => class extends _Schema(__String) {\r\n\r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        return { valid: _isString(instance) };\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @Num Controller\r\n */\r\nexport const _Num = __Num => class extends _Schema(__Num) {\r\n\r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        return validity;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @Number Controller\r\n */\r\nexport const _Number = __Number => class extends _Num(__Number) {\r\n    \r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        return { valid: _isNumeric(instance) };\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @Integer Controller\r\n */\r\nexport const _Integer = __Integer => class extends _Num(__Integer) {\r\n\r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        return { valid: Number.isInteger(instance) };\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @Boolean Controller\r\n */\r\nexport const _Boolean = __Boolean => class extends _Schema(__Boolean) {\r\n\r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        return { valid: _isBoolean(instance) };\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @Null Controller\r\n */\r\nexport const _Null = __Null => class extends _Schema(__Null) {\r\n\r\n    validate(instance) {\r\n        var validity = super.validate(instance);\r\n        if (!validity.valid) return validity;\r\n        return { valid: _isNull(instance) };\r\n    }\r\n\r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport Observer from '@webqit/observer';\r\nimport { _toTitle } from '@webqit/util/str/index.js';\r\nimport { _from as _arrFrom, _intersect } from '@webqit/util/arr/index.js';\r\nimport { _getType, _isBoolean, _isEmpty, _isTypeObject, _isArray, _isFunction, _isUndefined, _isNumeric, _isObject, _isString } from '@webqit/util/js/index.js';\r\nimport { _isTextMediaType, _isFileUpload } from './utils/util.js';\r\nimport * as Schemas from './schema-mixins.js';\r\n\r\n/**\r\n * @Root Base Controller\r\n */\r\nexport const _Root = __Root => class extends (__Root || class {}) {\r\n\r\n    constructor() {\r\n        super();\r\n        this.nodeRemovalListeners = new Map;\r\n    }\r\n\r\n    execNodeRemoval(node) {\r\n        if (_isFunction(node.remove)) {\r\n            node.remove();\r\n        }\r\n    }\r\n\r\n    onNodeRemoval(node, callback) {\r\n        var listeners = this.nodeRemovalListeners.get(node);\r\n        if (!listeners) {\r\n            listeners = [];\r\n            this.nodeRemovalListeners.set(node, listeners);\r\n        }\r\n        listeners.push(callback);\r\n    }\r\n\r\n    async remoteAction(method, url, options = {}) {\r\n        return {};\r\n    }\r\n\r\n    static getSchemaName(type) {\r\n        type = _arrFrom(type || 'string');\r\n        return [\r\n            ['object', '_Object'],\r\n            ['array', '_Array'],\r\n            ['string', '_String'],\r\n            ['number', '_Number'],\r\n            ['integer', '_Integer'],\r\n            ['boolean', '_Boolean'],\r\n            ['null', '_Null']\r\n        ].reduce((name, pair) => name || (type.includes(pair[0]) ? pair[1] : null), null);\r\n    }\r\n\r\n    define(schema, ownerWidget = null) {\r\n        Observer.set(this, 'schema', Observer.proxy(schema));\r\n        Observer.set(this, 'ownerWidget', ownerWidget);\r\n        Observer.set(this, 'attrs', Observer.proxy({\r\n            name: this.ownerWidget && this.ownerWidget.attrs.name ? `${this.ownerWidget.attrs.name}[${this.schema.name}]` : this.schema.name\r\n        }));\r\n        if (!this.state) {\r\n            Observer.set(this, 'state', Observer.proxy({}));\r\n        }\r\n        if (!this.schema.title) {\r\n            this.schema.title = _toTitle(((this.schema.name || '') + '').replaceAll('_', ' '));\r\n        }\r\n        if (this.schema.isRequired) {\r\n            this.attrs.required = true;\r\n        }\r\n        if (!_isUndefined(this.schema.const) || !_isUndefined(this.schema.default)) {\r\n            this.attrs.value = !_isUndefined(this.schema.const) ? this.schema.const : this.schema.default;\r\n        }\r\n        if (this.schema.readOnly || !_isUndefined(this.schema.const)) {\r\n            this.attrs.readonly = true;\r\n        }\r\n    }\r\n\r\n    alert(alert = null) {\r\n        if (arguments.length) {\r\n            this.state.alert = { message: alert.message, type: alert.type };\r\n        }\r\n        return { ...(this.state.alert || {}) };\r\n    }\r\n\r\n    json() {}\r\n\r\n    set value(value) {\r\n        this.json(value);\r\n    }\r\n\r\n    get value() {\r\n        return this.json();\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @ParentRoot Base Controller\r\n */\r\nexport const _ParentRoot = __ParentRoot => class extends _Root(__ParentRoot) {\r\n\r\n    deriveChildEntry(childSchema, i) {}\r\n\r\n};\r\n\r\n/**\r\n * @Collection Controller\r\n */\r\nexport const _Collection = __Collection => class extends _ParentRoot(__Collection) {\r\n\r\n    constructor() {\r\n        super();\r\n        Observer.set(this, 'childEntries', Observer.proxy({}));\r\n        Observer.observe(this.childEntries, mutations => {\r\n            mutations.forEach(m => {\r\n                if (m.type === 'set') {\r\n                    if (m.isUpdate && m.oldValue) {\r\n                        this.execNodeRemoval(m.oldValue);\r\n                    }\r\n                    if (m.value) {\r\n                        if (_isFunction(this.onNodeRemoval)) {\r\n                            this.onNodeRemoval(m.value, () => {\r\n                                if (this.childEntries[m.name] === m.value) {\r\n                                    delete this.childEntries[m.name];\r\n                                }\r\n                            });\r\n                        }\r\n                    } else {\r\n                        console.warn(`No widget type defined for entry \"${m.name}\" of schema type \"${_arrFrom(this.schema.properties[m.name].type || 'string').join(', ')}\".`);\r\n                    }\r\n                }\r\n                if (m.type === 'deleteProperty') {\r\n                    this.execNodeRemoval(m.oldValue);\r\n                }\r\n            });\r\n        });\r\n        // Better regex would allow you to not select the ${} characters. Try: /(?!\\${)([^{}]*)(?=})/g\r\n        function renderString(str,obj) {\r\n            return str.replace(/\\{.+?\\}/g, match => {return index(obj,match)})\r\n        }\r\n    }\r\n        \r\n    static testSchema(jsonSchema) {\r\n        return _arrFrom(jsonSchema.type).includes('object');\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(new (Schemas._Object())(jsonSchema), ownerWidget);\r\n        Object.keys(this.childEntries).forEach(propertyName => {\r\n            delete this.childEntries[propertyName];\r\n        });\r\n        Object.keys(this.schema.properties || {}).forEach(propertyName => {\r\n            const propertySchema = this.schema.getPropertySchema(propertyName);\r\n            if (propertySchema.display !== false) {\r\n                this.childEntries[propertyName] = this.deriveChildEntry(propertySchema, propertyName);\r\n            }\r\n        });        \r\n    }\r\n\r\n    extend(propertyName, callback = null) {\r\n        if (_isFunction(propertyName)) {\r\n            const promptPropertyName = () => {\r\n                const propertyNameSchema = this.schema.getPropertyNameSchema(this.json());\r\n                propertyName(propertyNameSchema, _propertyName => {\r\n                    if (propertyNameSchema.validate(_propertyName)) {\r\n                        extend(_propertyName, callback);\r\n                    } else {\r\n                        promptPropertyName();\r\n                    }\r\n                });\r\n            }\r\n            promptPropertyName();\r\n        } else if (propertyName) {\r\n            const instanceHint = this.json();\r\n            this.childEntries[propertyName] = this.deriveChildEntry(this.schema.getPropertySchema(propertyName, instanceHint), propertyName);;\r\n            if (callback) {\r\n                callback(this.childEntries[propertyName]);\r\n            }\r\n        }\r\n    }\r\n\r\n    json(data = {}, autoExtend = false) {\r\n        if (arguments.length) {\r\n            if (!_isObject(data)) throw new Error(`Data must be a valid JSON object.`);\r\n            Object.keys(data).forEach(name => {\r\n                if (this.childEntries[name]) {\r\n                    this.childEntries[name].json(data[name]);\r\n                } else if (autoExtend) {\r\n                    this.extend(name, childEntry => {\r\n                        childEntry.json(data[name]);\r\n                    });\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        // ------------------\r\n        const _data = {};\r\n        Object.keys(this.childEntries).forEach(name => {\r\n            _data[name] = this.childEntries[name].json();\r\n        });\r\n        return _data;\r\n    }\r\n\r\n    alert(alert = {}, autoExtend = false) {\r\n        if (arguments.length) {\r\n            super.alert(alert);\r\n            if (alert.details && !_isObject(alert.details)) throw new Error(`Alert details must be a valid JSON object.`);\r\n            Object.keys(alert.details || {}).forEach(name => {\r\n                if (this.childEntries[name]) {\r\n                    this.childEntries[name].alert(alert.details[name]);\r\n                } else if (autoExtend) {\r\n                    this.extend(name, childEntry => {\r\n                        childEntry.alert(alert.details[name]);\r\n                    });\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        // ------------------\r\n        const _alert = super.alert(); _alert.details = {};\r\n        Object.keys(this.childEntries).forEach(name => {\r\n            _alert.details[name] = this.childEntries[name].alert();\r\n        });\r\n        return _alert;\r\n    }\r\n    \r\n};\r\n    \r\n/**\r\n * @Multiple Controller\r\n */\r\nexport const _Multiple = __Multiple => class extends _ParentRoot(__Multiple) {\r\n\r\n    constructor() {\r\n        super();\r\n        Observer.set(this, 'childEntries', Observer.proxy([]));\r\n        Observer.observe(this.childEntries, mutations => {\r\n            mutations.forEach(m => {\r\n                if (m.name === 'length') return;\r\n                if (m.type === 'set') {\r\n                    if (m.isUpdate && m.oldValue && this.childEntries.indexOf(m.oldValue) === -1) {\r\n                        this.execNodeRemoval(m.oldValue);\r\n                    }\r\n                    if (m.value) {\r\n                        if (_isFunction(this.onNodeRemoval)) {\r\n                            this.onNodeRemoval(m.value, () => {\r\n                                const i = this.childEntries.indexOf(m.value);\r\n                                if (i > -1) {\r\n                                    this.childEntries.splice(i, 1);\r\n                                }\r\n                            });\r\n                        }\r\n                    } else {\r\n                        console.warn(`No widget type defined for entry \"${m.name}\" of schema type \"${_arrFrom(m.value.type || 'string').join(', ')}\".`);\r\n                    }\r\n                }\r\n                if (m.type === 'deleteProperty') {\r\n                    if (this.childEntries.indexOf(m.oldValue) === -1) {\r\n                        this.execNodeRemoval(m.oldValue);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n     \r\n    static testSchema(jsonSchema) {\r\n        return _arrFrom(jsonSchema.type).includes('array');\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(new (Schemas._Array())(jsonSchema), ownerWidget);\r\n        this.childEntries.splice(0);\r\n        if (!_isEmpty(this.schema.prefixItems)) {\r\n            this.schema.prefixItems.forEach((itemSchema, itemIndex) => {\r\n                this.childEntries.push(this.deriveChildEntry(itemSchema, itemIndex));\r\n            });\r\n        }\r\n        if (this.schema.autoExtend === true) {\r\n            this.extend();\r\n        }\r\n    }\r\n\r\n    extend(callback = null) {\r\n        const instanceHint = this.json();\r\n        const itemIndex = instanceHint.length;\r\n        const childEntry = this.deriveChildEntry(this.schema.getItemSchema(itemIndex, instanceHint), itemIndex);\r\n        this.childEntries.push(childEntry);\r\n        if (callback) {\r\n            callback(childEntry);\r\n        }\r\n    }\r\n\r\n    execNodeRemoval(node, confirm = null) {\r\n        if (!confirm) {\r\n            confirm = (msg, done) => done();\r\n        }\r\n        const i = this.childEntries.indexOf(node);\r\n        if (i === -1) {\r\n            return;\r\n        }\r\n        const name = !node.schema ? 'item' : (_isNumeric(node.schema.title) ? `item ${parseInt(node.schema.title) + 1}` : node.schema.title);\r\n        if (this.schema.remoteDelete) {\r\n            var value = node.value;\r\n            if (value && !_isTypeObject(value)) {\r\n                var deleteUrl = this.schema.remoteDelete.url.replace(/\\{value\\}/g, value);\r\n                confirm(`Remove ${name} (and delete from your account)?`, () => {\r\n                    return this.remoteAction(this.schema.remoteDelete.method || 'delete', deleteUrl).then(res => {\r\n                        if (res.ok) {\r\n                            super.execNodeRemoval(node);\r\n                        }\r\n                        return res;\r\n                    });\r\n                });\r\n                return;\r\n            }\r\n        }\r\n        confirm(`Remove ${name}?`, async () => {\r\n            super.execNodeRemoval(node);\r\n        });\r\n    }\r\n\r\n    json(data = []) {\r\n        if (arguments.length) {\r\n            if (!_isArray(data)) throw new Error(`Data must be a valid JSON array.`);\r\n            data.forEach((value, itemIndex) => {\r\n                if (this.childEntries[itemIndex]) {\r\n                    this.childEntries[itemIndex].json(value);\r\n                } else {\r\n                    this.extend(childEntry => {\r\n                        childEntry.json(value);\r\n                    });\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        // ------------------\r\n        return this.childEntries.filter(entry => entry).map(entry => entry.json());\r\n    }\r\n\r\n    alert(alert = {}, autoExtend = false) {\r\n        if (arguments.length) {\r\n            super.alert(alert);\r\n            if (alert.details && !_isArray(alert.details) && !Object.keys(alert.details).every(k => _isNumeric(k))) throw new Error(`Alert items must be a valid JSON array.`);\r\n            Object.keys(alert.details).forEach(itemIndex => {\r\n                const _alert = alert.details[itemIndex];\r\n                if (this.childEntries[itemIndex]) {\r\n                    this.childEntries[itemIndex].alert(_alert);\r\n                } else {\r\n                    this.extend(childEntry => {\r\n                        childEntry.alert(_alert);\r\n                    });\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        const _alert = super.alert();\r\n        _alert.details = this.childEntries.filter(entry => entry).map(entry => entry.alert());\r\n        return _alert;\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @Multiple Controller\r\n */\r\nexport const _Multiple2 = __Multiple2 => class extends _Multiple(__Multiple2) {\r\n            \r\n    static testSchema(jsonSchema) {\r\n        if (!super.testSchema(jsonSchema)) return;\r\n        // Any enum is going to be array items each\r\n        if (jsonSchema.enum) return;\r\n        var entries = [],\r\n            widgetLineContentLengthLimit = this.lineContentLengthLimit || 50;\r\n        if (jsonSchema.prefixItems) {\r\n            // super.testSchema() plus only \"const\" or \"single-item enum\", plus, nothing object-like, nor a string that execeeds widget line limit\r\n            if (jsonSchema.prefixItems.some(item => (!('const' in item) && (item.enum || []).length !== 1) || _intersect(_arrFrom(item.type), ['array', 'object']).length || Math.max(item.minLength, item.maxLength, 0) > widgetLineContentLengthLimit)) return;\r\n            entries = jsonSchema.prefixItems.map(item => ('const' in item) ? item.const : item.enum[0]);\r\n        }\r\n        if (jsonSchema.items) {\r\n            // super.testSchema() plus nothing object-like, nor a string that execeeds widget line limit\r\n            if (_intersect(_arrFrom(jsonSchema.items.type), ['array', 'object']).length || Math.max(jsonSchema.items.minLength, jsonSchema.items.maxLength, 0) > widgetLineContentLengthLimit) return;\r\n            entries = entries.concat(jsonSchema.items.enum || /* may not always be enum */[]);\r\n        }\r\n        return !(entries.some(item => _isTypeObject(item) || (item + '').length > widgetLineContentLengthLimit));\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(...arguments);\r\n        if (this.schema.autoExtend !== false) {\r\n            this.extend();\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n/**\r\n * @Enum Controller\r\n */\r\nexport const _Enum = __Enum => class extends _Root(__Enum) {\r\n\r\n    constructor() {\r\n        super();\r\n        Observer.set(this, 'enumEntries', Observer.proxy([]));\r\n        Observer.observe(this.enumEntries, mutations => {\r\n            mutations.forEach(m => {\r\n                if (m.name === 'length') return;\r\n                if (m.type === 'set') {\r\n                    if (m.isUpdate && m.oldValue && this.enumEntries.indexOf(m.oldValue) === -1) {\r\n                        this.execNodeRemoval(m.oldValue);\r\n                    }\r\n                    if (_isFunction(this.onNodeRemoval)) {\r\n                        this.onNodeRemoval(m.value, () => {\r\n                            const i = this.enumEntries.indexOf(m.value);\r\n                            if (i > -1) {\r\n                                this.enumEntries.splice(i, 1);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                if (m.type === 'deleteProperty') {\r\n                    if (this.enumEntries.indexOf(m.oldValue) === -1) {\r\n                        this.execNodeRemoval(m.oldValue);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    static testSchema(jsonSchema) {\r\n        return _isArray(jsonSchema.enum) || (\r\n            // Or where an array with the following conditions that completely eliminates the idea of a schema-based items list:\r\n            _arrFrom(jsonSchema.type).includes('array') && (\r\n                // 1. where no jsonSchema.prefixItems (which would have been a schema) or where jsonSchema.prefixItems bundles its \"const\"s\r\n                (_isEmpty(jsonSchema.prefixItems) || jsonSchema.prefixItems.every(item => ('const' in item) || (item.enum || []).length === 1))\r\n                // 2. where no .items (meaning: \"won't grow\") or where .items bundles its \"enums\" which are themselves expected to be final as specified by .uniqueItems\r\n                && (jsonSchema.items === false || (_isArray((jsonSchema.items || {}).enum) && jsonSchema.uniqueItems))\r\n            )\r\n        );\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        // Enums can be any type\r\n        const schemaName = this.constructor.getSchemaName(jsonSchema.type);\r\n        this.enumEntries.splice(0);\r\n        super.define(new (Schemas[schemaName]())(jsonSchema), ownerWidget);\r\n        // -------------\r\n        // Fetch items...\r\n        // -------------\r\n        const runSchemaEnum = (enumValues, enumNames) => {\r\n            const entries = enumValues.map((value, i) => ({ value, label: (enumNames || {})[i] }));\r\n            this.enumerate(entries, 1);\r\n        };\r\n        const runSchemaEnumFetch = remoteFetch => {\r\n            this.enumFetching = this.remoteAction(remoteFetch.method || 'get', remoteFetch.url, {\r\n                headers: { accept: 'application/json' }\r\n            }).then(res => res.ok ? res.json() : Promise.reject({ message: res.statusText })).then(res => {\r\n                var _entries = !_isArray(res.data) ? [] : res.data.map(entry => (_isObject(entry) ? {\r\n                    value: 'value' in entry ? entry.value : entry.id,\r\n                    label: 'label' in entry ? entry.label : entry.title,\r\n                } : {\r\n                    value: entry,\r\n                }));\r\n                this.enumerate(_entries, remoteFetch.url);\r\n            });\r\n        };\r\n        // -------------\r\n        // Mine items...\r\n        // -------------\r\n        if (this.schema.remoteFetch) {\r\n            runSchemaEnumFetch(this.schema.remoteFetch);\r\n            Observer.observe(this.schema, 'remoteFetch', () => {\r\n                runSchemaEnumFetch(this.schema.remoteFetch);\r\n            }, { subtree: true });\r\n        } else if (this.schema.enum) {\r\n            runSchemaEnum(this.schema.enum, this.schema.enumNames);\r\n            Observer.observe(this.schema, [['enum'], ['enumNames']], () => {\r\n                runSchemaEnum(this.schema.enum, this.schema.enumNames);\r\n            });\r\n        } else if (_arrFrom(this.schema.type || 'string').includes('array')) {\r\n            let entries = [];\r\n            // Array case 1:\r\n            if (this.schema.prefixItems) {\r\n                entries = this.schema.prefixItems.map(item => (\r\n                    ('const' in item) ? { value: item.const, label: item.title } : { value: item.enum[0], label: item.title || (item.enumNames || [])[0] }\r\n                ));\r\n            }\r\n            // Array case 2:\r\n            if (this.schema.items) {\r\n                this.schema.items.enum.forEach((item, i) => {\r\n                    entries.push({ value: item, label: (this.schema.items.enumNames || [])[i] });\r\n                });\r\n            }\r\n            // Expecting type array means \"multiple\"\r\n            this.attrs.multiple = true;\r\n            this.attrs.name += '[]';\r\n            entries.forEach(item => {\r\n                item.selected = true;\r\n            });\r\n            this.enumerate(entries, 2);\r\n        }\r\n    }\r\n\r\n    deriveEnumEntry(enumData, index) {}\r\n\r\n    enumerate(entries, clearByTag = null) {\r\n        if (_arrFrom(this.schema.type).includes('null')) {\r\n            entries = [{ value: null, label: this.attrs.placeholder }].concat(entries);\r\n        }\r\n        if (clearByTag) {\r\n            if (clearByTag === true) {\r\n                this.enumEntries.splice(0);\r\n            } else {\r\n                this.enumEntries.filter(entry => _intersect(_arrFrom(entry.enumTag), _arrFrom(clearByTag)).length).forEach(entry => {\r\n                    const index = this.enumEntries.indexOf(entry);\r\n                    if (index > -1) {\r\n                        this.enumEntries.splice(index, 1);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        this.enumEntries.push(...entries.map((entry, i) => {\r\n            entry = this.deriveEnumEntry(entry, i);\r\n            if (clearByTag) {\r\n                entry.enumTag = clearByTag;\r\n            }\r\n            return entry;\r\n        }));\r\n    }\r\n\r\n    json(data = []) {\r\n        if (arguments.length) {\r\n            if (!_isArray(data)) {\r\n                if (this.attrs.multiple)\r\n                    throw new Error(`Data must be a valid JSON array.`);\r\n                data = [ data ];\r\n            }\r\n            const runSelect = () => {\r\n                this.enumEntries.forEach(entry => {\r\n                    entry.selected = false;\r\n                    data.forEach(value => {\r\n                        if (entry.value === value + '') {\r\n                            entry.selected = true;\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n            if (this.enumFetching) {\r\n                this.enumFetching.then(runSelect);\r\n            } else {\r\n                runSelect();\r\n            }\r\n            return;\r\n        }\r\n        const selected = this.enumEntries.filter(entry => entry.selected).map(entry => entry.value);\r\n        return this.attrs.multiple ? selected : selected[0];\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @Enum2 Controller\r\n */\r\nexport const _Enum2 = __Enum2 => class extends _Enum(__Enum2) {\r\n    \r\n    static testSchema(jsonSchema) {\r\n        if (!super.testSchema(jsonSchema)) return;\r\n        var entries = [],\r\n            widgetLineContentLengthLimit = this.lineContentLengthLimit || 50;\r\n        if (jsonSchema.enum) {\r\n            // super.testSchema() plus nothing object-like, nor a string that execeeds widget line limit\r\n            if (_intersect(_arrFrom(jsonSchema.type), ['array', 'object']).length || Math.max(jsonSchema.minLength, jsonSchema.maxLength, 0) > widgetLineContentLengthLimit) return;\r\n            entries = jsonSchema.enum;\r\n        } else if (!jsonSchema.remoteFetch) {\r\n            if (jsonSchema.prefixItems) {\r\n                // Only \"const\" or \"single-item enum\" - as ensured by super.testSchema(), plus, none should be object-like, nor a string that execeeds widget line limit\r\n                if (jsonSchema.prefixItems.some(item => _intersect(_arrFrom(item.type), ['array', 'object']).length || Math.max(item.minLength, item.maxLength, 0) > widgetLineContentLengthLimit)) return;\r\n                entries = jsonSchema.prefixItems.map(item => ('const' in item) ? item.const : item.enum[0]);\r\n            }\r\n            if (jsonSchema.items) {\r\n                // super.testSchema() plus nothing object-like, nor a string that execeeds widget line limit\r\n                if (_intersect(_arrFrom(jsonSchema.items.type), ['array', 'object']).length || Math.max(jsonSchema.items.minLength, jsonSchema.items.maxLength, 0) > widgetLineContentLengthLimit) return;\r\n                entries = entries.concat(jsonSchema.items.enum);\r\n            }\r\n        }\r\n        return !(entries.some(item => _isTypeObject(item) || (item + '').length > widgetLineContentLengthLimit));\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @File Controller\r\n */\r\nexport const _File = __File => class extends _Root(__File) {\r\n\r\n    constructor() {\r\n        super();\r\n        Observer.set(this, 'filesList', Observer.proxy([]));\r\n        Observer.set(this, 'fallbackFilesList', Observer.proxy([]));\r\n        Observer.observe(this.filesList, mutations => {\r\n            mutations.forEach(m => {\r\n                if (m.name === 'length') return;\r\n                if (m.type === 'set') {\r\n                    if (m.isUpdate && m.oldValue && this.filesList.indexOf(m.oldValue) === -1) {\r\n                        this.execNodeRemoval(m.oldValue);\r\n                    }\r\n                    if (_isFunction(this.onNodeRemoval)) {\r\n                        this.onNodeRemoval(m.value, () => {\r\n                            const i = this.filesList.indexOf(m.value);\r\n                            if (i > -1) {\r\n                                this.filesList.splice(i, 1);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                if (m.type === 'deleteProperty') {\r\n                    if (this.filesList.indexOf(m.oldValue) === -1) {\r\n                        this.execNodeRemoval(m.oldValue);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    static testSchema(jsonSchema) {\r\n        const _isFileSchema = _jsonSchema => {\r\n            const schemaType = _arrFrom(_jsonSchema.type || 'string');\r\n            return (schemaType.includes('string') && (_isFileUpload(_jsonSchema) || (_jsonSchema.contentMediaType && !_isTextMediaType(_jsonSchema.contentMediaType))));\r\n        };\r\n        return _isFileSchema(jsonSchema) || (\r\n            _arrFrom(jsonSchema.type).includes('array') && jsonSchema.uniqueItems && _isEmpty(jsonSchema.prefixItems) && _isFileSchema(jsonSchema.items || {})\r\n        );\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        const schemaType = _arrFrom(jsonSchema.type);\r\n        const $schema = schemaType.includes('array') ? Schemas._Array() : Schemas._String();\r\n        super.define(new $schema(jsonSchema), ownerWidget);\r\n        this.filesList.splice(0);\r\n        this.attrs.type = 'file';\r\n        if (schemaType.includes('array')) {\r\n            this.attrs.name += '[]';\r\n            this.attrs.multiple = true;\r\n        }\r\n        if (this.schema.contentMediaType || (this.schema.items && this.schema.items.contentMediaType)) {\r\n            this.attrs.accept = this.schema.contentMediaType || this.schema.items.contentMediaType;\r\n        }\r\n    }\r\n\r\n    deriveFileEntry(fileData, key) {}\r\n\r\n    populate(filesData, clearByTag = null) {\r\n        if (clearByTag) {\r\n            if (clearByTag === true) {\r\n                this.filesList.splice(0);\r\n            } else {\r\n                this.filesList.filter(entry => _intersect(_arrFrom(entry.enumTag), _arrFrom(clearByTag)).length).forEach(entry => {\r\n                    const index = this.filesList.indexOf(entry);\r\n                    if (index > -1) {\r\n                        // Don't remove just yet (; people are listening) until we figure out if this\r\n                        // should only be a transition to this.fallbackFilesList\r\n                        if (index > -1 && _intersect(_arrFrom(entry.enumTag), [ 1, 2 ]).length === 2) {\r\n                            this.fallbackFilesList.push(this.filesList[index]);\r\n                        }\r\n                        this.filesList.splice(index, 1); // Remove only now\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        if ((!filesData || !filesData.length) && (!this.filesList.length || !this.filesList[0]) && this.fallbackFilesList.length) {\r\n            const _enumTag = this.fallbackFilesList[0].enumTag;\r\n            this.populate(this.fallbackFilesList.splice(0).map(_entry => ({ file: _entry.file })), _enumTag);\r\n        }\r\n        this.filesList.push(...filesData.filter(fileData => _isString(fileData.file) || fileData.file.name).map((fileData, i) => {\r\n            var entry = this.deriveFileEntry(fileData, i, clearByTag);\r\n            if (clearByTag !== null) {\r\n                entry.enumTag = clearByTag;\r\n            }\r\n            return entry;\r\n        }));\r\n    }\r\n\r\n    execNodeRemoval(node, confirm = null) {\r\n        if (!confirm) {\r\n            confirm = (msg, done) => done();\r\n        }\r\n        const name = 'file';\r\n        if (this.schema.remoteDelete && this.fallbackFilesList.indexOf(node) === -1) {\r\n\r\n            var value = node.file;\r\n            if (value && !_isTypeObject(value)) {\r\n                var deleteUrl = this.schema.remoteDelete.url.replace(/\\{value\\}/g, value);\r\n                confirm(`Remove ${name} (and delete from your account)?`, () => {\r\n                    return this.remoteAction(this.schema.remoteDelete.method || 'delete', deleteUrl).then(res => {\r\n                        if (res.ok) {\r\n                            super.execNodeRemoval(node);\r\n                        }\r\n                        return res;\r\n                    });\r\n                });\r\n                return;\r\n            }\r\n        }\r\n        confirm(`Remove ${name}?`, async () => {\r\n            super.execNodeRemoval(node);\r\n        });\r\n    }\r\n\r\n    json(files = []) {\r\n        if (arguments.length) {\r\n            if (!_isArray(files)) {\r\n                if (this.attrs.multiple) throw new Error(`Data must be a valid JSON array.`);\r\n                files = [ files ];\r\n            }\r\n            this.populate(files.filter(file => file).map(file => ({ file })), [ 1, 2 ]);\r\n            return;\r\n        }\r\n        const uploads = this.filesList.filter(entry => _isObject(entry.file)).map(entry => entry.file);\r\n        return this.attrs.multiple ? uploads : uploads[0];\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @InputRoot Base Controller\r\n */\r\nexport const _Input = __Input => class extends _Root(__Input) {\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(...arguments);\r\n        if (!_isUndefined(this.schema.default) || this.schema.examples) {\r\n            this.attrs.placeholder = `E.g.: ${!_isUndefined(this.schema.default) ? this.schema.default : this.schema.examples[0]}`;\r\n        }\r\n        if ('const' in this.schema || (this.schema.enum || []).length === 1) {\r\n            this.attrs.value = 'const' in this.schema ? this.schema.const : this.schema.enum[0];\r\n        }\r\n    }\r\n\r\n    json(data = {}) {\r\n        if (arguments.length) return;\r\n        return this.attrs.multiple ? [] : null;\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @Editor Controller\r\n */\r\nexport const _Editor = __Editor => class extends _Input(__Editor) {\r\n        \r\n    static testSchema(jsonSchema) {\r\n        const schemaType = _arrFrom(jsonSchema.type || 'string');\r\n        return schemaType.includes('string') && ((jsonSchema.contentMediaType && _isTextMediaType(jsonSchema.contentMediaType)) || (\r\n            Math.max(jsonSchema.maxLength || 0, jsonSchema.minLength || 0) >= 1024\r\n        ));\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(new (Schemas._String())(jsonSchema), ownerWidget);\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @Input Controller\r\n */\r\nexport const _Text = __Text => class extends _Input(__Text) {\r\n        \r\n    static testSchema(jsonSchema) {\r\n        return _arrFrom(jsonSchema.type || 'string').includes('string');\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(new (Schemas._String())(jsonSchema), ownerWidget);\r\n        this.attrs.type = 'text';\r\n        if (this.schema.format === 'date') {\r\n            this.attrs.type = 'date';\r\n        } else if (this.schema.format === 'time') {\r\n            this.attrs.type = 'time';\r\n        } else if (this.schema.format === 'date-time') {\r\n            this.attrs.type = 'datetime-local';\r\n        } else if (this.schema.format === 'duration') {\r\n            this.attrs.type = ''; // ?\r\n        } else if (['uri', 'uri-reference', 'iri', 'iri-reference', 'uuid'].includes(this.schema.format)) {\r\n            this.attrs.pattern = ''; // regex\r\n        } else if (['hostname', 'idn-hostname'].includes(this.schema.format)) {\r\n            this.attrs.pattern = ''; // regex\r\n        } else if (['email', 'idn-email'].includes(this.schema.format)) {\r\n            this.attrs.type = 'email';\r\n        } else if (['ipv4', 'ipv6'].includes(this.schema.format)) {\r\n            this.attrs.pattern = ''; // regex\r\n        } else if (this.schema.format === 'password') {\r\n            this.attrs.type = 'password';\r\n        } else if (this.schema.format === 'color') {\r\n            this.attrs.type = 'color';\r\n        } else if (this.schema.format === 'phone') {\r\n            this.attrs.pattern = '^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$';\r\n        } else if (this.schema.format === 'postal-code') {\r\n            this.attrs.pattern = '^[0-9]{5}(?:-[0-9]{4})?$';\r\n        }\r\n        // -----\r\n        if (this.schema.maxLength) {\r\n            this.attrs.maxlength = this.schema.maxLength;\r\n        }\r\n        if (this.schema.minLength) {\r\n            this.attrs.minlength = this.schema.minLength;\r\n        }\r\n        if (this.schema.pattern) {\r\n            this.attrs.pattern = this.schema.pattern;\r\n        }\r\n        if (!this.schema.col) {\r\n            const col = this.schema.maxLength || 150;\r\n            this.schema.col = Math.max(1, parseInt(col / (300 / 12)));\r\n        }\r\n        // -----\r\n    }\r\n    \r\n};\r\n\r\n/**\r\n * @Number Controller\r\n */\r\nexport const _Number = __Number => class extends _Input(__Number) {\r\n        \r\n    static testSchema(jsonSchema) {\r\n        const schemaType = _arrFrom(jsonSchema.type);\r\n        return schemaType.includes('integer') || schemaType.includes('number');\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(new (Schemas._Number())(jsonSchema), ownerWidget);\r\n        this.attrs.type = 'number';\r\n        if (this.schema.exclusiveMaximum) {\r\n            this.attrs.max = this.schema.exclusiveMaximum - 0.0001;\r\n        } else if (this.schema.maximum) {\r\n            // date, month, week, time, datetime-local, number, and range\r\n            this.attrs.max = this.schema.maximum;\r\n        }\r\n        if (this.schema.exclusiveMinimum) {\r\n            this.attrs.min = this.schema.exclusiveMinimum + 0.0001;\r\n        } else if (this.schema.minimum) {\r\n            // date, month, week, time, datetime-local, number, and range\r\n            this.attrs.min = this.schema.minimum;\r\n        }\r\n        if (this.schema.multipleOf) {\r\n            // number, date/time input types, and range\r\n            this.attrs.step = this.schema.multipleOf;\r\n        }\r\n        if (!this.schema.col) {\r\n            const col = this.schema.maxLength /* char width in sql */ || 50;\r\n            this.schema.col = Math.max(1, parseInt(col / (300 / 12)));\r\n        }\r\n        // ------\r\n    }\r\n    \r\n};\r\n\r\n/**\r\n * @State Controller\r\n */\r\nexport const _State = __State => class extends _Root(__State) {\r\n        \r\n    static testSchema(jsonSchema) {\r\n        return _arrFrom(jsonSchema.type).includes('boolean');\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(new (Schemas._Boolean())(jsonSchema), ownerWidget);\r\n        this.attrs.type = 'checkbox';\r\n        if (this.schema.const === true || this.schema.default === true) {\r\n            this.attrs.checked = true;\r\n        }\r\n    }\r\n\r\n    json(data = {}) {\r\n        if (arguments.length) return;\r\n        return this.attrs.multiple ? [] : null;\r\n    }\r\n    \r\n};\r\n\r\n/**\r\n * @Root Base Controller\r\n */\r\nexport const _ItemScope = __ItemScope => class extends (__ItemScope || class {}) {\r\n\r\n    define(schema, ownerWidget = null) {\r\n        super.define(...arguments);\r\n        const setItemIndex = () => {\r\n            if ((this.attrs.index || this.attrs.index === 0) && this.childEntries && this.schema.indexProperty && this.childEntries[this.schema.indexProperty]) {\r\n                this.childEntries[this.schema.indexProperty].json(this.attrs.index);\r\n            }\r\n        };\r\n        setItemIndex();\r\n        Observer.observe(this.attrs, 'index', setItemIndex);\r\n    }\r\n    \r\n}", "\r\n/**\r\n * @imports\r\n */\r\nimport Observer from '@webqit/observer';\r\nimport { _from as _arrFrom, _intersect } from '@webqit/util/arr/index.js';\r\nimport { _isString, _isNumeric, _isTypeObject } from '@webqit/util/js/index.js';\r\nimport { _toTitle } from '@webqit/util/str/index.js';\r\nimport * as Roots from './playui-mixins.js';\r\n\r\n/**\r\n * ---------------------------\r\n * Root Elements\r\n * ---------------------------\r\n */\r\n\r\n/**\r\n * @Root Element\r\n * @extends __Root\r\n */\r\nexport const _Root = __Root => class extends (__Root || HTMLElement) {\r\n\r\n    constructor() {\r\n        super();\r\n        const mutationObserver = new MutationObserver(entries => {\r\n            entries.forEach(entry => {\r\n                entry.removedNodes.forEach(node => {\r\n                    if (this.nodeRemovalListeners && this.nodeRemovalListeners.has(node)) {\r\n                        this.nodeRemovalListeners.get(node).forEach(callback => callback());\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        mutationObserver.observe(this, { subtree: true, childList: true });\r\n    }\r\n\r\n    async remoteAction(method, url, options = {}) {\r\n        this.state.remoteAction = method;\r\n        this.state.remoteActionError = '';\r\n        return fetch(url, { headers: { accept: 'application/json' }, ...options, method }).then(res => {\r\n            this.state.remoteAction = false;\r\n            return res;\r\n        }).catch(e => {\r\n            this.state.remoteAction = false;\r\n            this.alert(e);\r\n        });\r\n    }\r\n\r\n    static get subscriptMethods() {\r\n        return [ 'renderBasic', 'render' ];\r\n    }\r\n\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        this.renderBasic();\r\n        this.render();\r\n    }\r\n\r\n    renderBasic() {\r\n        //if (typeof $ === 'undefined') return;\r\n        if (this.schema?.title && this.namespace.title) {\r\n            $(this.namespace.title).html(this.schema.title);\r\n        }\r\n        if (this.schema?.description && this.namespace.description) {\r\n            $(this.namespace.description).html(this.schema.description);\r\n        }\r\n        if (this.schema?.isRequired) {\r\n            $(this).attr('data-required', true);\r\n        }\r\n        if (this.schema?.col && this.schema.col !== 12) {\r\n            $(this).class({\r\n                ['col-' + this.schema.col]: true,\r\n                'col-12': false,\r\n            });\r\n        } else {\r\n            $(this).class('col-12', true);\r\n        }\r\n        if (this.schema?.display === 'hidden') {\r\n            $(this).class('overflow-hidden wt-0 ht-0 pd-0 mg-0', true);\r\n        }\r\n        $(this).attr('data-remote-action', this.state.remoteAction || false);\r\n        $(this).attr('data-remote-action-error', this.state.remoteActionError || false);\r\n        var message = this.state.alert ? this.state.alert.message : '';\r\n        var type = this.state.alert ? this.state.alert.type : '';\r\n        if (this.namespace.alert) {\r\n            $(this.namespace.alert).html(message || '');\r\n            $(this.namespace.alert).attr('data-type', type || false);\r\n            if (message) {\r\n                this.namespace.alert.focus();\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {}\r\n\r\n    alert() {\r\n        const ret = super.alert(...arguments);\r\n        this.renderBasic();\r\n        return ret;\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @ParentRoot Element\r\n * @extends _Root() -> __ParentRoot\r\n */\r\nexport const _ParentRoot = __ParentRoot => class extends _Root(__ParentRoot) {\r\n\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        if (this.namespace.adder) {\r\n            this.adderAction = this.adderAction || (() => this.extend());\r\n            this.namespace.adder.removeEventListener('click', this.adderAction);\r\n            this.namespace.adder.addEventListener('click', this.adderAction);\r\n        }\r\n    }\r\n\r\n    deriveChildEntry(childSchema, i) {\r\n        if (!this.template) return;\r\n        var childEntry = Reflect.ownKeys(this.template.exports).map(key => this.template.exports[key][0]).reduce((match, item) => {\r\n            if (match) return match;\r\n            const constructor = item.hasAttribute('is') \r\n                ? customElements.get(item.getAttribute('is'))\r\n                : customElements.get(item.localName);\r\n            return constructor && constructor.testSchema(childSchema) ? item : null;\r\n        }, null);\r\n        if (childEntry) {\r\n            childEntry = childEntry.cloneNode(true);\r\n            if (this.namespace.content) {\r\n                this.namespace.content.append(childEntry);\r\n            } else {\r\n                this.append(childEntry);\r\n            }\r\n            // ------------\r\n            try {\r\n                childEntry.define(childSchema, this);\r\n                (childEntry.attrs || {}).index = i;\r\n            } catch(e) {\r\n                console.warn(`Error calling element.define();`, e, this);\r\n            }\r\n        }\r\n        return childEntry;\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @Collection Element\r\n * @extends _ParentRoot() -> Roots._Collection() -> __Collection\r\n */\r\nexport const _Collection = __Collection => class extends _ParentRoot(Roots._Collection(__Collection || HTMLElement)) {\r\n\r\n    get value() {\r\n        if (this.schema.primaryKey && this.childEntries[this.schema.primaryKey]) {\r\n            return this.childEntries[this.schema.primaryKey].json();\r\n        }\r\n    }\r\n    \r\n};\r\n\r\n/**\r\n * @MultipleRoot Element\r\n * @extends _ParentRoot() -> __MultipleRoot\r\n */\r\nexport const _MultipleRoot = __MultipleRoot => class extends _ParentRoot(__MultipleRoot) {\r\n};\r\n\r\n/**\r\n * @Multiple Element\r\n * @extends _MultipleRoot() -> Roots._Multiple() -> __Multiple\r\n */\r\nexport const _Multiple = __Multiple => class extends _MultipleRoot(Roots._Multiple(__Multiple || HTMLElement)) {\r\n};\r\n\r\n/**\r\n * @Multiple2 Element\r\n * @extends _MultipleRoot() -> Roots._Multiple2() -> __Multiple2\r\n */\r\nexport const _Multiple2 = __Multiple2 => class extends _MultipleRoot(Roots._Multiple2(__Multiple2 || HTMLElement)) {\r\n\r\n    constructor() {\r\n        super();\r\n        this.addEventListener('keypress', e => {\r\n            if (e.key === 'Enter') {\r\n                this.extend(childEntry => childEntry.namespace.input ? childEntry.namespace.input.focus() : null);\r\n                e.preventDefault();\r\n            }\r\n        });\r\n    }\r\n\r\n    extend(callback = null) {\r\n        if (this.childEntries.length && !this.childEntries[this.childEntries.length - 1].namespace.input.value) {\r\n            return;\r\n        }\r\n        return super.extend(callback);\r\n    }\r\n\r\n    render() {\r\n        if (this.namespace.input && this.attrs?.name) {\r\n            $(this.namespace.input).attr(this.attrs);\r\n        }\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @EnumRoot Element\r\n * @extends _Root() -> __EnumRoot\r\n */\r\nexport const _EnumRoot = __EnumRoot => class extends _Root(__EnumRoot) {\r\n\r\n    deriveEnumEntry(entry, i) {\r\n        var enumEntry;\r\n        if (!this.template && this.namespace.input instanceof HTMLSelectElement) {\r\n            enumEntry = document.createElement('option');\r\n        } else {\r\n            var _enumEntry = Reflect.ownKeys(this.template.exports).map(key => this.template.exports[key][0]).reduce((match, item) => {\r\n                if (match) return match;\r\n                const constructor = item.hasAttribute('is') \r\n                    ? customElements.get(item.getAttribute('is'))\r\n                    : customElements.get(item.localName);\r\n                return constructor && constructor.testSchema(this.schema, entry) ? item : null;\r\n            }, null);\r\n            if (_enumEntry) {\r\n                enumEntry = _enumEntry.cloneNode(true);\r\n            }\r\n        }\r\n        if (enumEntry) {\r\n            if (this.namespace.input instanceof HTMLSelectElement) {\r\n                this.namespace.input.options.add(enumEntry);\r\n                enumEntry.setAttribute('label', entry.label || _toTitle(entry.value));\r\n                enumEntry.value = entry.value;\r\n                enumEntry.selected = entry.selected;\r\n            } else {\r\n                this.namespace.input.append(enumEntry);\r\n                enumEntry.setAttribute('data-index', itemIndex);\r\n            }\r\n        }\r\n        return enumEntry;\r\n    }\r\n\r\n    render() {\r\n        if (this.namespace.input && this.attrs?.name) {\r\n            $(this.namespace.input).attr(this.attrs);\r\n        }\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @Enum Element\r\n * @extends _EnumRoot() -> Roots._Enum() -> __Enum\r\n */\r\nexport const _Enum = __Enum => class extends _EnumRoot(Roots._Enum(__Enum || HTMLElement)) {\r\n}\r\n\r\n/**\r\n * @Enum2 Element\r\n * @extends _EnumRoot() -> Roots._Enum2() -> __Enum2\r\n */\r\nexport const _Enum2 = __Enum2 => class extends _EnumRoot(Roots._Enum2(__Enum2 || HTMLElement)) {\r\n}\r\n\r\n/**\r\n * @File Element\r\n * @extends _Root() -> Roots._File() -> __FileRoot\r\n */\r\nexport const _File = __File => class extends _Root(Roots._File(__File || HTMLElement)) {\r\n\r\n    constructor() {\r\n        super();\r\n        // ------------------\r\n        // On-direct choosing\r\n        // ------------------\r\n        this.addEventListener('change', e => {\r\n            if (this.namespace.dropArea) {\r\n                this.populate(Array.from(e.target.files).map(file => ({ file })), 1);\r\n            }\r\n        });\r\n        this._handlerDrag = e => {\r\n            if (e.type === 'dragover' || e.type === 'dragenter') {\r\n                if (this.state) {\r\n                    this.state.dragging = true;\r\n                }\r\n            } else if (e.type === 'dragleave' || e.type === 'dragend' || e.type === 'drop') {\r\n                e.preventDefault();\r\n                if (this.state) {\r\n                    this.state.dragging = false;\r\n                }\r\n                if (e.type === 'drop') {\r\n                    this.populate(Array.from(e.dataTransfer.files).map(file => ({ file })));\r\n                }\r\n            }\r\n        };\r\n        Observer.observe(this.filesList, mutations => {\r\n            if (mutations[0].name === 'length' || !this.namespace.input) return;\r\n            const dataTransfer = new DataTransfer;\r\n            this.filesList.map(entry => entry.file).filter(file => !_isString(file)).forEach(file => {\r\n                dataTransfer.items.add(file);\r\n            });\r\n            // Assign the files to the input element\r\n            this.namespace.input.files = dataTransfer.files;\r\n            // Still keep the \"required\" attribute?\r\n            if (this.schema.isRequired) {\r\n                if (!this.namespace.input.files.length && this.filesList.length && this.filesList[0]/* IMPORTANT: item 0 may be \"undefined\" */) {\r\n                    // Then there must be files added by link\r\n                    this.namespace.input.removeAttribute('required');\r\n                } else {\r\n                    // Restore\r\n                    this.namespace.input.setAttribute('required', true);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        if (this.namespace.dropArea) {\r\n            // On drag-and-drop\r\n            [ 'drag', 'dragstart', 'dragend', 'dragover', 'dragenter', 'dragleave', 'drop' ].forEach(eventName => {\r\n                this.namespace.dropArea.removeEventListener(eventName, this._handlerDrag);\r\n                this.namespace.dropArea.addEventListener(eventName, this._handlerDrag);\r\n            });\r\n        }\r\n    }\r\n\r\n    define(jsonSchema, ownerWidget = null) {\r\n        super.define(...arguments);\r\n        this.render();\r\n    }\r\n\r\n    deriveFileEntry(fileData, i, clearByTag = null) {\r\n        if (!this.template) return;\r\n        var childEntry = Reflect.ownKeys(this.template.exports).map(key => this.template.exports[key][0]).reduce((match, item) => {\r\n            if (match) return match;\r\n            const constructor = item.hasAttribute('is') \r\n                ? customElements.get(item.getAttribute('is'))\r\n                : customElements.get(item.localName);\r\n            return constructor && constructor.testFile(fileData) ? item : null;\r\n        }, null);\r\n        if (childEntry) {\r\n            childEntry = childEntry.cloneNode(true);\r\n            childEntry.file = fileData._file || fileData.file;\r\n            if (_isString(fileData.file)) {\r\n                const defaultInput = document.createElement('input');\r\n                defaultInput.setAttribute('name', this.attrs.name);\r\n                defaultInput.setAttribute('value', fileData.file);\r\n                defaultInput.setAttribute('type', 'hidden');\r\n                childEntry.append(defaultInput);\r\n                childEntry.setAttribute('data-src', fileData.file);\r\n                if (_intersect(_arrFrom(clearByTag), [ 1, 2 ]).length === 2 && !this.schema.remoteDelete) {\r\n                    childEntry.setAttribute('data-isdefault', 'true');\r\n                }\r\n            }\r\n            if (this.namespace.preview) {\r\n                this.namespace.preview.append(childEntry);\r\n            } else {\r\n                this.append(childEntry);\r\n            }\r\n            // ------------\r\n            try {\r\n                childEntry.previewFile(fileData.file, this);\r\n            } catch(e) {\r\n                console.warn(`Error calling element.previewFile();`, e, this);\r\n            }\r\n        }\r\n        return childEntry;\r\n    }\r\n\r\n    render() {\r\n        if (this.namespace.input && (this.attrs?.type || this.attrs?.name)) {\r\n            $(this.namespace.input).attr(this.attrs);\r\n        }\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @FilePreview Element\r\n * @extends __FilePreview\r\n */\r\nexport const _FilePreview = __FilePreview => class extends (__FilePreview || HTMLElement) {\r\n\r\n    connectedCallback() {\r\n        if (super.connectedCallback) {\r\n            super.connectedCallback();\r\n        }\r\n        if (this.namespace.deleter) {\r\n            this.deleterAction = this.deleterAction || (() => {\r\n                if (this.ownerWidget) {\r\n                    this.ownerWidget.execNodeRemoval(this, (msg, done) => {\r\n                        if (confirm(msg)) {\r\n                            $(this).attr('data-deleting', true);\r\n                            done().then(res => {\r\n                                $(this).attr('data-deleting', false);\r\n                                // This dry populate() should trigger restoration\r\n                                // of fallbackFiles. (See this.ownerWidget.populate())\r\n                                this.ownerWidget.populate([], [ 1, 2 ]);\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            this.namespace.deleter.removeEventListener('click', this.deleterAction);\r\n            this.namespace.deleter.addEventListener('click', this.deleterAction);\r\n        }\r\n    }\r\n\r\n    static testFile(fileData) {\r\n        return true;\r\n    }\r\n\r\n    async previewFile(file, ownerWidget) {\r\n        this.ownerWidget = ownerWidget;\r\n        if (_isString(file)) {\r\n            const response = await fetch(file);\r\n            const data = response.ok ? await response.blob() : '';\r\n            file = new File([data], file.split('/').pop(), {\r\n                type: response.headers.get('content-type') || 'application/octet-stream',\r\n            });\r\n        }\r\n        if (!file.name) return;\r\n        // Show thumnails\r\n        var desc = `${file.name}: ${file.size ? file.size / 1024 : file.size}KB`;\r\n        var createURL = file => {\r\n            try { return window.URL.createObjectURL(file); }\r\n            catch(e) { return '' };\r\n        };\r\n        var revokeURL = el => window.URL.revokeObjectURL(el.src);\r\n        if (/^image\\//.test(file.type)) {\r\n            var img = document.createElement('img');\r\n            img.onload = e => { revokeURL(img); };\r\n            img.src = createURL(file);\r\n            this.append(img);\r\n            return;\r\n        }\r\n        if (/^video\\//.test(file.type)) {\r\n            var media = document.createElement('video');\r\n            media.onloadstart/*canplay*/ = e => { revokeURL(media); media.play(); };\r\n            media.src = createURL(file);\r\n            media.muted = true;\r\n            this.append(media);\r\n            return;\r\n        }\r\n        const el = document.createElement('i');\r\n        el.classList.add('bi');\r\n        var type = 'file';\r\n        if (/^audio\\//.test(file.type)) {\r\n            type = 'music';\r\n        } else if (/msword|ms-word|wordprocessing/.test(file.type)) {\r\n            type = 'word';\r\n        } else if (/powerpoint|presentation/.test(file.type)) {\r\n            type = 'powerpoint';\r\n        } else if (/excel|spreadsheet/.test(file.type)) {\r\n            type = 'excel';\r\n        } else if (/^text\\//.test(file.type)) {\r\n            type = 'text';\r\n        } else if (/\\/pdf/.test(file.type)) {\r\n            type = 'pdf';\r\n        } else if (/\\/zip/.test(file.type)) {\r\n            type = 'zip';\r\n        }\r\n        el.classList.add('bi-file-' + type);\r\n        this.append(el);\r\n        return;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @Input Element\r\n * @extends _Root() -> __Input\r\n */\r\nexport const _Input = __Input => class extends _Root(__Input) {\r\n\r\n    json(data = null) {\r\n        if (arguments.length) {\r\n            this.namespace.input.value = data;\r\n            return;\r\n        }\r\n        return this.namespace.input.value;\r\n    }\r\n\r\n    render() {\r\n        if (this.namespace.input && (this.attrs?.type || this.attrs?.name)) {\r\n            $(this.namespace.input).attr(this.attrs);\r\n        }\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @Editor Element\r\n * @extends _Input() -> Roots._Editor() -> __Editor\r\n */\r\nexport const _Editor = __Editor => class extends _Input(Roots._Editor(__Editor || HTMLElement)) {\r\n};\r\n\r\n/**\r\n * @Text Element\r\n * @extends _Input() -> Roots._Text() -> __Text\r\n */\r\nexport const _Text = __Text => class extends _Input(Roots._Text(__Text || HTMLElement)) {\r\n};\r\n\r\n/**\r\n * @Number Element\r\n * @extends _Input() -> Roots._Number() -> __Number\r\n */\r\nexport const _Number = __Number => class extends _Input(Roots._Number(__Number || HTMLElement)) {\r\n};\r\n\r\n/**\r\n * @State Element\r\n * @extends _Input() -> Roots._State() -> __State\r\n */\r\nexport const _State = __State => class extends _Input(Roots._State(__State || HTMLElement)) {\r\n\r\n    json(data = null) {\r\n        if (arguments.length) {\r\n            this.namespace.input.checked = data === true || data + '' === this.namespace.input.value;\r\n            return;\r\n        }\r\n        return this.namespace.input.checked ? this.namespace.input.value : null;\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * @ItemScope Element\r\n * @extends __ItemScope\r\n */\r\nexport const _ItemScope = __ItemScope => class extends Roots._ItemScope(__ItemScope || HTMLElement) {\r\n\r\n    connectedCallback() {\r\n        if (super.connectedCallback) {\r\n            super.connectedCallback();\r\n        }\r\n        if (this.namespace.deleter) {\r\n            this.deleterAction = this.deleterAction || (() => {\r\n                if (this.ownerWidget) {\r\n                    this.ownerWidget.execNodeRemoval(this, (msg, done) => {\r\n                        if (confirm(msg)) {\r\n                            $(this).attr('data-deleting', true);\r\n                            done().then(res => {\r\n                                $(this).attr('data-deleting', false);\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            this.namespace.deleter.removeEventListener('click', this.deleterAction);\r\n            this.namespace.deleter.addEventListener('click', this.deleterAction);\r\n        }\r\n    }\r\n\r\n};\r\n", "\r\n/**\r\n * @imports\r\n */\r\nimport * as WidgetElements from './playui-element-mixins.js';\r\n\r\n/**\r\n * ---------------------------\r\n * @playui widgets\r\n * ---------------------------\r\n */\r\nconst { SubscriptElement } = WebQit.OOHTML;\r\n\r\nconst FormWidget = class extends WidgetElements._Collection(SubscriptElement(HTMLFormElement)) {};\r\ncustomElements.define('playui-form-widget', FormWidget, { extends: 'form' });\r\n\r\nconst CollectionWidget = class extends WidgetElements._Collection(SubscriptElement(HTMLFieldSetElement)) {};\r\nconst MultipleWidget = class extends WidgetElements._Multiple(SubscriptElement(HTMLFieldSetElement)) {};\r\nconst Multiple2Widget = class extends WidgetElements._Multiple2(SubscriptElement(HTMLFieldSetElement)) {};\r\nconst EnumWidget = class extends WidgetElements._Enum(SubscriptElement(HTMLDivElement)) {};\r\nconst Enum2Widget = class extends WidgetElements._Enum2(SubscriptElement(HTMLDivElement)) {};\r\nconst FileWidget = class extends WidgetElements._File(SubscriptElement(HTMLDivElement)) {};\r\nconst EditorWidget = class extends WidgetElements._Editor(SubscriptElement(HTMLDivElement)) {};\r\nconst TextWidget = class extends WidgetElements._Text(SubscriptElement(HTMLDivElement)) {};\r\nconst NumberWidget = class extends WidgetElements._Number(SubscriptElement(HTMLDivElement)) {};\r\nconst StateWidget = class extends WidgetElements._State(SubscriptElement(HTMLDivElement)) {};\r\ncustomElements.define('playui-collection-widget', CollectionWidget, { extends: 'fieldset' });\r\ncustomElements.define('playui-multiple-widget', MultipleWidget, { extends: 'fieldset' });\r\ncustomElements.define('playui-multiple2-widget', Multiple2Widget, { extends: 'fieldset' });\r\ncustomElements.define('playui-enum-widget', EnumWidget, { extends: 'div' });\r\ncustomElements.define('playui-enum2-widget', Enum2Widget, { extends: 'div' });\r\ncustomElements.define('playui-file-widget', FileWidget, { extends: 'div' });\r\ncustomElements.define('playui-editor-widget', EditorWidget, { extends: 'div' });\r\ncustomElements.define('playui-text-widget', TextWidget, { extends: 'div' });\r\ncustomElements.define('playui-number-widget', NumberWidget, { extends: 'div' });\r\ncustomElements.define('playui-state-widget', StateWidget, { extends: 'div' });\r\n\r\nconst CollectionItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Collection(SubscriptElement(HTMLFieldSetElement))) {};\r\nconst MultipleItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Multiple(SubscriptElement(HTMLFieldSetElement))) {};\r\nconst Multiple2ItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Multiple2(SubscriptElement(HTMLFieldSetElement))) {};\r\nconst EnumItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Enum(SubscriptElement(HTMLDivElement))) {};\r\nconst Enum2ItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Enum2(SubscriptElement(HTMLDivElement))) {};\r\nconst FileItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._File(SubscriptElement(HTMLDivElement))) {};\r\nconst EditorItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Editor(SubscriptElement(HTMLDivElement))) {};\r\nconst TextItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Text(SubscriptElement(HTMLDivElement))) {};\r\nconst NumberItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._Number(SubscriptElement(HTMLDivElement))) {};\r\nconst StateItemScopeWidget = class extends WidgetElements._ItemScope(WidgetElements._State(SubscriptElement(HTMLDivElement))) {};\r\ncustomElements.define('playui-collection-itemscope-widget', CollectionItemScopeWidget, { extends: 'fieldset' });\r\ncustomElements.define('playui-multiple-itemscope-widget', MultipleItemScopeWidget, { extends: 'fieldset' });\r\ncustomElements.define('playui-multiple2-itemscope-widget', Multiple2ItemScopeWidget, { extends: 'fieldset' });\r\ncustomElements.define('playui-enum-itemscope-widget', EnumItemScopeWidget, { extends: 'div' });\r\ncustomElements.define('playui-enum2-itemscope-widget', Enum2ItemScopeWidget, { extends: 'div' });\r\ncustomElements.define('playui-file-itemscope-widget', FileItemScopeWidget, { extends: 'div' });\r\ncustomElements.define('playui-editor-itemscope-widget', EditorItemScopeWidget, { extends: 'div' });\r\ncustomElements.define('playui-text-itemscope-widget', TextItemScopeWidget, { extends: 'div' });\r\ncustomElements.define('playui-number-itemscope-widget', NumberItemScopeWidget, { extends: 'div' });\r\ncustomElements.define('playui-state-itemscope-widget', StateItemScopeWidget, { extends: 'div' });\r\n\r\nconst FilePreview = class extends WidgetElements._FilePreview(HTMLDivElement) {};\r\ncustomElements.define('playui-file-preview', FilePreview, { extends: 'div' });\r\n"],
  "mappings": "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",
  "names": ["isObject_default", "val", "getType_default", "val", "internals", "obj", "namespaces", "itnls", "_ns", "_itnls", "isArray_default", "val", "isBoolean_default", "val", "isTypeFunction_default", "val", "isClass_default", "val", "isTypeFunction_default", "isNull_default", "val", "isUndefined_default", "val", "isTypeObject_default", "val", "isTypeFunction_default", "isEmpty_default", "val", "isNull_default", "isUndefined_default", "isTypeObject_default", "isFunction_default", "val", "isTypeFunction_default", "isNumber_default", "val", "isNumeric_default", "val", "isNumber_default", "isString_default", "val", "isTypeArray_default", "val", "isString_default", "isUndefined_default", "first_default", "arr", "amount", "count", "itm", "firsts", "last_default", "arr", "amount", "first_default", "pushUnique_default", "arr", "items", "itm", "getPrototypeChain_default", "obj", "until", "isArray_default", "prototypalChain", "getAllPropertyNames_default", "obj", "until", "keysAll", "getPrototypeChain_default", "pushUnique_default", "mergeCallback", "objs", "callback", "deepProps", "isReplace", "withSymbols", "depth", "obj1", "isNumeric_default", "obj2", "i", "isTypeObject_default", "isFunction_default", "getAllPropertyNames_default", "key", "valAtObj1", "valAtObj2", "isArray_default", "isObject_default", "each_default", "obj", "callback", "returnValue", "isTypeObject_default", "k", "i", "isNumeric_default", "merge_default", "objs", "mergeCallback", "k", "obj1", "obj2", "indexOfSet", "a", "b", "fromInex", "last", "cursors", "value", "i", "index", "cursorA", "cursorB", "_cursorB", "_cursors", "after", "a", "b", "fromInex", "last", "subsetIndex", "indexOfSet", "any_default", "arr", "callback", "prevTest", "itm", "i", "from_default", "val", "castObject", "isArray_default", "isObject_default", "isEmpty_default", "isTypeArray_default", "difference_default", "arr", "arr2", "callback", "isArray_default", "val1", "val2", "equals", "a", "b", "dotSafe", "prev", "value", "i", "intersect_default", "arr", "arr2", "callback", "isArray_default", "val1", "val2", "startsWith", "a", "b", "dotSafe", "prev", "value", "i", "unique_default", "arr", "distinct", "value", "index", "self", "paths2D", "paths", "pathsIs2D", "from_default", "multiple", "path", "DotSafePath", "v", "yes", "isArray_default", "pathsIsDynamic", "pathArray", "seg", "paths2DIsDynamic", "Firebase", "target", "fireable", "_fireable", "dfn", "fireableFilter", "paths2D", "fireableTags", "from_default", "dfnFilter", "dfnTags", "equals", "intersect_default", "type", "createIfNotExists", "namespace", "isTypeObject_default", "getType_default", "ImplementationClass", "internals", "Fireable", "target", "dfn", "Interceptor", "Fireable", "event", "next", "recieved", "intersect_default", "from_default", "copy_default", "obj", "filter", "withSymbols", "depth", "isNumeric_default", "isTypeObject_default", "mergeCallback", "key", "obj1", "obj2", "isFunction_default", "isArray_default", "Action", "target", "dfn", "each_default", "key", "value", "Interceptors", "Firebase", "dfn", "Interceptor", "action", "defaultHandler", "Action", "a", "next", "index", "_args", "interceptor", "args", "value", "target", "createIfNotExists", "namespace", "ImplementationClass", "unproxy_default", "target", "internals", "exec_default", "type", "target", "payload", "params", "isTypeObject_default", "unproxy_default", "interceptors", "defaultHandler", "_val", "Interceptors", "apply_default", "target", "thisArgument", "argumentsList", "params", "exec_default", "construct_default", "target", "argumentsList", "newTarget", "params", "exec_default", "toTitle_default", "str", "strict", "txt", "Event", "target", "cancellable", "promise", "rspns", "proms", "isEvent", "isObject_default", "isUndefined_default", "Observer", "Fireable", "target", "dfn", "paths2D", "pathsIs2D", "paths2DIsDynamic", "pathArray", "changes", "any_default", "delta", "diff", "isFunction_default", "evt", "Event", "matches", "observerPathArray", "i", "observerPathArray_Resolved", "_seg", "pathsIsDynamic", "equals", "startsWith", "isNumeric_default", "after", "changesObject", "isObject_default", "e", "Mutation", "target", "dfn", "each_default", "key", "value", "DotSafePath", "Observers", "Firebase", "target", "dfn", "Observer", "changes", "cancellable", "evt", "Event", "from_default", "delta", "Mutation", "last_default", "d", "observer", "createIfNotExists", "namespace", "ImplementationClass", "get_default", "target", "keys", "receiver", "params", "isTypeObject_default", "unproxy_default", "_keys", "from_default", "values", "key", "interceptors", "defaultGet", "_value", "internals", "Interceptors", "isArray_default", "observe_default", "target", "filter", "handler", "params", "unproxy_default", "isTypeObject_default", "getType_default", "isFunction_default", "existing", "observers", "Observers", "dfn", "isUserObject", "build", "link_default", "target", "field", "value", "event", "params", "observers", "observe_default", "changes", "eventObject", "Observers", "_changes", "delta", "d", "dfn", "each_default", "key", "Mutation", "c", "linkTag", "isObject_default", "_event", "merge_default", "build", "target", "paths", "subtree", "namespace", "isTypeObject_default", "observers", "Observers", "_paths2D", "paths2D", "rootLevelKeysToObserve", "path", "subLevelKeysToObserve", "p", "key", "value", "get_default", "link_default", "isUserObject", "unobserve_default", "target", "filter", "originalHandler", "params", "unproxy_default", "isTypeObject_default", "getType_default", "isFunction_default", "observers", "Observers", "unlink_default", "target", "field", "value", "event", "params", "unobserve_default", "linkTag", "observers", "isObject_default", "Observers", "_event", "merge_default", "has_default", "target", "name", "params", "exec_default", "setOrDefine_default", "define", "target", "payload", "params", "keysOrPayload", "value", "isTypeObject_default", "isObject_default", "unproxy_default", "interceptors", "Interceptors", "observers", "Observers", "handleSet", "key", "related", "detail", "type", "descriptor", "isUpdate", "oldValue", "has_default", "get_default", "e", "defaultSet", "_success", "internals", "eventObject", "unlink_default", "link_default", "isUserObject", "build", "keys", "events", "isArray_default", "isString_default", "isNumber_default", "from_default", "successfulEvents", "evt", "Event", "defineProperty_default", "target", "keysOrPayload", "value", "params", "setOrDefine_default", "deleteProperty_default", "target", "keys", "params", "isTypeObject_default", "unproxy_default", "_keys", "from_default", "events", "key", "oldValue", "has_default", "get_default", "e", "interceptors", "defaultDel", "_success", "internals", "Interceptors", "unlink_default", "successfulEvents", "observers", "evt", "Observers", "Event", "getOwnPropertyDescriptor_default", "target", "name", "params", "exec_default", "getPrototypeOf_default", "target", "params", "exec_default", "isExtensible_default", "target", "params", "exec_default", "ownKeys_default", "target", "params", "exec_default", "preventExtensions_default", "target", "params", "exec_default", "set_default", "target", "keysOrPayload", "value", "receiver", "params", "setOrDefine_default", "setPrototypeOf_default", "target", "prototype", "params", "exec_default", "accessorize_default", "target", "keys", "params", "isObject_default", "successFlags", "from_default", "key", "internals", "getDescriptorDeep", "descriptor", "proto", "originalOwnDescriptor", "altOriginalOwnDescriptor", "activeIsAltOriginalOwnDescriptor", "reactiveOwnDescriptor", "controlObject", "value", "get_default", "setting", "newValue", "operation", "set_default", "attemptRestore", "isArray_default", "unaccessorize_default", "target", "keys", "params", "isObject_default", "successFlags", "from_default", "key", "internals", "isArray_default", "proxy_default", "target", "params", "isTypeObject_default", "getType_default", "proxy", "thisArgument", "argumentsList", "apply_default", "newTarget", "construct_default", "propertyKey", "attributes", "defineProperty_default", "deleteProperty_default", "receiver", "val", "get_default", "isFunction_default", "isClass_default", "getOwnPropertyDescriptor_default", "getPrototypeOf_default", "has_default", "isExtensible_default", "ownKeys_default", "preventExtensions_default", "value", "set_default", "prototype", "setPrototypeOf_default", "internals", "intercept_default", "target", "trap", "params", "unproxy_default", "isTypeObject_default", "getType_default", "returnObj", "isOriginallyObj", "isObject_default", "isFunction_default", "interceptors", "Interceptors", "filter", "dfn", "existing", "unintercept_default", "target", "trap", "params", "unproxy_default", "isTypeObject_default", "getType_default", "interceptors", "Interceptors", "isFunction_default", "filter", "dfn", "closure_default", "callback", "subjects", "context", "target", "unproxy_default", "isTypeObject_default", "isArray_default", "copy_default", "result", "fireDiffs", "cntxt", "initialKeys", "currentKeys", "related", "changes", "unique_default", "key", "e", "unlink_default", "link_default", "c", "observers", "Observers", "src_default", "apply_default", "construct_default", "defineProperty_default", "deleteProperty_default", "get_default", "getOwnPropertyDescriptor_default", "getPrototypeOf_default", "has_default", "isExtensible_default", "ownKeys_default", "preventExtensions_default", "set_default", "setPrototypeOf_default", "accessorize_default", "unaccessorize_default", "proxy_default", "unproxy_default", "observe_default", "unobserve_default", "intercept_default", "unintercept_default", "closure_default", "build", "link_default", "unlink_default", "Observers", "Interceptors", "_isTextMediaType", "contentMediaType", "_isFileUpload", "schema", "schema_mixins_exports", "__export", "_Array", "_Boolean", "_Integer", "_Null", "_Num", "_Number", "_Object", "_ObjectOrArray", "_Schema", "_String", "_Schema", "__Schema", "jsonSchema", "name", "instance", "_ObjectOrArray", "__ObjectOrArray", "validity", "_Object", "__Object", "instanceHint", "propertyNameSchema", "propertyName", "propertySchema", "instanceProperties", "requiringProp", "intersect_default", "masterHint", "master", "prev", "pattern", "violation", "difference_default", "key", "_Array", "__Array", "itemIndex", "itemSchema", "unique_default", "passes", "item", "_String", "__String", "isString_default", "_Num", "__Num", "_Number", "__Number", "isNumeric_default", "_Integer", "__Integer", "_Boolean", "__Boolean", "isBoolean_default", "_Null", "__Null", "isNull_default", "_Root", "__Root", "node", "isFunction_default", "callback", "listeners", "method", "url", "options", "type", "from_default", "name", "pair", "schema", "ownerWidget", "src_default", "toTitle_default", "isUndefined_default", "alert", "value", "_ParentRoot", "__ParentRoot", "childSchema", "i", "_Collection", "__Collection", "mutations", "m", "renderString", "str", "obj", "match", "jsonSchema", "_Object", "propertyName", "propertySchema", "promptPropertyName", "propertyNameSchema", "_propertyName", "instanceHint", "data", "autoExtend", "isObject_default", "childEntry", "_data", "_alert", "_Multiple", "__Multiple", "_Array", "isEmpty_default", "itemSchema", "itemIndex", "confirm", "msg", "done", "isNumeric_default", "isTypeObject_default", "deleteUrl", "res", "isArray_default", "entry", "k", "_Multiple2", "__Multiple2", "entries", "widgetLineContentLengthLimit", "item", "intersect_default", "_Enum", "__Enum", "schemaName", "schema_mixins_exports", "runSchemaEnum", "enumValues", "enumNames", "runSchemaEnumFetch", "remoteFetch", "_entries", "enumData", "index", "clearByTag", "runSelect", "selected", "_Enum2", "__Enum2", "_File", "__File", "_isFileSchema", "_jsonSchema", "_isFileUpload", "_isTextMediaType", "schemaType", "$schema", "_String", "fileData", "key", "filesData", "_enumTag", "_entry", "isString_default", "files", "file", "uploads", "_Input", "__Input", "_Editor", "__Editor", "_Text", "__Text", "col", "_Number", "__Number", "_State", "__State", "_Boolean", "_ItemScope", "__ItemScope", "setItemIndex", "_Root", "__Root", "entries", "entry", "node", "callback", "method", "url", "options", "res", "e", "message", "type", "ret", "_ParentRoot", "__ParentRoot", "childSchema", "i", "childEntry", "key", "match", "item", "constructor", "_Collection", "__Collection", "_MultipleRoot", "__MultipleRoot", "_Multiple", "__Multiple", "_Multiple2", "__Multiple2", "_EnumRoot", "__EnumRoot", "enumEntry", "_enumEntry", "toTitle_default", "_Enum", "__Enum", "_Enum2", "__Enum2", "_File", "__File", "file", "src_default", "mutations", "dataTransfer", "isString_default", "eventName", "jsonSchema", "ownerWidget", "fileData", "clearByTag", "defaultInput", "intersect_default", "from_default", "_FilePreview", "__FilePreview", "msg", "done", "response", "data", "desc", "createURL", "revokeURL", "el", "img", "media", "_Input", "__Input", "_Editor", "__Editor", "_Text", "__Text", "_Number", "__Number", "_State", "__State", "_ItemScope", "__ItemScope", "SubscriptElement", "FormWidget", "_Collection", "CollectionWidget", "MultipleWidget", "_Multiple", "Multiple2Widget", "_Multiple2", "EnumWidget", "_Enum", "Enum2Widget", "_Enum2", "FileWidget", "_File", "EditorWidget", "_Editor", "TextWidget", "_Text", "NumberWidget", "_Number", "StateWidget", "_State", "CollectionItemScopeWidget", "_ItemScope", "MultipleItemScopeWidget", "Multiple2ItemScopeWidget", "EnumItemScopeWidget", "Enum2ItemScopeWidget", "FileItemScopeWidget", "EditorItemScopeWidget", "TextItemScopeWidget", "NumberItemScopeWidget", "StateItemScopeWidget", "FilePreview", "_FilePreview"]
}
